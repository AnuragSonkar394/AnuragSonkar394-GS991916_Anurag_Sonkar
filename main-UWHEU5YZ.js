var MM=Object.defineProperty,RM=Object.defineProperties;var FM=Object.getOwnPropertyDescriptors;var pl=Object.getOwnPropertySymbols;var oC=Object.prototype.hasOwnProperty,aC=Object.prototype.propertyIsEnumerable;var rC=(e,t,i)=>t in e?MM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,D=(e,t)=>{for(var i in t||={})oC.call(t,i)&&rC(e,i,t[i]);if(pl)for(var i of pl(t))aC.call(t,i)&&rC(e,i,t[i]);return e},_=(e,t)=>RM(e,FM(t));var lC=(e,t)=>{var i={};for(var n in e)oC.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&pl)for(var n of pl(e))t.indexOf(n)<0&&aC.call(e,n)&&(i[n]=e[n]);return i};var $i=(e,t,i)=>new Promise((n,s)=>{var r=l=>{try{a(i.next(l))}catch(c){s(c)}},o=l=>{try{a(i.throw(l))}catch(c){s(c)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(r,o);a((i=i.apply(e,t)).next())});var cC=null;var qd=1,Kd=Symbol("SIGNAL");function ue(e){let t=cC;return cC=e,t}var uC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function IM(e){if(!(Zd(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===qd)){if(!e.producerMustRecompute(e)&&!Yd(e)){e.dirty=!1,e.lastCleanEpoch=qd;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=qd}}function dC(e){return e&&(e.nextProducerIndex=0),ue(e)}function hC(e,t){if(ue(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Zd(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)Qd(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Yd(e){fl(e);for(let t=0;t<e.producerNode.length;t++){let i=e.producerNode[t],n=e.producerLastReadVersion[t];if(n!==i.version||(IM(i),n!==i.version))return!0}return!1}function gC(e){if(fl(e),Zd(e))for(let t=0;t<e.producerNode.length;t++)Qd(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Qd(e,t){if(PM(e),fl(e),e.liveConsumerNode.length===1)for(let n=0;n<e.producerNode.length;n++)Qd(e.producerNode[n],e.producerIndexOfThis[n]);let i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let n=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];fl(s),s.producerIndexOfThis[n]=t}}function Zd(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function fl(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function PM(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function AM(){throw new Error}var TM=AM;function pC(e){TM=e}function $(e){return typeof e=="function"}function er(e){let i=e(n=>{Error.call(n),n.stack=new Error().stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var ml=er(e=>function(i){e(this),this.message=i?`${i.length} errors occurred during unsubscription:
${i.map((n,s)=>`${s+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=i});function yo(e,t){if(e){let i=e.indexOf(t);0<=i&&e.splice(i,1)}}var Ne=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(let r of i)r.remove(this);else i.remove(this);let{initialTeardown:n}=this;if($(n))try{n()}catch(r){t=r instanceof ml?r.errors:[r]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let r of s)try{fC(r)}catch(o){t=t??[],o instanceof ml?t=[...t,...o.errors]:t.push(o)}}if(t)throw new ml(t)}}add(t){var i;if(t&&t!==this)if(this.closed)fC(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(t)}}_hasParent(t){let{_parentage:i}=this;return i===t||Array.isArray(i)&&i.includes(t)}_addParent(t){let{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(t),i):i?[i,t]:t}_removeParent(t){let{_parentage:i}=this;i===t?this._parentage=null:Array.isArray(i)&&yo(i,t)}remove(t){let{_finalizers:i}=this;i&&yo(i,t),t instanceof e&&t._removeParent(this)}};Ne.EMPTY=(()=>{let e=new Ne;return e.closed=!0,e})();var Xd=Ne.EMPTY;function vl(e){return e instanceof Ne||e&&"closed"in e&&$(e.remove)&&$(e.add)&&$(e.unsubscribe)}function fC(e){$(e)?e():e.unsubscribe()}var ui={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var tr={setTimeout(e,t,...i){let{delegate:n}=tr;return n?.setTimeout?n.setTimeout(e,t,...i):setTimeout(e,t,...i)},clearTimeout(e){let{delegate:t}=tr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Cl(e){tr.setTimeout(()=>{let{onUnhandledError:t}=ui;if(t)t(e);else throw e})}function bo(){}var mC=Jd("C",void 0,void 0);function vC(e){return Jd("E",void 0,e)}function CC(e){return Jd("N",e,void 0)}function Jd(e,t,i){return{kind:e,value:t,error:i}}var us=null;function ir(e){if(ui.useDeprecatedSynchronousErrorHandling){let t=!us;if(t&&(us={errorThrown:!1,error:null}),e(),t){let{errorThrown:i,error:n}=us;if(us=null,i)throw n}}else e()}function wC(e){ui.useDeprecatedSynchronousErrorHandling&&us&&(us.errorThrown=!0,us.error=e)}var ds=class extends Ne{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,vl(t)&&t.add(this)):this.destination=LM}static create(t,i,n){return new nr(t,i,n)}next(t){this.isStopped?th(CC(t),this):this._next(t)}error(t){this.isStopped?th(vC(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?th(mC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kM=Function.prototype.bind;function eh(e,t){return kM.call(e,t)}var ih=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:i}=this;if(i.next)try{i.next(t)}catch(n){wl(n)}}error(t){let{partialObserver:i}=this;if(i.error)try{i.error(t)}catch(n){wl(n)}else wl(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(i){wl(i)}}},nr=class extends ds{constructor(t,i,n){super();let s;if($(t)||!t)s={next:t??void 0,error:i??void 0,complete:n??void 0};else{let r;this&&ui.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&eh(t.next,r),error:t.error&&eh(t.error,r),complete:t.complete&&eh(t.complete,r)}):s=t}this.destination=new ih(s)}};function wl(e){ui.useDeprecatedSynchronousErrorHandling?wC(e):Cl(e)}function _M(e){throw e}function th(e,t){let{onStoppedNotification:i}=ui;i&&tr.setTimeout(()=>i(e,t))}var LM={closed:!0,next:bo,error:_M,complete:bo};var sr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(e){return e}function nh(...e){return sh(e)}function sh(e){return e.length===0?Nt:e.length===1?e[0]:function(i){return e.reduce((n,s)=>s(n),i)}}var de=(()=>{class e{constructor(i){i&&(this._subscribe=i)}lift(i){let n=new e;return n.source=this,n.operator=i,n}subscribe(i,n,s){let r=NM(i)?i:new nr(i,n,s);return ir(()=>{let{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(i){try{return this._subscribe(i)}catch(n){i.error(n)}}forEach(i,n){return n=yC(n),new n((s,r)=>{let o=new nr({next:a=>{try{i(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(i){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(i)}[sr](){return this}pipe(...i){return sh(i)(this)}toPromise(i){return i=yC(i),new i((n,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>n(r))})}}return e.create=t=>new e(t),e})();function yC(e){var t;return(t=e??ui.Promise)!==null&&t!==void 0?t:Promise}function OM(e){return e&&$(e.next)&&$(e.error)&&$(e.complete)}function NM(e){return e&&e instanceof ds||OM(e)&&vl(e)}function rh(e){return $(e?.lift)}function le(e){return t=>{if(rh(t))return t.lift(function(i){try{return e(i,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(e,t,i,n,s){return new oh(e,t,i,n,s)}var oh=class extends ds{constructor(t,i,n,s,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=i?function(a){try{i(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:i}=this;super.unsubscribe(),!i&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function rr(){return le((e,t)=>{let i=null;e._refCount++;let n=se(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){i=null;return}let s=e._connection,r=i;i=null,s&&(!r||s===r)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(n),n.closed||(i=e.connect())})}var or=class extends de{constructor(t,i){super(),this.source=t,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,rh(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ne;let i=this.getSubject();t.add(this.source.subscribe(se(i,void 0,()=>{this._teardown(),i.complete()},n=>{this._teardown(),i.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ne.EMPTY)}return t}refCount(){return rr()(this)}};var bC=er(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class e extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){let n=new yl(this,this);return n.operator=i,n}_throwIfClosed(){if(this.closed)throw new bC}next(i){ir(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(i)}})}error(i){ir(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;let{observers:n}=this;for(;n.length;)n.shift().error(i)}})}complete(){ir(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){let{hasError:n,isStopped:s,observers:r}=this;return n||s?Xd:(this.currentObservers=null,r.push(i),new Ne(()=>{this.currentObservers=null,yo(r,i)}))}_checkFinalizedStatuses(i){let{hasError:n,thrownError:s,isStopped:r}=this;n?i.error(s):r&&i.complete()}asObservable(){let i=new de;return i.source=this,i}}return e.create=(t,i)=>new yl(t,i),e})(),yl=class extends it{constructor(t,i){super(),this.destination=t,this.source=i}next(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.next)===null||n===void 0||n.call(i,t)}error(t){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.error)===null||n===void 0||n.call(i,t)}complete(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0||i.call(t)}_subscribe(t){var i,n;return(n=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&n!==void 0?n:Xd}};var qe=class extends it{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let i=super._subscribe(t);return!i.closed&&t.next(this._value),i}getValue(){let{hasError:t,thrownError:i,_value:n}=this;if(t)throw i;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}};var Vt=new de(e=>e.complete());function SC(e){return e&&$(e.schedule)}function xC(e){return e[e.length-1]}function bl(e){return $(xC(e))?e.pop():void 0}function Sn(e){return SC(xC(e))?e.pop():void 0}function EC(e,t,i,n){function s(r){return r instanceof i?r:new i(function(o){o(r)})}return new(i||(i=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((n=n.apply(e,t||[])).next())})}function DC(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hs(e){return this instanceof hs?(this.v=e,this):new hs(e)}function MC(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(e,t||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(p){return Promise.resolve(p).then(g,d)}}function a(g,p){n[g]&&(s[g]=function(f){return new Promise(function(m,v){r.push([g,f,m,v])>1||l(g,f)})},p&&(s[g]=p(s[g])))}function l(g,p){try{c(n[g](p))}catch(f){h(r[0][3],f)}}function c(g){g.value instanceof hs?Promise.resolve(g.value.v).then(u,d):h(r[0][2],g)}function u(g){l("next",g)}function d(g){l("throw",g)}function h(g,p){g(p),r.shift(),r.length&&l(r[0][0],r[0][1])}}function RC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof DC=="function"?DC(e):e[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(r){i[r]=e[r]&&function(o){return new Promise(function(a,l){o=e[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}var Sl=e=>e&&typeof e.length=="number"&&typeof e!="function";function xl(e){return $(e?.then)}function Dl(e){return $(e[sr])}function El(e){return Symbol.asyncIterator&&$(e?.[Symbol.asyncIterator])}function Ml(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rl=VM();function Fl(e){return $(e?.[Rl])}function Il(e){return MC(this,arguments,function*(){let i=e.getReader();try{for(;;){let{value:n,done:s}=yield hs(i.read());if(s)return yield hs(void 0);yield yield hs(n)}}finally{i.releaseLock()}})}function Pl(e){return $(e?.getReader)}function _e(e){if(e instanceof de)return e;if(e!=null){if(Dl(e))return HM(e);if(Sl(e))return BM(e);if(xl(e))return GM(e);if(El(e))return FC(e);if(Fl(e))return zM(e);if(Pl(e))return WM(e)}throw Ml(e)}function HM(e){return new de(t=>{let i=e[sr]();if($(i.subscribe))return i.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BM(e){return new de(t=>{for(let i=0;i<e.length&&!t.closed;i++)t.next(e[i]);t.complete()})}function GM(e){return new de(t=>{e.then(i=>{t.closed||(t.next(i),t.complete())},i=>t.error(i)).then(null,Cl)})}function zM(e){return new de(t=>{for(let i of e)if(t.next(i),t.closed)return;t.complete()})}function FC(e){return new de(t=>{jM(e,t).catch(i=>t.error(i))})}function WM(e){return FC(Il(e))}function jM(e,t){var i,n,s,r;return EC(this,void 0,void 0,function*(){try{for(i=RC(e);n=yield i.next(),!n.done;){let o=n.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{n&&!n.done&&(r=i.return)&&(yield r.call(i))}finally{if(s)throw s.error}}t.complete()})}function xt(e,t,i,n=0,s=!1){let r=t.schedule(function(){i(),s?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(r),!s)return r}function Al(e,t=0){return le((i,n)=>{i.subscribe(se(n,s=>xt(n,e,()=>n.next(s),t),()=>xt(n,e,()=>n.complete(),t),s=>xt(n,e,()=>n.error(s),t)))})}function Tl(e,t=0){return le((i,n)=>{n.add(e.schedule(()=>i.subscribe(n),t))})}function IC(e,t){return _e(e).pipe(Tl(t),Al(t))}function PC(e,t){return _e(e).pipe(Tl(t),Al(t))}function AC(e,t){return new de(i=>{let n=0;return t.schedule(function(){n===e.length?i.complete():(i.next(e[n++]),i.closed||this.schedule())})})}function TC(e,t){return new de(i=>{let n;return xt(i,t,()=>{n=e[Rl](),xt(i,t,()=>{let s,r;try{({value:s,done:r}=n.next())}catch(o){i.error(o);return}r?i.complete():i.next(s)},0,!0)}),()=>$(n?.return)&&n.return()})}function kl(e,t){if(!e)throw new Error("Iterable cannot be null");return new de(i=>{xt(i,t,()=>{let n=e[Symbol.asyncIterator]();xt(i,t,()=>{n.next().then(s=>{s.done?i.complete():i.next(s.value)})},0,!0)})})}function kC(e,t){return kl(Il(e),t)}function _C(e,t){if(e!=null){if(Dl(e))return IC(e,t);if(Sl(e))return AC(e,t);if(xl(e))return PC(e,t);if(El(e))return kl(e,t);if(Fl(e))return TC(e,t);if(Pl(e))return kC(e,t)}throw Ml(e)}function Re(e,t){return t?_C(e,t):_e(e)}function W(...e){let t=Sn(e);return Re(e,t)}function ar(e,t){let i=$(e)?e:()=>e,n=s=>s.error(i());return new de(t?s=>t.schedule(n,0,s):n)}function ah(e){return!!e&&(e instanceof de||$(e.lift)&&$(e.subscribe))}var qi=er(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function re(e,t){return le((i,n)=>{let s=0;i.subscribe(se(n,r=>{n.next(e.call(t,r,s++))}))})}var{isArray:UM}=Array;function $M(e,t){return UM(t)?e(...t):e(t)}function _l(e){return re(t=>$M(e,t))}var{isArray:qM}=Array,{getPrototypeOf:KM,prototype:YM,keys:QM}=Object;function Ll(e){if(e.length===1){let t=e[0];if(qM(t))return{args:t,keys:null};if(ZM(t)){let i=QM(t);return{args:i.map(n=>t[n]),keys:i}}}return{args:e,keys:null}}function ZM(e){return e&&typeof e=="object"&&KM(e)===YM}function Ol(e,t){return e.reduce((i,n,s)=>(i[n]=t[s],i),{})}function So(...e){let t=Sn(e),i=bl(e),{args:n,keys:s}=Ll(e);if(n.length===0)return Re([],t);let r=new de(XM(n,t,s?o=>Ol(s,o):Nt));return i?r.pipe(_l(i)):r}function XM(e,t,i=Nt){return n=>{LC(t,()=>{let{length:s}=e,r=new Array(s),o=s,a=s;for(let l=0;l<s;l++)LC(t,()=>{let c=Re(e[l],t),u=!1;c.subscribe(se(n,d=>{r[l]=d,u||(u=!0,a--),a||n.next(i(r.slice()))},()=>{--o||n.complete()}))},n)},n)}}function LC(e,t,i){e?xt(i,e,t):t()}function OC(e,t,i,n,s,r,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},g=f=>c<n?p(f):l.push(f),p=f=>{r&&t.next(f),c++;let m=!1;_e(i(f,u++)).subscribe(se(t,v=>{s?.(v),r?g(v):t.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<n;){let v=l.shift();o?xt(t,o,()=>p(v)):p(v)}h()}catch(v){t.error(v)}}))};return e.subscribe(se(t,g,()=>{d=!0,h()})),()=>{a?.()}}function Le(e,t,i=1/0){return $(t)?Le((n,s)=>re((r,o)=>t(n,r,s,o))(_e(e(n,s))),i):(typeof t=="number"&&(i=t),le((n,s)=>OC(n,s,e,i)))}function xn(e=1/0){return Le(Nt,e)}function NC(){return xn(1)}function lr(...e){return NC()(Re(e,Sn(e)))}function Nl(e){return new de(t=>{_e(e()).subscribe(t)})}function lh(...e){let t=bl(e),{args:i,keys:n}=Ll(e),s=new de(r=>{let{length:o}=i;if(!o){r.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;_e(i[u]).subscribe(se(r,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||r.next(n?Ol(n,a):a),r.complete())}))}});return t?s.pipe(_l(t)):s}function $t(e,t){return le((i,n)=>{let s=0;i.subscribe(se(n,r=>e.call(t,r,s++)&&n.next(r)))})}function Dn(e){return le((t,i)=>{let n=null,s=!1,r;n=t.subscribe(se(i,void 0,void 0,o=>{r=_e(e(o,Dn(e)(t))),n?(n.unsubscribe(),n=null,r.subscribe(i)):s=!0})),s&&(n.unsubscribe(),n=null,r.subscribe(i))})}function VC(e,t,i,n,s){return(r,o)=>{let a=i,l=t,c=0;r.subscribe(se(o,u=>{let d=c++;l=a?e(l,u,d):(a=!0,u),n&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function gs(e,t){return $(t)?Le(e,t,1):Le(e,1)}function En(e){return le((t,i)=>{let n=!1;t.subscribe(se(i,s=>{n=!0,i.next(s)},()=>{n||i.next(e),i.complete()}))})}function Ki(e){return e<=0?()=>Vt:le((t,i)=>{let n=0;t.subscribe(se(i,s=>{++n<=e&&(i.next(s),e<=n&&i.complete())}))})}function ch(e){return re(()=>e)}function Vl(e=JM){return le((t,i)=>{let n=!1;t.subscribe(se(i,s=>{n=!0,i.next(s)},()=>n?i.complete():i.error(e())))})}function JM(){return new qi}function xo(e){return le((t,i)=>{try{t.subscribe(i)}finally{i.add(e)}})}function Di(e,t){let i=arguments.length>=2;return n=>n.pipe(e?$t((s,r)=>e(s,r,n)):Nt,Ki(1),i?En(t):Vl(()=>new qi))}function cr(e){return e<=0?()=>Vt:le((t,i)=>{let n=[];t.subscribe(se(i,s=>{n.push(s),e<n.length&&n.shift()},()=>{for(let s of n)i.next(s);i.complete()},void 0,()=>{n=null}))})}function uh(e,t){let i=arguments.length>=2;return n=>n.pipe(e?$t((s,r)=>e(s,r,n)):Nt,cr(1),i?En(t):Vl(()=>new qi))}function dh(e,t){return le(VC(e,t,arguments.length>=2,!0))}function hh(...e){let t=Sn(e);return le((i,n)=>{(t?lr(e,i,t):lr(e,i)).subscribe(n)})}function qt(e,t){return le((i,n)=>{let s=null,r=0,o=!1,a=()=>o&&!s&&n.complete();i.subscribe(se(n,l=>{s?.unsubscribe();let c=0,u=r++;_e(e(l,u)).subscribe(s=se(n,d=>n.next(t?t(l,d,u,c++):d),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function gh(e){return le((t,i)=>{_e(e).subscribe(se(i,()=>i.complete(),bo)),!i.closed&&t.subscribe(i)})}function Ke(e,t,i){let n=$(e)||t||i?{next:e,error:t,complete:i}:e;return n?le((s,r)=>{var o;(o=n.subscribe)===null||o===void 0||o.call(n);let a=!0;s.subscribe(se(r,l=>{var c;(c=n.next)===null||c===void 0||c.call(n,l),r.next(l)},()=>{var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),r.complete()},l=>{var c;a=!1,(c=n.error)===null||c===void 0||c.call(n,l),r.error(l)},()=>{var l,c;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(c=n.finalize)===null||c===void 0||c.call(n)}))}):Nt}var Sw="https://g.co/ng/security#xss",L=class extends Error{constructor(t,i){super(vg(t,i)),this.code=t}};function vg(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Oo(e){return{toString:e}.toString()}var Hl="__parameters__";function eR(e){return function(...i){if(e){let n=e(...i);for(let s in n)this[s]=n[s]}}}function xw(e,t,i){return Oo(()=>{let n=eR(t);function s(...r){if(this instanceof s)return n.apply(this,r),this;let o=new s(...r);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Hl)?l[Hl]:Object.defineProperty(l,Hl,{value:[]})[Hl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return i&&(s.prototype=Object.create(i.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}var dt=globalThis;function ve(e){for(let t in e)if(e[t]===ve)return t;throw Error("Could not find renamed property on target object.")}function tR(e,t){for(let i in t)t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i])}function ht(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(ht).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i===-1?t:t.substring(0,i)}function HC(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var iR=ve({__forward_ref__:ve});function Tn(e){return e.__forward_ref__=Tn,e.toString=function(){return ht(this())},e}function ut(e){return Dw(e)?e():e}function Dw(e){return typeof e=="function"&&e.hasOwnProperty(iR)&&e.__forward_ref__===Tn}function O(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Be(e){return{providers:e.providers||[],imports:e.imports||[]}}function Cc(e){return BC(e,Mw)||BC(e,Rw)}function Ew(e){return Cc(e)!==null}function BC(e,t){return e.hasOwnProperty(t)?e[t]:null}function nR(e){let t=e&&(e[Mw]||e[Rw]);return t||null}function GC(e){return e&&(e.hasOwnProperty(zC)||e.hasOwnProperty(sR))?e[zC]:null}var Mw=ve({\u0275prov:ve}),zC=ve({\u0275inj:ve}),Rw=ve({ngInjectableDef:ve}),sR=ve({ngInjectorDef:ve}),G=class{constructor(t,i){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof i=="number"?this.__NG_ELEMENT_ID__=i:i!==void 0&&(this.\u0275prov=O({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fw(e){return e&&!!e.\u0275providers}var rR=ve({\u0275cmp:ve}),oR=ve({\u0275dir:ve}),aR=ve({\u0275pipe:ve}),lR=ve({\u0275mod:ve}),Ql=ve({\u0275fac:ve}),Do=ve({__NG_ELEMENT_ID__:ve}),WC=ve({__NG_ENV_ID__:ve});function Cg(e){return typeof e=="string"?e:e==null?"":String(e)}function cR(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():Cg(e)}function uR(e,t){let i=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new L(-200,e)}function wg(e,t){throw new L(-201,!1)}var Z=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Z||{}),Fh;function Iw(){return Fh}function Kt(e){let t=Fh;return Fh=e,t}function Pw(e,t,i){let n=Cc(e);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(i&Z.Optional)return null;if(t!==void 0)return t;wg(e,"Injector")}var dR={},Mo=dR,Ih="__NG_DI_FLAG__",Zl="ngTempTokenPath",hR="ngTokenPath",gR=/\n/gm,pR="\u0275",jC="__source",pr;function fR(){return pr}function Mn(e){let t=pr;return pr=e,t}function mR(e,t=Z.Default){if(pr===void 0)throw new L(-203,!1);return pr===null?Pw(e,void 0,t):pr.get(e,t&Z.Optional?null:void 0,t)}function H(e,t=Z.Default){return(Iw()||mR)(ut(e),t)}function k(e,t=Z.Default){return H(e,wc(t))}function wc(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ph(e){let t=[];for(let i=0;i<e.length;i++){let n=ut(e[i]);if(Array.isArray(n)){if(n.length===0)throw new L(900,!1);let s,r=Z.Default;for(let o=0;o<n.length;o++){let a=n[o],l=vR(a);typeof l=="number"?l===-1?s=a.token:r|=l:s=a}t.push(H(s,r))}else t.push(H(n))}return t}function Aw(e,t){return e[Ih]=t,e.prototype[Ih]=t,e}function vR(e){return e[Ih]}function CR(e,t,i,n){let s=e[Zl];throw t[jC]&&s.unshift(t[jC]),e.message=wR(`
`+e.message,s,i,n),e[hR]=s,e[Zl]=null,e}function wR(e,t,i,n=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==pR?e.slice(2):e;let s=ht(t);if(Array.isArray(t))s=t.map(ht).join(" -> ");else if(typeof t=="object"){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+(typeof a=="string"?JSON.stringify(a):ht(a)))}s=`{${r.join(", ")}}`}return`${i}${n?"("+n+")":""}[${s}]: ${e.replace(gR,`
  `)}`}var yg=Aw(xw("Optional"),8);var Tw=Aw(xw("SkipSelf"),4);function mr(e,t){let i=e.hasOwnProperty(Ql);return i?e[Ql]:null}function yR(e,t,i){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){let s=e[n],r=t[n];if(i&&(s=i(s),r=i(r)),r!==s)return!1}return!0}function bR(e){return e.flat(Number.POSITIVE_INFINITY)}function bg(e,t){e.forEach(i=>Array.isArray(i)?bg(i,t):t(i))}function kw(e,t,i){t>=e.length?e.push(i):e.splice(t,0,i)}function Xl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function SR(e,t,i,n){let s=e.length;if(s==t)e.push(i,n);else if(s===1)e.push(n,e[0]),e[0]=i;else{for(s--,e.push(e[s-1],e[s]);s>t;){let r=s-2;e[s]=e[r],s--}e[t]=i,e[t+1]=n}}function xR(e,t,i){let n=No(e,t);return n>=0?e[n|1]=i:(n=~n,SR(e,n,t,i)),n}function ph(e,t){let i=No(e,t);if(i>=0)return e[i|1]}function No(e,t){return DR(e,t,1)}function DR(e,t,i){let n=0,s=e.length>>i;for(;s!==n;){let r=n+(s-n>>1),o=e[r<<i];if(t===o)return r<<i;o>t?s=r:n=r+1}return~(s<<i)}var vr={},Yt=[],Cr=new G(""),_w=new G("",-1),Lw=new G(""),Jl=class{get(t,i=Mo){if(i===Mo){let n=new Error(`NullInjectorError: No provider for ${ht(t)}!`);throw n.name="NullInjectorError",n}return i}},Ow=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Ow||{}),Ri=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ri||{}),nt=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(nt||{});function ER(e,t,i){let n=e.length;for(;;){let s=e.indexOf(t,i);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let r=t.length;if(s+r===n||e.charCodeAt(s+r)<=32)return s}i=s+1}}function Ah(e,t,i){let n=0;for(;n<i.length;){let s=i[n];if(typeof s=="number"){if(s!==0)break;n++;let r=i[n++],o=i[n++],a=i[n++];e.setAttribute(t,o,a,r)}else{let r=s,o=i[++n];MR(r)?e.setProperty(t,r,o):e.setAttribute(t,r,o),n++}}return n}function Nw(e){return e===3||e===4||e===6}function MR(e){return e.charCodeAt(0)===64}function Ro(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let i=-1;for(let n=0;n<t.length;n++){let s=t[n];typeof s=="number"?i=s:i===0||(i===-1||i===2?UC(e,i,s,null,t[++n]):UC(e,i,s,null,null))}}return e}function UC(e,t,i,n,s){let r=0,o=e.length;if(t===-1)o=-1;else for(;r<e.length;){let a=e[r++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=r-1;break}}}for(;r<e.length;){let a=e[r];if(typeof a=="number")break;if(a===i){if(n===null){s!==null&&(e[r+1]=s);return}else if(n===e[r+1]){e[r+2]=s;return}}r++,n!==null&&r++,s!==null&&r++}o!==-1&&(e.splice(o,0,t),r=o+1),e.splice(r++,0,i),n!==null&&e.splice(r++,0,n),s!==null&&e.splice(r++,0,s)}var Vw="ng-template";function RR(e,t,i,n){let s=0;if(n){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&ER(t[s+1].toLowerCase(),i,0)!==-1)return!0}else if(Sg(e))return!1;if(s=t.indexOf(1,s),s>-1){let r;for(;++s<t.length&&typeof(r=t[s])=="string";)if(r.toLowerCase()===i)return!0}return!1}function Sg(e){return e.type===4&&e.value!==Vw}function FR(e,t,i){let n=e.type===4&&!i?Vw:e.value;return t===n}function IR(e,t,i){let n=4,s=e.attrs,r=s!==null?TR(s):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!di(n)&&!di(l))return!1;if(o&&di(l))continue;o=!1,n=l|n&1;continue}if(!o)if(n&4){if(n=2|n&1,l!==""&&!FR(e,l,i)||l===""&&t.length===1){if(di(n))return!1;o=!0}}else if(n&8){if(s===null||!RR(e,s,l,i)){if(di(n))return!1;o=!0}}else{let c=t[++a],u=PR(l,s,Sg(e),i);if(u===-1){if(di(n))return!1;o=!0;continue}if(c!==""){let d;if(u>r?d="":d=s[u+1].toLowerCase(),n&2&&c!==d){if(di(n))return!1;o=!0}}}}return di(n)||o}function di(e){return(e&1)===0}function PR(e,t,i,n){if(t===null)return-1;let s=0;if(n||!i){let r=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)r=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=r?1:2}return-1}else return kR(t,e)}function AR(e,t,i=!1){for(let n=0;n<t.length;n++)if(IR(e,t[n],i))return!0;return!1}function TR(e){for(let t=0;t<e.length;t++){let i=e[t];if(Nw(i))return t}return e.length}function kR(e,t){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){let n=e[i];if(typeof n=="number")return-1;if(n===t)return i;i++}return-1}function $C(e,t){return e?":not("+t.trim()+")":t}function _R(e){let t=e[0],i=1,n=2,s="",r=!1;for(;i<e.length;){let o=e[i];if(typeof o=="string")if(n&2){let a=e[++i];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else n&8?s+="."+o:n&4&&(s+=" "+o);else s!==""&&!di(o)&&(t+=$C(r,s),s=""),n=o,r=r||!di(n);i++}return s!==""&&(t+=$C(r,s)),t}function LR(e){return e.map(_R).join(",")}function OR(e){let t=[],i=[],n=1,s=2;for(;n<e.length;){let r=e[n];if(typeof r=="string")s===2?r!==""&&t.push(r,e[++n]):s===8&&i.push(r);else{if(!di(s))break;s=r}n++}return{attrs:t,classes:i}}function Ge(e){return Oo(()=>{let t=Ww(e),i=_(D({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Ow.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ri.Emulated,styles:e.styles||Yt,_:null,schemas:e.schemas||null,tView:null,id:""});jw(i);let n=e.dependencies;return i.directiveDefs=KC(n,!1),i.pipeDefs=KC(n,!0),i.id=HR(i),i})}function NR(e){return Fn(e)||Hw(e)}function VR(e){return e!==null}function ze(e){return Oo(()=>({type:e.type,bootstrap:e.bootstrap||Yt,declarations:e.declarations||Yt,imports:e.imports||Yt,exports:e.exports||Yt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function qC(e,t){if(e==null)return vr;let i={};for(let n in e)if(e.hasOwnProperty(n)){let s=e[n],r,o,a=nt.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),t?(i[r]=a!==nt.None?[n,a]:n,t[r]=o):i[r]=n}return i}function We(e){return Oo(()=>{let t=Ww(e);return jw(t),t})}function Fn(e){return e[rR]||null}function Hw(e){return e[oR]||null}function Bw(e){return e[aR]||null}function Gw(e){let t=Fn(e)||Hw(e)||Bw(e);return t!==null?t.standalone:!1}function zw(e,t){let i=e[lR]||null;if(!i&&t===!0)throw new Error(`Type ${ht(e)} does not have '\u0275mod' property.`);return i}function Ww(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||vr,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Yt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qC(e.inputs,t),outputs:qC(e.outputs),debugInfo:null}}function jw(e){e.features?.forEach(t=>t(e))}function KC(e,t){if(!e)return null;let i=t?Bw:NR;return()=>(typeof e=="function"?e():e).map(n=>i(n)).filter(VR)}function HR(e){let t=0,i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let s of i)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function BR(...e){return{\u0275providers:Uw(!0,e),\u0275fromNgModule:!0}}function Uw(e,...t){let i=[],n=new Set,s,r=o=>{i.push(o)};return bg(t,o=>{let a=o;Th(a,r,[],n)&&(s||=[],s.push(a))}),s!==void 0&&$w(s,r),i}function $w(e,t){for(let i=0;i<e.length;i++){let{ngModule:n,providers:s}=e[i];xg(s,r=>{t(r,n)})}}function Th(e,t,i,n){if(e=ut(e),!e)return!1;let s=null,r=GC(e),o=!r&&Fn(e);if(!r&&!o){let l=e.ngModule;if(r=GC(l),r)s=l;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=n.has(s);if(o){if(a)return!1;if(n.add(s),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Th(c,t,i,n)}}else if(r){if(r.imports!=null&&!a){n.add(s);let c;try{bg(r.imports,u=>{Th(u,t,i,n)&&(c||=[],c.push(u))})}finally{}c!==void 0&&$w(c,t)}if(!a){let c=mr(s)||(()=>new s);t({provide:s,useFactory:c,deps:Yt},s),t({provide:Lw,useValue:s,multi:!0},s),t({provide:Cr,useValue:()=>H(s),multi:!0},s)}let l=r.providers;if(l!=null&&!a){let c=e;xg(l,u=>{t(u,c)})}}else return!1;return s!==e&&e.providers!==void 0}function xg(e,t){for(let i of e)Fw(i)&&(i=i.\u0275providers),Array.isArray(i)?xg(i,t):t(i)}var GR=ve({provide:String,useValue:ve});function qw(e){return e!==null&&typeof e=="object"&&GR in e}function zR(e){return!!(e&&e.useExisting)}function WR(e){return!!(e&&e.useFactory)}function wr(e){return typeof e=="function"}function jR(e){return!!e.useClass}var yc=new G(""),jl={},UR={},fh;function Dg(){return fh===void 0&&(fh=new Jl),fh}var Dt=class{},Fo=class extends Dt{get destroyed(){return this._destroyed}constructor(t,i,n,s){super(),this.parent=i,this.source=n,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_h(t,o=>this.processProvider(o)),this.records.set(_w,ur(void 0,this)),s.has("environment")&&this.records.set(Dt,ur(void 0,this));let r=this.records.get(yc);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(Lw,Yt,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=ue(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let i=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of i)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ue(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let i=Mn(this),n=Kt(void 0),s;try{return t()}finally{Mn(i),Kt(n)}}get(t,i=Mo,n=Z.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(WC))return t[WC](this);n=wc(n);let s,r=Mn(this),o=Kt(void 0);try{if(!(n&Z.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=QR(t)&&Cc(t);c&&this.injectableDefInScope(c)?l=ur(kh(t),jl):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=n&Z.Self?Dg():this.parent;return i=n&Z.Optional&&i===Mo?null:i,a.get(t,i)}catch(a){if(a.name==="NullInjectorError"){if((a[Zl]=a[Zl]||[]).unshift(ht(t)),r)throw a;return CR(a,t,"R3InjectorError",this.source)}else throw a}finally{Kt(o),Mn(r)}}resolveInjectorInitializers(){let t=ue(null),i=Mn(this),n=Kt(void 0),s;try{let r=this.get(Cr,Yt,Z.Self);for(let o of r)o()}finally{Mn(i),Kt(n),ue(t)}}toString(){let t=[],i=this.records;for(let n of i.keys())t.push(ht(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(t){t=ut(t);let i=wr(t)?t:ut(t&&t.provide),n=qR(t);if(!wr(t)&&t.multi===!0){let s=this.records.get(i);s||(s=ur(void 0,jl,!0),s.factory=()=>Ph(s.multi),this.records.set(i,s)),i=t,s.multi.push(t)}this.records.set(i,n)}hydrate(t,i){let n=ue(null);try{return i.value===jl&&(i.value=UR,i.value=i.factory()),typeof i.value=="object"&&i.value&&YR(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{ue(n)}}injectableDefInScope(t){if(!t.providedIn)return!1;let i=ut(t.providedIn);return typeof i=="string"?i==="any"||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(t){let i=this._onDestroyHooks.indexOf(t);i!==-1&&this._onDestroyHooks.splice(i,1)}};function kh(e){let t=Cc(e),i=t!==null?t.factory:mr(e);if(i!==null)return i;if(e instanceof G)throw new L(204,!1);if(e instanceof Function)return $R(e);throw new L(204,!1)}function $R(e){if(e.length>0)throw new L(204,!1);let i=nR(e);return i!==null?()=>i.factory(e):()=>new e}function qR(e){if(qw(e))return ur(void 0,e.useValue);{let t=Kw(e);return ur(t,jl)}}function Kw(e,t,i){let n;if(wr(e)){let s=ut(e);return mr(s)||kh(s)}else if(qw(e))n=()=>ut(e.useValue);else if(WR(e))n=()=>e.useFactory(...Ph(e.deps||[]));else if(zR(e))n=()=>H(ut(e.useExisting));else{let s=ut(e&&(e.useClass||e.provide));if(KR(e))n=()=>new s(...Ph(e.deps));else return mr(s)||kh(s)}return n}function ur(e,t,i=!1){return{factory:e,value:t,multi:i?[]:void 0}}function KR(e){return!!e.deps}function YR(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function QR(e){return typeof e=="function"||typeof e=="object"&&e instanceof G}function _h(e,t){for(let i of e)Array.isArray(i)?_h(i,t):i&&Fw(i)?_h(i.\u0275providers,t):t(i)}function Zi(e,t){e instanceof Fo&&e.assertNotDestroyed();let i,n=Mn(e),s=Kt(void 0);try{return t()}finally{Mn(n),Kt(s)}}function Yw(){return Iw()!==void 0||fR()!=null}function ZR(e){if(!Yw())throw new L(-203,!1)}function XR(e){let t=dt.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function JR(e){return typeof e=="function"}var Xi=0,Q=1,U=2,Ye=3,hi=4,fi=5,ec=6,Io=7,gi=8,yr=9,pi=10,He=11,Po=12,YC=13,Er=14,Fi=15,Vo=16,dr=17,Yi=18,bc=19,Qw=20,Rn=21,mh=22,ms=23,In=25,Zw=1;var vs=7,tc=8,br=9,Ht=10,Eg=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Eg||{});function ps(e){return Array.isArray(e)&&typeof e[Zw]=="object"}function Ji(e){return Array.isArray(e)&&e[Zw]===!0}function Xw(e){return(e.flags&4)!==0}function Sc(e){return e.componentOffset>-1}function Mg(e){return(e.flags&1)===1}function Pn(e){return!!e.template}function e3(e){return(e[U]&512)!==0}var Lh=class{constructor(t,i,n){this.previousValue=t,this.currentValue=i,this.firstChange=n}isFirstChange(){return this.firstChange}};function Jw(e,t,i,n){t!==null?t.applyValueToInputSignal(t,n):e[i]=n}function mi(){return e0}function e0(e){return e.type.prototype.ngOnChanges&&(e.setInput=i3),t3}mi.ngInherit=!0;function t3(){let e=i0(this),t=e?.current;if(t){let i=e.previous;if(i===vr)e.previous=t;else for(let n in t)i[n]=t[n];e.current=null,this.ngOnChanges(t)}}function i3(e,t,i,n,s){let r=this.declaredInputs[n],o=i0(e)||n3(e,{previous:vr,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new Lh(c&&c.currentValue,i,l===vr),Jw(e,t,s,i)}var t0="__ngSimpleChanges__";function i0(e){return e[t0]||null}function n3(e,t){return e[t0]=t}var QC=null;var Ei=function(e,t,i){QC?.(e,t,i)},s3="svg",r3="math",o3=!1;function a3(){return o3}function Ii(e){for(;Array.isArray(e);)e=e[Xi];return e}function l3(e,t){return Ii(t[e])}function Qt(e,t){return Ii(t[e.index])}function n0(e,t){return e.data[t]}function kn(e,t){let i=t[e];return ps(i)?i:i[Xi]}function c3(e){return(e[U]&4)===4}function Rg(e){return(e[U]&128)===128}function u3(e){return Ji(e[Ye])}function ic(e,t){return t==null?null:e[t]}function s0(e){e[dr]=0}function d3(e){e[U]&1024||(e[U]|=1024,Rg(e)&&Ao(e))}function h3(e,t){for(;e>0;)t=t[Er],e--;return t}function Fg(e){return!!(e[U]&9216||e[ms]?.dirty)}function Oh(e){e[pi].changeDetectionScheduler?.notify(1),Fg(e)?Ao(e):e[U]&64&&(a3()?(e[U]|=1024,Ao(e)):e[pi].changeDetectionScheduler?.notify())}function Ao(e){e[pi].changeDetectionScheduler?.notify();let t=To(e);for(;t!==null&&!(t[U]&8192||(t[U]|=8192,!Rg(t)));)t=To(t)}function r0(e,t){if((e[U]&256)===256)throw new L(911,!1);e[Rn]===null&&(e[Rn]=[]),e[Rn].push(t)}function g3(e,t){if(e[Rn]===null)return;let i=e[Rn].indexOf(t);i!==-1&&e[Rn].splice(i,1)}function To(e){let t=e[Ye];return Ji(t)?t[Ye]:t}var ee={lFrame:h0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function p3(){return ee.lFrame.elementDepthCount}function f3(){ee.lFrame.elementDepthCount++}function m3(){ee.lFrame.elementDepthCount--}function o0(){return ee.bindingsEnabled}function v3(){return ee.skipHydrationRootTNode!==null}function C3(e){return ee.skipHydrationRootTNode===e}function w3(){ee.skipHydrationRootTNode=null}function me(){return ee.lFrame.lView}function st(){return ee.lFrame.tView}function gt(e){return ee.lFrame.contextLView=e,e[gi]}function pt(e){return ee.lFrame.contextLView=null,e}function ft(){let e=a0();for(;e!==null&&e.type===64;)e=e.parent;return e}function a0(){return ee.lFrame.currentTNode}function y3(){let e=ee.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ho(e,t){let i=ee.lFrame;i.currentTNode=e,i.isParent=t}function l0(){return ee.lFrame.isParent}function b3(){ee.lFrame.isParent=!1}function S3(e){return ee.lFrame.bindingIndex=e}function Ig(){return ee.lFrame.bindingIndex++}function x3(e){let t=ee.lFrame,i=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,i}function D3(){return ee.lFrame.inI18n}function E3(e,t){let i=ee.lFrame;i.bindingIndex=i.bindingRootIndex=e,Nh(t)}function M3(){return ee.lFrame.currentDirectiveIndex}function Nh(e){ee.lFrame.currentDirectiveIndex=e}function R3(e){let t=ee.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function c0(){return ee.lFrame.currentQueryIndex}function Pg(e){ee.lFrame.currentQueryIndex=e}function F3(e){let t=e[Q];return t.type===2?t.declTNode:t.type===1?e[fi]:null}function u0(e,t,i){if(i&Z.SkipSelf){let s=t,r=e;for(;s=s.parent,s===null&&!(i&Z.Host);)if(s=F3(r),s===null||(r=r[Er],s.type&10))break;if(s===null)return!1;t=s,e=r}let n=ee.lFrame=d0();return n.currentTNode=t,n.lView=e,!0}function Ag(e){let t=d0(),i=e[Q];ee.lFrame=t,t.currentTNode=i.firstChild,t.lView=e,t.tView=i,t.contextLView=e,t.bindingIndex=i.bindingStartIndex,t.inI18n=!1}function d0(){let e=ee.lFrame,t=e===null?null:e.child;return t===null?h0(e):t}function h0(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function g0(){let e=ee.lFrame;return ee.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var p0=g0;function Tg(){let e=g0();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function I3(e){return(ee.lFrame.contextLView=h3(e,ee.lFrame.contextLView))[gi]}function Bo(){return ee.lFrame.selectedIndex}function Cs(e){ee.lFrame.selectedIndex=e}function kg(){let e=ee.lFrame;return n0(e.tView,e.selectedIndex)}function P3(){return ee.lFrame.currentNamespace}var f0=!0;function _g(){return f0}function Lg(e){f0=e}function A3(e,t,i){let{ngOnChanges:n,ngOnInit:s,ngDoCheck:r}=t.type.prototype;if(n){let o=e0(t);(i.preOrderHooks??=[]).push(e,o),(i.preOrderCheckHooks??=[]).push(e,o)}s&&(i.preOrderHooks??=[]).push(0-e,s),r&&((i.preOrderHooks??=[]).push(e,r),(i.preOrderCheckHooks??=[]).push(e,r))}function Og(e,t){for(let i=t.directiveStart,n=t.directiveEnd;i<n;i++){let r=e.data[i].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(e.contentHooks??=[]).push(-i,o),a&&((e.contentHooks??=[]).push(i,a),(e.contentCheckHooks??=[]).push(i,a)),l&&(e.viewHooks??=[]).push(-i,l),c&&((e.viewHooks??=[]).push(i,c),(e.viewCheckHooks??=[]).push(i,c)),u!=null&&(e.destroyHooks??=[]).push(i,u)}}function Ul(e,t,i){m0(e,t,3,i)}function $l(e,t,i,n){(e[U]&3)===i&&m0(e,t,i,n)}function vh(e,t){let i=e[U];(i&3)===t&&(i&=16383,i+=1,e[U]=i)}function m0(e,t,i,n){let s=n!==void 0?e[dr]&65535:0,r=n??-1,o=t.length-1,a=0;for(let l=s;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],n!=null&&a>=n)break}else t[l]<0&&(e[dr]+=65536),(a<r||r==-1)&&(T3(e,i,t,l),e[dr]=(e[dr]&4294901760)+l+2),l++}function ZC(e,t){Ei(4,e,t);let i=ue(null);try{t.call(e)}finally{ue(i),Ei(5,e,t)}}function T3(e,t,i,n){let s=i[n]<0,r=i[n+1],o=s?-i[n]:i[n],a=e[o];s?e[U]>>14<e[dr]>>16&&(e[U]&3)===t&&(e[U]+=16384,ZC(a,r)):ZC(a,r)}var fr=-1,ws=class{constructor(t,i,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=n}};function k3(e){return e instanceof ws}function _3(e){return(e.flags&8)!==0}function L3(e){return(e.flags&16)!==0}function v0(e){return e!==fr}function nc(e){return e&32767}function O3(e){return e>>16}function sc(e,t){let i=O3(e),n=t;for(;i>0;)n=n[Er],i--;return n}var Vh=!0;function XC(e){let t=Vh;return Vh=e,t}var N3=256,C0=N3-1,w0=5,V3=0,Mi={};function H3(e,t,i){let n;typeof i=="string"?n=i.charCodeAt(0)||0:i.hasOwnProperty(Do)&&(n=i[Do]),n==null&&(n=i[Do]=V3++);let s=n&C0,r=1<<s;t.data[e+(s>>w0)]|=r}function rc(e,t){let i=y0(e,t);if(i!==-1)return i;let n=t[Q];n.firstCreatePass&&(e.injectorIndex=t.length,Ch(n.data,e),Ch(t,null),Ch(n.blueprint,null));let s=Ng(e,t),r=e.injectorIndex;if(v0(s)){let o=nc(s),a=sc(s,t),l=a[Q].data;for(let c=0;c<8;c++)t[r+c]=a[o+c]|l[o+c]}return t[r+8]=s,r}function Ch(e,t){e.push(0,0,0,0,0,0,0,0,t)}function y0(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Ng(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let i=0,n=null,s=t;for(;s!==null;){if(n=E0(s),n===null)return fr;if(i++,s=s[Er],n.injectorIndex!==-1)return n.injectorIndex|i<<16}return fr}function Hh(e,t,i){H3(e,t,i)}function B3(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let i=e.attrs;if(i){let n=i.length,s=0;for(;s<n;){let r=i[s];if(Nw(r))break;if(r===0)s=s+2;else if(typeof r=="number")for(s++;s<n&&typeof i[s]=="string";)s++;else{if(r===t)return i[s+1];s=s+2}}}return null}function b0(e,t,i){if(i&Z.Optional||e!==void 0)return e;wg(t,"NodeInjector")}function S0(e,t,i,n){if(i&Z.Optional&&n===void 0&&(n=null),!(i&(Z.Self|Z.Host))){let s=e[yr],r=Kt(void 0);try{return s?s.get(t,n,i&Z.Optional):Pw(t,n,i&Z.Optional)}finally{Kt(r)}}return b0(n,t,i)}function x0(e,t,i,n=Z.Default,s){if(e!==null){if(t[U]&2048&&!(n&Z.Self)){let o=j3(e,t,i,n,Mi);if(o!==Mi)return o}let r=D0(e,t,i,n,Mi);if(r!==Mi)return r}return S0(t,i,n,s)}function D0(e,t,i,n,s){let r=z3(i);if(typeof r=="function"){if(!u0(t,e,n))return n&Z.Host?b0(s,i,n):S0(t,i,n,s);try{let o;if(o=r(n),o==null&&!(n&Z.Optional))wg(i);else return o}finally{p0()}}else if(typeof r=="number"){let o=null,a=y0(e,t),l=fr,c=n&Z.Host?t[Fi][fi]:null;for((a===-1||n&Z.SkipSelf)&&(l=a===-1?Ng(e,t):t[a+8],l===fr||!ew(n,!1)?a=-1:(o=t[Q],a=nc(l),t=sc(l,t)));a!==-1;){let u=t[Q];if(JC(r,a,u.data)){let d=G3(a,t,i,o,n,c);if(d!==Mi)return d}l=t[a+8],l!==fr&&ew(n,t[Q].data[a+8]===c)&&JC(r,a,t)?(o=u,a=nc(l),t=sc(l,t)):a=-1}}return s}function G3(e,t,i,n,s,r){let o=t[Q],a=o.data[e+8],l=n==null?Sc(a)&&Vh:n!=o&&(a.type&3)!==0,c=s&Z.Host&&r===a,u=ql(a,o,i,l,c);return u!==null?ys(t,o,u,a):Mi}function ql(e,t,i,n,s){let r=e.providerIndexes,o=t.data,a=r&1048575,l=e.directiveStart,c=e.directiveEnd,u=r>>20,d=n?a:a+u,h=s?a+u:c;for(let g=d;g<h;g++){let p=o[g];if(g<l&&i===p||g>=l&&p.type===i)return g}if(s){let g=o[l];if(g&&Pn(g)&&g.type===i)return l}return null}function ys(e,t,i,n){let s=e[i],r=t.data;if(k3(s)){let o=s;o.resolving&&uR(cR(r[i]));let a=XC(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Kt(o.injectImpl):null,u=u0(e,n,Z.Default);try{s=e[i]=o.factory(void 0,r,e,n),t.firstCreatePass&&i>=n.directiveStart&&A3(i,r[i],t)}finally{c!==null&&Kt(c),XC(a),o.resolving=!1,p0()}}return s}function z3(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Do)?e[Do]:void 0;return typeof t=="number"?t>=0?t&C0:W3:t}function JC(e,t,i){let n=1<<e;return!!(i[t+(e>>w0)]&n)}function ew(e,t){return!(e&Z.Self)&&!(e&Z.Host&&t)}var fs=class{constructor(t,i){this._tNode=t,this._lView=i}get(t,i,n){return x0(this._tNode,this._lView,t,wc(n),i)}};function W3(){return new fs(ft(),me())}function en(e){return Oo(()=>{let t=e.prototype.constructor,i=t[Ql]||Bh(t),n=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==n;){let r=s[Ql]||Bh(s);if(r&&r!==i)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function Bh(e){return Dw(e)?()=>{let t=Bh(ut(e));return t&&t()}:mr(e)}function j3(e,t,i,n,s){let r=e,o=t;for(;r!==null&&o!==null&&o[U]&2048&&!(o[U]&512);){let a=D0(r,o,i,n|Z.Self,Mi);if(a!==Mi)return a;let l=r.parent;if(!l){let c=o[Qw];if(c){let u=c.get(i,Mi,n);if(u!==Mi)return u}l=E0(o),o=o[Er]}r=l}return s}function E0(e){let t=e[Q],i=t.type;return i===2?t.declTNode:i===1?e[fi]:null}function Vg(e){return B3(ft(),e)}function tw(e,t=null,i=null,n){let s=M0(e,t,i,n);return s.resolveInjectorInitializers(),s}function M0(e,t=null,i=null,n,s=new Set){let r=[i||Yt,BR(e)];return n=n||(typeof e=="object"?void 0:ht(e)),new Fo(r,t||Dg(),n||null,s)}var vi=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Mo}static{this.NULL=new Jl}static create(i,n){if(Array.isArray(i))return tw({name:""},n,i,"");{let s=i.name??"";return tw({name:s},i.parent,i.providers,s)}}static{this.\u0275prov=O({token:e,providedIn:"any",factory:()=>H(_w)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var U3="ngOriginalError";function wh(e){return e[U3]}var Pi=class{constructor(){this._console=console}handleError(t){let i=this._findOriginalError(t);this._console.error("ERROR",t),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(t){let i=t&&wh(t);for(;i&&wh(i);)i=wh(i);return i||null}},R0=new G("",{providedIn:"root",factory:()=>k(Pi).handleError.bind(void 0)}),Hg=(()=>{class e{static{this.__NG_ELEMENT_ID__=$3}static{this.__NG_ENV_ID__=i=>i}}return e})(),Gh=class extends Hg{constructor(t){super(),this._lView=t}onDestroy(t){return r0(this._lView,t),()=>g3(this._lView,t)}};function $3(){return new Gh(me())}function q3(){return Mr(ft(),me())}function Mr(e,t){return new Et(Qt(e,t))}var Et=(()=>{class e{constructor(i){this.nativeElement=i}static{this.__NG_ELEMENT_ID__=q3}}return e})();function K3(e){return e instanceof Et?e.nativeElement:e}var zh=class extends it{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,Yw()&&(this.destroyRef=k(Hg,{optional:!0})??void 0)}emit(t){let i=ue(null);try{super.next(t)}finally{ue(i)}}subscribe(t,i,n){let s=t,r=i||(()=>null),o=n;if(t&&typeof t=="object"){let l=t;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=yh(r),s&&(s=yh(s)),o&&(o=yh(o)));let a=super.subscribe({next:s,error:r,complete:o});return t instanceof Ne&&t.add(a),a}};function yh(e){return t=>{setTimeout(e,void 0,t)}}var I=zh;function Y3(){return this._results[Symbol.iterator]()}var Wh=class e{get changes(){return this._changes??=new I}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let i=e.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=Y3)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,i){return this._results.reduce(t,i)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,i){this.dirty=!1;let n=bR(t);(this._changesDetected=!yR(this._results,n,i))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function F0(e){return(e.flags&128)===128}var I0=new Map,Q3=0;function Z3(){return Q3++}function X3(e){I0.set(e[bc],e)}function J3(e){I0.delete(e[bc])}var iw="__ngContext__";function bs(e,t){ps(t)?(e[iw]=t[bc],X3(t)):e[iw]=t}function P0(e){return T0(e[Po])}function A0(e){return T0(e[hi])}function T0(e){for(;e!==null&&!Ji(e);)e=e[hi];return e}var jh;function k0(e){jh=e}function eF(){if(jh!==void 0)return jh;if(typeof document<"u")return document;throw new L(210,!1)}var xc=new G("",{providedIn:"root",factory:()=>tF}),tF="ng",Bg=new G(""),_n=new G("",{providedIn:"platform",factory:()=>"unknown"});var Gg=new G("",{providedIn:"root",factory:()=>eF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var iF="h",nF="b";var sF=()=>null;function zg(e,t,i=!1){return sF(e,t,i)}var _0=!1,rF=new G("",{providedIn:"root",factory:()=>_0});var Bl;function oF(){if(Bl===void 0&&(Bl=null,dt.trustedTypes))try{Bl=dt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Bl}function nw(e){return oF()?.createScriptURL(e)||e}var oc=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Sw})`}};function Go(e){return e instanceof oc?e.changingThisBreaksApplicationSecurity:e}function Wg(e,t){let i=aF(e);if(i!=null&&i!==t){if(i==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${i} (see ${Sw})`)}return i===t}function aF(e){return e instanceof oc&&e.getTypeName()||null}var lF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function L0(e){return e=String(e),e.match(lF)?e:"unsafe:"+e}var Dc=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Dc||{});function cF(e){let t=N0();return t?t.sanitize(Dc.URL,e)||"":Wg(e,"URL")?Go(e):L0(Cg(e))}function uF(e){let t=N0();if(t)return nw(t.sanitize(Dc.RESOURCE_URL,e)||"");if(Wg(e,"ResourceURL"))return nw(Go(e));throw new L(904,!1)}function dF(e,t){return t==="src"&&(e==="embed"||e==="frame"||e==="iframe"||e==="media"||e==="script")||t==="href"&&(e==="base"||e==="link")?uF:cF}function O0(e,t,i){return dF(t,i)(e)}function N0(){let e=me();return e&&e[pi].sanitizer}function V0(e){return e instanceof Function?e():e}function hF(e){return(e??k(vi)).get(_n)==="browser"}var Qi=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Qi||{}),gF;function jg(e,t){return gF(e,t)}function hr(e,t,i,n,s){if(n!=null){let r,o=!1;Ji(n)?r=n:ps(n)&&(o=!0,n=n[Xi]);let a=Ii(n);e===0&&i!==null?s==null?W0(t,i,a):ac(t,i,a,s||null,!0):e===1&&i!==null?ac(t,i,a,s||null,!0):e===2?IF(t,a,o):e===3&&t.destroyNode(a),r!=null&&AF(t,e,r,i,s)}}function pF(e,t){return e.createText(t)}function H0(e,t,i){return e.createElement(t,i)}function fF(e,t){B0(e,t),t[Xi]=null,t[fi]=null}function mF(e,t,i,n,s,r){n[Xi]=s,n[fi]=t,Ec(e,n,i,1,s,r)}function B0(e,t){t[pi].changeDetectionScheduler?.notify(1),Ec(e,t,t[He],2,null,null)}function vF(e){let t=e[Po];if(!t)return bh(e[Q],e);for(;t;){let i=null;if(ps(t))i=t[Po];else{let n=t[Ht];n&&(i=n)}if(!i){for(;t&&!t[hi]&&t!==e;)ps(t)&&bh(t[Q],t),t=t[Ye];t===null&&(t=e),ps(t)&&bh(t[Q],t),i=t&&t[hi]}t=i}}function CF(e,t,i,n){let s=Ht+n,r=i.length;n>0&&(i[s-1][hi]=t),n<r-Ht?(t[hi]=i[s],kw(i,Ht+n,t)):(i.push(t),t[hi]=null),t[Ye]=i;let o=t[Vo];o!==null&&i!==o&&wF(o,t);let a=t[Yi];a!==null&&a.insertView(e),Oh(t),t[U]|=128}function wF(e,t){let i=e[br],s=t[Ye][Ye][Fi];t[Fi]!==s&&(e[U]|=Eg.HasTransplantedViews),i===null?e[br]=[t]:i.push(t)}function G0(e,t){let i=e[br],n=i.indexOf(t);i.splice(n,1)}function Uh(e,t){if(e.length<=Ht)return;let i=Ht+t,n=e[i];if(n){let s=n[Vo];s!==null&&s!==e&&G0(s,n),t>0&&(e[i-1][hi]=n[hi]);let r=Xl(e,Ht+t);fF(n[Q],n);let o=r[Yi];o!==null&&o.detachView(r[Q]),n[Ye]=null,n[hi]=null,n[U]&=-129}return n}function z0(e,t){if(!(t[U]&256)){let i=t[He];i.destroyNode&&Ec(e,t,i,3,null,null),vF(t)}}function bh(e,t){if(t[U]&256)return;let i=ue(null);try{t[U]&=-129,t[U]|=256,t[ms]&&gC(t[ms]),bF(e,t),yF(e,t),t[Q].type===1&&t[He].destroy();let n=t[Vo];if(n!==null&&Ji(t[Ye])){n!==t[Ye]&&G0(n,t);let s=t[Yi];s!==null&&s.detachView(e)}J3(t)}finally{ue(i)}}function yF(e,t){let i=e.cleanup,n=t[Io];if(i!==null)for(let r=0;r<i.length-1;r+=2)if(typeof i[r]=="string"){let o=i[r+3];o>=0?n[o]():n[-o].unsubscribe(),r+=2}else{let o=n[i[r+1]];i[r].call(o)}n!==null&&(t[Io]=null);let s=t[Rn];if(s!==null){t[Rn]=null;for(let r=0;r<s.length;r++){let o=s[r];o()}}}function bF(e,t){let i;if(e!=null&&(i=e.destroyHooks)!=null)for(let n=0;n<i.length;n+=2){let s=t[i[n]];if(!(s instanceof ws)){let r=i[n+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){let a=s[r[o]],l=r[o+1];Ei(4,a,l);try{l.call(a)}finally{Ei(5,a,l)}}else{Ei(4,s,r);try{r.call(s)}finally{Ei(5,s,r)}}}}}function SF(e,t,i){return xF(e,t.parent,i)}function xF(e,t,i){let n=t;for(;n!==null&&n.type&40;)t=n,n=t.parent;if(n===null)return i[Xi];{let{componentOffset:s}=n;if(s>-1){let{encapsulation:r}=e.data[n.directiveStart+s];if(r===Ri.None||r===Ri.Emulated)return null}return Qt(n,i)}}function ac(e,t,i,n,s){e.insertBefore(t,i,n,s)}function W0(e,t,i){e.appendChild(t,i)}function sw(e,t,i,n,s){n!==null?ac(e,t,i,n,s):W0(e,t,i)}function DF(e,t,i,n){e.removeChild(t,i,n)}function Ug(e,t){return e.parentNode(t)}function EF(e,t){return e.nextSibling(t)}function MF(e,t,i){return FF(e,t,i)}function RF(e,t,i){return e.type&40?Qt(e,i):null}var FF=RF,rw;function $g(e,t,i,n){let s=SF(e,n,t),r=t[He],o=n.parent||t[fi],a=MF(o,n,t);if(s!=null)if(Array.isArray(i))for(let l=0;l<i.length;l++)sw(r,s,i[l],a,!1);else sw(r,s,i,a,!1);rw!==void 0&&rw(r,n,t,i,s)}function Kl(e,t){if(t!==null){let i=t.type;if(i&3)return Qt(t,e);if(i&4)return $h(-1,e[t.index]);if(i&8){let n=t.child;if(n!==null)return Kl(e,n);{let s=e[t.index];return Ji(s)?$h(-1,s):Ii(s)}}else{if(i&32)return jg(t,e)()||Ii(e[t.index]);{let n=j0(e,t);if(n!==null){if(Array.isArray(n))return n[0];let s=To(e[Fi]);return Kl(s,n)}else return Kl(e,t.next)}}}return null}function j0(e,t){if(t!==null){let n=e[Fi][fi],s=t.projection;return n.projection[s]}return null}function $h(e,t){let i=Ht+e+1;if(i<t.length){let n=t[i],s=n[Q].firstChild;if(s!==null)return Kl(n,s)}return t[vs]}function IF(e,t,i){let n=Ug(e,t);n&&DF(e,n,t,i)}function qg(e,t,i,n,s,r,o){for(;i!=null;){let a=n[i.index],l=i.type;if(o&&t===0&&(a&&bs(Ii(a),n),i.flags|=2),(i.flags&32)!==32)if(l&8)qg(e,t,i.child,n,s,r,!1),hr(t,e,s,a,r);else if(l&32){let c=jg(i,n),u;for(;u=c();)hr(t,e,s,u,r);hr(t,e,s,a,r)}else l&16?PF(e,t,n,i,s,r):hr(t,e,s,a,r);i=o?i.projectionNext:i.next}}function Ec(e,t,i,n,s,r){qg(i,n,e.firstChild,t,s,r,!1)}function PF(e,t,i,n,s,r){let o=i[Fi],l=o[fi].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];hr(t,e,s,u,r)}else{let c=l,u=o[Ye];F0(n)&&(c.flags|=128),qg(e,t,c,u,s,r,!0)}}function AF(e,t,i,n,s){let r=i[vs],o=Ii(i);r!==o&&hr(t,e,n,r,s);for(let a=Ht;a<i.length;a++){let l=i[a];Ec(l[Q],l,e,t,n,r)}}function TF(e,t,i,n,s){if(t)s?e.addClass(i,n):e.removeClass(i,n);else{let r=n.indexOf("-")===-1?void 0:Qi.DashCase;s==null?e.removeStyle(i,n,r):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=Qi.Important),e.setStyle(i,n,s,r))}}function kF(e,t,i){e.setAttribute(t,"style",i)}function U0(e,t,i){i===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",i)}function $0(e,t,i){let{mergedAttrs:n,classes:s,styles:r}=i;n!==null&&Ah(e,t,n),s!==null&&U0(e,t,s),r!==null&&kF(e,t,r)}var Mc={};function rt(e=1){q0(st(),me(),Bo()+e,!1)}function q0(e,t,i,n){if(!n)if((t[U]&3)===3){let r=e.preOrderCheckHooks;r!==null&&Ul(t,r,i)}else{let r=e.preOrderHooks;r!==null&&$l(t,r,0,i)}Cs(i)}function q(e,t=Z.Default){let i=me();if(i===null)return H(e,t);let n=ft();return x0(n,i,ut(e),t)}function K0(){let e="invalid";throw new Error(e)}function Y0(e,t,i,n,s,r){let o=ue(null);try{let a=null;s&nt.SignalBased&&(a=t[n][Kd]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),s&nt.HasDecoratorInputTransform&&(r=e.inputTransforms[n].call(t,r)),e.setInput!==null?e.setInput(t,a,r,i,n):Jw(t,a,n,r)}finally{ue(o)}}function _F(e,t){let i=e.hostBindingOpCodes;if(i!==null)try{for(let n=0;n<i.length;n++){let s=i[n];if(s<0)Cs(~s);else{let r=s,o=i[++n],a=i[++n];E3(o,r);let l=t[r];a(2,l)}}}finally{Cs(-1)}}function Rc(e,t,i,n,s,r,o,a,l,c,u){let d=t.blueprint.slice();return d[Xi]=s,d[U]=n|4|128|8|64,(c!==null||e&&e[U]&2048)&&(d[U]|=2048),s0(d),d[Ye]=d[Er]=e,d[gi]=i,d[pi]=o||e&&e[pi],d[He]=a||e&&e[He],d[yr]=l||e&&e[yr]||null,d[fi]=r,d[bc]=Z3(),d[ec]=u,d[Qw]=c,d[Fi]=t.type==2?e[Fi]:d,d}function Fc(e,t,i,n,s){let r=e.data[t];if(r===null)r=LF(e,t,i,n,s),D3()&&(r.flags|=32);else if(r.type&64){r.type=i,r.value=n,r.attrs=s;let o=y3();r.injectorIndex=o===null?-1:o.injectorIndex}return Ho(r,!0),r}function LF(e,t,i,n,s){let r=a0(),o=l0(),a=o?r:r&&r.parent,l=e.data[t]=GF(e,a,i,t,n,s);return e.firstChild===null&&(e.firstChild=l),r!==null&&(o?r.child==null&&l.parent!==null&&(r.child=l):r.next===null&&(r.next=l,l.prev=r)),l}function Q0(e,t,i,n){if(i===0)return-1;let s=t.length;for(let r=0;r<i;r++)t.push(n),e.blueprint.push(n),e.data.push(null);return s}function Z0(e,t,i,n,s){let r=Bo(),o=n&2;try{Cs(-1),o&&t.length>In&&q0(e,t,In,!1),Ei(o?2:0,s),i(n,s)}finally{Cs(r),Ei(o?3:1,s)}}function X0(e,t,i){if(Xw(t)){let n=ue(null);try{let s=t.directiveStart,r=t.directiveEnd;for(let o=s;o<r;o++){let a=e.data[o];if(a.contentQueries){let l=i[o];a.contentQueries(1,l,o)}}}finally{ue(n)}}}function J0(e,t,i){o0()&&(qF(e,t,i,Qt(i,t)),(i.flags&64)===64&&ry(e,t,i))}function ey(e,t,i=Qt){let n=t.localNames;if(n!==null){let s=t.index+1;for(let r=0;r<n.length;r+=2){let o=n[r+1],a=o===-1?i(t,e):e[o];e[s++]=a}}}function ty(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Kg(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Kg(e,t,i,n,s,r,o,a,l,c,u){let d=In+n,h=d+s,g=OF(d,h),p=typeof c=="function"?c():c;return g[Q]={type:e,blueprint:g,template:i,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function OF(e,t){let i=[];for(let n=0;n<t;n++)i.push(n<e?null:Mc);return i}function NF(e,t,i,n){let r=n.get(rF,_0)||i===Ri.ShadowDom,o=e.selectRootElement(t,r);return VF(o),o}function VF(e){HF(e)}var HF=()=>null;function BF(e,t,i,n){let s=ly(t);s.push(i),e.firstCreatePass&&cy(e).push(n,s.length-1)}function GF(e,t,i,n,s,r){let o=t?t.injectorIndex:-1,a=0;return v3()&&(a|=128),{type:i,index:n,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ow(e,t,i,n,s){for(let r in t){if(!t.hasOwnProperty(r))continue;let o=t[r];if(o===void 0)continue;n??={};let a,l=nt.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(s!==null){if(!s.hasOwnProperty(r))continue;c=s[r]}e===0?aw(n,i,c,a,l):aw(n,i,c,a)}return n}function aw(e,t,i,n,s){let r;e.hasOwnProperty(i)?(r=e[i]).push(t,n):r=e[i]=[t,n],s!==void 0&&r.push(s)}function zF(e,t,i){let n=t.directiveStart,s=t.directiveEnd,r=e.data,o=t.attrs,a=[],l=null,c=null;for(let u=n;u<s;u++){let d=r[u],h=i?i.get(d):null,g=h?h.inputs:null,p=h?h.outputs:null;l=ow(0,d.inputs,u,l,g),c=ow(1,d.outputs,u,c,p);let f=l!==null&&o!==null&&!Sg(t)?sI(l,u,o):null;a.push(f)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function WF(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function iy(e,t,i,n,s,r,o,a){let l=Qt(t,i),c=t.inputs,u;!a&&c!=null&&(u=c[n])?(Yg(e,i,u,n,s),Sc(t)&&jF(i,t.index)):t.type&3?(n=WF(n),s=o!=null?o(s,t.value||"",n):s,r.setProperty(l,n,s)):t.type&12}function jF(e,t){let i=kn(t,e);i[U]&16||(i[U]|=64)}function ny(e,t,i,n){if(o0()){let s=n===null?null:{"":-1},r=YF(e,i),o,a;r===null?o=a=null:[o,a]=r,o!==null&&sy(e,t,i,o,s,a),s&&QF(i,n,s)}i.mergedAttrs=Ro(i.mergedAttrs,i.attrs)}function sy(e,t,i,n,s,r){for(let c=0;c<n.length;c++)Hh(rc(i,t),e,n[c].type);XF(i,e.data.length,n.length);for(let c=0;c<n.length;c++){let u=n[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Q0(e,t,n.length,null);for(let c=0;c<n.length;c++){let u=n[c];i.mergedAttrs=Ro(i.mergedAttrs,u.hostAttrs),JF(e,i,t,l,u),ZF(l,u,s),u.contentQueries!==null&&(i.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(i.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),a=!0),l++}zF(e,i,r)}function UF(e,t,i,n,s){let r=s.hostBindings;if(r){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;$F(o)!=a&&o.push(a),o.push(i,n,r)}}function $F(e){let t=e.length;for(;t>0;){let i=e[--t];if(typeof i=="number"&&i<0)return i}return 0}function qF(e,t,i,n){let s=i.directiveStart,r=i.directiveEnd;Sc(i)&&eI(t,i,e.data[s+i.componentOffset]),e.firstCreatePass||rc(i,t),bs(n,t);let o=i.initialInputs;for(let a=s;a<r;a++){let l=e.data[a],c=ys(t,e,a,i);if(bs(c,t),o!==null&&nI(t,a-s,c,l,i,o),Pn(l)){let u=kn(i.index,t);u[gi]=ys(t,e,a,i)}}}function ry(e,t,i){let n=i.directiveStart,s=i.directiveEnd,r=i.index,o=M3();try{Cs(r);for(let a=n;a<s;a++){let l=e.data[a],c=t[a];Nh(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&KF(l,c)}}finally{Cs(-1),Nh(o)}}function KF(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function YF(e,t){let i=e.directiveRegistry,n=null,s=null;if(i)for(let r=0;r<i.length;r++){let o=i[r];if(AR(t,o.selectors,!1))if(n||(n=[]),Pn(o))if(o.findHostDirectiveDefs!==null){let a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),n.unshift(...a,o);let l=a.length;qh(e,t,l)}else n.unshift(o),qh(e,t,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,n,s),n.push(o)}return n===null?null:[n,s]}function qh(e,t,i){t.componentOffset=i,(e.components??=[]).push(t.index)}function QF(e,t,i){if(t){let n=e.localNames=[];for(let s=0;s<t.length;s+=2){let r=i[t[s+1]];if(r==null)throw new L(-301,!1);n.push(t[s],r)}}}function ZF(e,t,i){if(i){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)i[t.exportAs[n]]=e;Pn(t)&&(i[""]=e)}}function XF(e,t,i){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+i,e.providerIndexes=t}function JF(e,t,i,n,s){e.data[n]=s;let r=s.factory||(s.factory=mr(s.type,!0)),o=new ws(r,Pn(s),q);e.blueprint[n]=o,i[n]=o,UF(e,t,n,Q0(e,i,s.hostVars,Mc),s)}function eI(e,t,i){let n=Qt(t,e),s=ty(i),r=e[pi].rendererFactory,o=16;i.signals?o=4096:i.onPush&&(o=64);let a=Ic(e,Rc(e,s,null,o,n,t,null,r.createRenderer(n,i),null,null,null));e[t.index]=a}function tI(e,t,i,n,s,r){let o=Qt(e,t);iI(t[He],o,r,e.value,i,n,s)}function iI(e,t,i,n,s,r,o){if(r==null)e.removeAttribute(t,s,i);else{let a=o==null?Cg(r):o(r,n||"",s);e.setAttribute(t,s,a,i)}}function nI(e,t,i,n,s,r){let o=r[t];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],d=o[a++];Y0(n,i,l,c,u,d)}}function sI(e,t,i){let n=null,s=0;for(;s<i.length;){let r=i[s];if(r===0){s+=4;continue}else if(r===5){s+=2;continue}if(typeof r=="number")break;if(e.hasOwnProperty(r)){n===null&&(n=[]);let o=e[r];for(let a=0;a<o.length;a+=3)if(o[a]===t){n.push(r,o[a+1],o[a+2],i[s+1]);break}}s+=2}return n}function oy(e,t,i,n){return[e,!0,0,t,null,n,null,i,null,null]}function ay(e,t){let i=e.contentQueries;if(i!==null){let n=ue(null);try{for(let s=0;s<i.length;s+=2){let r=i[s],o=i[s+1];if(o!==-1){let a=e.data[o];Pg(r),a.contentQueries(2,t[o],o)}}}finally{ue(n)}}}function Ic(e,t){return e[Po]?e[YC][hi]=t:e[Po]=t,e[YC]=t,t}function Kh(e,t,i){Pg(0);let n=ue(null);try{t(e,i)}finally{ue(n)}}function ly(e){return e[Io]||(e[Io]=[])}function cy(e){return e.cleanup||(e.cleanup=[])}function uy(e,t){let i=e[yr],n=i?i.get(Pi,null):null;n&&n.handleError(t)}function Yg(e,t,i,n,s){for(let r=0;r<i.length;){let o=i[r++],a=i[r++],l=i[r++],c=t[o],u=e.data[o];Y0(u,c,n,a,l,s)}}function rI(e,t){let i=kn(t,e),n=i[Q];oI(n,i);let s=i[Xi];s!==null&&i[ec]===null&&(i[ec]=zg(s,i[yr])),Qg(n,i,i[gi])}function oI(e,t){for(let i=t.length;i<e.blueprint.length;i++)t.push(e.blueprint[i])}function Qg(e,t,i){Ag(t);try{let n=e.viewQuery;n!==null&&Kh(1,n,i);let s=e.template;s!==null&&Z0(e,t,s,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),t[Yi]?.finishViewCreation(e),e.staticContentQueries&&ay(e,t),e.staticViewQueries&&Kh(2,e.viewQuery,i);let r=e.components;r!==null&&aI(t,r)}catch(n){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),n}finally{t[U]&=-5,Tg()}}function aI(e,t){for(let i=0;i<t.length;i++)rI(e,t[i])}function lI(e,t,i,n){let s=ue(null);try{let r=t.tView,a=e[U]&4096?4096:16,l=Rc(e,r,i,a,null,t,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),c=e[t.index];l[Vo]=c;let u=e[Yi];return u!==null&&(l[Yi]=u.createEmbeddedView(r)),Qg(r,l,i),l}finally{ue(s)}}function lw(e,t){return!t||t.firstChild===null||F0(e)}function cI(e,t,i,n=!0){let s=t[Q];if(CF(s,t,e,i),n){let o=$h(i,e),a=t[He],l=Ug(a,e[vs]);l!==null&&mF(s,e[fi],a,t,l,o)}let r=t[ec];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function lc(e,t,i,n,s=!1){for(;i!==null;){let r=t[i.index];r!==null&&n.push(Ii(r)),Ji(r)&&uI(r,n);let o=i.type;if(o&8)lc(e,t,i.child,n);else if(o&32){let a=jg(i,t),l;for(;l=a();)n.push(l)}else if(o&16){let a=j0(t,i);if(Array.isArray(a))n.push(...a);else{let l=To(t[Fi]);lc(l[Q],l,a,n,!0)}}i=s?i.projectionNext:i.next}return n}function uI(e,t){for(let i=Ht;i<e.length;i++){let n=e[i],s=n[Q].firstChild;s!==null&&lc(n[Q],n,s,t)}e[vs]!==e[Xi]&&t.push(e[vs])}var dy=[];function dI(e){return e[ms]??hI(e)}function hI(e){let t=dy.pop()??Object.create(pI);return t.lView=e,t}function gI(e){e.lView[ms]!==e&&(e.lView=null,dy.push(e))}var pI=_(D({},uC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ao(e.lView)},consumerOnSignalRead(){this.lView[ms]=this}}),hy=100;function gy(e,t=!0,i=0){let n=e[pi],s=n.rendererFactory,r=!1;r||s.begin?.();try{fI(e,i)}catch(o){throw t&&uy(e,o),o}finally{r||(s.end?.(),n.inlineEffectRunner?.flush())}}function fI(e,t){Yh(e,t);let i=0;for(;Fg(e);){if(i===hy)throw new L(103,!1);i++,Yh(e,1)}}function mI(e,t,i,n){let s=t[U];if((s&256)===256)return;let r=!1;!r&&t[pi].inlineEffectRunner?.flush(),Ag(t);let o=null,a=null;!r&&vI(e)&&(a=dI(t),o=dC(a));try{s0(t),S3(e.bindingStartIndex),i!==null&&Z0(e,t,i,2,n);let l=(s&3)===3;if(!r)if(l){let d=e.preOrderCheckHooks;d!==null&&Ul(t,d,null)}else{let d=e.preOrderHooks;d!==null&&$l(t,d,0,null),vh(t,0)}if(CI(t),py(t,0),e.contentQueries!==null&&ay(e,t),!r)if(l){let d=e.contentCheckHooks;d!==null&&Ul(t,d)}else{let d=e.contentHooks;d!==null&&$l(t,d,1),vh(t,1)}_F(e,t);let c=e.components;c!==null&&my(t,c,0);let u=e.viewQuery;if(u!==null&&Kh(2,u,n),!r)if(l){let d=e.viewCheckHooks;d!==null&&Ul(t,d)}else{let d=e.viewHooks;d!==null&&$l(t,d,2),vh(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[mh]){for(let d of t[mh])d();t[mh]=null}r||(t[U]&=-73)}catch(l){throw Ao(t),l}finally{a!==null&&(hC(a,o),gI(a)),Tg()}}function vI(e){return e.type!==2}function py(e,t){for(let i=P0(e);i!==null;i=A0(i))for(let n=Ht;n<i.length;n++){let s=i[n];fy(s,t)}}function CI(e){for(let t=P0(e);t!==null;t=A0(t)){if(!(t[U]&Eg.HasTransplantedViews))continue;let i=t[br];for(let n=0;n<i.length;n++){let s=i[n],r=s[Ye];d3(s)}}}function wI(e,t,i){let n=kn(t,e);fy(n,i)}function fy(e,t){Rg(e)&&Yh(e,t)}function Yh(e,t){let n=e[Q],s=e[U],r=e[ms],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(r?.dirty&&Yd(r)),r&&(r.dirty=!1),e[U]&=-9217,o)mI(n,e,n.template,e[gi]);else if(s&8192){py(e,1);let a=n.components;a!==null&&my(e,a,1)}}function my(e,t,i){for(let n=0;n<t.length;n++)wI(e,t[n],i)}function Zg(e){for(e[pi].changeDetectionScheduler?.notify();e;){e[U]|=64;let t=To(e);if(e3(e)&&!t)return e;e=t}return null}var Ss=class{get rootNodes(){let t=this._lView,i=t[Q];return lc(i,t,i.firstChild,[])}constructor(t,i,n=!0){this._lView=t,this._cdRefInjectingView=i,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gi]}set context(t){this._lView[gi]=t}get destroyed(){return(this._lView[U]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ye];if(Ji(t)){let i=t[tc],n=i?i.indexOf(this):-1;n>-1&&(Uh(t,n),Xl(i,n))}this._attachedToViewContainer=!1}z0(this._lView[Q],this._lView)}onDestroy(t){r0(this._lView,t)}markForCheck(){Zg(this._cdRefInjectingView||this._lView)}detach(){this._lView[U]&=-129}reattach(){Oh(this._lView),this._lView[U]|=128}detectChanges(){this._lView[U]|=1024,gy(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,B0(this._lView[Q],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=t,Oh(this._lView)}},Sr=(()=>{class e{static{this.__NG_ELEMENT_ID__=SI}}return e})(),yI=Sr,bI=class extends yI{constructor(t,i,n){super(),this._declarationLView=t,this._declarationTContainer=i,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,n){let s=lI(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:n});return new Ss(s)}};function SI(){return Xg(ft(),me())}function Xg(e,t){return e.type&4?new bI(t,e,Mr(e,t)):null}var RY=new RegExp(`^(\\d+)*(${nF}|${iF})*(.*)`);var xI=()=>null;function cw(e,t){return xI(e,t)}var cc=class{},Qh=class{},uc=class{};function DI(e){let t=Error(`No component factory found for ${ht(e)}.`);return t[EI]=e,t}var EI="ngComponent";var Zh=class{resolveComponentFactory(t){throw DI(t)}},Pc=(()=>{class e{static{this.NULL=new Zh}}return e})(),ko=class{},Ln=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>MI()}}return e})();function MI(){let e=me(),t=ft(),i=kn(t.index,e);return(ps(i)?i:e)[He]}var RI=(()=>{class e{static{this.\u0275prov=O({token:e,providedIn:"root",factory:()=>null})}}return e})(),Sh={};var uw=new Set;function Jg(e){uw.has(e)||(uw.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function dw(...e){}function FI(){let e=typeof dt.requestAnimationFrame=="function",t=dt[e?"requestAnimationFrame":"setTimeout"],i=dt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&i){let n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);let s=i[Zone.__symbol__("OriginalDelegate")];s&&(i=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}var he=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new I(!1),this.onMicrotaskEmpty=new I(!1),this.onStable=new I(!1),this.onError=new I(!1),typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!n&&i,s.shouldCoalesceRunChangeDetection=n,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=FI().nativeRequestAnimationFrame,AI(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new L(909,!1)}run(t,i,n){return this._inner.run(t,i,n)}runTask(t,i,n,s){let r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,II,dw,dw);try{return r.runTask(o,i,n)}finally{r.cancelTask(o)}}runGuarded(t,i,n){return this._inner.runGuarded(t,i,n)}runOutsideAngular(t){return this._outer.run(t)}},II={};function ep(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function PI(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(dt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Xh(e),e.isCheckStableRunning=!0,ep(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Xh(e))}function AI(e){let t=()=>{PI(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,n,s,r,o,a)=>{if(TI(a))return i.invokeTask(s,r,o,a);try{return hw(e),i.invokeTask(s,r,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&r.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),gw(e)}},onInvoke:(i,n,s,r,o,a,l)=>{try{return hw(e),i.invoke(s,r,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),gw(e)}},onHasTask:(i,n,s,r)=>{i.hasTask(s,r),n===s&&(r.change=="microTask"?(e._hasPendingMicrotasks=r.microTask,Xh(e),ep(e)):r.change=="macroTask"&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(i,n,s,r)=>(i.handleError(s,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}function Xh(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function hw(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function gw(e){e._nesting--,ep(e)}var Jh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new I,this.onMicrotaskEmpty=new I,this.onStable=new I,this.onError=new I}run(t,i,n){return t.apply(i,n)}runGuarded(t,i,n){return t.apply(i,n)}runOutsideAngular(t){return t()}runTask(t,i,n,s){return t.apply(i,n)}};function TI(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}function kI(e="zone.js",t){return e==="noop"?new Jh:e==="zone.js"?new he(t):e}var gr=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(gr||{}),_I={destroy(){}};function Ac(e,t){!t&&ZR(Ac);let i=t?.injector??k(vi);if(!hF(i))return _I;Jg("NgAfterNextRender");let n=i.get(tp),s=n.handler??=new tg,r=t?.phase??gr.MixedReadWrite,o=()=>{s.unregister(l),a()},a=i.get(Hg).onDestroy(o),l=Zi(i,()=>new eg(r,()=>{o(),e()}));return s.register(l),{destroy:o}}var eg=class{constructor(t,i){this.phase=t,this.callbackFn=i,this.zone=k(he),this.errorHandler=k(Pi,{optional:!0}),k(cc,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},tg=class{constructor(){this.executingCallbacks=!1,this.buckets={[gr.EarlyRead]:new Set,[gr.Write]:new Set,[gr.MixedReadWrite]:new Set,[gr.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let i of t)i.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},tp=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let n of i)n()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e})}}return e})();function ig(e,t,i){let n=i?e.styles:null,s=i?e.classes:null,r=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")r=a;else if(r==1)s=HC(s,a);else if(r==2){let l=a,c=t[++o];n=HC(n,l+": "+c+";")}}i?e.styles=n:e.stylesWithoutHost=n,i?e.classes=s:e.classesWithoutHost=s}var dc=class extends Pc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let i=Fn(t);return new xr(i,this.ngModule)}};function pw(e){let t=[];for(let i in e){if(!e.hasOwnProperty(i))continue;let n=e[i];n!==void 0&&t.push({propName:Array.isArray(n)?n[0]:n,templateName:i})}return t}function LI(e){let t=e.toLowerCase();return t==="svg"?s3:t==="math"?r3:null}var ng=class{constructor(t,i){this.injector=t,this.parentInjector=i}get(t,i,n){n=wc(n);let s=this.injector.get(t,Sh,n);return s!==Sh||i===Sh?s:this.parentInjector.get(t,i,n)}},xr=class extends uc{get inputs(){let t=this.componentDef,i=t.inputTransforms,n=pw(t.inputs);if(i!==null)for(let s of n)i.hasOwnProperty(s.propName)&&(s.transform=i[s.propName]);return n}get outputs(){return pw(this.componentDef.outputs)}constructor(t,i){super(),this.componentDef=t,this.ngModule=i,this.componentType=t.type,this.selector=LR(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!i}create(t,i,n,s){let r=ue(null);try{s=s||this.ngModule;let o=s instanceof Dt?s:s?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new ng(t,o):t,l=a.get(ko,null);if(l===null)throw new L(407,!1);let c=a.get(RI,null),u=a.get(tp,null),d=a.get(cc,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},g=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",f=n?NF(g,n,this.componentDef.encapsulation,a):H0(g,p,LI(p)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let v=null;f!==null&&(v=zg(f,a,!0));let C=Kg(0,null,null,1,0,null,null,null,null,null,null),w=Rc(null,C,null,m,null,null,h,g,a,null,v);Ag(w);let y,S;try{let b=this.componentDef,M,R=null;b.findHostDirectiveDefs?(M=[],R=new Map,b.findHostDirectiveDefs(b,M,R),M.push(b)):M=[b];let A=OI(w,f),B=NI(A,f,b,M,w,h,g);S=n0(C,In),f&&BI(g,b,f,n),i!==void 0&&GI(S,this.ngContentSelectors,i),y=HI(B,b,M,R,w,[zI]),Qg(C,w,null)}finally{Tg()}return new sg(this.componentType,y,Mr(S,w),w,S)}finally{ue(r)}}},sg=class extends Qh{constructor(t,i,n,s,r){super(),this.location=n,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Ss(s,void 0,!1),this.componentType=t}setInput(t,i){let n=this._tNode.inputs,s;if(n!==null&&(s=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),i))return;let r=this._rootLView;Yg(r[Q],r,s,t,i),this.previousInputValues.set(t,i);let o=kn(this._tNode.index,r);Zg(o)}}get injector(){return new fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function OI(e,t){let i=e[Q],n=In;return e[n]=t,Fc(i,n,2,"#host",null)}function NI(e,t,i,n,s,r,o){let a=s[Q];VI(n,e,t,o);let l=null;t!==null&&(l=zg(t,s[yr]));let c=r.rendererFactory.createRenderer(t,i),u=16;i.signals?u=4096:i.onPush&&(u=64);let d=Rc(s,ty(i),null,u,s[e.index],e,r,c,null,null,l);return a.firstCreatePass&&qh(a,e,n.length-1),Ic(s,d),s[e.index]=d}function VI(e,t,i,n){for(let s of e)t.mergedAttrs=Ro(t.mergedAttrs,s.hostAttrs);t.mergedAttrs!==null&&(ig(t,t.mergedAttrs,!0),i!==null&&$0(n,i,t))}function HI(e,t,i,n,s,r){let o=ft(),a=s[Q],l=Qt(o,s);sy(a,s,o,i,null,n);for(let u=0;u<i.length;u++){let d=o.directiveStart+u,h=ys(s,a,d,o);bs(h,s)}ry(a,s,o),l&&bs(l,s);let c=ys(s,a,o.directiveStart+o.componentOffset,o);if(e[gi]=s[gi]=c,r!==null)for(let u of r)u(c,t);return X0(a,o,s),c}function BI(e,t,i,n){if(n)Ah(e,i,["ng-version","17.3.12"]);else{let{attrs:s,classes:r}=OR(t.selectors[0]);s&&Ah(e,i,s),r&&r.length>0&&U0(e,i,r.join(" "))}}function GI(e,t,i){let n=e.projection=[];for(let s=0;s<t.length;s++){let r=i[s];n.push(r!=null?Array.from(r):null)}}function zI(){let e=ft();Og(me()[Q],e)}var tn=(()=>{class e{static{this.__NG_ELEMENT_ID__=WI}}return e})();function WI(){let e=ft();return Cy(e,me())}var jI=tn,vy=class extends jI{constructor(t,i,n){super(),this._lContainer=t,this._hostTNode=i,this._hostLView=n}get element(){return Mr(this._hostTNode,this._hostLView)}get injector(){return new fs(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ng(this._hostTNode,this._hostLView);if(v0(t)){let i=sc(t,this._hostLView),n=nc(t),s=i[Q].data[n+8];return new fs(s,i)}else return new fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let i=fw(this._lContainer);return i!==null&&i[t]||null}get length(){return this._lContainer.length-Ht}createEmbeddedView(t,i,n){let s,r;typeof n=="number"?s=n:n!=null&&(s=n.index,r=n.injector);let o=cw(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(i||{},r,o);return this.insertImpl(a,s,lw(this._hostTNode,o)),a}createComponent(t,i,n,s,r){let o=t&&!JR(t),a;if(o)a=i;else{let p=i||{};a=p.index,n=p.injector,s=p.projectableNodes,r=p.environmentInjector||p.ngModuleRef}let l=o?t:new xr(Fn(t)),c=n||this.parentInjector;if(!r&&l.ngModule==null){let f=(o?c:this.parentInjector).get(Dt,null);f&&(r=f)}let u=Fn(l.componentType??{}),d=cw(this._lContainer,u?.id??null),h=d?.firstChild??null,g=l.create(c,s,h,r);return this.insertImpl(g.hostView,a,lw(this._hostTNode,d)),g}insert(t,i){return this.insertImpl(t,i,!0)}insertImpl(t,i,n){let s=t._lView;if(u3(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=s[Ye],c=new vy(l,l[fi],l[Ye]);c.detach(c.indexOf(t))}}let r=this._adjustIndex(i),o=this._lContainer;return cI(o,s,r,n),t.attachToViewContainerRef(),kw(xh(o),r,t),t}move(t,i){return this.insert(t,i)}indexOf(t){let i=fw(this._lContainer);return i!==null?i.indexOf(t):-1}remove(t){let i=this._adjustIndex(t,-1),n=Uh(this._lContainer,i);n&&(Xl(xh(this._lContainer),i),z0(n[Q],n))}detach(t){let i=this._adjustIndex(t,-1),n=Uh(this._lContainer,i);return n&&Xl(xh(this._lContainer),i)!=null?new Ss(n):null}_adjustIndex(t,i=0){return t??this.length+i}};function fw(e){return e[tc]}function xh(e){return e[tc]||(e[tc]=[])}function Cy(e,t){let i,n=t[e.index];return Ji(n)?i=n:(i=oy(n,t,null,e),t[e.index]=i,Ic(t,i)),$I(i,t,e,n),new vy(i,e,t)}function UI(e,t){let i=e[He],n=i.createComment(""),s=Qt(t,e),r=Ug(i,s);return ac(i,r,n,EF(i,s),!1),n}var $I=YI,qI=()=>!1;function KI(e,t,i){return qI(e,t,i)}function YI(e,t,i,n){if(e[vs])return;let s;i.type&8?s=Ii(n):s=UI(t,i),e[vs]=s}var rg=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},og=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let i=t.queries;if(i!==null){let n=t.contentQueries!==null?t.contentQueries[0]:i.length,s=[];for(let r=0;r<n;r++){let o=i.getByIndex(r),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new e(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let i=0;i<this.queries.length;i++)ip(t,i).matches!==null&&this.queries[i].setDirty()}},hc=class{constructor(t,i,n=null){this.flags=i,this.read=n,typeof t=="string"?this.predicate=n2(t):this.predicate=t}},ag=class e{constructor(t=[]){this.queries=t}elementStart(t,i){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,i)}elementEnd(t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(t)}embeddedTView(t){let i=null;for(let n=0;n<this.length;n++){let s=i!==null?i.length:0,r=this.getByIndex(n).embeddedTView(t,s);r&&(r.indexInDeclarationView=n,i!==null?i.push(r):i=[r])}return i!==null?new e(i):null}template(t,i){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,i)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},lg=class e{constructor(t,i=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(t,i){this.isApplyingToNode(i)&&this.matchTNode(t,i)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,i){this.elementStart(t,i)}embeddedTView(t,i){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,i),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let i=this._declarationNodeIndex,n=t.parent;for(;n!==null&&n.type&8&&n.index!==i;)n=n.parent;return i===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(t,i){let n=this.metadata.predicate;if(Array.isArray(n))for(let s=0;s<n.length;s++){let r=n[s];this.matchTNodeWithReadOption(t,i,QI(i,r)),this.matchTNodeWithReadOption(t,i,ql(i,t,r,!1,!1))}else n===Sr?i.type&4&&this.matchTNodeWithReadOption(t,i,-1):this.matchTNodeWithReadOption(t,i,ql(i,t,n,!1,!1))}matchTNodeWithReadOption(t,i,n){if(n!==null){let s=this.metadata.read;if(s!==null)if(s===Et||s===tn||s===Sr&&i.type&4)this.addMatch(i.index,-2);else{let r=ql(i,t,s,!1,!1);r!==null&&this.addMatch(i.index,r)}else this.addMatch(i.index,n)}}addMatch(t,i){this.matches===null?this.matches=[t,i]:this.matches.push(t,i)}};function QI(e,t){let i=e.localNames;if(i!==null){for(let n=0;n<i.length;n+=2)if(i[n]===t)return i[n+1]}return null}function ZI(e,t){return e.type&11?Mr(e,t):e.type&4?Xg(e,t):null}function XI(e,t,i,n){return i===-1?ZI(t,e):i===-2?JI(e,t,n):ys(e,e[Q],i,t)}function JI(e,t,i){if(i===Et)return Mr(t,e);if(i===Sr)return Xg(t,e);if(i===tn)return Cy(t,e)}function wy(e,t,i,n){let s=t[Yi].queries[n];if(s.matches===null){let r=e.data,o=i.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=r[c];a.push(XI(t,u,o[l+1],i.metadata.read))}}s.matches=a}return s.matches}function cg(e,t,i,n){let s=e.queries.getByIndex(i),r=s.matches;if(r!==null){let o=wy(e,t,s,i);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)n.push(o[a/2]);else{let c=r[a+1],u=t[-l];for(let d=Ht;d<u.length;d++){let h=u[d];h[Vo]===h[Ye]&&cg(h[Q],h,c,n)}if(u[br]!==null){let d=u[br];for(let h=0;h<d.length;h++){let g=d[h];cg(g[Q],g,c,n)}}}}}return n}function e2(e,t){return e[Yi].queries[t].queryList}function yy(e,t,i){let n=new Wh((i&4)===4);return BF(e,t,n,n.destroy),(t[Yi]??=new og).queries.push(new rg(n))-1}function t2(e,t,i){let n=st();return n.firstCreatePass&&(by(n,new hc(e,t,i),-1),(t&2)===2&&(n.staticViewQueries=!0)),yy(n,me(),t)}function i2(e,t,i,n){let s=st();if(s.firstCreatePass){let r=ft();by(s,new hc(t,i,n),r.index),s2(s,e),(i&2)===2&&(s.staticContentQueries=!0)}return yy(s,me(),i)}function n2(e){return e.split(",").map(t=>t.trim())}function by(e,t,i){e.queries===null&&(e.queries=new ag),e.queries.track(new lg(t,i))}function s2(e,t){let i=e.contentQueries||(e.contentQueries=[]),n=i.length?i[i.length-1]:-1;t!==n&&i.push(e.queries.length-1,t)}function ip(e,t){return e.queries.getByIndex(t)}function r2(e,t){let i=e[Q],n=ip(i,t);return n.crossesNgTemplate?cg(i,e,t,[]):wy(i,e,n,t)}function o2(e){return typeof e=="function"&&e[Kd]!==void 0}function Sy(e){return o2(e)&&typeof e.set=="function"}function a2(e){let t=[],i=new Map;function n(s){let r=i.get(s);if(!r){let o=e(s);i.set(s,r=o.then(d2))}return r}return gc.forEach((s,r)=>{let o=[];s.templateUrl&&o.push(n(s.templateUrl).then(c=>{s.template=c}));let a=typeof s.styles=="string"?[s.styles]:s.styles||[];if(s.styles=a,s.styleUrl&&s.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(s.styleUrls?.length){let c=s.styles.length,u=s.styleUrls;s.styleUrls.forEach((d,h)=>{a.push(""),o.push(n(d).then(g=>{a[c+h]=g,u.splice(u.indexOf(d),1),u.length==0&&(s.styleUrls=void 0)}))})}else s.styleUrl&&o.push(n(s.styleUrl).then(c=>{a.push(c),s.styleUrl=void 0}));let l=Promise.all(o).then(()=>h2(r));t.push(l)}),c2(),Promise.all(t).then(()=>{})}var gc=new Map,l2=new Set;function c2(){let e=gc;return gc=new Map,e}function u2(){return gc.size===0}function d2(e){return typeof e=="string"?e:e.text()}function h2(e){l2.delete(e)}function g2(e){return Object.getPrototypeOf(e.prototype).constructor}function Ai(e){let t=g2(e.type),i=!0,n=[e];for(;t;){let s;if(Pn(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new L(903,!1);s=t.\u0275dir}if(s){if(i){n.push(s);let o=e;o.inputs=Gl(e.inputs),o.inputTransforms=Gl(e.inputTransforms),o.declaredInputs=Gl(e.declaredInputs),o.outputs=Gl(e.outputs);let a=s.hostBindings;a&&C2(e,a);let l=s.viewQuery,c=s.contentQueries;if(l&&m2(e,l),c&&v2(e,c),p2(e,s),tR(e.outputs,s.outputs),Pn(s)&&s.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(s.data.animation)}}let r=s.features;if(r)for(let o=0;o<r.length;o++){let a=r[o];a&&a.ngInherit&&a(e),a===Ai&&(i=!1)}}t=Object.getPrototypeOf(t)}f2(n)}function p2(e,t){for(let i in t.inputs){if(!t.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;let n=t.inputs[i];if(n!==void 0&&(e.inputs[i]=n,e.declaredInputs[i]=t.declaredInputs[i],t.inputTransforms!==null)){let s=Array.isArray(n)?n[0]:n;if(!t.inputTransforms.hasOwnProperty(s))continue;e.inputTransforms??={},e.inputTransforms[s]=t.inputTransforms[s]}}}function f2(e){let t=0,i=null;for(let n=e.length-1;n>=0;n--){let s=e[n];s.hostVars=t+=s.hostVars,s.hostAttrs=Ro(s.hostAttrs,i=Ro(i,s.hostAttrs))}}function Gl(e){return e===vr?{}:e===Yt?[]:e}function m2(e,t){let i=e.viewQuery;i?e.viewQuery=(n,s)=>{t(n,s),i(n,s)}:e.viewQuery=t}function v2(e,t){let i=e.contentQueries;i?e.contentQueries=(n,s,r)=>{t(n,s,r),i(n,s,r)}:e.contentQueries=t}function C2(e,t){let i=e.hostBindings;i?e.hostBindings=(n,s)=>{t(n,s),i(n,s)}:e.hostBindings=t}function np(e){let t=e.inputConfig,i={};for(let n in t)if(t.hasOwnProperty(n)){let s=t[n];Array.isArray(s)&&s[3]&&(i[n]=s[3])}e.inputTransforms=i}var An=class{},_o=class{};var pc=class extends An{constructor(t,i,n){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dc(this);let s=zw(t);this._bootstrapComponents=V0(s.bootstrap),this._r3Injector=M0(t,i,[{provide:An,useValue:this},{provide:Pc,useValue:this.componentFactoryResolver},...n],ht(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},fc=class extends _o{constructor(t){super(),this.moduleType=t}create(t){return new pc(this.moduleType,t,[])}};function w2(e,t,i){return new pc(e,t,i)}var ug=class extends An{constructor(t){super(),this.componentFactoryResolver=new dc(this),this.instance=null;let i=new Fo([...t.providers,{provide:An,useValue:this},{provide:Pc,useValue:this.componentFactoryResolver}],t.parent||Dg(),t.debugName,new Set(["environment"]));this.injector=i,t.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Tc(e,t,i=null){return new ug({providers:e,parent:t,debugName:i,runEnvironmentInitializers:!0}).injector}var kc=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function _c(e,t,i){let n=e[t];return Object.is(n,i)?!1:(e[t]=i,!0)}function y2(e){return(e.flags&32)===32}function b2(e,t,i,n,s,r,o,a,l){let c=t.consts,u=Fc(t,e,4,o||null,ic(c,a));ny(t,i,u,ic(c,l)),Og(t,u);let d=u.tView=Kg(2,u,n,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function zo(e,t,i,n,s,r,o,a){let l=me(),c=st(),u=e+In,d=c.firstCreatePass?b2(u,c,l,t,i,n,s,r,o):c.data[u];Ho(d,!1);let h=S2(c,l,d,e);_g()&&$g(c,l,h,d),bs(h,l);let g=oy(h,l,h,d);return l[u]=g,Ic(l,g),KI(g,d,l),Mg(d)&&J0(c,l,d),o!=null&&ey(l,d,a),zo}var S2=x2;function x2(e,t,i,n){return Lg(!0),t[He].createComment("")}function Wo(e,t,i,n){let s=me(),r=Ig();if(_c(s,r,t)){let o=st(),a=kg();tI(a,s,e,t,i,n)}return Wo}function zl(e,t){return e<<17|t<<2}function xs(e){return e>>17&32767}function D2(e){return(e&2)==2}function E2(e,t){return e&131071|t<<17}function dg(e){return e|2}function Dr(e){return(e&131068)>>2}function Dh(e,t){return e&-131069|t<<2}function M2(e){return(e&1)===1}function hg(e){return e|1}function R2(e,t,i,n,s,r){let o=r?t.classBindings:t.styleBindings,a=xs(o),l=Dr(o);e[n]=i;let c=!1,u;if(Array.isArray(i)){let d=i;u=d[1],(u===null||No(d,u)>0)&&(c=!0)}else u=i;if(s)if(l!==0){let h=xs(e[a+1]);e[n+1]=zl(h,a),h!==0&&(e[h+1]=Dh(e[h+1],n)),e[a+1]=E2(e[a+1],n)}else e[n+1]=zl(a,0),a!==0&&(e[a+1]=Dh(e[a+1],n)),a=n;else e[n+1]=zl(l,0),a===0?a=n:e[l+1]=Dh(e[l+1],n),l=n;c&&(e[n+1]=dg(e[n+1])),mw(e,u,n,!0),mw(e,u,n,!1),F2(t,u,e,n,r),o=zl(a,l),r?t.classBindings=o:t.styleBindings=o}function F2(e,t,i,n,s){let r=s?e.residualClasses:e.residualStyles;r!=null&&typeof t=="string"&&No(r,t)>=0&&(i[n+1]=hg(i[n+1]))}function mw(e,t,i,n){let s=e[i+1],r=t===null,o=n?xs(s):Dr(s),a=!1;for(;o!==0&&(a===!1||r);){let l=e[o],c=e[o+1];I2(l,t)&&(a=!0,e[o+1]=n?hg(c):dg(c)),o=n?xs(c):Dr(c)}a&&(e[i+1]=n?dg(s):hg(s))}function I2(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?No(e,t)>=0:!1}function nn(e,t,i){let n=me(),s=Ig();if(_c(n,s,t)){let r=st(),o=kg();iy(r,o,n,e,t,n[He],i,!1)}return nn}function vw(e,t,i,n,s){let r=t.inputs,o=s?"class":"style";Yg(e,i,r[o],o,n)}function Lc(e,t){return P2(e,t,null,!0),Lc}function P2(e,t,i,n){let s=me(),r=st(),o=x3(2);if(r.firstUpdatePass&&T2(r,e,o,n),t!==Mc&&_c(s,o,t)){let a=r.data[Bo()];N2(r,a,s,s[He],e,s[o+1]=V2(t,i),n,o)}}function A2(e,t){return t>=e.expandoStartIndex}function T2(e,t,i,n){let s=e.data;if(s[i+1]===null){let r=s[Bo()],o=A2(e,i);H2(r,n)&&t===null&&!o&&(t=!1),t=k2(s,r,t,n),R2(s,r,t,i,o,n)}}function k2(e,t,i,n){let s=R3(e),r=n?t.residualClasses:t.residualStyles;if(s===null)(n?t.classBindings:t.styleBindings)===0&&(i=Eh(null,e,t,i,n),i=Lo(i,t.attrs,n),r=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==s)if(i=Eh(s,e,t,i,n),r===null){let l=_2(e,t,n);l!==void 0&&Array.isArray(l)&&(l=Eh(null,e,t,l[1],n),l=Lo(l,t.attrs,n),L2(e,t,n,l))}else r=O2(e,t,n)}return r!==void 0&&(n?t.residualClasses=r:t.residualStyles=r),i}function _2(e,t,i){let n=i?t.classBindings:t.styleBindings;if(Dr(n)!==0)return e[xs(n)]}function L2(e,t,i,n){let s=i?t.classBindings:t.styleBindings;e[xs(s)]=n}function O2(e,t,i){let n,s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++){let o=e[r].hostAttrs;n=Lo(n,o,i)}return Lo(n,t.attrs,i)}function Eh(e,t,i,n,s){let r=null,o=i.directiveEnd,a=i.directiveStylingLast;for(a===-1?a=i.directiveStart:a++;a<o&&(r=t[a],n=Lo(n,r.hostAttrs,s),r!==e);)a++;return e!==null&&(i.directiveStylingLast=a),n}function Lo(e,t,i){let n=i?1:2,s=-1;if(t!==null)for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?s=o:s===n&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),xR(e,o,i?!0:t[++r]))}return e===void 0?null:e}function N2(e,t,i,n,s,r,o,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=M2(c)?Cw(l,t,i,s,Dr(c),o):void 0;if(!mc(u)){mc(r)||D2(c)&&(r=Cw(l,null,i,s,a,o));let d=l3(Bo(),i);TF(n,o,d,s,r)}}function Cw(e,t,i,n,s,r){let o=t===null,a;for(;s>0;){let l=e[s],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=i[s+1];h===Mc&&(h=d?Yt:void 0);let g=d?ph(h,n):u===n?h:void 0;if(c&&!mc(g)&&(g=ph(l,n)),mc(g)&&(a=g,o))return a;let p=e[s+1];s=o?xs(p):Dr(p)}if(t!==null){let l=r?t.residualClasses:t.residualStyles;l!=null&&(a=ph(l,n))}return a}function mc(e){return e!==void 0}function V2(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=ht(Go(e)))),e}function H2(e,t){return(e.flags&(t?8:16))!==0}function B2(e,t,i,n,s,r){let o=t.consts,a=ic(o,s),l=Fc(t,e,2,n,a);return ny(t,i,l,ic(o,r)),l.attrs!==null&&ig(l,l.attrs,!1),l.mergedAttrs!==null&&ig(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function z(e,t,i,n){let s=me(),r=st(),o=In+e,a=s[He],l=r.firstCreatePass?B2(o,r,s,t,i,n):r.data[o],c=G2(r,s,l,a,t,e);s[o]=c;let u=Mg(l);return Ho(l,!0),$0(a,c,l),!y2(l)&&_g()&&$g(r,s,c,l),p3()===0&&bs(c,s),f3(),u&&(J0(r,s,l),X0(r,l,s)),n!==null&&ey(s,l),z}function j(){let e=ft();l0()?b3():(e=e.parent,Ho(e,!1));let t=e;C3(t)&&w3(),m3();let i=st();return i.firstCreatePass&&(Og(i,e),Xw(e)&&i.queries.elementEnd(e)),t.classesWithoutHost!=null&&_3(t)&&vw(i,t,me(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&L3(t)&&vw(i,t,me(),t.stylesWithoutHost,!1),j}function Qe(e,t,i,n){return z(e,t,i,n),j(),Qe}var G2=(e,t,i,n,s,r)=>(Lg(!0),H0(n,s,P3()));function Oc(){return me()}var vc="en-US";var z2=vc;function W2(e){typeof e=="string"&&(z2=e.toLowerCase().replace(/_/g,"-"))}function je(e,t,i,n){let s=me(),r=st(),o=ft();return xy(r,s,s[He],o,e,t,n),je}function j2(e,t,i,n){let s=e.cleanup;if(s!=null)for(let r=0;r<s.length-1;r+=2){let o=s[r];if(o===i&&s[r+1]===n){let a=t[Io],l=s[r+2];return a.length>l?a[l]:null}typeof o=="string"&&(r+=2)}return null}function xy(e,t,i,n,s,r,o){let a=Mg(n),c=e.firstCreatePass&&cy(e),u=t[gi],d=ly(t),h=!0;if(n.type&3||o){let f=Qt(n,t),m=o?o(f):f,v=d.length,C=o?y=>o(Ii(y[n.index])):n.index,w=null;if(!o&&a&&(w=j2(e,t,s,n.index)),w!==null){let y=w.__ngLastListenerFn__||w;y.__ngNextListenerFn__=r,w.__ngLastListenerFn__=r,h=!1}else{r=yw(n,t,u,r,!1);let y=i.listen(m,s,r);d.push(r,y),c&&c.push(s,C,v,v+1)}}else r=yw(n,t,u,r,!1);let g=n.outputs,p;if(h&&g!==null&&(p=g[s])){let f=p.length;if(f)for(let m=0;m<f;m+=2){let v=p[m],C=p[m+1],S=t[v][C].subscribe(r),b=d.length;d.push(r,S),c&&c.push(s,n.index,b,-(b+1))}}}function ww(e,t,i,n){let s=ue(null);try{return Ei(6,t,i),i(n)!==!1}catch(r){return uy(e,r),!1}finally{Ei(7,t,i),ue(s)}}function yw(e,t,i,n,s){return function r(o){if(o===Function)return n;let a=e.componentOffset>-1?kn(e.index,t):t;Zg(a);let l=ww(t,i,n,o),c=r.__ngNextListenerFn__;for(;c;)l=ww(t,i,c,o)&&l,c=c.__ngNextListenerFn__;return s&&l===!1&&o.preventDefault(),l}}function Ze(e=1){return I3(e)}function Dy(e,t,i,n){i2(e,t,i,n)}function Ey(e,t,i){t2(e,t,i)}function Nc(e){let t=me(),i=st(),n=c0();Pg(n+1);let s=ip(i,n);if(e.dirty&&c3(t)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let r=r2(t,n);e.reset(r,K3),e.notifyOnChanges()}return!0}return!1}function Vc(){return e2(me(),c0())}function Se(e,t=""){let i=me(),n=st(),s=e+In,r=n.firstCreatePass?Fc(n,s,1,t,null):n.data[s],o=U2(n,i,r,t,e);i[s]=o,_g()&&$g(n,i,o,r),Ho(r,!1)}var U2=(e,t,i,n,s)=>(Lg(!0),pF(t[He],n));function Mt(e,t,i){Sy(t)&&(t=t());let n=me(),s=Ig();if(_c(n,s,t)){let r=st(),o=kg();iy(r,o,n,e,t,n[He],i,!1)}return Mt}function Bt(e,t){let i=Sy(e);return i&&e.set(t),i}function Rt(e,t){let i=me(),n=st(),s=ft();return xy(n,i,i[He],s,e,t),Rt}function $2(e,t,i){let n=st();if(n.firstCreatePass){let s=Pn(e);gg(i,n.data,n.blueprint,s,!0),gg(t,n.data,n.blueprint,s,!1)}}function gg(e,t,i,n,s){if(e=ut(e),Array.isArray(e))for(let r=0;r<e.length;r++)gg(e[r],t,i,n,s);else{let r=st(),o=me(),a=ft(),l=wr(e)?e:ut(e.provide),c=Kw(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(wr(e)||!e.multi){let g=new ws(c,s,q),p=Rh(l,t,s?u:u+h,d);p===-1?(Hh(rc(a,o),r,l),Mh(r,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),i.push(g),o.push(g)):(i[p]=g,o[p]=g)}else{let g=Rh(l,t,u+h,d),p=Rh(l,t,u,u+h),f=g>=0&&i[g],m=p>=0&&i[p];if(s&&!m||!s&&!f){Hh(rc(a,o),r,l);let v=Y2(s?K2:q2,i.length,s,n,c);!s&&m&&(i[p].providerFactory=v),Mh(r,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),i.push(v),o.push(v)}else{let v=My(i[s?p:g],c,!s&&n);Mh(r,e,g>-1?g:p,v)}!s&&n&&m&&i[p].componentProviders++}}}function Mh(e,t,i,n){let s=wr(t),r=jR(t);if(s||r){let l=(r?ut(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){let u=c.indexOf(i);u===-1?c.push(i,[n,l]):c[u+1].push(n,l)}else c.push(i,l)}}}function My(e,t,i){return i&&e.componentProviders++,e.multi.push(t)-1}function Rh(e,t,i,n){for(let s=i;s<n;s++)if(t[s]===e)return s;return-1}function q2(e,t,i,n){return pg(this.multi,[])}function K2(e,t,i,n){let s=this.multi,r;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ys(i,i[Q],this.providerFactory.index,n);r=a.slice(0,o),pg(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],pg(s,r);return r}function pg(e,t){for(let i=0;i<e.length;i++){let n=e[i];t.push(n())}return t}function Y2(e,t,i,n,s){let r=new ws(e,i,q);return r.multi=[],r.index=t,r.componentProviders=0,My(r,s,n&&!i),r}function On(e,t=[]){return i=>{i.providersResolver=(n,s)=>$2(n,s?s(e):e,t)}}var Q2=(()=>{class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let n=Uw(!1,i.type),s=n.length>0?Tc([n],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(H(Dt))})}}return e})();function Hc(e){Jg("NgStandalone"),e.getStandaloneInjector=t=>t.get(Q2).getOrCreateStandaloneInjector(e)}var Wl=null;function Z2(e){Wl!==null&&(e.defaultEncapsulation!==Wl.defaultEncapsulation||e.preserveWhitespaces!==Wl.preserveWhitespaces)||(Wl=e)}var Bc=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var sp=new G(""),jo=new G(""),Gc=(()=>{class e{constructor(i,n,s){this._ngZone=i,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,rp||(X2(s),s.addToWindow(n)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>n.updateCb&&n.updateCb(i)?(clearTimeout(n.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,n,s){let r=-1;n&&n>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==r),i()},n)),this._callbacks.push({doneCb:i,timeoutId:r,updateCb:s})}whenStable(i,n,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,n,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,n,s){return[]}static{this.\u0275fac=function(n){return new(n||e)(H(he),H(zc),H(jo))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),zc=(()=>{class e{constructor(){this._applications=new Map}registerApplication(i,n){this._applications.set(i,n)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,n=!0){return rp?.findTestabilityInTree(this,i,n)??null}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function X2(e){rp=e}var rp;function Ds(e){return!!e&&typeof e.then=="function"}function Ry(e){return!!e&&typeof e.subscribe=="function"}var Wc=new G(""),Fy=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,n)=>{this.resolve=i,this.reject=n}),this.appInits=k(Wc,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let r=s();if(Ds(r))i.push(r);else if(Ry(r)){let o=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});i.push(o)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{n()}).catch(s=>{this.reject(s)}),i.length===0&&n(),this.initialized=!0}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),op=new G("");function J2(){pC(()=>{throw new L(600,!1)})}function eP(e){return e.isBoundToModule}function tP(e,t,i){try{let n=i();return Ds(n)?n.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):n}catch(n){throw t.runOutsideAngular(()=>e.handleError(n)),n}}function Iy(e,t){return Array.isArray(t)?t.reduce(Iy,e):D(D({},e),t)}var Rr=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(R0),this.afterRenderEffectManager=k(tp),this.externalTestViews=new Set,this.beforeRender=new it,this.afterTick=new it,this.componentTypes=[],this.components=[],this.isStable=k(kc).hasPendingTasks.pipe(re(i=>!i)),this._injector=k(Dt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,n){let s=i instanceof uc;if(!this._injector.get(Fy).done){let h=!s&&Gw(i),g=!1;throw new L(405,g)}let o;s?o=i:o=this._injector.get(Pc).resolveComponentFactory(i),this.componentTypes.push(o.componentType);let a=eP(o)?void 0:this._injector.get(An),l=n||o.selector,c=o.create(vi.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(sp,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Yl(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new L(101,!1);let n=ue(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,ue(n)}}detectChangesInAttachedViews(i){let n=0,s=this.afterRenderEffectManager;for(;;){if(n===hy)throw new L(103,!1);if(i){let r=n===0;this.beforeRender.next(r);for(let{_lView:o,notifyErrorHandler:a}of this._views)iP(o,r,a)}if(n++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>fg(r))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:r})=>fg(r))))break}}attachView(i){let n=i;this._views.push(n),n.attachToAppRef(this)}detachView(i){let n=i;Yl(this._views,n),n.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let n=this._injector.get(op,[]);[...this._bootstrapListeners,...n].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Yl(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new L(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Yl(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function iP(e,t,i){!t&&!fg(e)||nP(e,i,t)}function fg(e){return Fg(e)}function nP(e,t,i){let n;i?(n=0,e[U]|=1024):e[U]&64?n=0:n=1,gy(e,t,n)}var mg=class{constructor(t,i){this.ngModuleFactory=t,this.componentFactories=i}},jc=(()=>{class e{compileModuleSync(i){return new fc(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let n=this.compileModuleSync(i),s=zw(i),r=V0(s.declarations).reduce((o,a)=>{let l=Fn(a);return l&&o.push(new xr(l)),o},[]);return new mg(n,r)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),sP=new G("");function rP(e,t,i){let n=new fc(i);return Promise.resolve(n)}function bw(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var oP=(()=>{class e{constructor(){this.zone=k(he),this.applicationRef=k(Rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function aP(e){return[{provide:he,useFactory:e},{provide:Cr,multi:!0,useFactory:()=>{let t=k(oP,{optional:!0});return()=>t.initialize()}},{provide:Cr,multi:!0,useFactory:()=>{let t=k(uP);return()=>{t.initialize()}}},{provide:R0,useFactory:lP}]}function lP(){let e=k(he),t=k(Pi);return i=>e.runOutsideAngular(()=>t.handleError(i))}function cP(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var uP=(()=>{class e{constructor(){this.subscription=new Ne,this.initialized=!1,this.zone=k(he),this.pendingTasks=k(kc)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dP(){return typeof $localize<"u"&&$localize.locale||vc}var ap=new G("",{providedIn:"root",factory:()=>k(ap,Z.Optional|Z.SkipSelf)||dP()});var Py=new G(""),Ay=(()=>{class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,n){let s=kI(n?.ngZone,cP({eventCoalescing:n?.ngZoneEventCoalescing,runCoalescing:n?.ngZoneRunCoalescing}));return s.run(()=>{let r=w2(i.moduleType,this.injector,aP(()=>s)),o=r.injector.get(Pi,null);return s.runOutsideAngular(()=>{let a=s.onError.subscribe({next:l=>{o.handleError(l)}});r.onDestroy(()=>{Yl(this._modules,r),a.unsubscribe()})}),tP(o,s,()=>{let a=r.injector.get(Fy);return a.runInitializers(),a.donePromise.then(()=>{let l=r.injector.get(ap,vc);return W2(l||vc),this._moduleDoBootstrap(r),r})})})}bootstrapModule(i,n=[]){let s=Iy({},n);return rP(this.injector,s,i).then(r=>this.bootstrapModuleFactory(r,s))}_moduleDoBootstrap(i){let n=i.injector.get(Rr);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(s=>n.bootstrap(s));else if(i.instance.ngDoBootstrap)i.instance.ngDoBootstrap(n);else throw new L(-403,!1);this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new L(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());let i=this._injector.get(Py,null);i&&(i.forEach(n=>n()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(n){return new(n||e)(H(vi))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Eo=null,Ty=new G("");function hP(e){if(Eo&&!Eo.get(Ty,!1))throw new L(400,!1);J2(),Eo=e;let t=e.get(Ay);return fP(e),t}function lp(e,t,i=[]){let n=`Platform: ${t}`,s=new G(n);return(r=[])=>{let o=ky();if(!o||o.injector.get(Ty,!1)){let a=[...i,...r,{provide:s,useValue:!0}];e?e(a):hP(gP(a,n))}return pP(s)}}function gP(e=[],t){return vi.create({name:t,providers:[{provide:yc,useValue:"platform"},{provide:Py,useValue:new Set([()=>Eo=null])},...e]})}function pP(e){let t=ky();if(!t)throw new L(401,!1);return t}function ky(){return Eo?.get(Ay)??null}function fP(e){e.get(Bg,null)?.forEach(i=>i())}var Zt=(()=>{class e{static{this.__NG_ELEMENT_ID__=mP}}return e})();function mP(e){return vP(ft(),me(),(e&16)===16)}function vP(e,t,i){if(Sc(e)&&!i){let n=kn(e.index,t);return new Ss(n,n)}else if(e.type&47){let n=t[Fi];return new Ss(n,t)}return null}var _y=lp(null,"core",[]),Ly=(()=>{class e{constructor(i){}static{this.\u0275fac=function(n){return new(n||e)(H(Rr))}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({})}}return e})();function Nn(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function Oy(e){let t=Fn(e);if(!t)return null;let i=new xr(t);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var By=null;function Ti(){return By}function Gy(e){By??=e}var Uc=class{};var Ft=new G(""),gp=(()=>{class e{historyGo(i){throw new Error("")}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>k(CP),providedIn:"platform"})}}return e})(),zy=new G(""),CP=(()=>{class e extends gp{constructor(){super(),this._doc=k(Ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ti().getBaseHref(this._doc)}onPopState(i){let n=Ti().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",i,!1),()=>n.removeEventListener("popstate",i)}onHashChange(i){let n=Ti().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",i,!1),()=>n.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,n,s){this._history.pushState(i,n,s)}replaceState(i,n,s){this._history.replaceState(i,n,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function pp(e,t){if(e.length==0)return t;if(t.length==0)return e;let i=0;return e.endsWith("/")&&i++,t.startsWith("/")&&i++,i==2?e+t.substring(1):i==1?e+t:e+"/"+t}function Ny(e){let t=e.match(/#|\?|$/),i=t&&t.index||e.length,n=i-(e[i-1]==="/"?1:0);return e.slice(0,n)+e.slice(i)}function sn(e){return e&&e[0]!=="?"?"?"+e:e}var rn=(()=>{class e{historyGo(i){throw new Error("")}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>k(fp),providedIn:"root"})}}return e})(),Wy=new G(""),fp=(()=>{class e extends rn{constructor(i,n){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??k(Ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return pp(this._baseHref,i)}path(i=!1){let n=this._platformLocation.pathname+sn(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${n}${s}`:n}pushState(i,n,s,r){let o=this.prepareExternalUrl(s+sn(r));this._platformLocation.pushState(i,n,o)}replaceState(i,n,s,r){let o=this.prepareExternalUrl(s+sn(r));this._platformLocation.replaceState(i,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}static{this.\u0275fac=function(n){return new(n||e)(H(gp),H(Wy,8))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),jy=(()=>{class e extends rn{constructor(i,n){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],n!=null&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let n=this._platformLocation.hash??"#";return n.length>0?n.substring(1):n}prepareExternalUrl(i){let n=pp(this._baseHref,i);return n.length>0?"#"+n:n}pushState(i,n,s,r){let o=this.prepareExternalUrl(s+sn(r));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(i,n,o)}replaceState(i,n,s,r){let o=this.prepareExternalUrl(s+sn(r));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(i,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}static{this.\u0275fac=function(n){return new(n||e)(H(gp),H(Wy,8))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Fr=(()=>{class e{constructor(i){this._subject=new I,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let n=this._locationStrategy.getBaseHref();this._basePath=bP(Ny(Vy(n))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,n=""){return this.path()==this.normalize(i+sn(n))}normalize(i){return e.stripTrailingSlash(yP(this._basePath,Vy(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,n="",s=null){this._locationStrategy.pushState(s,"",i,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+sn(n)),s)}replaceState(i,n="",s=null){this._locationStrategy.replaceState(s,"",i,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+sn(n)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",n){this._urlChangeListeners.forEach(s=>s(i,n))}subscribe(i,n,s){return this._subject.subscribe({next:i,error:n,complete:s})}static{this.normalizeQueryParams=sn}static{this.joinWithSlash=pp}static{this.stripTrailingSlash=Ny}static{this.\u0275fac=function(n){return new(n||e)(H(rn))}}static{this.\u0275prov=O({token:e,factory:()=>wP(),providedIn:"root"})}}return e})();function wP(){return new Fr(H(rn))}function yP(e,t){if(!e||!t.startsWith(e))return t;let i=t.substring(e.length);return i===""||["/",";","?","#"].includes(i[0])?i:t}function Vy(e){return e.replace(/\/index.html$/,"")}function bP(e){if(new RegExp("^(https?:)?//").test(e)){let[,i]=e.split(/\/\/[^\/]+/);return i}return e}function Uy(e,t){t=encodeURIComponent(t);for(let i of e.split(";")){let n=i.indexOf("="),[s,r]=n==-1?[i,""]:[i.slice(0,n),i.slice(n+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}var qc=(()=>{class e{constructor(i,n){this._viewContainer=i,this._context=new cp,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){Hy("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){Hy("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,n){return!0}static{this.\u0275fac=function(n){return new(n||e)(q(tn),q(Sr))}}static{this.\u0275dir=We({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),cp=class{constructor(){this.$implicit=null,this.ngIf=null}};function Hy(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${ht(t)}'.`)}var Kc=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({})}}return e})(),mp="browser",SP="server";function xP(e){return e===mp}function vp(e){return e===SP}var $y=(()=>{class e{static{this.\u0275prov=O({token:e,providedIn:"root",factory:()=>xP(k(_n))?new up(k(Ft),window):new dp})}}return e})(),up=class{constructor(t,i){this.document=t,this.window=i,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let i=DP(this.document,t);i&&(this.scrollToElement(i),i.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let i=t.getBoundingClientRect(),n=i.left+this.window.pageXOffset,s=i.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],s-r[1])}};function DP(e,t){let i=e.getElementById(t)||e.getElementsByName(t)[0];if(i)return i;if(typeof e.createTreeWalker=="function"&&e.body&&typeof e.body.attachShadow=="function"){let n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),s=n.currentNode;for(;s;){let r=s.shadowRoot;if(r){let o=r.getElementById(t)||r.querySelector(`[name="${t}"]`);if(o)return o}s=n.nextNode()}}return null}var dp=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},$c=class{};var bp=class extends Uc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Sp=class e extends bp{static makeCurrent(){Gy(new e)}onAndCancel(t,i,n){return t.addEventListener(i,n),()=>{t.removeEventListener(i,n)}}dispatchEvent(t,i){t.dispatchEvent(i)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,i){return i=i||this.getDefaultDocument(),i.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,i){return i==="window"?window:i==="document"?t:i==="body"?t.body:null}getBaseHref(t){let i=MP();return i==null?null:RP(i)}resetBaseElement(){Uo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Uy(document.cookie,t)}},Uo=null;function MP(){return Uo=Uo||document.querySelector("base"),Uo?Uo.getAttribute("href"):null}function RP(e){return new URL(e,document.baseURI).pathname}var xp=class{addToWindow(t){dt.getAngularTestability=(n,s=!0)=>{let r=t.findTestabilityInTree(n,s);if(r==null)throw new L(5103,!1);return r},dt.getAllAngularTestabilities=()=>t.getAllTestabilities(),dt.getAllAngularRootElements=()=>t.getAllRootElements();let i=n=>{let s=dt.getAllAngularTestabilities(),r=s.length,o=function(){r--,r==0&&n()};s.forEach(a=>{a.whenStable(o)})};dt.frameworkStabilizers||(dt.frameworkStabilizers=[]),dt.frameworkStabilizers.push(i)}findTestabilityInTree(t,i,n){if(i==null)return null;let s=t.getTestability(i);return s??(n?Ti().isShadowRoot(i)?this.findTestabilityInTree(t,i.host,!0):this.findTestabilityInTree(t,i.parentElement,!0):null)}},FP=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Dp=new G(""),Qy=(()=>{class e{constructor(i,n){this._zone=n,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,n,s){return this._findPluginFor(n).addEventListener(i,n,s)}getZone(){return this._zone}_findPluginFor(i){let n=this._eventNameToPlugin.get(i);if(n)return n;if(n=this._plugins.find(r=>r.supports(i)),!n)throw new L(5101,!1);return this._eventNameToPlugin.set(i,n),n}static{this.\u0275fac=function(n){return new(n||e)(H(Dp),H(he))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Yc=class{constructor(t){this._doc=t}},wp="ng-app-id",Zy=(()=>{class e{constructor(i,n,s,r={}){this.doc=i,this.appId=n,this.nonce=s,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vp(r),this.resetHostNodes()}addStyles(i){for(let n of i)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(i){for(let n of i)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(n=>n.remove()),i.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let n of this.getAllStyles())this.addStyleToHost(i,n)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let n of this.hostNodes)this.addStyleToHost(n,i)}onStyleRemoved(i){let n=this.styleRef;n.get(i)?.elements?.forEach(s=>s.remove()),n.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${wp}="${this.appId}"]`);if(i?.length){let n=new Map;return i.forEach(s=>{s.textContent!=null&&n.set(s.textContent,s)}),n}return null}changeUsageCount(i,n){let s=this.styleRef;if(s.has(i)){let r=s.get(i);return r.usage+=n,r.usage}return s.set(i,{usage:n,elements:[]}),n}getStyleElement(i,n){let s=this.styleNodesInDOM,r=s?.get(n);if(r?.parentNode===i)return s.delete(n),r.removeAttribute(wp),r;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(wp,this.appId),i.appendChild(o),o}}addStyleToHost(i,n){let s=this.getStyleElement(i,n),r=this.styleRef,o=r.get(n)?.elements;o?o.push(s):r.set(n,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||e)(H(Ft),H(xc),H(Gg,8),H(_n))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),yp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mp=/%COMP%/g,Xy="%COMP%",IP=`_nghost-${Xy}`,PP=`_ngcontent-${Xy}`,AP=!0,TP=new G("",{providedIn:"root",factory:()=>AP});function kP(e){return PP.replace(Mp,e)}function _P(e){return IP.replace(Mp,e)}function Jy(e,t){return t.map(i=>i.replace(Mp,e))}var qy=(()=>{class e{constructor(i,n,s,r,o,a,l,c=null){this.eventManager=i,this.sharedStylesHost=n,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=vp(a),this.defaultRenderer=new $o(i,o,l,this.platformIsServer)}createRenderer(i,n){if(!i||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Ri.ShadowDom&&(n=_(D({},n),{encapsulation:Ri.Emulated}));let s=this.getOrCreateRenderer(i,n);return s instanceof Qc?s.applyToHost(i):s instanceof qo&&s.applyStyles(),s}getOrCreateRenderer(i,n){let s=this.rendererByCompId,r=s.get(n.id);if(!r){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(n.encapsulation){case Ri.Emulated:r=new Qc(l,c,n,this.appId,u,o,a,d);break;case Ri.ShadowDom:return new Ep(l,c,i,n,o,a,this.nonce,d);default:r=new qo(l,c,n,u,o,a,d);break}s.set(n.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||e)(H(Qy),H(Zy),H(xc),H(TP),H(Ft),H(_n),H(he),H(Gg))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),$o=class{constructor(t,i,n,s){this.eventManager=t,this.doc=i,this.ngZone=n,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,i){return i?this.doc.createElementNS(yp[i]||i,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,i){(Ky(t)?t.content:t).appendChild(i)}insertBefore(t,i,n){t&&(Ky(t)?t.content:t).insertBefore(i,n)}removeChild(t,i){t&&t.removeChild(i)}selectRootElement(t,i){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new L(-5104,!1);return i||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,i,n,s){if(s){i=s+":"+i;let r=yp[s];r?t.setAttributeNS(r,i,n):t.setAttribute(i,n)}else t.setAttribute(i,n)}removeAttribute(t,i,n){if(n){let s=yp[n];s?t.removeAttributeNS(s,i):t.removeAttribute(`${n}:${i}`)}else t.removeAttribute(i)}addClass(t,i){t.classList.add(i)}removeClass(t,i){t.classList.remove(i)}setStyle(t,i,n,s){s&(Qi.DashCase|Qi.Important)?t.style.setProperty(i,n,s&Qi.Important?"important":""):t.style[i]=n}removeStyle(t,i,n){n&Qi.DashCase?t.style.removeProperty(i):t.style[i]=""}setProperty(t,i,n){t!=null&&(t[i]=n)}setValue(t,i){t.nodeValue=i}listen(t,i,n){if(typeof t=="string"&&(t=Ti().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${i}`);return this.eventManager.addEventListener(t,i,this.decoratePreventDefault(n))}decoratePreventDefault(t){return i=>{if(i==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(i)):t(i))===!1&&i.preventDefault()}}};function Ky(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ep=class extends $o{constructor(t,i,n,s,r,o,a,l){super(t,r,o,l),this.sharedStylesHost=i,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Jy(s.id,s.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,i){return super.appendChild(this.nodeOrShadowRoot(t),i)}insertBefore(t,i,n){return super.insertBefore(this.nodeOrShadowRoot(t),i,n)}removeChild(t,i){return super.removeChild(this.nodeOrShadowRoot(t),i)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qo=class extends $o{constructor(t,i,n,s,r,o,a,l){super(t,r,o,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=s,this.styles=l?Jy(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qc=class extends qo{constructor(t,i,n,s,r,o,a,l){let c=s+"-"+n.id;super(t,i,n,r,o,a,l,c),this.contentAttr=kP(c),this.hostAttr=_P(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,i){let n=super.createElement(t,i);return super.setAttribute(n,this.contentAttr,""),n}},LP=(()=>{class e extends Yc{constructor(i){super(i)}supports(i){return!0}addEventListener(i,n,s){return i.addEventListener(n,s,!1),()=>this.removeEventListener(i,n,s)}removeEventListener(i,n,s){return i.removeEventListener(n,s)}static{this.\u0275fac=function(n){return new(n||e)(H(Ft))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Yy=["alt","control","meta","shift"],OP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},VP=(()=>{class e extends Yc{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,n,s){let r=e.parseEventName(n),o=e.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ti().onAndCancel(i,r.domEventName,o))}static parseEventName(i){let n=i.toLowerCase().split("."),s=n.shift();if(n.length===0||!(s==="keydown"||s==="keyup"))return null;let r=e._normalizeKey(n.pop()),o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),Yy.forEach(c=>{let u=n.indexOf(c);u>-1&&(n.splice(u,1),o+=c+".")}),o+=r,n.length!=0||r.length===0)return null;let l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(i,n){let s=OP[i.key]||i.key,r="";return n.indexOf("code.")>-1&&(s=i.code,r="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Yy.forEach(o=>{if(o!==s){let a=NP[o];a(i)&&(r+=o+".")}}),r+=s,r===n)}static eventCallback(i,n,s){return r=>{e.matchEventFullKeyCode(r,i)&&s.runGuarded(()=>n(r))}}static _normalizeKey(i){return i==="esc"?"escape":i}static{this.\u0275fac=function(n){return new(n||e)(H(Ft))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})();function HP(){Sp.makeCurrent()}function BP(){return new Pi}function GP(){return k0(document),document}var zP=[{provide:_n,useValue:mp},{provide:Bg,useValue:HP,multi:!0},{provide:Ft,useFactory:GP,deps:[]}],eb=lp(_y,"browser",zP),WP=new G(""),jP=[{provide:jo,useClass:xp,deps:[]},{provide:sp,useClass:Gc,deps:[he,zc,jo]},{provide:Gc,useClass:Gc,deps:[he,zc,jo]}],UP=[{provide:yc,useValue:"root"},{provide:Pi,useFactory:BP,deps:[]},{provide:Dp,useClass:LP,multi:!0,deps:[Ft,he,_n]},{provide:Dp,useClass:VP,multi:!0,deps:[Ft]},qy,Zy,Qy,{provide:ko,useExisting:qy},{provide:$c,useClass:FP,deps:[]},[]],tb=(()=>{class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:xc,useValue:i.appId}]}}static{this.\u0275fac=function(n){return new(n||e)(H(WP,12))}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({providers:[...UP,...jP],imports:[Kc,Ly]})}}return e})();var ib=(()=>{class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}static{this.\u0275fac=function(n){return new(n||e)(H(Ft))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Y="primary",la=Symbol("RouteTitle"),Ap=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i[0]:i}return null}getAll(t){if(this.has(t)){let i=this.params[t];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function kr(e){return new Ap(e)}function $P(e,t,i){let n=i.path.split("/");if(n.length>e.length||i.pathMatch==="full"&&(t.hasChildren()||n.length<e.length))return null;let s={};for(let r=0;r<n.length;r++){let o=n[r],a=e[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,n.length),posParams:s}}function qP(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!ki(e[i],t[i]))return!1;return!0}function ki(e,t){let i=e?Tp(e):void 0,n=t?Tp(t):void 0;if(!i||!n||i.length!=n.length)return!1;let s;for(let r=0;r<i.length;r++)if(s=i[r],!hb(e[s],t[s]))return!1;return!0}function Tp(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function hb(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let i=[...e].sort(),n=[...t].sort();return i.every((s,r)=>n[r]===s)}else return e===t}function gb(e){return e.length>0?e[e.length-1]:null}function Gn(e){return ah(e)?e:Ds(e)?Re(Promise.resolve(e)):W(e)}var KP={exact:fb,subset:mb},pb={exact:YP,subset:QP,ignored:()=>!0};function sb(e,t,i){return KP[i.paths](e.root,t.root,i.matrixParams)&&pb[i.queryParams](e.queryParams,t.queryParams)&&!(i.fragment==="exact"&&e.fragment!==t.fragment)}function YP(e,t){return ki(e,t)}function fb(e,t,i){if(!Ms(e.segments,t.segments)||!Jc(e.segments,t.segments,i)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!e.children[n]||!fb(e.children[n],t.children[n],i))return!1;return!0}function QP(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(i=>hb(e[i],t[i]))}function mb(e,t,i){return vb(e,t,t.segments,i)}function vb(e,t,i,n){if(e.segments.length>i.length){let s=e.segments.slice(0,i.length);return!(!Ms(s,i)||t.hasChildren()||!Jc(s,i,n))}else if(e.segments.length===i.length){if(!Ms(e.segments,i)||!Jc(e.segments,i,n))return!1;for(let s in t.children)if(!e.children[s]||!mb(e.children[s],t.children[s],n))return!1;return!0}else{let s=i.slice(0,e.segments.length),r=i.slice(e.segments.length);return!Ms(e.segments,s)||!Jc(e.segments,s,n)||!e.children[Y]?!1:vb(e.children[Y],t,r,n)}}function Jc(e,t,i){return t.every((n,s)=>pb[i](e[s].parameters,n.parameters))}var Vn=class{constructor(t=new ge([],{}),i={},n=null){this.root=t,this.queryParams=i,this.fragment=n}get queryParamMap(){return this._queryParamMap??=kr(this.queryParams),this._queryParamMap}toString(){return JP.serialize(this)}},ge=class{constructor(t,i){this.segments=t,this.children=i,this.parent=null,Object.values(i).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eu(this)}},Es=class{constructor(t,i){this.path=t,this.parameters=i}get parameterMap(){return this._parameterMap??=kr(this.parameters),this._parameterMap}toString(){return wb(this)}};function ZP(e,t){return Ms(e,t)&&e.every((i,n)=>ki(i.parameters,t[n].parameters))}function Ms(e,t){return e.length!==t.length?!1:e.every((i,n)=>i.path===t[n].path)}function XP(e,t){let i=[];return Object.entries(e.children).forEach(([n,s])=>{n===Y&&(i=i.concat(t(s,n)))}),Object.entries(e.children).forEach(([n,s])=>{n!==Y&&(i=i.concat(t(s,n)))}),i}var ca=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>new ea,providedIn:"root"})}}return e})(),ea=class{parse(t){let i=new _p(t);return new Vn(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(t){let i=`/${Ko(t.root,!0)}`,n=iA(t.queryParams),s=typeof t.fragment=="string"?`#${eA(t.fragment)}`:"";return`${i}${n}${s}`}},JP=new ea;function eu(e){return e.segments.map(t=>wb(t)).join("/")}function Ko(e,t){if(!e.hasChildren())return eu(e);if(t){let i=e.children[Y]?Ko(e.children[Y],!1):"",n=[];return Object.entries(e.children).forEach(([s,r])=>{s!==Y&&n.push(`${s}:${Ko(r,!1)}`)}),n.length>0?`${i}(${n.join("//")})`:i}else{let i=XP(e,(n,s)=>s===Y?[Ko(e.children[Y],!1)]:[`${s}:${Ko(n,!1)}`]);return Object.keys(e.children).length===1&&e.children[Y]!=null?`${eu(e)}/${i[0]}`:`${eu(e)}/(${i.join("//")})`}}function Cb(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zc(e){return Cb(e).replace(/%3B/gi,";")}function eA(e){return encodeURI(e)}function kp(e){return Cb(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tu(e){return decodeURIComponent(e)}function rb(e){return tu(e.replace(/\+/g,"%20"))}function wb(e){return`${kp(e.path)}${tA(e.parameters)}`}function tA(e){return Object.entries(e).map(([t,i])=>`;${kp(t)}=${kp(i)}`).join("")}function iA(e){let t=Object.entries(e).map(([i,n])=>Array.isArray(n)?n.map(s=>`${Zc(i)}=${Zc(s)}`).join("&"):`${Zc(i)}=${Zc(n)}`).filter(i=>i);return t.length?`?${t.join("&")}`:""}var nA=/^[^\/()?;#]+/;function Rp(e){let t=e.match(nA);return t?t[0]:""}var sA=/^[^\/()?;=#]+/;function rA(e){let t=e.match(sA);return t?t[0]:""}var oA=/^[^=?&#]+/;function aA(e){let t=e.match(oA);return t?t[0]:""}var lA=/^[^&#]+/;function cA(e){let t=e.match(lA);return t?t[0]:""}var _p=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(i).length>0)&&(n[Y]=new ge(t,i)),n}parseSegment(){let t=Rp(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(t),new Es(tu(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let i=rA(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let s=Rp(this.remaining);s&&(n=s,this.capture(n))}t[tu(i)]=tu(n)}parseQueryParam(t){let i=aA(this.remaining);if(!i)return;this.capture(i);let n="";if(this.consumeOptional("=")){let o=cA(this.remaining);o&&(n=o,this.capture(n))}let s=rb(i),r=rb(n);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(r)}else t[s]=r}parseParens(t){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=Rp(this.remaining),s=this.remaining[n.length];if(s!=="/"&&s!==")"&&s!==";")throw new L(4010,!1);let r;n.indexOf(":")>-1?(r=n.slice(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Y);let o=this.parseChildren();i[r]=Object.keys(o).length===1?o[Y]:new ge([],o),this.consumeOptional("//")}return i}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new L(4011,!1)}};function yb(e){return e.segments.length>0?new ge([],{[Y]:e}):e}function bb(e){let t={};for(let[n,s]of Object.entries(e.children)){let r=bb(s);if(n===Y&&r.segments.length===0&&r.hasChildren())for(let[o,a]of Object.entries(r.children))t[o]=a;else(r.segments.length>0||r.hasChildren())&&(t[n]=r)}let i=new ge(e.segments,t);return uA(i)}function uA(e){if(e.numberOfChildren===1&&e.children[Y]){let t=e.children[Y];return new ge(e.segments.concat(t.segments),t.children)}return e}function _r(e){return e instanceof Vn}function dA(e,t,i=null,n=null){let s=Sb(e);return xb(s,t,i,n)}function Sb(e){let t;function i(r){let o={};for(let l of r.children){let c=i(l);o[l.outlet]=c}let a=new ge(r.url,o);return r===e&&(t=a),a}let n=i(e.root),s=yb(n);return t??s}function xb(e,t,i,n){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return Fp(s,s,s,i,n);let r=hA(t);if(r.toRoot())return Fp(s,s,new ge([],{}),i,n);let o=gA(r,s,e),a=o.processChildren?Zo(o.segmentGroup,o.index,r.commands):Eb(o.segmentGroup,o.index,r.commands);return Fp(s,o.segmentGroup,a,i,n)}function iu(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ta(e){return typeof e=="object"&&e!=null&&e.outlets}function Fp(e,t,i,n,s){let r={};n&&Object.entries(n).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;e===t?o=i:o=Db(e,t,i);let a=yb(bb(o));return new Vn(a,r,s)}function Db(e,t,i){let n={};return Object.entries(e.children).forEach(([s,r])=>{r===t?n[s]=i:n[s]=Db(r,t,i)}),new ge(e.segments,n)}var nu=class{constructor(t,i,n){if(this.isAbsolute=t,this.numberOfDoubleDots=i,this.commands=n,t&&n.length>0&&iu(n[0]))throw new L(4003,!1);let s=n.find(ta);if(s&&s!==gb(n))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hA(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new nu(!0,0,e);let t=0,i=!1,n=e.reduce((s,r,o)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return typeof r!="string"?[...s,r]:o===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,r]},[]);return new nu(i,t,n)}var Ar=class{constructor(t,i,n){this.segmentGroup=t,this.processChildren=i,this.index=n}};function gA(e,t,i){if(e.isAbsolute)return new Ar(t,!0,0);if(!i)return new Ar(t,!1,NaN);if(i.parent===null)return new Ar(i,!0,0);let n=iu(e.commands[0])?0:1,s=i.segments.length-1+n;return pA(i,s,e.numberOfDoubleDots)}function pA(e,t,i){let n=e,s=t,r=i;for(;r>s;){if(r-=s,n=n.parent,!n)throw new L(4005,!1);s=n.segments.length}return new Ar(n,!1,s-r)}function fA(e){return ta(e[0])?e[0].outlets:{[Y]:e}}function Eb(e,t,i){if(e??=new ge([],{}),e.segments.length===0&&e.hasChildren())return Zo(e,t,i);let n=mA(e,t,i),s=i.slice(n.commandIndex);if(n.match&&n.pathIndex<e.segments.length){let r=new ge(e.segments.slice(0,n.pathIndex),{});return r.children[Y]=new ge(e.segments.slice(n.pathIndex),e.children),Zo(r,0,s)}else return n.match&&s.length===0?new ge(e.segments,{}):n.match&&!e.hasChildren()?Lp(e,t,i):n.match?Zo(e,0,s):Lp(e,t,i)}function Zo(e,t,i){if(i.length===0)return new ge(e.segments,{});{let n=fA(i),s={};if(Object.keys(n).some(r=>r!==Y)&&e.children[Y]&&e.numberOfChildren===1&&e.children[Y].segments.length===0){let r=Zo(e.children[Y],t,i);return new ge(e.segments,r.children)}return Object.entries(n).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[r]=Eb(e.children[r],t,o))}),Object.entries(e.children).forEach(([r,o])=>{n[r]===void 0&&(s[r]=o)}),new ge(e.segments,s)}}function mA(e,t,i){let n=0,s=t,r={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(n>=i.length)return r;let o=e.segments[s],a=i[n];if(ta(a))break;let l=`${a}`,c=n<i.length-1?i[n+1]:null;if(s>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!ab(l,c,o))return r;n+=2}else{if(!ab(l,{},o))return r;n++}s++}return{match:!0,pathIndex:s,commandIndex:n}}function Lp(e,t,i){let n=e.segments.slice(0,t),s=0;for(;s<i.length;){let r=i[s];if(ta(r)){let l=vA(r.outlets);return new ge(n,l)}if(s===0&&iu(i[0])){let l=e.segments[t];n.push(new Es(l.path,ob(i[0]))),s++;continue}let o=ta(r)?r.outlets[Y]:`${r}`,a=s<i.length-1?i[s+1]:null;o&&a&&iu(a)?(n.push(new Es(o,ob(a))),s+=2):(n.push(new Es(o,{})),s++)}return new ge(n,{})}function vA(e){let t={};return Object.entries(e).forEach(([i,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[i]=Lp(new ge([],{}),0,n))}),t}function ob(e){let t={};return Object.entries(e).forEach(([i,n])=>t[i]=`${n}`),t}function ab(e,t,i){return e==i.path&&ki(t,i.parameters)}var Xo="imperative",Ue=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Ue||{}),Xt=class{constructor(t,i){this.id=t,this.url=i}},Lr=class extends Xt{constructor(t,i,n="imperative",s=null){super(t,i),this.type=Ue.NavigationStart,this.navigationTrigger=n,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ci=class extends Xt{constructor(t,i,n){super(t,i),this.urlAfterRedirects=n,this.type=Ue.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(zt||{}),su=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(su||{}),Hn=class extends Xt{constructor(t,i,n,s){super(t,i),this.reason=n,this.code=s,this.type=Ue.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Bn=class extends Xt{constructor(t,i,n,s){super(t,i),this.reason=n,this.code=s,this.type=Ue.NavigationSkipped}},ia=class extends Xt{constructor(t,i,n,s){super(t,i),this.error=n,this.target=s,this.type=Ue.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ru=class extends Xt{constructor(t,i,n,s){super(t,i),this.urlAfterRedirects=n,this.state=s,this.type=Ue.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Op=class extends Xt{constructor(t,i,n,s){super(t,i),this.urlAfterRedirects=n,this.state=s,this.type=Ue.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Np=class extends Xt{constructor(t,i,n,s,r){super(t,i),this.urlAfterRedirects=n,this.state=s,this.shouldActivate=r,this.type=Ue.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Vp=class extends Xt{constructor(t,i,n,s){super(t,i),this.urlAfterRedirects=n,this.state=s,this.type=Ue.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hp=class extends Xt{constructor(t,i,n,s){super(t,i),this.urlAfterRedirects=n,this.state=s,this.type=Ue.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bp=class{constructor(t){this.route=t,this.type=Ue.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gp=class{constructor(t){this.route=t,this.type=Ue.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zp=class{constructor(t){this.snapshot=t,this.type=Ue.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wp=class{constructor(t){this.snapshot=t,this.type=Ue.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jp=class{constructor(t){this.snapshot=t,this.type=Ue.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Up=class{constructor(t){this.snapshot=t,this.type=Ue.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ou=class{constructor(t,i,n){this.routerEvent=t,this.position=i,this.anchor=n,this.type=Ue.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},na=class{},sa=class{constructor(t){this.url=t}};var $p=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ua,this.attachRef=null}},ua=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,n){let s=this.getOrCreateContext(i);s.outlet=n,this.contexts.set(i,s)}onChildOutletDestroyed(i){let n=this.getContext(i);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let n=this.getContext(i);return n||(n=new $p,this.contexts.set(i,n)),n}getContext(i){return this.contexts.get(i)||null}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),au=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let i=this.pathFromRoot(t);return i.length>1?i[i.length-2]:null}children(t){let i=qp(t,this._root);return i?i.children.map(n=>n.value):[]}firstChild(t){let i=qp(t,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(t){let i=Kp(t,this._root);return i.length<2?[]:i[i.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return Kp(t,this._root).map(i=>i.value)}};function qp(e,t){if(e===t.value)return t;for(let i of t.children){let n=qp(e,i);if(n)return n}return null}function Kp(e,t){if(e===t.value)return[t];for(let i of t.children){let n=Kp(e,i);if(n.length)return n.unshift(t),n}return[]}var Gt=class{constructor(t,i){this.value=t,this.children=i}toString(){return`TreeNode(${this.value})`}};function Pr(e){let t={};return e&&e.children.forEach(i=>t[i.value.outlet]=i),t}var lu=class extends au{constructor(t,i){super(t),this.snapshot=i,rf(this,t)}toString(){return this.snapshot.toString()}};function Mb(e){let t=CA(e),i=new qe([new Es("",{})]),n=new qe({}),s=new qe({}),r=new qe({}),o=new qe(""),a=new Rs(i,n,r,o,s,Y,e,t.root);return a.snapshot=t.root,new lu(new Gt(a,[]),t)}function CA(e){let t={},i={},n={},s="",r=new ra([],t,n,s,i,Y,e,null,{});return new cu("",new Gt(r,[]))}var Rs=class{constructor(t,i,n,s,r,o,a,l){this.urlSubject=t,this.paramsSubject=i,this.queryParamsSubject=n,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(re(c=>c[la]))??W(void 0),this.url=t,this.params=i,this.queryParams=n,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(t=>kr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(t=>kr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sf(e,t,i="emptyOnly"){let n,{routeConfig:s}=e;return t!==null&&(i==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:D(D({},t.params),e.params),data:D(D({},t.data),e.data),resolve:D(D(D(D({},e.data),t.data),s?.data),e._resolvedData)}:n={params:D({},e.params),data:D({},e.data),resolve:D(D({},e.data),e._resolvedData??{})},s&&Fb(s)&&(n.resolve[la]=s.title),n}var ra=class{get title(){return this.data?.[la]}constructor(t,i,n,s,r,o,a,l,c){this.url=t,this.params=i,this.queryParams=n,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=kr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=kr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${i}')`}},cu=class extends au{constructor(t,i){super(i),this.url=t,rf(this,i)}toString(){return Rb(this._root)}};function rf(e,t){t.value._routerState=e,t.children.forEach(i=>rf(e,i))}function Rb(e){let t=e.children.length>0?` { ${e.children.map(Rb).join(", ")} } `:"";return`${e.value}${t}`}function Ip(e){if(e.snapshot){let t=e.snapshot,i=e._futureSnapshot;e.snapshot=i,ki(t.queryParams,i.queryParams)||e.queryParamsSubject.next(i.queryParams),t.fragment!==i.fragment&&e.fragmentSubject.next(i.fragment),ki(t.params,i.params)||e.paramsSubject.next(i.params),qP(t.url,i.url)||e.urlSubject.next(i.url),ki(t.data,i.data)||e.dataSubject.next(i.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Yp(e,t){let i=ki(e.params,t.params)&&ZP(e.url,t.url),n=!e.parent!=!t.parent;return i&&!n&&(!e.parent||Yp(e.parent,t.parent))}function Fb(e){return typeof e.title=="string"||e.title===null}var of=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new I,this.deactivateEvents=new I,this.attachEvents=new I,this.detachEvents=new I,this.parentContexts=k(ua),this.location=k(tn),this.changeDetector=k(Zt),this.environmentInjector=k(Dt),this.inputBinder=k(fu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:n,previousValue:s}=i.name;if(n)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,n){this.activated=i,this._activatedRoute=n,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,n){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=i;let s=this.location,o=i.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Qp(i,a,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=We({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[mi]})}}return e})(),Qp=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,i,n){this.route=t,this.childContexts=i,this.parent=n}get(t,i){return t===Rs?this.route:t===ua?this.childContexts:this.parent.get(t,i)}},fu=new G(""),lb=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:n}=i,s=So([n.queryParams,n.params,n.data]).pipe(qt(([r,o,a],l)=>(a=D(D(D({},r),o),a),l===0?W(a):Promise.resolve(a)))).subscribe(r=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(i);return}let o=Oy(n.component);if(!o){this.unsubscribeFromRouteData(i);return}for(let{templateName:a}of o.inputs)i.activatedComponentRef.setInput(a,r[a])});this.outletDataSubscriptions.set(i,s)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})();function wA(e,t,i){let n=oa(e,t._root,i?i._root:void 0);return new lu(n,t)}function oa(e,t,i){if(i&&e.shouldReuseRoute(t.value,i.value.snapshot)){let n=i.value;n._futureSnapshot=t.value;let s=yA(e,t,i);return new Gt(n,s)}else{if(e.shouldAttach(t.value)){let r=e.retrieve(t.value);if(r!==null){let o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>oa(e,a)),o}}let n=bA(t.value),s=t.children.map(r=>oa(e,r));return new Gt(n,s)}}function yA(e,t,i){return t.children.map(n=>{for(let s of i.children)if(e.shouldReuseRoute(n.value,s.value.snapshot))return oa(e,n,s);return oa(e,n)})}function bA(e){return new Rs(new qe(e.url),new qe(e.params),new qe(e.queryParams),new qe(e.fragment),new qe(e.data),e.outlet,e.component,e)}var Ib="ngNavigationCancelingError";function Pb(e,t){let{redirectTo:i,navigationBehaviorOptions:n}=_r(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=Ab(!1,zt.Redirect);return s.url=i,s.navigationBehaviorOptions=n,s}function Ab(e,t){let i=new Error(`NavigationCancelingError: ${e||""}`);return i[Ib]=!0,i.cancellationCode=t,i}function SA(e){return Tb(e)&&_r(e.url)}function Tb(e){return!!e&&e[Ib]}var xA=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=Ge({type:e,selectors:[["ng-component"]],standalone:!0,features:[Hc],decls:1,vars:0,template:function(n,s){n&1&&Qe(0,"router-outlet")},dependencies:[of],encapsulation:2})}}return e})();function DA(e,t){return e.providers&&!e._injector&&(e._injector=Tc(e.providers,t,`Route: ${e.path}`)),e._injector??t}function af(e){let t=e.children&&e.children.map(af),i=t?_(D({},e),{children:t}):D({},e);return!i.component&&!i.loadComponent&&(t||i.loadChildren)&&i.outlet&&i.outlet!==Y&&(i.component=xA),i}function _i(e){return e.outlet||Y}function EA(e,t){let i=e.filter(n=>_i(n)===t);return i.push(...e.filter(n=>_i(n)!==t)),i}function da(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let i=t.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var MA=(e,t,i,n)=>re(s=>(new Zp(t,s.targetRouterState,s.currentRouterState,i,n).activate(e),s)),Zp=class{constructor(t,i,n,s,r){this.routeReuseStrategy=t,this.futureState=i,this.currState=n,this.forwardEvent=s,this.inputBindingEnabled=r}activate(t){let i=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,n,t),Ip(this.futureState.root),this.activateChildRoutes(i,n,t)}deactivateChildRoutes(t,i,n){let s=Pr(i);t.children.forEach(r=>{let o=r.value.outlet;this.deactivateRoutes(r,s[o],n),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,n)})}deactivateRoutes(t,i,n){let s=t.value,r=i?i.value:null;if(s===r)if(s.component){let o=n.getContext(s.outlet);o&&this.deactivateChildRoutes(t,i,o.children)}else this.deactivateChildRoutes(t,i,n);else r&&this.deactivateRouteAndItsChildren(i,n)}deactivateRouteAndItsChildren(t,i){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,i):this.deactivateRouteAndOutlet(t,i)}detachAndStoreRouteSubtree(t,i){let n=i.getContext(t.value.outlet),s=n&&t.value.component?n.children:i,r=Pr(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,i){let n=i.getContext(t.value.outlet),s=n&&t.value.component?n.children:i,r=Pr(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,i,n){let s=Pr(i);t.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],n),this.forwardEvent(new Up(r.value.snapshot))}),t.children.length&&this.forwardEvent(new Wp(t.value.snapshot))}activateRoutes(t,i,n){let s=t.value,r=i?i.value:null;if(Ip(s),s===r)if(s.component){let o=n.getOrCreateContext(s.outlet);this.activateChildRoutes(t,i,o.children)}else this.activateChildRoutes(t,i,n);else if(s.component){let o=n.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ip(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=da(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}},uu=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Tr=class{constructor(t,i){this.component=t,this.route=i}};function RA(e,t,i){let n=e._root,s=t?t._root:null;return Yo(n,s,i,[n.value])}function FA(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Nr(e,t){let i=Symbol(),n=t.get(e,i);return n===i?typeof e=="function"&&!Ew(e)?e:t.get(e):n}function Yo(e,t,i,n,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=Pr(t);return e.children.forEach(o=>{IA(o,r[o.value.outlet],i,n.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>Jo(a,i.getContext(o),s)),s}function IA(e,t,i,n,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=e.value,o=t?t.value:null,a=i?i.getContext(e.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){let l=PA(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new uu(n)):(r.data=o.data,r._resolvedData=o._resolvedData),r.component?Yo(e,t,a?a.children:null,n,s):Yo(e,t,i,n,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Tr(a.outlet.component,o))}else o&&Jo(t,a,s),s.canActivateChecks.push(new uu(n)),r.component?Yo(e,null,a?a.children:null,n,s):Yo(e,null,i,n,s);return s}function PA(e,t,i){if(typeof i=="function")return i(e,t);switch(i){case"pathParamsChange":return!Ms(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ms(e.url,t.url)||!ki(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yp(e,t)||!ki(e.queryParams,t.queryParams);case"paramsChange":default:return!Yp(e,t)}}function Jo(e,t,i){let n=Pr(e),s=e.value;Object.entries(n).forEach(([r,o])=>{s.component?t?Jo(o,t.children.getContext(r),i):Jo(o,null,i):Jo(o,t,i)}),s.component?t&&t.outlet&&t.outlet.isActivated?i.canDeactivateChecks.push(new Tr(t.outlet.component,s)):i.canDeactivateChecks.push(new Tr(null,s)):i.canDeactivateChecks.push(new Tr(null,s))}function ha(e){return typeof e=="function"}function AA(e){return typeof e=="boolean"}function TA(e){return e&&ha(e.canLoad)}function kA(e){return e&&ha(e.canActivate)}function _A(e){return e&&ha(e.canActivateChild)}function LA(e){return e&&ha(e.canDeactivate)}function OA(e){return e&&ha(e.canMatch)}function kb(e){return e instanceof qi||e?.name==="EmptyError"}var Xc=Symbol("INITIAL_VALUE");function Or(){return qt(e=>So(e.map(t=>t.pipe(Ki(1),hh(Xc)))).pipe(re(t=>{for(let i of t)if(i!==!0){if(i===Xc)return Xc;if(i===!1||i instanceof Vn)return i}return!0}),$t(t=>t!==Xc),Ki(1)))}function NA(e,t){return Le(i=>{let{targetSnapshot:n,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=i;return o.length===0&&r.length===0?W(_(D({},i),{guardsResult:!0})):VA(o,n,s,e).pipe(Le(a=>a&&AA(a)?HA(n,r,e,t):W(a)),re(a=>_(D({},i),{guardsResult:a})))})}function VA(e,t,i,n){return Re(e).pipe(Le(s=>jA(s.component,s.route,i,t,n)),Di(s=>s!==!0,!0))}function HA(e,t,i,n){return Re(t).pipe(gs(s=>lr(GA(s.route.parent,n),BA(s.route,n),WA(e,s.path,i),zA(e,s.route,i))),Di(s=>s!==!0,!0))}function BA(e,t){return e!==null&&t&&t(new jp(e)),W(!0)}function GA(e,t){return e!==null&&t&&t(new zp(e)),W(!0)}function zA(e,t,i){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return W(!0);let s=n.map(r=>Nl(()=>{let o=da(t)??i,a=Nr(r,o),l=kA(a)?a.canActivate(t,e):Zi(o,()=>a(t,e));return Gn(l).pipe(Di())}));return W(s).pipe(Or())}function WA(e,t,i){let n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(o=>FA(o)).filter(o=>o!==null).map(o=>Nl(()=>{let a=o.guards.map(l=>{let c=da(o.node)??i,u=Nr(l,c),d=_A(u)?u.canActivateChild(n,e):Zi(c,()=>u(n,e));return Gn(d).pipe(Di())});return W(a).pipe(Or())}));return W(r).pipe(Or())}function jA(e,t,i,n,s){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return W(!0);let o=r.map(a=>{let l=da(t)??s,c=Nr(a,l),u=LA(c)?c.canDeactivate(e,t,i,n):Zi(l,()=>c(e,t,i,n));return Gn(u).pipe(Di())});return W(o).pipe(Or())}function UA(e,t,i,n){let s=t.canLoad;if(s===void 0||s.length===0)return W(!0);let r=s.map(o=>{let a=Nr(o,e),l=TA(a)?a.canLoad(t,i):Zi(e,()=>a(t,i));return Gn(l)});return W(r).pipe(Or(),_b(n))}function _b(e){return nh(Ke(t=>{if(_r(t))throw Pb(e,t)}),re(t=>t===!0))}function $A(e,t,i,n){let s=t.canMatch;if(!s||s.length===0)return W(!0);let r=s.map(o=>{let a=Nr(o,e),l=OA(a)?a.canMatch(t,i):Zi(e,()=>a(t,i));return Gn(l)});return W(r).pipe(Or(),_b(n))}var aa=class{constructor(t){this.segmentGroup=t||null}},du=class extends Error{constructor(t){super(),this.urlTree=t}};function Ir(e){return ar(new aa(e))}function qA(e){return ar(new L(4e3,!1))}function KA(e){return ar(Ab(!1,zt.GuardRejected))}var Xp=class{constructor(t,i){this.urlSerializer=t,this.urlTree=i}lineralizeSegments(t,i){let n=[],s=i.root;for(;;){if(n=n.concat(s.segments),s.numberOfChildren===0)return W(n);if(s.numberOfChildren>1||!s.children[Y])return qA(t.redirectTo);s=s.children[Y]}}applyRedirectCommands(t,i,n){let s=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),t,n);if(i.startsWith("/"))throw new du(s);return s}applyRedirectCreateUrlTree(t,i,n,s){let r=this.createSegmentGroup(t,i.root,n,s);return new Vn(r,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(t,i){let n={};return Object.entries(t).forEach(([s,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);n[s]=i[a]}else n[s]=r}),n}createSegmentGroup(t,i,n,s){let r=this.createSegments(t,i.segments,n,s),o={};return Object.entries(i.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,n,s)}),new ge(r,o)}createSegments(t,i,n,s){return i.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,s):this.findOrReturn(r,n))}findPosParam(t,i,n){let s=n[i.path.substring(1)];if(!s)throw new L(4001,!1);return s}findOrReturn(t,i){let n=0;for(let s of i){if(s.path===t.path)return i.splice(n),s;n++}return t}},Jp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function YA(e,t,i,n,s){let r=lf(e,t,i);return r.matched?(n=DA(t,n),$A(n,t,i,s).pipe(re(o=>o===!0?r:D({},Jp)))):W(r)}function lf(e,t,i){if(t.path==="**")return QA(i);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||i.length>0)?D({},Jp):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let s=(t.matcher||$P)(i,e,t);if(!s)return D({},Jp);let r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let o=s.consumed.length>0?D(D({},r),s.consumed[s.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:i.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function QA(e){return{matched:!0,parameters:e.length>0?gb(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function cb(e,t,i,n){return i.length>0&&JA(e,i,n)?{segmentGroup:new ge(t,XA(n,new ge(i,e.children))),slicedSegments:[]}:i.length===0&&eT(e,i,n)?{segmentGroup:new ge(e.segments,ZA(e,i,n,e.children)),slicedSegments:i}:{segmentGroup:new ge(e.segments,e.children),slicedSegments:i}}function ZA(e,t,i,n){let s={};for(let r of i)if(mu(e,t,r)&&!n[_i(r)]){let o=new ge([],{});s[_i(r)]=o}return D(D({},n),s)}function XA(e,t){let i={};i[Y]=t;for(let n of e)if(n.path===""&&_i(n)!==Y){let s=new ge([],{});i[_i(n)]=s}return i}function JA(e,t,i){return i.some(n=>mu(e,t,n)&&_i(n)!==Y)}function eT(e,t,i){return i.some(n=>mu(e,t,n))}function mu(e,t,i){return(e.hasChildren()||t.length>0)&&i.pathMatch==="full"?!1:i.path===""}function tT(e,t,i,n){return _i(e)!==n&&(n===Y||!mu(t,i,e))?!1:lf(t,e,i).matched}function iT(e,t,i){return t.length===0&&!e.children[i]}var ef=class{};function nT(e,t,i,n,s,r,o="emptyOnly"){return new tf(e,t,i,n,s,o,r).recognize()}var sT=31,tf=class{constructor(t,i,n,s,r,o,a){this.injector=t,this.configLoader=i,this.rootComponentType=n,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Xp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new L(4002,`'${t.segmentGroup}'`)}recognize(){let t=cb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(re(i=>{let n=new ra([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,{},Y,this.rootComponentType,null,{}),s=new Gt(n,i),r=new cu("",s),o=dA(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(r._root,null),{state:r,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Y).pipe(Dn(n=>{if(n instanceof du)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof aa?this.noMatchError(n):n}))}inheritParamsAndData(t,i){let n=t.value,s=sf(n,i,this.paramsInheritanceStrategy);n.params=Object.freeze(s.params),n.data=Object.freeze(s.data),t.children.forEach(r=>this.inheritParamsAndData(r,n))}processSegmentGroup(t,i,n,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,i,n):this.processSegment(t,i,n,n.segments,s,!0).pipe(re(r=>r instanceof Gt?[r]:[]))}processChildren(t,i,n){let s=[];for(let r of Object.keys(n.children))r==="primary"?s.unshift(r):s.push(r);return Re(s).pipe(gs(r=>{let o=n.children[r],a=EA(i,r);return this.processSegmentGroup(t,a,o,r)}),dh((r,o)=>(r.push(...o),r)),En(null),uh(),Le(r=>{if(r===null)return Ir(n);let o=Lb(r);return rT(o),W(o)}))}processSegment(t,i,n,s,r,o){return Re(i).pipe(gs(a=>this.processSegmentAgainstRoute(a._injector??t,i,a,n,s,r,o).pipe(Dn(l=>{if(l instanceof aa)return W(null);throw l}))),Di(a=>!!a),Dn(a=>{if(kb(a))return iT(n,s,r)?W(new ef):Ir(n);throw a}))}processSegmentAgainstRoute(t,i,n,s,r,o,a){return tT(n,s,r,o)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,n,r,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,i,n,r,o):Ir(s):Ir(s)}expandSegmentAgainstRouteUsingRedirect(t,i,n,s,r,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=lf(i,s,r);if(!a)return Ir(i);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sT&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,s.redirectTo,c);return this.applyRedirects.lineralizeSegments(s,d).pipe(Le(h=>this.processSegment(t,n,i,h.concat(u),o,!1)))}matchSegmentAgainstRoute(t,i,n,s,r){let o=YA(i,n,s,t,this.urlSerializer);return n.path==="**"&&(i.children={}),o.pipe(qt(a=>a.matched?(t=n._injector??t,this.getChildConfig(t,n,s).pipe(qt(({routes:l})=>{let c=n._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,g=new ra(u,h,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,aT(n),_i(n),n.component??n._loadedComponent??null,n,lT(n)),{segmentGroup:p,slicedSegments:f}=cb(i,u,d,l);if(f.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe(re(v=>v===null?null:new Gt(g,v)));if(l.length===0&&f.length===0)return W(new Gt(g,[]));let m=_i(n)===r;return this.processSegment(c,l,p,f,m?Y:r,!0).pipe(re(v=>new Gt(g,v instanceof Gt?[v]:[])))}))):Ir(i)))}getChildConfig(t,i,n){return i.children?W({routes:i.children,injector:t}):i.loadChildren?i._loadedRoutes!==void 0?W({routes:i._loadedRoutes,injector:i._loadedInjector}):UA(t,i,n,this.urlSerializer).pipe(Le(s=>s?this.configLoader.loadChildren(t,i).pipe(Ke(r=>{i._loadedRoutes=r.routes,i._loadedInjector=r.injector})):KA(i))):W({routes:[],injector:t})}};function rT(e){e.sort((t,i)=>t.value.outlet===Y?-1:i.value.outlet===Y?1:t.value.outlet.localeCompare(i.value.outlet))}function oT(e){let t=e.value.routeConfig;return t&&t.path===""}function Lb(e){let t=[],i=new Set;for(let n of e){if(!oT(n)){t.push(n);continue}let s=t.find(r=>n.value.routeConfig===r.value.routeConfig);s!==void 0?(s.children.push(...n.children),i.add(s)):t.push(n)}for(let n of i){let s=Lb(n.children);t.push(new Gt(n.value,s))}return t.filter(n=>!i.has(n))}function aT(e){return e.data||{}}function lT(e){return e.resolve||{}}function cT(e,t,i,n,s,r){return Le(o=>nT(e,t,i,n,o.extractedUrl,s,r).pipe(re(({state:a,tree:l})=>_(D({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function uT(e,t){return Le(i=>{let{targetSnapshot:n,guards:{canActivateChecks:s}}=i;if(!s.length)return W(i);let r=new Set(s.map(l=>l.route)),o=new Set;for(let l of r)if(!o.has(l))for(let c of Ob(l))o.add(c);let a=0;return Re(o).pipe(gs(l=>r.has(l)?dT(l,n,e,t):(l.data=sf(l,l.parent,e).resolve,W(void 0))),Ke(()=>a++),cr(1),Le(l=>a===o.size?W(i):Vt))})}function Ob(e){let t=e.children.map(i=>Ob(i)).flat();return[e,...t]}function dT(e,t,i,n){let s=e.routeConfig,r=e._resolve;return s?.title!==void 0&&!Fb(s)&&(r[la]=s.title),hT(r,e,t,n).pipe(re(o=>(e._resolvedData=o,e.data=sf(e,e.parent,i).resolve,null)))}function hT(e,t,i,n){let s=Tp(e);if(s.length===0)return W({});let r={};return Re(s).pipe(Le(o=>gT(e[o],t,i,n).pipe(Di(),Ke(a=>{r[o]=a}))),cr(1),ch(r),Dn(o=>kb(o)?Vt:ar(o)))}function gT(e,t,i,n){let s=da(t)??n,r=Nr(e,s),o=r.resolve?r.resolve(t,i):Zi(s,()=>r(t,i));return Gn(o)}function Pp(e){return qt(t=>{let i=e(t);return i?Re(i).pipe(re(()=>t)):W(t)})}var Nb=(()=>{class e{buildTitle(i){let n,s=i.root;for(;s!==void 0;)n=this.getResolvedTitleForRoute(s)??n,s=s.children.find(r=>r.outlet===Y);return n}getResolvedTitleForRoute(i){return i.data[la]}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>k(pT),providedIn:"root"})}}return e})(),pT=(()=>{class e extends Nb{constructor(i){super(),this.title=i}updateTitle(i){let n=this.buildTitle(i);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||e)(H(ib))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ga=new G("",{providedIn:"root",factory:()=>({})}),hu=new G(""),cf=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(jc)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return W(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let n=Gn(i.loadComponent()).pipe(re(Vb),Ke(r=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=r}),xo(()=>{this.componentLoaders.delete(i)})),s=new or(n,()=>new it).pipe(rr());return this.componentLoaders.set(i,s),s}loadChildren(i,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return W({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let r=fT(n,this.compiler,i,this.onLoadEndListener).pipe(xo(()=>{this.childrenLoaders.delete(n)})),o=new or(r,()=>new it).pipe(rr());return this.childrenLoaders.set(n,o),o}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function fT(e,t,i,n){return Gn(e.loadChildren()).pipe(re(Vb),Le(s=>s instanceof _o||Array.isArray(s)?W(s):Re(t.compileModuleAsync(s))),re(s=>{n&&n(e);let r,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(r=s.create(i).injector,o=r.get(hu,[],{optional:!0,self:!0}).flat()),{routes:o.map(af),injector:r}}))}function mT(e){return e&&typeof e=="object"&&"default"in e}function Vb(e){return mT(e)?e.default:e}var uf=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>k(vT),providedIn:"root"})}}return e})(),vT=(()=>{class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,n){return i}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Hb=new G(""),Bb=new G("");function CT(e,t,i){let n=e.get(Bb),s=e.get(Ft);return e.get(he).runOutsideAngular(()=>{if(!s.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(c=>setTimeout(c));let r,o=new Promise(c=>{r=c}),a=s.startViewTransition(()=>(r(),wT(e))),{onViewTransitionCreated:l}=n;return l&&Zi(e,()=>l({transition:a,from:t,to:i})),o})}function wT(e){return new Promise(t=>{Ac(t,{injector:e})})}var df=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it,this.transitionAbortSubject=new it,this.configLoader=k(cf),this.environmentInjector=k(Dt),this.urlSerializer=k(ca),this.rootContexts=k(ua),this.location=k(Fr),this.inputBindingEnabled=k(fu,{optional:!0})!==null,this.titleStrategy=k(Nb),this.options=k(ga,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(uf),this.createViewTransition=k(Hb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>W(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Bp(s)),n=s=>this.events.next(new Gp(s));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let n=++this.navigationId;this.transitions?.next(_(D(D({},this.transitions.value),i),{id:n}))}setupNavigations(i,n,s){return this.transitions=new qe({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($t(r=>r.id!==0),re(r=>_(D({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),qt(r=>{let o=!1,a=!1;return W(r).pipe(qt(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Vt;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?_(D({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new Bn(l.id,this.urlSerializer.serialize(l.rawUrl),d,su.IgnoredSameUrlNavigation)),l.resolve(null),Vt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return W(l).pipe(qt(d=>{let h=this.transitions?.getValue();return this.events.next(new Lr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?Vt:Promise.resolve(d)}),cT(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=_(D({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new ru(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:g,restoredState:p,extras:f}=l,m=new Lr(d,this.urlSerializer.serialize(h),g,p);this.events.next(m);let v=Mb(this.rootComponentType).snapshot;return this.currentTransition=r=_(D({},l),{targetSnapshot:v,urlAfterRedirects:h,extras:_(D({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,W(r)}else{let d="";return this.events.next(new Bn(l.id,this.urlSerializer.serialize(l.extractedUrl),d,su.IgnoredByUrlHandlingStrategy)),l.resolve(null),Vt}}),Ke(l=>{let c=new Op(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),re(l=>(this.currentTransition=r=_(D({},l),{guards:RA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),r)),NA(this.environmentInjector,l=>this.events.next(l)),Ke(l=>{if(r.guardsResult=l.guardsResult,_r(l.guardsResult))throw Pb(this.urlSerializer,l.guardsResult);let c=new Np(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),$t(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",zt.GuardRejected),!1)),Pp(l=>{if(l.guards.canActivateChecks.length)return W(l).pipe(Ke(c=>{let u=new Vp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),qt(c=>{let u=!1;return W(c).pipe(uT(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",zt.NoDataFromResolver)}}))}),Ke(c=>{let u=new Hp(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Pp(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ke(h=>{u.component=h}),re(()=>{})));for(let h of u.children)d.push(...c(h));return d};return So(c(l.targetSnapshot.root)).pipe(En(null),Ki(1))}),Pp(()=>this.afterPreactivation()),qt(()=>{let{currentSnapshot:l,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?Re(u).pipe(re(()=>r)):W(r)}),re(l=>{let c=wA(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r=_(D({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),Ke(()=>{this.events.next(new na)}),MA(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ki(1),Ke({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ci(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),gh(this.transitionAbortSubject.pipe(Ke(l=>{throw l}))),xo(()=>{!o&&!a&&this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Dn(l=>{if(a=!0,Tb(l))this.events.next(new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),SA(l)?this.events.next(new sa(l.url)):r.resolve(!1);else{this.events.next(new ia(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0));try{r.resolve(i.errorHandler(l))}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Vt}))}))}cancelNavigationTransition(i,n,s){let r=new Hn(i.id,this.urlSerializer.serialize(i.extractedUrl),n,s);this.events.next(r),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function yT(e){return e!==Xo}var bT=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>k(ST),providedIn:"root"})}}return e})(),nf=class{shouldDetach(t){return!1}store(t,i){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,i){return t.routeConfig===i.routeConfig}},ST=(()=>{class e extends nf{static{this.\u0275fac=(()=>{let i;return function(s){return(i||(i=en(e)))(s||e)}})()}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Gb=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:()=>k(xT),providedIn:"root"})}}return e})(),xT=(()=>{class e extends Gb{constructor(){super(...arguments),this.location=k(Fr),this.urlSerializer=k(ca),this.options=k(ga,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(uf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Mb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(n=>{n.type==="popstate"&&i(n.url,n.state)})}handleRouterEvent(i,n){if(i instanceof Lr)this.stateMemento=this.createStateMemento();else if(i instanceof Bn)this.rawUrlTree=n.initialUrl;else if(i instanceof ru){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(s,n)}}else i instanceof na?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):i instanceof Hn&&(i.code===zt.GuardRejected||i.code===zt.NoDataFromResolver)?this.restoreHistory(n):i instanceof ia?this.restoreHistory(n,!0):i instanceof Ci&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,n){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||n.extras.replaceUrl){let r=this.browserPageId,o=D(D({},n.extras.state),this.generateNgRouterState(n.id,r));this.location.replaceState(s,"",o)}else{let r=D(D({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(s,"",r)}}restoreHistory(i,n=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,r=this.currentPageId-s;r!==0?this.location.historyGo(r):this.currentUrlTree===i.finalUrl&&r===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,n){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:n}:{navigationId:i}}static{this.\u0275fac=(()=>{let i;return function(s){return(i||(i=en(e)))(s||e)}})()}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Qo=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Qo||{});function zb(e,t){e.events.pipe($t(i=>i instanceof Ci||i instanceof Hn||i instanceof ia||i instanceof Bn),re(i=>i instanceof Ci||i instanceof Bn?Qo.COMPLETE:(i instanceof Hn?i.code===zt.Redirect||i.code===zt.SupersededByNewNavigation:!1)?Qo.REDIRECTING:Qo.FAILED),$t(i=>i!==Qo.REDIRECTING),Ki(1)).subscribe(()=>{t()})}function DT(e){throw e}var ET={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},on=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=k(Bc),this.stateManager=k(Gb),this.options=k(ga,{optional:!0})||{},this.pendingTasks=k(kc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(df),this.urlSerializer=k(ca),this.location=k(Fr),this.urlHandlingStrategy=k(uf),this._events=new it,this.errorHandler=this.options.errorHandler||DT,this.navigated=!1,this.routeReuseStrategy=k(bT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(hu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(fu,{optional:!0}),this.eventsSubscription=new Ne,this.isNgZoneEnabled=k(he)instanceof he&&he.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(n=>{try{let s=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(s!==null&&r!==null){if(this.stateManager.handleRouterEvent(n,r),n instanceof Hn&&n.code!==zt.Redirect&&n.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Ci)this.navigated=!0;else if(n instanceof sa){let o=this.urlHandlingStrategy.merge(n.url,s.currentRawUrl),a={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||yT(s.source)};this.scheduleNavigation(o,Xo,null,a,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}FT(n)&&this._events.next(n)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",n)},0)})}navigateToSyncWithBrowser(i,n,s){let r={replaceUrl:!0},o=s?.navigationId?s:null;if(s){let l=D({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(r.state=l)}let a=this.parseUrl(i);this.scheduleNavigation(a,n,o,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(af),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,n={}){let{relativeTo:s,queryParams:r,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o,u=null;switch(a){case"merge":u=D(D({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=s?s.snapshot:this.routerState.snapshot.root;d=Sb(h)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),d=this.currentUrlTree.root}return xb(d,i,u,c??null)}navigateByUrl(i,n={skipLocationChange:!1}){let s=_r(i)?i:this.parseUrl(i),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,Xo,null,n)}navigate(i,n={skipLocationChange:!1}){return RT(i),this.navigateByUrl(this.createUrlTree(i,n),n)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,n){let s;if(n===!0?s=D({},ET):n===!1?s=D({},MT):s=n,_r(i))return sb(this.currentUrlTree,i,s);let r=this.parseUrl(i);return sb(this.currentUrlTree,r,s)}removeEmptyProps(i){return Object.entries(i).reduce((n,[s,r])=>(r!=null&&(n[s]=r),n),{})}scheduleNavigation(i,n,s,r,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return zb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function RT(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new L(4008,!1)}function FT(e){return!(e instanceof na)&&!(e instanceof sa)}var gu=(()=>{class e{constructor(i,n,s,r,o,a){this.router=i,this.route=n,this.tabIndexAttribute=s,this.renderer=r,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new it,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(c=>{c instanceof Ci&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,n,s,r,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(i!==0||n||s||r||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let n=this.href===null?null:O0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(i,n){let s=this.renderer,r=this.el.nativeElement;n!==null?s.setAttribute(r,i,n):s.removeAttribute(r,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(n){return new(n||e)(q(on),q(Rs),Vg("tabindex"),q(Ln),q(Et),q(rn))}}static{this.\u0275dir=We({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,s){n&1&&je("click",function(o){return s.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),n&2&&Wo("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[nt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Nn],skipLocationChange:[nt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Nn],replaceUrl:[nt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Nn],routerLink:"routerLink"},standalone:!0,features:[np,mi]})}}return e})(),Wb=(()=>{class e{get isActive(){return this._isActive}constructor(i,n,s,r,o){this.router=i,this.element=n,this.renderer=s,this.cdr=r,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new I,this.routerEventsSubscription=i.events.subscribe(a=>{a instanceof Ci&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(xn()).subscribe(i=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let i=[...this.links.toArray(),this.link].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=Re(i).pipe(xn()).subscribe(n=>{this._isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(i){let n=Array.isArray(i)?i:i.split(" ");this.classes=n.filter(s=>!!s)}ngOnChanges(i){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let i=this.hasActiveLinks();this.classes.forEach(n=>{i?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),i&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==i&&(this._isActive=i,this.cdr.markForCheck(),this.isActiveChange.emit(i))})}isLinkActive(i){let n=IT(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let r=s.urlTree;return r?i.isActive(r,n):!1}}hasActiveLinks(){let i=this.isLinkActive(this.router);return this.link&&i(this.link)||this.links.some(i)}static{this.\u0275fac=function(n){return new(n||e)(q(on),q(Et),q(Ln),q(Zt),q(gu,8))}}static{this.\u0275dir=We({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(n,s,r){if(n&1&&Dy(r,gu,5),n&2){let o;Nc(o=Vc())&&(s.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[mi]})}}return e})();function IT(e){return!!e.paths}var pu=class{};var PT=(()=>{class e{constructor(i,n,s,r,o){this.router=i,this.injector=s,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe($t(i=>i instanceof Ci),gs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,n){let s=[];for(let r of n){r.providers&&!r._injector&&(r._injector=Tc(r.providers,i,`Route: ${r.path}`));let o=r._injector??i,a=r._loadedInjector??o;(r.loadChildren&&!r._loadedRoutes&&r.canLoad===void 0||r.loadComponent&&!r._loadedComponent)&&s.push(this.preloadConfig(o,r)),(r.children||r._loadedRoutes)&&s.push(this.processRoutes(a,r.children??r._loadedRoutes))}return Re(s).pipe(xn())}preloadConfig(i,n){return this.preloadingStrategy.preload(n,()=>{let s;n.loadChildren&&n.canLoad===void 0?s=this.loader.loadChildren(i,n):s=W(null);let r=s.pipe(Le(o=>o===null?W(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??i,o.routes))));if(n.loadComponent&&!n._loadedComponent){let o=this.loader.loadComponent(n);return Re([r,o]).pipe(xn())}else return r})}static{this.\u0275fac=function(n){return new(n||e)(H(on),H(jc),H(Dt),H(pu),H(cf))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),jb=new G(""),AT=(()=>{class e{constructor(i,n,s,r,o={}){this.urlSerializer=i,this.transitions=n,this.viewportScroller=s,this.zone=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=k(Dt),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Lr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Ci?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Bn&&i.code===su.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ou&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,n){this.zone.runOutsideAngular(()=>$i(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Ac(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new ou(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(n){K0()}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})();function TT(e){return e.routerState.root}function pa(e,t){return{\u0275kind:e,\u0275providers:t}}function kT(){let e=k(vi);return t=>{let i=e.get(Rr);if(t!==i.components[0])return;let n=e.get(on),s=e.get(Ub);e.get(hf)===1&&n.initialNavigation(),e.get($b,null,Z.Optional)?.setUpPreloading(),e.get(jb,null,Z.Optional)?.init(),n.resetRootComponentType(i.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var Ub=new G("",{factory:()=>new it}),hf=new G("",{providedIn:"root",factory:()=>1});function _T(){return pa(2,[{provide:hf,useValue:0},{provide:Wc,multi:!0,deps:[vi],useFactory:t=>{let i=t.get(zy,Promise.resolve());return()=>i.then(()=>new Promise(n=>{let s=t.get(on),r=t.get(Ub);zb(s,()=>{n(!0)}),t.get(df).afterPreactivation=()=>(n(!0),r.closed?W(void 0):r),s.initialNavigation()}))}}])}function LT(){return pa(3,[{provide:Wc,multi:!0,useFactory:()=>{let t=k(on);return()=>{t.setUpLocationChangeListener()}}},{provide:hf,useValue:2}])}var $b=new G("");function OT(e){return pa(0,[{provide:$b,useExisting:PT},{provide:pu,useExisting:e}])}function NT(){return pa(8,[lb,{provide:fu,useExisting:lb}])}function VT(e){let t=[{provide:Hb,useValue:CT},{provide:Bb,useValue:D({skipNextTransition:!!e?.skipInitialTransition},e)}];return pa(9,t)}var ub=new G("ROUTER_FORROOT_GUARD"),HT=[Fr,{provide:ca,useClass:ea},on,ua,{provide:Rs,useFactory:TT,deps:[on]},cf,[]],fa=(()=>{class e{constructor(i){}static forRoot(i,n){return{ngModule:e,providers:[HT,[],{provide:hu,multi:!0,useValue:i},{provide:ub,useFactory:WT,deps:[[on,new yg,new Tw]]},{provide:ga,useValue:n||{}},n?.useHash?GT():zT(),BT(),n?.preloadingStrategy?OT(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?jT(n):[],n?.bindToComponentInputs?NT().\u0275providers:[],n?.enableViewTransitions?VT().\u0275providers:[],UT()]}}static forChild(i){return{ngModule:e,providers:[{provide:hu,multi:!0,useValue:i}]}}static{this.\u0275fac=function(n){return new(n||e)(H(ub,8))}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({})}}return e})();function BT(){return{provide:jb,useFactory:()=>{let e=k($y),t=k(he),i=k(ga),n=k(df),s=k(ca);return i.scrollOffset&&e.setOffset(i.scrollOffset),new AT(s,n,e,t,i)}}}function GT(){return{provide:rn,useClass:jy}}function zT(){return{provide:rn,useClass:fp}}function WT(e){return"guarded"}function jT(e){return[e.initialNavigation==="disabled"?LT().\u0275providers:[],e.initialNavigation==="enabledBlocking"?_T().\u0275providers:[]]}var db=new G("");function UT(){return[{provide:db,useFactory:kT},{provide:op,multi:!0,useExisting:db}]}var $T=[],Kb=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({imports:[fa.forRoot($T),fa]})}}return e})();var Yb=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=Ge({type:e,selectors:[["app-sidebar"]],decls:13,vars:0,consts:[[1,"sidebar"],["routerLink","[/store]","routerLinkActive","active"],[1,"fas","fa-store"],["routerLink","/sku","routerLinkActive","active"],[1,"fas","fa-box"],["routerLink","/planning","routerLinkActive","active"],[1,"fas","fa-chart-line"],["routerLink","/charts","routerLinkActive","active"],[1,"fas","fa-chart-bar"]],template:function(n,s){n&1&&(z(0,"div",0)(1,"a",1),Qe(2,"i",2),Se(3," Store"),j(),z(4,"a",3),Qe(5,"i",4),Se(6," SKU"),j(),z(7,"a",5),Qe(8,"i",6),Se(9," Planning"),j(),z(10,"a",7),Qe(11,"i",8),Se(12," Charts"),j()())},dependencies:[gu,Wb],styles:[".sidebar[_ngcontent-%COMP%]{width:250px;height:100vh;background-color:#f8f9fa;display:flex;flex-direction:column;padding:20px;position:fixed;left:0}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#333;font-size:16px;padding:15px 10px;display:flex;align-items:center;gap:10px;border-radius:5px;transition:background .3s ease,color .3s ease}.sidebar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.sidebar[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.sidebar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}"]})}}return e})();var Qb=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=Ge({type:e,selectors:[["app-navbar"]],decls:7,vars:0,consts:[[1,"navbar","navbar-light","bg-light"],["href","#",1,"navbar-brand","d-flex","align-items-center"],["src","https://anuragsonkar394.github.io/AnuragSonkar394-GS991916_Anurag_Sonkar/assets/Gsynergy%20Logo%20V2%20Long%20Description.svg","width","180","height","50","alt","GSynergy Logo",1,"d-inline-block","align-top"],[1,"navbar-text","fs-5","fw-bold"],[1,"bi","bi-person-circle","fs-4"]],template:function(n,s){n&1&&(z(0,"nav",0)(1,"a",1),Qe(2,"img",2),j(),z(3,"span",3),Se(4,"Data Viewer App"),j(),z(5,"div"),Qe(6,"i",4),j()())},styles:[".navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000}"]})}}return e})();var Zb=(()=>{class e{constructor(){this.title="GS_challenge"}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=Ge({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container"],[1,"content"]],template:function(n,s){n&1&&(Qe(0,"app-navbar"),z(1,"div",0),Qe(2,"app-sidebar"),z(3,"main",1),Qe(4,"router-outlet"),j()())},dependencies:[of,Yb,Qb],styles:[".container[_ngcontent-%COMP%]{display:flex;height:100vh;padding-top:70px}app-sidebar[_ngcontent-%COMP%]{width:200px;background-color:#f8f9fa;transition:all .3s ease-in-out}.content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}app-navbar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:1000}main.content[_ngcontent-%COMP%]{padding-top:70px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column}app-sidebar[_ngcontent-%COMP%]{width:100%;height:auto;box-shadow:none}}"]})}}return e})();var Jt={stores:[{seqId:1,id:"ST035",label:"San Francisco Bay Trends",city:"San Francisco",state:"CA"},{seqId:2,id:"ST046",label:"Phoenix Sunwear",city:"Phoenix",state:"AZ"},{seqId:3,id:"ST064",label:"Dallas Ranch Supply",city:"Dallas",state:"TX"},{seqId:4,id:"ST066",label:"Atlanta Outfitters",city:"Atlanta",state:"GA"},{seqId:5,id:"ST073",label:"Nashville Melody Music Store",city:"Nashville",state:"TN"},{seqId:6,id:"ST074",label:"New York Empire Eats",city:"New York",state:"NY"},{seqId:7,id:"ST091",label:"Denver Peaks Outdoor",city:"Denver",state:"CO"},{seqId:8,id:"ST094",label:"Philadelphia Liberty Market",city:"Philadelphia",state:"PA"},{seqId:9,id:"ST097",label:"Boston Harbor Books",city:"Boston",state:"MA"},{seqId:10,id:"ST101",label:"Austin Vibe Co.",city:"Austin",state:"TX"},{seqId:11,id:"ST131",label:"Los Angeles Luxe",city:"Los Angeles",state:"CA"},{seqId:12,id:"ST150",label:"Houston Harvest Market",city:"Houston",state:"TX"},{seqId:13,id:"ST151",label:"Portland Evergreen Goods",city:"Portland",state:"OR"},{seqId:14,id:"ST156",label:"Chicago Charm Boutique",city:"Chicago",state:"IL"},{seqId:15,id:"ST163",label:"Las Vegas Neon Treasures",city:"Las Vegas",state:"NV"},{seqId:16,id:"ST175",label:"Seattle Skyline Goods",city:"Seattle",state:"WA"},{seqId:17,id:"ST176",label:"Miami Breeze Apparel",city:"Miami",state:"FL"},{seqId:18,id:"ST177",label:"San Diego Wave Surf Shop",city:"San Diego",state:"CA"},{seqId:19,id:"ST193",label:"Charlotte Queen\u2019s Closet",city:"Charlotte",state:"NC"},{seqId:20,id:"ST208",label:"Detroit Motor Gear",city:"Detroit",state:"MI"}],SKUs:[{id:"SK00158",label:"Crew Neck Merino Wool Sweater",class:"Tops",department:"Men's Apparel",price:114.99,cost:18.28},{id:"SK00269",label:"Faux Leather Leggings",class:"Jewelry",department:"Footwear",price:9.99,cost:8.45},{id:"SK00300",label:"Fleece-Lined Parka",class:"Jewelry",department:"Unisex Accessories",price:199.99,cost:17.79},{id:"SK00304",label:"Cotton Polo Shirt",class:"Tops",department:"Women's Apparel",price:139.99,cost:10.78},{id:"SK00766",label:"Foldable Travel Hat",class:"Tops",department:"Footwear",price:44.99,cost:27.08},{id:"SK00777",label:"Denim Jacket",class:"Outerwear",department:"Men's Apparel",price:89.99,cost:30},{id:"SK00778",label:"Running Shoes",class:"Footwear",department:"Unisex Footwear",price:120,cost:50},{id:"SK00779",label:"Leather Handbag",class:"Accessories",department:"Women's Apparel",price:250,cost:75},{id:"SK00780",label:"Casual Sneakers",class:"Footwear",department:"Men's Footwear",price:75,cost:25},{id:"SK00781",label:"Wool Scarf",class:"Accessories",department:"Unisex Accessories",price:39.99,cost:12.5},{id:"SK00782",label:"Sports Watch",class:"Accessories",department:"Unisex Accessories",price:199.99,cost:80},{id:"SK00783",label:"Graphic T-Shirt",class:"Tops",department:"Men's Apparel",price:29.99,cost:8},{id:"SK00784",label:"Formal Blazer",class:"Outerwear",department:"Men's Apparel",price:299.99,cost:100},{id:"SK00785",label:"Silk Tie",class:"Accessories",department:"Men's Apparel",price:49.99,cost:15},{id:"SK00786",label:"Hiking Boots",class:"Footwear",department:"Unisex Footwear",price:180,cost:70},{id:"SK00787",label:"Leather Wallet",class:"Accessories",department:"Men's Accessories",price:99.99,cost:30},{id:"SK00788",label:"Winter Gloves",class:"Accessories",department:"Unisex Accessories",price:25.99,cost:8.99},{id:"SK00789",label:"Ankle Boots",class:"Footwear",department:"Women's Footwear",price:160,cost:65},{id:"SK00790",label:"Smartwatch",class:"Electronics",department:"Unisex Accessories",price:299.99,cost:120},{id:"SK00791",label:"Slim Fit Jeans",class:"Bottoms",department:"Men's Apparel",price:79.99,cost:25},{id:"SK00792",label:"Floral Dress",class:"Dresses",department:"Women's Apparel",price:159.99,cost:50},{id:"SK00793",label:"Silk Pajamas",class:"Loungewear",department:"Unisex Apparel",price:130,cost:45},{id:"SK00794",label:"Cotton Socks",class:"Accessories",department:"Unisex Accessories",price:15.99,cost:5},{id:"SK00795",label:"Rain Jacket",class:"Outerwear",department:"Men's Apparel",price:110,cost:40},{id:"SK00796",label:"Sunglasses",class:"Accessories",department:"Unisex Accessories",price:120,cost:30},{id:"SK00797",label:"Wool Coat",class:"Outerwear",department:"Women's Apparel",price:320,cost:125},{id:"SK00798",label:"Leather Belt",class:"Accessories",department:"Men's Apparel",price:45,cost:15},{id:"SK00799",label:"Turtleneck Sweater",class:"Tops",department:"Women's Apparel",price:89.99,cost:30},{id:"SK00800",label:"High Heels",class:"Footwear",department:"Women's Footwear",price:190,cost:75},{id:"SK00801",label:"Backpack",class:"Accessories",department:"Unisex Accessories",price:85,cost:30},{id:"SK00802",label:"Baseball Cap",class:"Accessories",department:"Men's Apparel",price:25.99,cost:10},{id:"SK00803",label:"Leather Loafers",class:"Footwear",department:"Men's Footwear",price:140,cost:55},{id:"SK00804",label:"Lace Dress",class:"Dresses",department:"Women's Apparel",price:175,cost:60},{id:"SK00805",label:"Tweed Blazer",class:"Outerwear",department:"Men's Apparel",price:250,cost:100}],calendar:[{week:"W01",weekLabel:"Week 01",month:"M01",monthLabel:"Feb"},{week:"W02",weekLabel:"Week 02",month:"M01",monthLabel:"Feb"},{week:"W03",weekLabel:"Week 03",month:"M01",monthLabel:"Feb"},{week:"W04",weekLabel:"Week 04",month:"M01",monthLabel:"Feb"},{week:"W05",weekLabel:"Week 05",month:"M02",monthLabel:"Mar"},{week:"W06",weekLabel:"Week 06",month:"M02",monthLabel:"Mar"},{week:"W07",weekLabel:"Week 07",month:"M02",monthLabel:"Mar"},{week:"W08",weekLabel:"Week 08",month:"M02",monthLabel:"Mar"},{week:"W09",weekLabel:"Week 09",month:"M02",monthLabel:"Mar"},{week:"W10",weekLabel:"Week 10",month:"M03",monthLabel:"Apr"},{week:"W11",weekLabel:"Week 11",month:"M03",monthLabel:"Apr"},{week:"W12",weekLabel:"Week 12",month:"M03",monthLabel:"Apr"},{week:"W13",weekLabel:"Week 13",month:"M03",monthLabel:"Apr"},{week:"W14",weekLabel:"Week 14",month:"M04",monthLabel:"May"},{week:"W15",weekLabel:"Week 15",month:"M04",monthLabel:"May"},{week:"W16",weekLabel:"Week 16",month:"M04",monthLabel:"May"},{week:"W17",weekLabel:"Week 17",month:"M04",monthLabel:"May"},{week:"W18",weekLabel:"Week 18",month:"M05",monthLabel:"Jun"},{week:"W19",weekLabel:"Week 19",month:"M05",monthLabel:"Jun"},{week:"W20",weekLabel:"Week 20",month:"M05",monthLabel:"Jun"},{week:"W21",weekLabel:"Week 21",month:"M05",monthLabel:"Jun"},{week:"W22",weekLabel:"Week 22",month:"M05",monthLabel:"Jun"},{week:"W23",weekLabel:"Week 23",month:"M06",monthLabel:"Jul"},{week:"W24",weekLabel:"Week 24",month:"M06",monthLabel:"Jul"},{week:"W25",weekLabel:"Week 25",month:"M06",monthLabel:"Jul"},{week:"W26",weekLabel:"Week 26",month:"M06",monthLabel:"Jul"},{week:"W27",weekLabel:"Week 27",month:"M07",monthLabel:"Aug"},{week:"W28",weekLabel:"Week 28",month:"M07",monthLabel:"Aug"},{week:"W29",weekLabel:"Week 29",month:"M07",monthLabel:"Aug"},{week:"W30",weekLabel:"Week 30",month:"M07",monthLabel:"Aug"},{week:"W31",weekLabel:"Week 31",month:"M08",monthLabel:"Sep"},{week:"W32",weekLabel:"Week 32",month:"M08",monthLabel:"Sep"},{week:"W33",weekLabel:"Week 33",month:"M08",monthLabel:"Sep"},{week:"W34",weekLabel:"Week 34",month:"M08",monthLabel:"Sep"},{week:"W35",weekLabel:"Week 35",month:"M08",monthLabel:"Sep"},{week:"W36",weekLabel:"Week 36",month:"M09",monthLabel:"Oct"},{week:"W37",weekLabel:"Week 37",month:"M09",monthLabel:"Oct"},{week:"W38",weekLabel:"Week 38",month:"M09",monthLabel:"Oct"},{week:"W39",weekLabel:"Week 39",month:"M09",monthLabel:"Oct"},{week:"W40",weekLabel:"Week 40",month:"M10",monthLabel:"Nov"},{week:"W41",weekLabel:"Week 41",month:"M10",monthLabel:"Nov"},{week:"W42",weekLabel:"Week 42",month:"M10",monthLabel:"Nov"},{week:"W43",weekLabel:"Week 43",month:"M10",monthLabel:"Nov"},{week:"W44",weekLabel:"Week 44",month:"M11",monthLabel:"Dec"},{week:"W45",weekLabel:"Week 45",month:"M11",monthLabel:"Dec"},{week:"W46",weekLabel:"Week 46",month:"M11",monthLabel:"Dec"},{week:"W47",weekLabel:"Week 47",month:"M11",monthLabel:"Dec"},{week:"W48",weekLabel:"Week 48",month:"M11",monthLabel:"Dec"},{week:"W49",weekLabel:"Week 49",month:"M12",monthLabel:"Jan"},{week:"W50",weekLabel:"Week 50",month:"M12",monthLabel:"Jan"},{week:"W51",weekLabel:"Week 51",month:"M12",monthLabel:"Jan"},{week:"W52",weekLabel:"Week 52",month:"M12",monthLabel:"Jan"}],planning:[{id:"ST035",sku:"SK00158",week:"W01",salesUnits:58},{id:"ST035",sku:"SK00158",week:"W07",salesUnits:107},{id:"ST035",sku:"SK00158",week:"W09",salesUnits:0},{id:"ST035",sku:"SK00158",week:"W11",salesUnits:92},{id:"ST035",sku:"SK00158",week:"W13",salesUnits:122},{id:"ST040",sku:"SK00200",week:"W02",salesUnits:80},{id:"ST040",sku:"SK00200",week:"W06",salesUnits:95},{id:"ST040",sku:"SK00200",week:"W08",salesUnits:60},{id:"ST040",sku:"SK00200",week:"W10",salesUnits:110},{id:"ST040",sku:"SK00200",week:"W12",salesUnits:75},{id:"ST045",sku:"SK00325",week:"W03",salesUnits:45},{id:"ST045",sku:"SK00325",week:"W05",salesUnits:78},{id:"ST045",sku:"SK00325",week:"W07",salesUnits:112},{id:"ST045",sku:"SK00325",week:"W09",salesUnits:90},{id:"ST050",sku:"SK00410",week:"W04",salesUnits:67},{id:"ST050",sku:"SK00410",week:"W06",salesUnits:83},{id:"ST050",sku:"SK00410",week:"W08",salesUnits:94},{id:"ST050",sku:"SK00410",week:"W10",salesUnits:102},{id:"ST050",sku:"SK00410",week:"W12",salesUnits:115},{id:"ST055",sku:"SK00555",week:"W01",salesUnits:59},{id:"ST055",sku:"SK00555",week:"W04",salesUnits:88},{id:"ST055",sku:"SK00555",week:"W07",salesUnits:125},{id:"ST055",sku:"SK00555",week:"W10",salesUnits:98},{id:"ST060",sku:"SK00678",week:"W02",salesUnits:74},{id:"ST060",sku:"SK00678",week:"W05",salesUnits:105},{id:"ST060",sku:"SK00678",week:"W08",salesUnits:97},{id:"ST060",sku:"SK00678",week:"W11",salesUnits:130},{id:"ST065",sku:"SK00790",week:"W03",salesUnits:95},{id:"ST065",sku:"SK00790",week:"W06",salesUnits:110},{id:"ST065",sku:"SK00790",week:"W09",salesUnits:125},{id:"ST065",sku:"SK00790",week:"W12",salesUnits:140},{id:"ST070",sku:"SK00901",week:"W04",salesUnits:68},{id:"ST070",sku:"SK00901",week:"W07",salesUnits:102},{id:"ST070",sku:"SK00901",week:"W10",salesUnits:121},{id:"ST070",sku:"SK00901",week:"W13",salesUnits:99},{id:"ST075",sku:"SK01015",week:"W01",salesUnits:83},{id:"ST075",sku:"SK01015",week:"W05",salesUnits:108},{id:"ST075",sku:"SK01015",week:"W09",salesUnits:140},{id:"ST075",sku:"SK01015",week:"W11",salesUnits:117},{id:"ST080",sku:"SK01125",week:"W02",salesUnits:77},{id:"ST080",sku:"SK01125",week:"W06",salesUnits:112},{id:"ST080",sku:"SK01125",week:"W08",salesUnits:134},{id:"ST080",sku:"SK01125",week:"W12",salesUnits:145},{id:"ST085",sku:"SK01250",week:"W03",salesUnits:90},{id:"ST085",sku:"SK01250",week:"W07",salesUnits:130},{id:"ST085",sku:"SK01250",week:"W10",salesUnits:155},{id:"ST085",sku:"SK01250",week:"W13",salesUnits:172}],chart:[{week:"W01",gmDollars:140061.78,salesDollars:239526.34,gmPercent:.5847},{week:"W02",gmDollars:110391.21,salesDollars:258634.6,gmPercent:.4268},{week:"W03",gmDollars:101657.28,salesDollars:263774.46,gmPercent:.3854},{week:"W04",gmDollars:134341.07,salesDollars:332652.41,gmPercent:.4038},{week:"W05",gmDollars:130398.15,salesDollars:275162.26,gmPercent:.4739},{week:"W06",gmDollars:137438.96,salesDollars:319884.6,gmPercent:.4285},{week:"W07",gmDollars:116387.03,salesDollars:252500.95,gmPercent:.4618},{week:"W08",gmDollars:159070.65,salesDollars:335894.42,gmPercent:.4733},{week:"W09",gmDollars:88328.55,salesDollars:174790.68,gmPercent:.5056},{week:"W10",gmDollars:119284.46,salesDollars:261782.66,gmPercent:.4554},{week:"W11",gmDollars:130099.18,salesDollars:292137.38,gmPercent:.4451},{week:"W12",gmDollars:139360.58,salesDollars:284207.55,gmPercent:.49},{week:"W13",gmDollars:128456.87,salesDollars:294047.89,gmPercent:.437},{week:"W14",gmDollars:86661.91,salesDollars:189073.83,gmPercent:.4583},{week:"W15",gmDollars:151592.15,salesDollars:271421.42,gmPercent:.5582},{week:"W16",gmDollars:151686.17,salesDollars:347732,gmPercent:.4364},{week:"W17",gmDollars:88672.61,salesDollars:206735.46,gmPercent:.428},{week:"W18",gmDollars:81851.01,salesDollars:175256.89,gmPercent:.467},{week:"W19",gmDollars:117644.42,salesDollars:257209.45,gmPercent:.457},{week:"W20",gmDollars:75460.72,salesDollars:196483.55,gmPercent:.3849},{week:"W21",gmDollars:89873.37,salesDollars:232307.36,gmPercent:.3877},{week:"W22",gmDollars:217801.24,salesDollars:400567.98,gmPercent:.5437},{week:"W23",gmDollars:80015.21,salesDollars:187739.22,gmPercent:.4265},{week:"W24",gmDollars:99365.58,salesDollars:233854.94,gmPercent:.4255},{week:"W25",gmDollars:146165.37,salesDollars:338581.81,gmPercent:.432},{week:"W26",gmDollars:90708.15,salesDollars:281071.52,gmPercent:.3232},{week:"W27",gmDollars:180504.75,salesDollars:276942.13,gmPercent:.6517},{week:"W28",gmDollars:139442.48,salesDollars:303695.38,gmPercent:.4599},{week:"W29",gmDollars:139216.77,salesDollars:314421.17,gmPercent:.4435},{week:"W30",gmDollars:100489.04,salesDollars:262484.91,gmPercent:.3825},{week:"W31",gmDollars:152765.66,salesDollars:316858.04,gmPercent:.4825},{week:"W32",gmDollars:75704.04,salesDollars:169452.56,gmPercent:.445},{week:"W33",gmDollars:167605.48,salesDollars:340037.18,gmPercent:.4936},{week:"W34",gmDollars:79485.96,salesDollars:234269.32,gmPercent:.3397},{week:"W35",gmDollars:119596.45,salesDollars:256836.52,gmPercent:.4656},{week:"W36",gmDollars:120675.47,salesDollars:260032.26,gmPercent:.4634},{week:"W37",gmDollars:97413.66,salesDollars:257055.42,gmPercent:.3794},{week:"W38",gmDollars:155962.01,salesDollars:340058.58,gmPercent:.4584},{week:"W39",gmDollars:37571.16,salesDollars:161007.9,gmPercent:.2334},{week:"W40",gmDollars:121974.94,salesDollars:242047.42,gmPercent:.5041},{week:"W41",gmDollars:128438.16,salesDollars:196580.97,gmPercent:.6537},{week:"W42",gmDollars:71208.94,salesDollars:201049.32,gmPercent:.353},{week:"W43",gmDollars:128752.29,salesDollars:293362.74,gmPercent:.4394},{week:"W44",gmDollars:55866.91,salesDollars:259462.35,gmPercent:.2153},{week:"W45",gmDollars:134230.98,salesDollars:358561.15,gmPercent:.3744},{week:"W46",gmDollars:146587.86,salesDollars:281889.16,gmPercent:.5207},{week:"W47",gmDollars:73497.75,salesDollars:209428.43,gmPercent:.35},{week:"W48",gmDollars:133371.47,salesDollars:233990.84,gmPercent:.5705},{week:"W49",gmDollars:73773.56,salesDollars:225732.78,gmPercent:.3273},{week:"W50",gmDollars:110037.62,salesDollars:244378.2,gmPercent:.45},{week:"W51",gmDollars:96149.38,salesDollars:266757.29,gmPercent:.36},{week:"W52",gmDollars:138093.51,salesDollars:245570.72,gmPercent:.5638}]};var oS=(()=>{class e{constructor(i,n){this._renderer=i,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,n){this._renderer.setProperty(this._elementRef.nativeElement,i,n)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}static{this.\u0275fac=function(n){return new(n||e)(q(Ln),q(Et))}}static{this.\u0275dir=We({type:e})}}return e})(),aS=(()=>{class e extends oS{static{this.\u0275fac=(()=>{let i;return function(s){return(i||(i=en(e)))(s||e)}})()}static{this.\u0275dir=We({type:e,features:[Ai]})}}return e})(),pf=new G("");var YT={provide:pf,useExisting:Tn(()=>Br),multi:!0};function QT(){let e=Ti()?Ti().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var ZT=new G(""),Br=(()=>{class e extends oS{constructor(i,n,s){super(i,n),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!QT())}writeValue(i){let n=i??"";this.setProperty("value",n)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}static{this.\u0275fac=function(n){return new(n||e)(q(Ln),q(Et),q(ZT,8))}}static{this.\u0275dir=We({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,s){n&1&&je("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[On([YT]),Ai]})}}return e})();function XT(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}var ff=new G(""),lS=new G("");function JT(e){return XT(e.value)?{required:!0}:null}function Xb(e){return null}function cS(e){return e!=null}function uS(e){return Ds(e)?Re(e):e}function dS(e){let t={};return e.forEach(i=>{t=i!=null?D(D({},t),i):t}),Object.keys(t).length===0?null:t}function hS(e,t){return t.map(i=>i(e))}function ek(e){return!e.validate}function gS(e){return e.map(t=>ek(t)?t:i=>t.validate(i))}function tk(e){if(!e)return null;let t=e.filter(cS);return t.length==0?null:function(i){return dS(hS(i,t))}}function mf(e){return e!=null?tk(gS(e)):null}function ik(e){if(!e)return null;let t=e.filter(cS);return t.length==0?null:function(i){let n=hS(i,t).map(uS);return lh(n).pipe(re(dS))}}function vf(e){return e!=null?ik(gS(e)):null}function Jb(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function nk(e){return e._rawValidators}function sk(e){return e._rawAsyncValidators}function gf(e){return e?Array.isArray(e)?e:[e]:[]}function Cu(e,t){return Array.isArray(e)?e.includes(t):e===t}function eS(e,t){let i=gf(t);return gf(e).forEach(s=>{Cu(i,s)||i.push(s)}),i}function tS(e,t){return gf(t).filter(i=>!Cu(e,i))}var wu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=mf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=vf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,i){return this.control?this.control.hasError(t,i):!1}getError(t,i){return this.control?this.control.getError(t,i):null}},Hr=class extends wu{get formDirective(){return null}get path(){return null}},wa=class extends wu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},yu=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},rk={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},nZ=_(D({},rk),{"[class.ng-submitted]":"isSubmitted"}),xu=(()=>{class e extends yu{constructor(i){super(i)}static{this.\u0275fac=function(n){return new(n||e)(q(wa,2))}}static{this.\u0275dir=We({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,s){n&2&&Lc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ai]})}}return e})(),Du=(()=>{class e extends yu{constructor(i){super(i)}static{this.\u0275fac=function(n){return new(n||e)(q(Hr,10))}}static{this.\u0275dir=We({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,s){n&2&&Lc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ai]})}}return e})();var ma="VALID",vu="INVALID",Vr="PENDING",va="DISABLED";function pS(e){return(Eu(e)?e.validators:e)||null}function ok(e){return Array.isArray(e)?mf(e):e||null}function fS(e,t){return(Eu(t)?t.asyncValidators:e)||null}function ak(e){return Array.isArray(e)?vf(e):e||null}function Eu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function lk(e,t,i){let n=e.controls;if(!(t?Object.keys(n):n).length)throw new L(1e3,"");if(!n[i])throw new L(1001,"")}function ck(e,t,i){e._forEachChild((n,s)=>{if(i[s]===void 0)throw new L(1002,"")})}var bu=class{constructor(t,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ma}get invalid(){return this.status===vu}get pending(){return this.status==Vr}get disabled(){return this.status===va}get enabled(){return this.status!==va}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(eS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(eS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(tS(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(tS(t,this._rawAsyncValidators))}hasValidator(t){return Cu(this._rawValidators,t)}hasAsyncValidator(t){return Cu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(i=>{i.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Vr,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=va,this.errors=null,this._forEachChild(n=>{n.disable(_(D({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_(D({},t),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let i=this._parentMarkedDirty(t.onlySelf);this.status=ma,this._forEachChild(n=>{n.enable(_(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(_(D({},t),{skipPristineCheck:i})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ma||this.status===Vr)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?va:ma}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Vr,this._hasOwnPendingAsyncValidator=!0;let i=uS(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,i={}){this.errors=t,this._updateControlsErrors(i.emitEvent!==!1)}get(t){let i=t;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((n,s)=>n&&n._find(s),this)}getError(t,i){let n=i?this.get(i):this;return n&&n.errors?n.errors[t]:null}hasError(t,i){return!!this.getError(t,i)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new I,this.statusChanges=new I}_calculateStatus(){return this._allControlsDisabled()?va:this.errors?vu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vr)?Vr:this._anyControlsHaveStatus(vu)?vu:ma}_anyControlsHaveStatus(t){return this._anyControls(i=>i.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Eu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let i=this._parent&&this._parent.dirty;return!t&&!!i&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=ok(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ak(this._rawAsyncValidators)}},Su=class extends bu{constructor(t,i,n){super(pS(i),fS(n,i)),this.controls=t,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,i){return this.controls[t]?this.controls[t]:(this.controls[t]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(t,i,n={}){this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(t,i,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],i&&this.registerControl(t,i),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,i={}){ck(this,!0,t),Object.keys(t).forEach(n=>{lk(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(t,i={}){t!=null&&(Object.keys(t).forEach(n=>{let s=this.controls[n];s&&s.patchValue(t[n],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(t={},i={}){this._forEachChild((n,s)=>{n.reset(t?t[s]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i),this._updateTouched(i),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(t,i,n)=>(t[n]=i.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(i,n)=>n._syncPendingControls()?!0:i);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(i=>{let n=this.controls[i];n&&t(n,i)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[i,n]of Object.entries(this.controls))if(this.contains(i)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(i,n,s)=>((n.enabled||this.disabled)&&(i[s]=n.value),i))}_reduceChildren(t,i){let n=t;return this._forEachChild((s,r)=>{n=i(n,s,r)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Cf=new G("CallSetDisabledState",{providedIn:"root",factory:()=>wf}),wf="always";function uk(e,t){return[...t.path,e]}function mS(e,t,i=wf){vS(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||i==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),hk(e,t),pk(e,t),gk(e,t),dk(e,t)}function iS(e,t){e.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(t)})}function dk(e,t){if(t.valueAccessor.setDisabledState){let i=n=>{t.valueAccessor.setDisabledState(n)};e.registerOnDisabledChange(i),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(i)})}}function vS(e,t){let i=nk(e);t.validator!==null?e.setValidators(Jb(i,t.validator)):typeof i=="function"&&e.setValidators([i]);let n=sk(e);t.asyncValidator!==null?e.setAsyncValidators(Jb(n,t.asyncValidator)):typeof n=="function"&&e.setAsyncValidators([n]);let s=()=>e.updateValueAndValidity();iS(t._rawValidators,s),iS(t._rawAsyncValidators,s)}function hk(e,t){t.valueAccessor.registerOnChange(i=>{e._pendingValue=i,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&CS(e,t)})}function gk(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&CS(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function CS(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function pk(e,t){let i=(n,s)=>{t.valueAccessor.writeValue(n),s&&t.viewToModelUpdate(n)};e.registerOnChange(i),t._registerOnDestroy(()=>{e._unregisterOnChange(i)})}function fk(e,t){e==null,vS(e,t)}function mk(e,t){if(!e.hasOwnProperty("model"))return!1;let i=e.model;return i.isFirstChange()?!0:!Object.is(t,i.currentValue)}function vk(e){return Object.getPrototypeOf(e.constructor)===aS}function Ck(e,t){e._syncPendingControls(),t.forEach(i=>{let n=i.control;n.updateOn==="submit"&&n._pendingChange&&(i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function wk(e,t){if(!t)return null;Array.isArray(t);let i,n,s;return t.forEach(r=>{r.constructor===Br?i=r:vk(r)?n=r:s=r}),s||n||i||null}var yk={provide:Hr,useExisting:Tn(()=>ya)},Ca=Promise.resolve(),ya=(()=>{class e extends Hr{constructor(i,n,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new I,this.form=new Su({},mf(i),vf(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Ca.then(()=>{let n=this._findContainer(i.path);i.control=n.registerControl(i.name,i.control),mS(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Ca.then(()=>{let n=this._findContainer(i.path);n&&n.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Ca.then(()=>{let n=this._findContainer(i.path),s=new Su({});fk(s,i),n.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Ca.then(()=>{let n=this._findContainer(i.path);n&&n.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,n){Ca.then(()=>{this.form.get(i.path).setValue(n)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,Ck(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}static{this.\u0275fac=function(n){return new(n||e)(q(ff,10),q(lS,10),q(Cf,8))}}static{this.\u0275dir=We({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,s){n&1&&je("submit",function(o){return s.onSubmit(o)})("reset",function(){return s.onReset()})},inputs:{options:[nt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[On([yk]),Ai]})}}return e})();function nS(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}function sS(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var bk=class extends bu{constructor(t=null,i,n){super(pS(i),fS(n,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Eu(i)&&(i.nonNullable||i.initialValueIsDefault)&&(sS(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,i={}){this.value=this._pendingValue=t,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(t,i={}){this.setValue(t,i)}reset(t=this.defaultValue,i={}){this._applyFormState(t),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){nS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){nS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){sS(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Sk={provide:wa,useExisting:Tn(()=>ba)},rS=Promise.resolve(),ba=(()=>{class e extends wa{constructor(i,n,s,r,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new bk,this._registered=!1,this.name="",this.update=new I,this._parent=i,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=wk(this,r)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let n=i.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),mk(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){rS.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let n=i.isDisabled.currentValue,s=n!==0&&Nn(n);rS.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?uk(i,this._parent):[i]}static{this.\u0275fac=function(n){return new(n||e)(q(Hr,9),q(ff,10),q(lS,10),q(pf,10),q(Zt,8),q(Cf,8))}}static{this.\u0275dir=We({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[nt.None,"disabled","isDisabled"],model:[nt.None,"ngModel","model"],options:[nt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[On([Sk]),Ai,mi]})}}return e})(),Mu=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=We({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})(),xk={provide:pf,useExisting:Tn(()=>Sa),multi:!0},Sa=(()=>{class e extends aS{writeValue(i){let n=i??"";this.setProperty("value",n)}registerOnChange(i){this.onChange=n=>{i(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let i;return function(s){return(i||(i=en(e)))(s||e)}})()}static{this.\u0275dir=We({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,s){n&1&&je("input",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},features:[On([xk]),Ai]})}}return e})();var Dk=(()=>{class e{constructor(){this._validator=Xb}ngOnChanges(i){if(this.inputName in i){let n=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Xb,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275dir=We({type:e,features:[mi]})}}return e})();var Ek={provide:ff,useExisting:Tn(()=>xa),multi:!0};var xa=(()=>{class e extends Dk{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Nn,this.createValidator=i=>JT}enabled(i){return i}static{this.\u0275fac=(()=>{let i;return function(s){return(i||(i=en(e)))(s||e)}})()}static{this.\u0275dir=We({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,s){n&2&&Wo("required",s._enabled?"":null)},inputs:{required:"required"},features:[On([Ek]),Ai]})}}return e})();var Mk=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({})}}return e})();var wS=(()=>{class e{static withConfig(i){return{ngModule:e,providers:[{provide:Cf,useValue:i.callSetDisabledState??wf}]}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({imports:[Mk]})}}return e})();var Zr=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){let n=t?this.allAsyncListeners:this.allSyncListeners,s=n.get(e);return!s&&i&&(s=new Set,n.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){let n=this.getListeners(e,i,!1);n&&(n.delete(t),n.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let i=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let n=(a,l)=>a.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),s=this.getListeners(i,t,!1)??new Set,r=new Set(s);r.size>0&&n(r,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(i,e)):()=>a(i,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},XS=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(XS||{}),bS={};function sm(e,t){bS[t]||(e(),bS[t]=!0)}function ii(e,...t){console.log("AG Grid: "+e,...t)}function F(e,...t){sm(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function ae(e,...t){sm(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function rm(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Rk(e){Fk(e,400)}var yf=[],bf=!1;function SS(e){yf.push(e),!bf&&(bf=!0,window.setTimeout(()=>{let t=yf.slice();yf.length=0,bf=!1,t.forEach(i=>i())},0))}function Fk(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function bt(e,t){let i;return function(...n){let s=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(s,n)},t)}}function xS(e,t){let i=0;return function(...n){let s=this,r=new Date().getTime();r-i<t||(i=r,e.apply(s,n))}}function Ik(e,t,i=100,n){let s=new Date().getTime(),r=null,o=!1,a=()=>{let l=new Date().getTime()-s>i;(e()||l)&&(t(),o=!0,r!=null&&(window.clearInterval(r),r=null),l&&n&&F(n))};a(),o||(r=window.setInterval(a,10))}function Pk(...e){return t=>e.reduce((i,n)=>n(i),t)}function cn(e){return e==null||e===""?null:e}function P(e,t=!1){return e!=null&&(e!==""||t)}function X(e){return!P(e)}function Ut(e){return e==null||e.length===0}function Nf(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function ks(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;let t=parseInt(e,10);return isNaN(t)?void 0:t}function Vf(e){if(e!==void 0)return e===null||e===""?!1:Hf(e)}function Hf(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function La(e,t){let i=e?JSON.stringify(e):null,n=t?JSON.stringify(t):null;return i===n}function Ak(e,t,i=!1){let n=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&s)return 0;if(n)return-1;if(s)return 1;function r(o,a){return o>a?1:o<a?-1:0}if(typeof e!="string"||!i)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function Lu(e){if(e instanceof Set||e instanceof Map){let t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}function JS(e,t){return e.get("rowModelType")===t}function Fe(e){return JS(e,"clientSide")}function gn(e){return JS(e,"serverSide")}function Xe(e,t){return e.get("domLayout")===t}function Hu(e){return zu(e)!==void 0}function Bu(e){return!e.get("suppressAsyncEvents")}function ex(e){return typeof e.get("getRowHeight")=="function"}function Tk(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function qn(e,t,i=!1,n){if(n==null&&(n=e.environment.getDefaultRowHeight()),ex(e)){if(i)return{height:n,estimated:!0};let o={node:t,data:t.data},a=e.getCallback("getRowHeight")(o);if(Bf(a))return a===0&&F("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,a),estimated:!1}}if(t.detail&&e.get("masterDetail"))return kk(e);let s=e.get("rowHeight");return{height:s&&Bf(s)?s:n,estimated:!1}}function kk(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};let t=e.get("detailRowHeight");return Bf(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function _s(e){let{environment:t}=e,i=e.get("rowHeight");if(!i||X(i))return t.getDefaultRowHeight();let n=t.refreshRowHeightVariable();return n!==-1?n:(F("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function Bf(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Oa(e,t,i){let n=t[e.getDomDataKey()];return n?n[i]:void 0}function Vs(e,t,i,n){let s=e.getDomDataKey(),r=t[s];X(r)&&(r={},t[s]=r),r[i]=n}function Pe(e){let t=null,i=e.get("getDocument");return i&&P(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&P(t)?t:document}function tx(e){return Pe(e).defaultView||window}function Na(e){return e.eGridDiv.getRootNode()}function De(e){return Na(e).activeElement}function ix(e){let t=Pe(e),i=De(e);return i===null||i===t.body}function jr(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function Ju(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Xe(e,"print"))}function Oi(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function Gf(e){let t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function nx(e){let t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function sx(e){let t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;let i=e.get("groupIncludeFooter");if(typeof i=="function"){let n=e.getCallback("groupIncludeFooter");return s=>n(s)?"bottom":void 0}return()=>i?"bottom":void 0}function rx(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function ed(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function Xr(e){let t=e.getCallback("getRowId");return t===void 0?t:i=>{let n=t(i);return typeof n!="string"&&(F("The getRowId callback must return a string. The ID ",n," is being cast to a string."),n=String(n)),n}}function qr(e){return e?.checkboxes??!0}function Gu(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function _k(e){return e?.hideDisabledCheckboxes??!1}function Lk(e){return typeof e.get("rowSelection")!="string"}function Ok(e){return e.get("cellSelection")!==void 0}function Nk(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t?.suppressMultiRanges??!1:!1:e.get("suppressMultiRangeSelection")}function Vi(e){let t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function Vk(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="range":!1:e.get("enableRangeHandle")}function DS(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="fill":!1:e.get("enableFillHandle")}function ox(e){let t=e.get("rowSelection")??"single";if(typeof t=="string"){let i=e.get("suppressRowClickSelection"),n=e.get("suppressRowDeselection");return i&&n?!1:i?"enableDeselection":n?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function Hk(e){let t=ox(e);return t===!0||t==="enableSelection"}function ES(e){let t=ox(e);return t===!0||t==="enableDeselection"}function om(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function zu(e){let t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function am(e){return zu(e)==="multiRow"}function Bk(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function lm(e){let t=e.get("rowSelection");if(typeof t=="string"){let i=e.get("groupSelectsChildren"),n=e.get("groupSelectsFiltered");return i&&n?"filteredDescendants":i?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function Hs(e){let t=lm(e);return t==="descendants"||t==="filteredDescendants"}function Sf(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function te(e){if(!(!e||!e.length))return e[e.length-1]}function Qn(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((n,s)=>i?i(n,t[s]):t[s]===n)}function Gk(e){return e.sort((t,i)=>t-i)}function ax(e,t){let i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function St(e,t){let i=e.indexOf(t);i>=0&&e.splice(i,1)}function zk(e,t){for(let i=0;i<t.length;i++)ax(e,t[i])}function Wk(e,t){for(let i=0;i<t.length;i++)St(e,t[i])}function Wu(e,t,i){e.splice(i,0,t)}function lx(e,t,i){Wk(e,t),t.slice().reverse().forEach(n=>Wu(e,n,i))}function Ls(e,t){return e.indexOf(t)>-1}function jk(e){return e?.flatMap(t=>t)??[]}function MS(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var cx="__ag_Grid_Stop_Propagation",Uk=["touchstart","touchend","touchmove","touchcancel","scroll"],xf={};function Kr(e){e[cx]=!0}function un(e){return e[cx]===!0}var ux=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof xf[i]=="boolean")return xf[i];let n=document.createElement(e[i]||"div");return i="on"+i,xf[i]=i in n}})();function zf(e,t,i){let n=t;for(;n;){let s=Oa(e,n,i);if(s)return s;n=n.parentElement}return null}function $k(e,t){return!t||!e?!1:Kk(t).indexOf(e)>=0}function qk(e){let t=[],i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function Kk(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():qk(t)}function Yk(e,t,i,n){let r=Ls(Uk,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,n,r)}var E=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new Zr),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let i=[];for(let n in t){let s=t[n];s&&i.push(this._setupListener(e,n,s))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?Yk(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);let n=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);let i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let i=e.join("-")+this.propertyListenerId++,n=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=s.changeSet.id}let r={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(r)};e.forEach(s=>this.setupGridOptionListener(s,n))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function wt(e){return e instanceof Ou}var Ou=class extends E{constructor(e,t,i,n){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=gx(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=n}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Yn(t)?e.push(t):wt(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1,n=this.findChildrenRemovingPadding();for(let r=0,o=n.length;r<o;r++){let a=n[r];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,i=!0):l==="closed"?(t=!0,i=!0):(e=!0,t=!0)}let s=e&&t&&i;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=i=>{i.forEach(n=>{wt(n)&&n.isPadding()?t(n.children):e.push(n)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},dx="ag-Grid-ControlsColumn",Qk=class extends E{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){let{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];let i=qr(t),n=Gu(t);if(i||n){let s=e.get("selectionColumnDef"),r=e.get("enableRtl"),o=_(D({maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:r?"right":"left",comparator(l,c,u,d){let h=u.isSelected(),g=d.isSelected();return h&&g?0:h?1:-1},editable:!1,suppressFillHandle:!0},s),{colId:`${dx}`}),a=new hm(o,null,o.colId,!1);return this.createBean(a),[a]}return[]}},td="ag-Grid-AutoColumn";function cm(e){let t=[],i=n=>{for(let s=0;s<n.length;s++){let r=n[s];Yn(r)?t.push(r):wt(r)&&i(r.getChildren())}};return i(e),t}function an(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function Un(e,t,i){let n={};if(!t)return;hn(null,t,r=>{n[r.getInstanceId()]=r}),i&&hn(null,i,r=>{n[r.getInstanceId()]=null});let s=Object.values(n).filter(r=>r!=null);e.destroyBeans(s)}function Wf(e){return e.getId().startsWith(td)}function Wa(e){return e.getColId().startsWith(dx)}function Nu(e){let t=[];return e instanceof Array?e.some(n=>typeof n!="string")?F("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):F("colDef.type should be of type 'string' | 'string[]'"),t}var um=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,n)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,n))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},dm=new Set(["__proto__","constructor","prototype"]);function ti(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(let[i,n]of Object.entries(e))t(i,n)}}function hx(e){let t={},i=Object.keys(e);for(let n=0;n<i.length;n++){if(dm.has(i[n]))continue;let s=i[n],r=e[s];t[s]=r}return t}function jf(e,t){if(!e)return;let i=e,n={};return Object.keys(i).forEach(s=>{if(t&&t.indexOf(s)>=0||dm.has(s))return;let r=i[s];Uf(r)&&r.constructor===Object?n[s]=jf(r):n[s]=r}),n}function Kn(e){if(!e)return[];let t=Object;if(typeof t.values=="function")return t.values(e);let i=[];for(let n in e)e.hasOwnProperty(n)&&e.propertyIsEnumerable(n)&&i.push(e[n]);return i}function yt(e,t,i=!0,n=!1){P(t)&&ti(t,(s,r)=>{if(dm.has(s))return;let o=e[s];o!==r&&(n&&o==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(o={},e[s]=o),Uf(r)&&Uf(o)&&!Array.isArray(o)?yt(o,r,i,n):(i||r!==void 0)&&(e[s]=r))})}function Pa(e,t,i){if(!t||!e)return;if(!i)return e[t];let n=t.split("."),s=e;for(let r=0;r<n.length;r++){if(s==null)return;s=s[n[r]]}return s}function Uf(e){return typeof e=="object"&&e!==null}var Zk={resizable:!0,sortable:!0},Xk=0;function gx(){return Xk++}function Yn(e){return e instanceof hm}var hm=class extends E{constructor(e,t,i,n){super(),this.isColumn=!0,this.instanceId=gx(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new Zr,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);let n=e.hide,s=e.initialHide;n!==void 0?this.visible=!n:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let r=e.flex,o=e.initialFlex;r!==void 0?this.flex=r:o!==void 0&&(this.flex=o)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=P(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=P(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=P(this.colDef.tooltipField)||P(this.colDef.tooltipValueGetter)||P(this.colDef.tooltipComponent)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,i=ks(e.width),n=ks(e.initialWidth);return i!=null?t=i:n!=null?t=n:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(X(this.colDef)||X(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new um(this.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){let i=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){let t=this.gos.get("rowSelection");if(t&&typeof t!="string"){let i=Wa(this)&&qr(t);return this.isColumnFunc(e,i)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??Zk[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return X(this.sort)}isSorting(){return P(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let n=this.createColumnEvent("filterChanged",t);i&&yt(n,i),this.columnEventService.dispatchEvent(n)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(X(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(X(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},Jk={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},e_=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Nf(e);let i=0;for(;;){let n;if(e?(n=e,i!==0&&(n+="_"+i)):t?(n=t,i!==0&&(n+="_"+i)):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}}},t_=class extends E{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,n){let s=new e_,{existingCols:r,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(i);s.addExistingKeys(a);let l=this.recursivelyCreateColumns(e,0,t,r,s,o,n),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,s);return hn(null,u,(h,g)=>{wt(h)&&h.setupExpandable(),h.setOriginalParent(g)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){let t=[],i=[],n=[];return e&&hn(null,e,s=>{if(wt(s)){let r=s;i.push(r)}else{let r=s;n.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}balanceTreeForAutoCols(e,t){let i=[],n=this.findDepth(t);return e.forEach(s=>{let r=s;for(let o=n-1;o>=0;o--){let a=new Ou(null,`FAKE_PATH_${s.getId()}}_${o}`,!0,o);this.createBean(a),a.setChildren([r]),r.setOriginalParent(a),r=a}n===0&&s.setOriginalParent(null),i.push(r)}),[i,n]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&wt(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,n){let s=[];for(let r=0;r<e.length;r++){let o=e[r];if(wt(o)){let a=o,l=this.balanceColumnTree(a.getChildren(),t+1,i,n);a.setChildren(l),s.push(a)}else{let a,l;for(let c=i-1;c>=t;c--){let u=n.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new Ou(d,u,!0,t);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(s.push(a),e.some(u=>wt(u))){l.setChildren([o]);continue}else{l.setChildren(e);break}s.push(o)}}return s}findMaxDept(e,t){let i=t;for(let n=0;n<e.length;n++){let s=e[n];if(wt(s)){let r=s,o=this.findMaxDept(r.getChildren(),t+1);i<o&&(i=o)}}return i}recursivelyCreateColumns(e,t,i,n,s,r,o){if(!e)return[];let a=new Array(e.length);for(let l=0;l<a.length;l++){let c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(i,c,t,n,s,r,o):a[l]=this.createColumn(i,c,n,s,o)}return a}createColumnGroup(e,t,i,n,s,r,o){let a=this.createMergedColGroupDef(t),l=s.getUniqueKey(a.groupId||null,null),c=new Ou(a,l,!1,i);this.createBean(c);let u=this.findExistingGroup(t,r);u&&r.splice(u.idx,1);let d=u?.group;d&&c.setExpanded(d.isExpanded());let h=this.recursivelyCreateColumns(a.children,i+1,e,n,s,r,o);return c.setChildren(h),c}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,n,s){let r=this.findExistingColumn(t,i);r&&i?.splice(r.idx,1);let o=r?.column;if(o){let a=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(a,t,s),this.applyColumnState(o,a,s)}else{let a=n.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);o=new hm(l,t,a,e),this.createBean(o)}return this.dataTypeService?.addColumnListeners(o),o}applyColumnState(e,t,i){let n=ks(t.flex);if(n!==void 0&&e.setFlex(n),e.getFlex()<=0){let a=ks(t.width);if(a!=null)e.setActualWidth(a,i);else{let l=e.getActualWidth();e.setActualWidth(l,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));let r=ks(t.sortIndex);r!==void 0&&e.setSortIndex(r);let o=Vf(t.hide);o!==void 0&&e.setVisible(!o,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){let n=t[i].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(n.field===e.field)return{idx:i,column:t[i]};continue}if(n===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){let s=t[n];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:n,group:s}}}addColumnDefaultAndTypes(e,t){let i={},n=this.gos.get("defaultColDef");yt(i,n,!1,!0);let s=this.updateColDefAndGetColumnType(i,e,t);s&&this.assignColumnTypes(s,i),yt(i,e,!1,!0);let r=this.gos.get("autoGroupColumnDef"),o=Oi(this.gos);return e.rowGroup&&r&&o&&yt(i,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService?.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){let n=this.dataTypeService?.updateColDefAndGetColumnType(e,t,i),s=t.type??n??e.type;return e.type=s,s?Nu(s):void 0}assignColumnTypes(e,t){if(!e.length)return;let i=Object.assign({},Jk),n=this.gos.get("columnTypes")||{};ti(n,(s,r)=>{s in i?F(`the column type '${s}' is a default column type and cannot be overridden.`):(r.type&&F("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[s]=r)}),e.forEach(s=>{let r=i[s.trim()];r?yt(t,r,!1,!0):F("colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function hn(e,t,i){if(t)for(let n=0;n<t.length;n++){let s=t[n];wt(s)&&hn(s,s.getChildren(),i),i(s,e)}}var i_=class extends E{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){let e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(Ps(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,Ps(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(Ps(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(Ps(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),Ps(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){let t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();let i=this.colDefCols?.list,n=this.colDefCols?.tree,s=this.columnFactory.createColumnTree(this.colDefs,!0,n,e);Un(this.context,this.colDefCols?.tree,s.columnTree);let r=s.columnTree,o=s.treeDept,a=cm(r),l={};a.forEach(c=>l[c.getId()]=c),this.colDefCols={tree:r,treeDepth:o,list:a,map:l},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;let t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();let i=Tk(this.gos,this.showingPivotResult);(!e||i)&&this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!Qn(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){let{map:t,list:i,tree:n,treeDepth:s}=e;this.cols={list:i.slice(),map:D({},t),tree:n.slice(),treeDepth:s},e.list.some(o=>this.cols?.map[o.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:t,list:i,tree:n,treeDepth:s}=this.colDefCols;this.cols={list:i.slice(),map:D({},t),tree:n.slice(),treeDepth:s}}}getColsToShow(){let e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(n=>{let s=Wf(n);if(e){let r=t&&Ls(t,n);return s||r}else return s||n.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),RS(this.cols))}createAutoCols(){let e=ed(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),s=!(i.length>0||this.gos.get("treeData"))||t||e,r=()=>{this.autoCols&&(Un(this.context,this.autoCols.tree),this.autoCols=null)};if(s||!this.autoColService){r();return}let o=this.autoColService.createAutoCols(i)??[],a=IS(o,this.autoCols?.list||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&u)return;r();let[d,h]=this.columnFactory.balanceTreeForAutoCols(o,this.cols.tree);this.autoCols={list:o,tree:d,treeDepth:h,map:{}};let g=p=>{if(!p)return null;let f=p.filter(m=>!Wf(m));return[...o,...f]};this.lastOrder=g(this.lastOrder),this.lastPivotOrder=g(this.lastPivotOrder)}createControlsCols(){let e=()=>{Un(this.context,this.controlsCols?.tree),this.controlsCols=null};this.controlsColService||e();let t=this.cols.treeDepth,n=(this.controlsCols?.treeDepth??-1)==t,s=this.controlsColService?.createControlsCols()??[];if(IS(s,this.controlsCols?.list??[])&&n)return;e();let[o,a]=this.columnFactory.balanceTreeForAutoCols(s,this.cols.tree);this.controlsCols={list:s,tree:o,treeDepth:a,map:{}};let l=c=>{if(!c)return null;let u=c.filter(d=>!Wa(d));return[...s,...u]};this.lastOrder=l(this.lastOrder),this.lastPivotOrder=l(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),RS(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||Ut(e))return;if(Xe(this.gos,"print")){F("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let n;t===!0||t==="left"?n="left":t==="right"?n="right":n=null;let s=[];e.forEach(r=>{if(!r)return;let o=this.getCol(r);o&&o.getPinned()!==n&&(o.setPinned(n),s.push(o))}),s.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(s,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let n;wt(e)?n=e.getId():n=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){let t=null;return hn(null,this.cols?.tree,i=>{wt(i)&&i.getId()===e&&(t=i)}),t}isColGroupLocked(e){let t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let n=this.funcColsService.getRowGroupColumns().findIndex(s=>s.getColId()===e.getColId());return t>n}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,Fe(this.gos)||gn(this.gos)||F("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;let n=new Map(this.cols.list.map(l=>[l,!0])),s=e.filter(l=>n.has(l)),r=new Map(s.map(l=>[l,!0])),o=this.cols.list.filter(l=>!r.has(l)),a=s.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}let u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(p=>{let f=a.indexOf(p)>=0,m=u.indexOf(p)<0;f&&m&&u.push(p)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}let d=u.map(g=>a.indexOf(g)),h=Math.max(...d);Wu(a,l,h+1)}),this.cols.list=a}sortColsLikeKeys(e){if(this.cols==null)return;let t=[],i={};e.forEach(s=>{if(i[s])return;let r=this.cols.map[s];r&&(t.push(r),i[s]=!0)});let n=0;if(this.cols.list.forEach(s=>{let r=s.getColId();if(i[r]!=null)return;r.startsWith(td)?Wu(t,s,n++):t.push(s)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){F("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,n)=>{let s=this.cols.list.indexOf(i),r=this.cols.list.indexOf(n);return s-r})}resetColDefIntoCol(e,t){let i=e.getUserProvidedColDef();if(!i)return!1;let n=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(n,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){lx(this.cols?.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((n,s)=>this.lastOrder.indexOf(n)-this.lastOrder.indexOf(s)):this.lastOrder&&e.sort((n,s)=>this.cols.list.indexOf(n)-this.cols.list.indexOf(s));let t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(F("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let e=this.funcColsService.getPivotColumns();return this.pivotMode&&!Ut(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){Un(this.context,this.colDefCols?.tree),Un(this.context,this.autoCols?.tree),Un(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let t=this.pivotResultColsService.getPivotResultCols()?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:i,list:n}=t;if(typeof e=="string"&&i[e])return i[e];for(let s=0;s<n.length;s++)if(FS(n[s],e))return n[s];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find(t=>FS(t,e))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){let e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(let i of t){if(!i)continue;let n=i.getGroupRowCount()||0;for(let s=0;s<n;s++){let r=i.getGroupRowCtrlAtIndex(s),o=e[s];if(r){let a=this.getColumnGroupHeaderRowHeight(r);(o==null||a>o)&&(e[s]=a)}}}return e}getColumnGroupHeaderRowHeight(e){let t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight(),i=0,n=e.getHeaderCtrls();for(let s of n){let r=s.getColumn();if(r.isAutoHeaderHeight()){let o=r.getAutoHeaderHeight();o!=null&&o>i&&(i=o)}}return Math.max(t,i)}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(n=>n.isAutoHeaderHeight()).map(n=>n.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){let n=t&&typeof t!="string"?qr(t):void 0,s=e&&typeof e!="string"?qr(e):void 0,r=n!==s,o=t&&typeof t!="string"?Gu(t):void 0,a=e&&typeof e!="string"?Gu(e):void 0;(r||o!==a)&&this.refreshAll(i)}};function Ps(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function RS(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function FS(e,t){let i=e===t,n=e.getColDef()===t,s=e.getColId()==t;return i||n||s}function IS(e,t){return Qn(e,t,(i,n)=>i.getColId()===n.getColId())}var n_=class extends E{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:i,skipHeaderGroups:n,stopAtGroup:s,source:r="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;let o=[],a=-1,l=i??this.gos.get("skipHeaderOnAutoSize"),c=n??l;for(;a!==0;){a=0;let u=[];t.forEach(d=>{if(!d)return;let h=this.columnModel.getCol(d);if(!h||o.indexOf(h)>=0)return;let g=this.autoWidthCalculator.getPreferredWidthForColumn(h,l);if(g>0){let p=this.normaliseColumnWidth(h,g);h.setActualWidth(p,r),o.push(h),a++}u.push(h)}),u.length&&this.visibleColsService.refresh(r)}c||this.autoSizeColumnGroupsByColumns(t,r,s),this.eventDispatcher.columnResized(o,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){let n=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=i;)l.isPadding()||n.add(l),l=l.getParent()});let r,o=[];for(let a of n){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(r=l.getHeaderCtrlForColumn(a),r)break;r&&r.resizeLeafColumnsToFit(t)}return o}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){let i=e.getMinWidth();t<i&&(t=i);let n=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=n),t}},s_=class extends E{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>St(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>St(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>St(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);let i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return Ut(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;let n=this.columnModel.getColDefCol(e);n&&(n.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[n],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,n)=>this.setRowGroupActive(i,n,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,n)=>{n.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,n)=>this.setValueActive(i,n,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){let n=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(n)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;let n=this.rowGroupCols[e],s=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,n),this.eventDispatcher.rowGroupChanged(s,i)}setColList(e,t,i,n,s,r,o){if(!this.columnModel.getCols())return;let a=new Map;t.forEach((c,u)=>a.set(c,u)),t.length=0,P(e)&&e.forEach(c=>{let u=this.columnModel.getColDefCol(c);u&&t.push(u)}),t.forEach((c,u)=>{let d=a.get(c);if(d===void 0){a.set(c,0);return}n&&d!==u||a.delete(c)}),(this.columnModel.getColDefCols()||[]).forEach(c=>{let u=t.indexOf(c)>=0;r(u,c)}),s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(o),this.eventDispatcher.columnChanged(i,[...a.keys()],o)}updateColList(e,t,i,n,s,r,o){if(!e||Ut(e))return;let a=!1,l=new Set;e.forEach(c=>{if(!c)return;let u=this.columnModel.getColDefCol(c);if(u){if(l.add(u),i){if(t.indexOf(u)>=0)return;t.push(u)}else{let d=t.indexOf(u);if(d<0)return;for(let h=d+1;h<t.length;h++)l.add(t[h]);St(t,u)}s(u),a=!0}}),a&&(n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(o),this.eventDispatcher.genericColumnEvent(r,Array.from(l),o))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,n)=>i.setValueActive(n,e),()=>{},()=>{},i=>{let n=i.aggFunc;if(n===null||n==="")return null;if(n!==void 0)return!!n},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{let n=i.getColDef();n.aggFunc!=null&&n.aggFunc!=""?i.setAggFunc(n.aggFunc):i.getAggFunc()||i.setAggFunc(n.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,n)=>i.setRowGroupActive(n,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,n)=>i.setPivotActive(n,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,n,s,r,o){let a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(h=>{let g=e.indexOf(h)<0,p=h.getColDef(),f=Vf(r(p)),m=Vf(o(p)),v=ks(n(p)),C=ks(s(p)),w;f!==void 0?w=f:v!==void 0?v===null?w=!1:w=v>=0:g?m!==void 0?w=m:C!==void 0?w=C!=null&&C>=0:w=!1:w=t.indexOf(h)>=0,w&&((g?v!=null||C!=null:v!=null)?a.push(h):l.push(h))});let u=h=>{let g=n(h.getColDef()),p=s(h.getColDef());return g??p};a.sort((h,g)=>{let p=u(h),f=u(g);return p===f?0:p<f?-1:1});let d=[].concat(a);return t.forEach(h=>{l.indexOf(h)>=0&&d.push(h)}),l.forEach(h=>{d.indexOf(h)<0&&d.push(h)}),t.forEach(h=>{d.indexOf(h)<0&&i(h,!1)}),d.forEach(h=>{t.indexOf(h)<0&&i(h,!0)}),d}generateColumnStateForRowGroupAndPivotIndexes(e,t){let i={},n=(s,r,o,a,l,c)=>{let u=this.columnModel.getColDefCols();if(!r.length||!u)return[];let d=Object.keys(s),h=new Set(d),g=new Set(d),p=new Set(r.map(b=>{let M=b.getColId();return g.delete(M),M}).concat(d)),f=[],m={},v=0;for(let b=0;b<u.length;b++){let M=u[b].getColId();p.has(M)&&(f.push(M),m[M]=v++)}let C=1e3,w=!1,y=0,S=b=>{let M=m[b];for(let R=y;R<M;R++){let A=f[R];g.has(A)&&(s[A][l]=C++,g.delete(A))}y=M};r.forEach(b=>{let M=b.getColId();if(h.has(M))S(M),s[M][l]=C++;else{let R=b.getColDef();(R[l]===null||R[l]===void 0&&R[c]==null)&&(w||(R[o]||R[o]===void 0&&R[a]?S(M):(g.forEach(V=>{s[V][l]=C+m[V]}),C+=f.length,w=!0)),i[M]||(i[M]={colId:M}),i[M][l]=C++)}})};return n(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),n(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},r_=class extends E{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){let i=this.columnModel.getColDefCols()||[];if(Ut(i))return!1;if(e&&e.state&&!e.state.forEach)return F("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let n=this.funcColsService.getModifyColumnsNoEventsCallbacks(),s=(a,l,c)=>{let u=this.compareColumnStatesAndDispatchEvents(t),d=l.slice(),h={},g={},p=[],f=[],m=0,v=this.funcColsService.getRowGroupColumns().slice(),C=this.funcColsService.getPivotColumns().slice();a.forEach(b=>{let M=b.colId||"";if(M.startsWith(td)){p.push(b),f.push(b);return}let A=c(M);A?(this.syncColumnWithStateItem(A,b,e.defaultState,h,g,!1,t,n),St(d,A)):(f.push(b),m+=1)});let w=b=>this.syncColumnWithStateItem(b,null,e.defaultState,h,g,!1,t,n);d.forEach(w),this.funcColsService.sortRowGroupColumns(PS.bind(this,h,v)),this.funcColsService.sortPivotColumns(PS.bind(this,g,C)),this.columnModel.refreshCols(!1);let S=(this.columnModel.getAutoCols()||[]).slice();return p.forEach(b=>{let M=this.columnModel.getAutoCol(b.colId);St(S,M),this.syncColumnWithStateItem(M,b,e.defaultState,null,null,!0,t,n)}),S.forEach(w),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),u(),{unmatchedAndAutoStates:f,unmatchedCount:m}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=s(e.state||[],i,a=>this.columnModel.getColDefCol(a));if(r.length>0||P(e.defaultState)){let l=this.pivotResultColsService.getPivotResultCols()?.list;o=s(r,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),o===0}resetColumnState(e){let t=this.columnModel.getColDefCols();if(Ut(t))return;let i=this.columnModel.getColDefColTree(),n=cm(i),s=[],r=1e3,o=1e3,a=[],l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),n&&(a=a.concat(n)),a.forEach(c=>{let u=this.getColumnStateFromColDef(c);X(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=r++),X(u.pivotIndex)&&u.pivot&&(u.pivotIndex=o++),s.push(u)}),this.applyColumnState({state:s,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(p,f)=>p??f??null,i=e.getColDef(),n=t(i.sort,i.initialSort),s=t(i.sortIndex,i.initialSortIndex),r=t(i.hide,i.initialHide),o=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex),c=t(i.rowGroupIndex,i.initialRowGroupIndex),u=t(i.rowGroup,i.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);let g=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:s,hide:r,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:g}}syncColumnWithStateItem(e,t,i,n,s,r,o,a){if(!e)return;let l=(y,S)=>{let b={value1:void 0,value2:void 0},M=!1;return t&&(t[y]!==void 0&&(b.value1=t[y],M=!0),P(S)&&t[S]!==void 0&&(b.value2=t[S],M=!0)),!M&&i&&(i[y]!==void 0&&(b.value1=i[y]),P(S)&&i[S]!==void 0&&(b.value2=i[S])),b},c=l("hide").value1;c!==void 0&&e.setVisible(!c,o);let u=l("pinned").value1;u!==void 0&&e.setPinned(u);let d=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),h=l("flex").value1;if(h!==void 0&&e.setFlex(h),h==null){let y=l("width").value1;y!=null&&d!=null&&y>=d&&e.setActualWidth(y,o)}let g=l("sort").value1;g!==void 0&&(g==="desc"||g==="asc"?e.setSort(g,o):e.setSort(void 0,o));let p=l("sortIndex").value1;if(p!==void 0&&e.setSortIndex(p),r||!e.isPrimary())return;let f=l("aggFunc").value1;f!==void 0&&(typeof f=="string"?(e.setAggFunc(f),e.isValueActive()||(e.setValueActive(!0,o),a.addValueCol(e))):(P(f)&&F("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),a.removeValueCol(e))));let{value1:m,value2:v}=l("rowGroup","rowGroupIndex");(m!==void 0||v!==void 0)&&(typeof v=="number"||m?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),a.addGroupCol(e)),n&&typeof v=="number"&&(n[e.getId()]=v)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),a.removeGroupCol(e)));let{value1:C,value2:w}=l("pivot","pivotIndex");(C!==void 0||w!==void 0)&&(typeof w=="number"||C?(e.isPivotActive()||(e.setPivotActive(!0,o),a.addPivotCol(e)),s&&typeof w=="number"&&(s[e.getId()]=w)):e.isPivotActive()&&(e.setPivotActive(!1,o),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;let t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),n={};return i.forEach(s=>{n[s.colId]=s}),()=>{let s=this.columnModel.getAllCols(),r=(f,m,v,C)=>{let w=m.map(C),y=v.map(C);if(Qn(w,y))return;let b=new Set(m);v.forEach(R=>{b.delete(R)||b.add(R)});let M=[...b];this.eventService.dispatchEvent({type:f,columns:M,column:M.length===1?M[0]:null,source:e})},o=f=>{let m=[];return s.forEach(v=>{let C=n[v.getColId()];C&&f(C,v)&&m.push(v)}),m},a=f=>f.getColId();r("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),r("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);let c=o((f,m)=>{let v=f.aggFunc!=null,C=v!=m.isValueActive(),w=v&&f.aggFunc!=m.getAggFunc();return C||w});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);let u=(f,m)=>f.width!=m.getActualWidth();this.eventDispatcher.columnResized(o(u),!0,e);let d=(f,m)=>f.pinned!=m.getPinned();this.eventDispatcher.columnPinned(o(d),e);let h=(f,m)=>f.hide==m.isVisible();this.eventDispatcher.columnVisible(o(h),e);let p=o((f,m)=>f.sort!=m.getSort()||f.sortIndex!=m.getSortIndex());p.length>0&&this.sortController.dispatchSortChangedEvents(e,p),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){let i=this.columnGetStateService.getColumnState(),n={};i.forEach(l=>n[l.colId]=l);let s={};e.forEach(l=>{n[l.colId]&&(s[l.colId]=!0)});let r=e.filter(l=>s[l.colId]),o=i.filter(l=>s[l.colId]),a=[];o.forEach((l,c)=>{let u=r&&r[c];if(u&&u.colId!==l.colId){let d=this.columnModel.getCol(u.colId);d&&a.push(d)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},PS=(e,t,i,n)=>{let s=e[i.getId()],r=e[n.getId()],o=s!=null,a=r!=null;if(o&&a)return s-r;if(o)return-1;if(a)return 1;let l=t.indexOf(i),c=t.indexOf(n),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},o_=class extends E{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){let n=this.columnModel.getCols();if(!n)return;let s=n[e];this.moveColumns([s],t,i)}moveColumns(e,t,i,n=!0){let s=this.columnModel.getCols();if(!s)return;if(t>s.length-e.length){F("tried to insert columns in invalid location, toIndex = ",t),F("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();let r=this.columnModel.getColsForKeys(e);this.doesMovePassRules(r,t)&&(this.columnModel.moveInCols(r,t,i),this.eventDispatcher.columnMoved({movedColumns:r,source:i,toIndex:t,finished:n})),this.columnAnimationService.finish()}doesMovePassRules(e,t){let i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let n=this.columnModel.getCols().slice();return lx(n,e,t),n}doesMovePassLockedPositions(e){let t=r=>r?r==="left"||r===!0?-1:1:0,i=this.gos.get("enableRtl"),n=i?1:-1,s=!0;return e.forEach(r=>{let o=t(r.getColDef().lockPosition);i?o>n&&(s=!1):o<n&&(s=!1),n=o}),s}doesMovePassMarryChildren(e){let t=!0,i=this.columnModel.getColTree();return hn(null,i,n=>{if(!wt(n))return;let s=n,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;let a=[];s.getLeafColumns().forEach(h=>{let g=e.indexOf(h);a.push(g)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,d=s.getLeafColumns().length-1;u>d&&(t=!1)}),t}placeLockedColumns(e){let t=[],i=[],n=[];return e.forEach(r=>{let o=r.getColDef().lockPosition;o==="right"?n.push(r):o==="left"||o===!0?t.push(r):i.push(r)}),this.gos.get("enableRtl")?[...n,...i,...t]:[...t,...i,...n]}},a_=/[&<>"']/g,l_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function c_(e){let t=String.fromCharCode;function i(d){let h=[];if(!d)return[];let g=d.length,p=0,f,m;for(;p<g;)f=d.charCodeAt(p++),f>=55296&&f<=56319&&p<g?(m=d.charCodeAt(p++),(m&64512)==56320?h.push(((f&1023)<<10)+(m&1023)+65536):(h.push(f),p--)):h.push(f);return h}function n(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function s(d,h){return t(d>>h&63|128)}function r(d){if(!(d&4294967168))return t(d);let h="";return d&4294965248?d&4294901760?d&4292870144||(h=t(d>>18&7|240),h+=s(d,12),h+=s(d,6)):(n(d),h=t(d>>12&15|224),h+=s(d,6)):h=t(d>>6&31|192),h+=t(d&63|128),h}let o=i(e),a=o.length,l=-1,c,u="";for(;++l<a;)c=o[l],u+=r(c);return u}function Ni(e,t){if(e==null)return null;let i=e.toString().toString();return t?i:i.replace(a_,n=>l_[n])}function u_(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}function d_(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var h_=class extends E{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;let n=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){let n=t?t.getColGroupDef():null;return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){let r=e.headerValueGetter;if(r){let o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s});return typeof r=="function"?r(o):typeof r=="string"?this.expressionService.evaluate(r,o):(F("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return u_(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let i=e.getColDef().pivotValueColumn,n=P(i),s=null,r;if(n){let o=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&o.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;s=i?i.getAggFunc():null,r=!0}else{let o=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();o&&a?(s=e.getAggFunc(),r=!0):r=!1}if(r){let o=typeof s=="string"?s:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${t})`}return t}},g_=class extends E{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){Un(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let i=this.columnModel.getColDefCol(t),n=null;return this.pivotResultCols.list.forEach(s=>{let r=s.getColDef().pivotKeys,o=s.getColDef().pivotValueColumn;Qn(r,e)&&o===i&&(n=s)}),n}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let i=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);Un(this.context,this.pivotResultCols?.tree,i.columnTree);let n=i.columnTree,s=i.treeDept,r=cm(n),o={};this.pivotResultCols={tree:n,treeDepth:s,list:r,map:o},this.pivotResultCols.list.forEach(l=>this.pivotResultCols.map[l.getId()]=l);let a=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!a)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;let n=s=>{s.forEach(r=>{if(P(r.children)){let a=r;i&&i(a),n(a.children)}else t&&t(r)})};e&&n(e)}},p_=class extends E{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,n){let s=[];e.forEach(r=>{let o=this.columnModel.getColDefCol(r.key)||this.columnModel.getCol(r.key);if(!o)return;if(s.push({width:r.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let l=this.visibleColsService.getColAfter(o);if(!l)return;let c=o.getActualWidth()-r.newWidth,u=l.getActualWidth()+c;s.push({width:u,ratios:[1],columns:[l]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:i,source:n})}resizeColumnSets(e){let{resizeSets:t,finished:i,source:n}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(i){let u=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(u,i,n)}return}let r=[],o=[];t.forEach(u=>{let{width:d,columns:h,ratios:g}=u,p={},f={};h.forEach(C=>o.push(C));let m=!0,v=0;for(;m;){if(v++,v>1e3){ae("infinite loop in resizeColumnSets");break}m=!1;let C=[],w=0,y=d;h.forEach((b,M)=>{if(f[b.getId()])y-=p[b.getId()];else{C.push(b);let A=g[M];w+=A}});let S=1/w;C.forEach((b,M)=>{let R=M===C.length-1,A;R?A=y:(A=Math.round(g[M]*d*S),y-=A);let B=b.getMinWidth(),V=b.getMaxWidth();A<B?(A=B,f[b.getId()]=!0,m=!0):V>0&&A>V&&(A=V,f[b.getId()]=!0,m=!0),p[b.getId()]=A})}h.forEach(C=>{let w=p[C.getId()];C.getActualWidth()!==w&&(C.setActualWidth(w,n),r.push(C))})});let a=r.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(n),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let c=o.concat(l);(a||i)&&this.eventDispatcher.columnResized(c,i,n,l)}checkMinAndMaxWidthsForSet(e){let{columns:t,width:i}=e,n=0,s=0,r=!0;t.forEach(l=>{let c=l.getMinWidth();n+=c||0;let u=l.getMaxWidth();u>0?s+=u:r=!1});let o=i>=n,a=!r||i<=s;return o&&a}refreshFlexedColumns(e={}){let t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let i=this.visibleColsService.getCenterCols(),n=-1;if(e.resizingCols){let h=new Set(e.resizingCols);for(let g=i.length-1;g>=0;g--)if(h.has(i[g])){n=g;break}}let s=0,r=[],o=0,a=0;for(let h=0;h<i.length;h++)i[h].getFlex()&&h>n?(r.push(i[h]),a+=i[h].getFlex(),o+=i[h].getMinWidth()):s+=i[h].getActualWidth();if(!r.length)return[];let l=[];s+o>this.flexViewportWidth&&(r.forEach(h=>h.setActualWidth(h.getMinWidth(),t)),l=r,r=[]);let c=[],u;e:for(;;){u=this.flexViewportWidth-s;let h=u/a;for(let g=0;g<r.length;g++){let p=r[g],f=h*p.getFlex(),m=0,v=p.getMinWidth(),C=p.getMaxWidth();if(f<v?m=v:f>C&&(m=C),m){p.setActualWidth(m,t),ax(r,p),a-=p.getFlex(),l.push(p),s+=p.getActualWidth();continue e}c[g]=Math.floor(f)}break}let d=u;return r.forEach((h,g)=>{let p=g<r.length-1?Math.min(c[g],d):Math.max(c[g],d);h.setActualWidth(p,t),l.push(h),d-=c[g]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",i,n){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,n));return}let s={};n&&n?.columnLimits?.forEach(p=>{var f=p,{key:h}=f,g=lC(f,["key"]);s[typeof h=="string"?h:h.getColId()]=g});let r=this.visibleColsService.getAllCols(),o=e===an(r);if(e<=0||!r.length||o)return;let a=[],l=[];r.forEach(h=>{h.getColDef().suppressSizeToFit===!0?l.push(h):a.push(h)});let c=a.slice(0),u=!1,d=h=>{St(a,h),l.push(h)};for(a.forEach(h=>{h.resetActualWidth(t);let g=s?.[h.getId()],p=g?.minWidth??n?.defaultMinWidth,f=g?.maxWidth??n?.defaultMaxWidth,m=h.getActualWidth();typeof p=="number"&&m<p?h.setActualWidth(p,t,!0):typeof f=="number"&&m>f&&h.setActualWidth(f,t,!0)});!u;){u=!0;let h=e-an(l);if(h<=0)a.forEach(g=>{let p=s?.[g.getId()]?.minWidth??n?.defaultMinWidth;if(typeof p=="number"){g.setActualWidth(p,t,!0);return}g.setMinimum(t)});else{let g=h/an(a),p=h;for(let f=a.length-1;f>=0;f--){let m=a[f],v=s?.[m.getId()],C=v?.minWidth??n?.defaultMinWidth,w=v?.maxWidth??n?.defaultMaxWidth,y=m.getMinWidth(),S=m.getMaxWidth(),b=typeof C=="number"&&C>y?C:y,M=typeof w=="number"&&w<S?w:S,R=Math.round(m.getActualWidth()*g);R<b?(R=b,d(m),u=!1):R>M?(R=M,d(m),u=!1):f===0&&(R=p),m.setActualWidth(R,t,!0),p-=R}}}c.forEach(h=>{h.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:i,defaultMinWidth:n,defaultMaxWidth:s}=e,r=i?.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:n,defaultMaxWidth:s,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function px(e,t){return e+"_"+t}function ke(e){return e instanceof fx}var fx=class extends E{constructor(e,t,i,n){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=n}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return px(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{ke(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=te(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Yn(t)?e.push(t):ke(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Yn(t)?e.push(t):ke(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(ke(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},mx=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},f_=class extends E{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Df(this.treeLeft),this.columnsCenter=Df(this.treeCenter),this.columnsRight=Df(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){let e=an(this.columnsCenter),t=an(this.columnsLeft),i=an(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?te(this.columnsRight):null):(t=this.columnsLeft?te(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(n=>{n.setLastLeftPinned(n===t,e),n.setFirstRightPinned(n===i,e)})}buildTrees(){let e=this.columnModel.getColsToShow(),t=e.filter(r=>r.getPinned()=="left"),i=e.filter(r=>r.getPinned()=="right"),n=e.filter(r=>r.getPinned()!="left"&&r.getPinned()!="right"),s=new mx;this.treeLeft=this.createGroups({columns:t,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:n,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let e=this.columnModel.getCols(),t=[],i=[],n=[];for(let s of e){let r=s.getPinned();r?r===!0||r==="left"?t.push(s):n.push(s):i.push(s)}this.ariaOrderColumns=t.concat(i).concat(n)}getAriaColIndex(e){let t;return ke(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{ke(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;let i=this.columnModel.getCols().slice(0),n=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(s=>{if(n){let r=an(s);s.forEach(o=>{r-=o.getActualWidth(),o.setLeft(r,e)})}else{let r=0;s.forEach(o=>{o.setLeft(r,e),r+=o.getActualWidth()})}zk(i,s)}),i.forEach(s=>{s.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,n){let s=[],r=null;for(let o=0;o<t.length;o++){let a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){let h=c-1;for(let g=1;g<=h;g++)u.push(t[o+g]);o+=h}let d;i?(d=!1,u.forEach(h=>{i(h)&&(d=!0)})):d=!0,d&&(s.length===0&&r&&(n&&n(a))&&s.push(r),s.push(a)),r=a}return s}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){let t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){let i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),s=t==="After"?te(n):n[0],r=`getCol${t}`;for(;;){let o=this[r](s);if(!o)return null;let a=this.getColGroupAtLevel(o,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),n,s;for(;n=i.getProvidedColumnGroup().getLevel(),s=i.getPaddingLevel(),!(n+s<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};As(this.treeCenter,!1,e),As(this.treeLeft,!1,e),As(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllTrees();As(e,!1,t=>{ke(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){let n=this[t[i]]();if(n.length)return e?te(n):n[0]}return null}getColumnGroup(e,t){if(!e)return null;if(ke(e))return e;let i=this.getAllTrees(),n=typeof t=="number",s=null;return As(i,!1,r=>{if(ke(r)){let o=r,a;n?a=e===o.getGroupId()&&t===o.getPartId():a=e===o.getGroupId(),a&&(s=o)}}),s}getColAfter(e){let t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return an(this.columnsLeft)}getDisplayedColumnsRightWidth(){return an(this.columnsRight)}isColAtEdge(e,t){let i=this.getAllCols();if(!i.length)return!1;let n=t==="first",s;if(ke(e)){let r=e.getDisplayedLeafColumns();if(!r.length)return!1;s=n?r[0]:te(r)}else s=e;return(n?i[0]:te(i))===s}createGroups(e){let{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:s,isStandaloneStructure:r}=e,o=this.mapOldGroupsById(s),a=[],l=t;for(;l.length;){let c=l;l=[];let u=0,d=h=>{let g=u;u=h;let p=c[g],m=(ke(p)?p.getProvidedColumnGroup():p).getOriginalParent();if(m==null){for(let C=g;C<h;C++)a.push(c[C]);return}let v=this.createColGroup(m,i,o,n,r);for(let C=g;C<h;C++)v.addChild(c[C]);l.push(v)};for(let h=1;h<c.length;h++){let g=c[h],f=(ke(g)?g.getProvidedColumnGroup():g).getOriginalParent(),m=c[u],C=(ke(m)?m.getProvidedColumnGroup():m).getOriginalParent();f!==C&&d(h)}u<c.length&&d(c.length)}return r||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,n,s){let r=e.getGroupId(),o=t.getInstanceIdForKey(r),a=px(r,o),l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),P(l)?l.reset():(l=new fx(e,r,o,n),s||this.createBean(l)),l}mapOldGroupsById(e){let t={},i=n=>{n.forEach(s=>{if(ke(s)){let r=s;t[s.getUniqueId()]=r,i(r.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),ke(i)){let n=i;this.setupParentsIntoCols(n.getChildren(),n)}})}};function As(e,t,i){if(e)for(let n=0;n<e.length;n++){let s=e[n];if(ke(s)){let r=t?s.getDisplayedChildren():s.getChildren();As(r,t,i)}i(s)}}function Df(e){let t=[];return As(e,!0,i=>{Yn(i)&&t.push(i)}),t}var vx=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],m_=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],v_=[...vx,...m_],C_={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},at=class{};at.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];at.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];at.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];at.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];at.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];at.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];at.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];at.ALL_PROPERTIES=[...at.ARRAY_PROPERTIES,...at.OBJECT_PROPERTIES,...at.STRING_PROPERTIES,...at.NUMBER_PROPERTIES,...at.FUNCTION_PROPERTIES,...at.BOOLEAN_PROPERTIES,...at.OTHER_PROPERTIES];var Va=at,si=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};si.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";si.PUBLIC_EVENTS=vx;si.EVENT_CALLBACKS=v_.map(e=>si.getCallbackForEvent(e));si.BOOLEAN_PROPERTIES=Va.BOOLEAN_PROPERTIES;si.ALL_PROPERTIES=Va.ALL_PROPERTIES;si.ALL_PROPERTIES_AND_CALLBACKS=[...si.ALL_PROPERTIES,...si.EVENT_CALLBACKS];si.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(si.ALL_PROPERTIES_AND_CALLBACKS);var Ha=si;function Cx(e,t){typeof e!="object"&&(e={});let i=D({},e);return Ha.ALL_PROPERTIES_AND_CALLBACKS.forEach(s=>{let r=t[s];typeof r<"u"&&r!==Ha.VUE_OMITTED_PROPERTY&&(i[s]=r)}),i}function wx(e,t){if(!e)return;let i={},n=!1;if(Object.keys(e).filter(o=>Ha.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{i[o]=e[o],n=!0}),!n)return;let s={type:"gridOptionsChanged",options:i};t.dispatchEvent(s);let r={type:"componentStateChanged"};ti(i,(o,a)=>{r[o]=a}),t.dispatchEvent(r)}function ja(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var w_=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.addCssClass(n));return}if(this.cssClassStates[e]!==!0&&e.length){let n=this.getGui();n&&n.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.removeCssClass(n));return}if(this.cssClassStates[e]!==!1&&e.length){let n=this.getGui();n&&n.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let n=(e||"").split(" ");if(n.length>1){n.forEach(s=>this.addOrRemoveCssClass(s,t));return}}if(this.cssClassStates[e]!==t&&e.length){let n=this.getGui();n&&n.classList.toggle(e,t),this.cssClassStates[e]=t}}};function pn(e,t,i){i==null||typeof i=="string"&&i==""?yx(e,t):bi(e,t,i)}function bi(e,t,i){e.setAttribute(bx(t),i.toString())}function yx(e,t){e.removeAttribute(bx(t))}function bx(e){return`aria-${e}`}function At(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function y_(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function b_(e){return e.getAttribute("aria-label")}function Yr(e,t){pn(e,"label",t)}function Ba(e,t){pn(e,"labelledby",t)}function Sx(e,t){pn(e,"live",t)}function S_(e,t){pn(e,"atomic",t)}function x_(e,t){pn(e,"relevant",t)}function D_(e,t){pn(e,"disabled",t)}function xx(e,t){pn(e,"hidden",t)}function ju(e,t){bi(e,"expanded",t)}function E_(e,t){bi(e,"setsize",t)}function M_(e,t){bi(e,"posinset",t)}function R_(e,t){bi(e,"multiselectable",t)}function F_(e,t){bi(e,"rowcount",t)}function Dx(e,t){bi(e,"rowindex",t)}function I_(e,t){bi(e,"colcount",t)}function Ex(e,t){bi(e,"colindex",t)}function P_(e,t){bi(e,"colspan",t)}function A_(e,t){bi(e,"sort",t)}function T_(e){yx(e,"sort")}function Uu(e,t){pn(e,"selected",t)}function k_(e,t){pn(e,"controls",t.id),Ba(t,e.id)}function gm(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var Ef,Ru,Mf,Rf,Ff,If,$f,qf,Pf;function Hi(){return Ef===void 0&&(Ef=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Ef}function Mx(){if(Ru===void 0)if(Hi()){let e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Ru=e[1]!=null?parseFloat(e[1]):0)}else Ru=0;return Ru}function pm(){if(Mf===void 0){let e=window;Mf=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Mf}function fm(){return Rf===void 0&&(Rf=/(firefox)/i.test(navigator.userAgent)),Rf}function Rx(){return Ff===void 0&&(Ff=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Ff}function Zn(){return If===void 0&&(If=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),If}function Kf(){return!Hi()||Mx()>=15}function Yf(e){if(!e)return null;let t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!fm())?null:t.toString()}function __(){if(Pf!==void 0)return Pf;if(!document.body)return-1;let e=1e6,t=fm()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){let n=e*2;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),Pf=e,e}function L_(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function O_(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function N_(){return qf==null&&Fx(),qf}function Fx(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(qf=i,$f=i===0)}function Ix(){return $f==null&&Fx(),$f}var Fu;var V_="[tabindex], input, select, button, textarea, [href]",Px="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function mm(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(e,"input, select, button, textarea"),s=t.call(e,Px),r=yi(e);return n&&!s&&r}function xe(e,t,i={}){let{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||xx(e,!t)}function H_(e,t,i={}){let{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||xx(e,!t)}function Ga(e,t){let i="disabled",n=t?s=>s.setAttribute(i,""):s=>s.removeAttribute(i);n(e),Nx(e.querySelectorAll("input"),s=>n(s))}function Ur(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++n>i)break}else if(e===i)break}return!1}function Bs(e){let{height:t,width:i,borderTopWidth:n,borderRightWidth:s,borderBottomWidth:r,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:g,marginLeft:p,boxSizing:f}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(g||"0"),marginLeft:parseFloat(p||"0"),boxSizing:f}}function vm(e){let t=Bs(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Ua(e){let t=Bs(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function Ax(e){let{height:t,marginBottom:i,marginTop:n}=Bs(e);return Math.floor(t+i+n)}function $u(e){let{width:t,marginLeft:i,marginRight:n}=Bs(e);return Math.floor(t+i+n)}function Tx(e){let t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:s,borderBottomWidth:r}=Bs(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(s||0),bottom:t.bottom+(r||0)}}function qu(){if(typeof Fu=="boolean")return Fu;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,Fu=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),Fu}function Ku(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),pm()&&!qu()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function Yu(e,t,i){i&&(qu()?t*=-1:(Hi()||pm())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function lt(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function ni(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function kx(e){return!!e.offsetParent}function yi(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!kx(e)||window.getComputedStyle(e).visibility!=="visible")}function za(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function _x(e,t,i){i&&i.nextSibling===t||(i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function Lx(e,t){for(let i=0;i<t.length;i++){let n=t[i],s=e.children[i];s!==n&&e.insertBefore(n,s)}}function B_(e,t,i){i?i.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function Ox(e,t){if(t)for(let[i,n]of Object.entries(t)){if(!i||!i.length||n==null)continue;let s=d_(i),r=n.toString(),o=r.replace(/\s*!important/g,""),a=o.length!=r.length?"important":void 0;e.style.setProperty(s,o,a)}}function G_(e){return e.clientWidth<e.scrollWidth}function z_(e){return e.clientHeight<e.scrollHeight}function Qu(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):wi(e,t)}function wi(e,t){t=Cm(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Aa(e,t){t=Cm(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function Cm(e){return typeof e=="number"?`${e}px`:e}function wm(e){return e instanceof Node||e instanceof HTMLElement}function W_(e){if(e==null)return[];let t=[];return Nx(e,i=>t.push(i)),t}function j_(e,t){if(e)for(let i=0;i<e.length;i++){let n=e[i];t(n.name,n.value)}}function ri(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Nx(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var Qr=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},U_=1e3,$_=1e3,AS=100,Vx=class Fs extends E{constructor(t,i,n,s){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=n,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){let i=this.gos.get(t);return i<0&&F(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Zn()&&(Fs.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},AS):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){let i=t.relatedTarget,n=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(i)||this.interactionEnabled&&s?.contains(i)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||Fs.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){let t=new Date().getTime(),i=Fs.lastTooltipHideTime;return t-i<U_}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=D({},this.parentComp.getTooltipParams());if(!P(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Fs.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(i);return}let s=i.getGui();this.tooltipComp=i,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&s.classList.add("ag-tooltip-animate"),this.interactionEnabled&&s.classList.add("ag-tooltip-interactive");let r=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:s,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Pe(this.gos),{keydown:a=>{s.contains(a?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:s,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let t=this.tooltipComp?.getGui(),i=De(this.gos);return!!t&&t.contains(i)}onTooltipFocusOut(t){let i=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,i.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(_(D({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(_(D({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,n=this.tooltipTrigger===0?$_:0;window.setTimeout(()=>{t(),this.destroyBean(i)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Fs.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},AS)}unlockService(){Fs.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};Vx.isLocked=!1;var q_=Vx,Jr=class extends E{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){let t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new q_(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let e=this.ctrl,t=e.getColumn?.(),i=e.getColDef?.(),n=e.getRowNode?.();return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?.(),node:n,data:n?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},K_=new Qr,T=null,oe=class Hx extends E{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=K_.next(),this.cssClassManager=new w_(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(n=>[n.selector,n])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:i,showDelayOverride:n,hideDelayOverride:s,location:r,shouldDisplayTooltip:o}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);let a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new Jr({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:n!=null?()=>n:void 0,getTooltipHideDelayOverride:s!=null?()=>s:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,n,s=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){let r=this[i];if(r===T)this[i]=s??t;else{let o=n&&n[i];!this.suppressDataRefValidation&&!o&&F(`Issue with data-ref: ${i} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,i){W_(t.childNodes).forEach(s=>{if(!(s instanceof HTMLElement))return;let r=this.createComponentFromElement(s,o=>{o.getGui()&&this.copyAttributesFromNode(s,o.getGui())},i);if(r){if(r.addItems&&s.children.length){this.createChildComponentsFromTags(s,i);let o=Array.prototype.slice.call(s.children);r.addItems(o)}this.swapComponentForNode(r,t,s)}else s.childNodes&&this.createChildComponentsFromTags(s,i)})}createComponentFromElement(t,i,n){let s=t.nodeName,r=this.getDataRefAttribute(t),o=s.indexOf("AG-")===0,a=o?this.componentSelectors.get(s):null,l=null;if(a){Hx.elementGettingCreated=t;let c=n&&r?n[r]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,i)}else o&&F(`Missing selector: ${s}`);return this.applyElementsToComponent(t,r,n,l),l}copyAttributesFromNode(t,i){j_(t.attributes,(n,s)=>i.setAttribute(n,s))}swapComponentForNode(t,i,n){let s=t.getGui();i.replaceChild(s,n),i.insertBefore(document.createComment(n.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(n=>n.setAttribute("tabindex",i.toString()))}setTemplate(t,i,n){let s=za(t);this.setTemplateFromElement(s,i,n)}setTemplateFromElement(t,i,n,s=!1){if(this.eGui=t,this.suppressDataRefValidation=s,i)for(let r=0;r<i.length;r++){let o=i[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(t,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let n=i;return t==null?null:(n||(n=this.eGui),wm(t)?{element:t,parent:n}:{element:t.getGui(),parent:n})}prependChild(t,i){let{element:n,parent:s}=this.getContainerAndElement(t,i)||{};!n||!s||s.insertAdjacentElement("afterbegin",n)}appendChild(t,i){let{element:n,parent:s}=this.getContainerAndElement(t,i)||{};!n||!s||s.appendChild(n)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:n}=i;H_(this.eGui,t,{skipAriaHidden:n})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:n}=i;xe(this.eGui,t,{skipAriaHidden:n});let s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,n){this.eGui.addEventListener(t,i,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},Bx={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},Y_=(()=>{let e=new Set(Object.values(Bx));return e.add("eye"),e})();function Q_(e,t,i){let n=jt(e,t,i);if(n){let{className:r}=n;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return n}let s=document.createElement("span");return s.appendChild(n),s}function jt(e,t,i,n){let s=null,r=i&&i.getColDef().icons;if(r&&(s=r[e]),t&&!s){let o=t.get("icons");o&&(s=o[e])}if(s){let o;if(typeof s=="function")o=s();else if(typeof s=="string")o=s;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return za(o);if(wm(o))return o;F("iconRenderer should return back a string or a dom object")}else{let o=document.createElement("span"),a=Bx[e]??(Y_.has(e)?e:void 0);return a||(n?a=e:(F(`Did not find icon ${e}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),At(o,"presentation"),o}}var Z_=class extends oe{constructor(){super(...arguments),this.dragSource=null,this.eIcon=T,this.eLabel=T}postConstruct(){let e=t=>Q_(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){lt(this.eIcon);let i=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=Ni(e)}};function Gx(e,t,i){if(i===0)return!1;let n=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(n,s)<=i}var $n=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Zr,this.eElement=e,this.preventMouseClick=t;let i=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",n,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",n,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;let n={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(n)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!Gx(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function Da(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var X_=`<span class="ag-sort-indicator-container">
        ${Da("Order","order")}
        ${Da("Asc","ascending-icon")}
        ${Da("Desc","descending-icon")}
        ${Da("Mixed","mixed-icon")}
        ${Da("None","none-icon")}
    </span>`,ym=class extends oe{constructor(e){super(),this.eSortOrder=T,this.eSortAsc=T,this.eSortDesc=T,this.eSortMixed=T,this.eSortNone=T,e||this.setTemplate(X_)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,n,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);let i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;let n=jt(e,this.gos,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";xe(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";xe(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;xe(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;Oi(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";xe(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(s=>this.sortController.getDisplaySortIndexForColumn(s)??!1),n=t>=0&&i;xe(this.eSortOrder,n,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():lt(this.eSortOrder)}},J_={selector:"AG-SORT-INDICATOR",component:ym},eL=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,Qf=class extends oe{constructor(){super(...arguments),this.eFilter=T,this.eFilterButton=T,this.eSortIndicator=T,this.eMenu=T,this.eLabel=T,this.eText=T,this.eSortOrder=T,this.eSortAsc=T,this.eSortDesc=T,this.eSortMixed=T,this.eSortNone=T,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??eL;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[J_]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=Ni(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;let n=jt(e,this.gos,i);n&&t.appendChild(n)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let t=new $n(this.getGui(),!0),i=this.shouldSuppressMenuHide(),n=i&&P(this.eMenu),s=n?new $n(this.eMenu,!0):t;if(this.params.enableMenu){let r=n?"tap":"longTap",o=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(s,{[r]:o})}if(this.params.enableSorting){let r=o=>{let a=o.touchStart.target;i&&(this.eMenu?.contains(a)||this.eFilterButton?.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:r})}if(this.params.enableFilterButton){let r=new $n(this.eFilterButton,!0);this.addManagedListeners(r,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>r.destroy())}this.addDestroyFunc(()=>t.destroy()),n&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){ni(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){let t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new ym(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{let i=this.params.column.isMoving(),s=new Date().getTime()-this.lastMovingChanged<50;if(!(i||s)){let a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});let e=()=>{let t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){let s=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(r=>this.params.column.getSort()==r.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return ni(t),!1;let n=this.params.column;return this.addInIcon("filter",t,n),this.addManagedListeners(n,{filterChanged:i}),i(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();xe(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},tL=class extends oe{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=T,this.agClosed=T,this.agLabel=T}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&F("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let e=s=>{if(un(s))return;let r=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),r,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);let t=s=>{Kr(s)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();let i=this.params.columnGroup.getProvidedColumnGroup(),n=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:n,expandableChanged:n})}addTouchAndClickListeners(e,t){let i=new $n(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();xe(this.agOpened,t),xe(this.agClosed,!t)}else xe(this.agOpened,!1),xe(this.agClosed,!1)}addInIcon(e,t){let i=jt(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){xe(this.agOpened,!1),xe(this.agClosed,!1);return}}setupLabel(){let{displayName:e,columnGroup:t}=this.params;if(P(e)){let i=Ni(e,!0);this.agLabel.textContent=i}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},iL="\u2191",nL="\u2193",sL=class extends oe{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let i=Math.abs(t),n=e.formatValue(i),s=P(n)?n:i,r=t>=0;r?this.eDelta.textContent=iL+s:this.eDelta.textContent=nL+s,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),lt(this.eDelta)}refresh(e,t=!1){let i=e.value;if(i===this.lastValue||(P(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:P(e.value)?this.eValue.textContent=i:lt(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){let n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},rL=class extends oe{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;return X(i)&&(i=""),i===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,P(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:P(e.value)?this.eCurrent.textContent=i:lt(this.eCurrent),!0)}},x=class{};x.BACKSPACE="Backspace";x.TAB="Tab";x.ENTER="Enter";x.ESCAPE="Escape";x.SPACE=" ";x.LEFT="ArrowLeft";x.UP="ArrowUp";x.RIGHT="ArrowRight";x.DOWN="ArrowDown";x.DELETE="Delete";x.F2="F2";x.PAGE_UP="PageUp";x.PAGE_DOWN="PageDown";x.PAGE_HOME="Home";x.PAGE_END="End";x.A="KeyA";x.C="KeyC";x.D="KeyD";x.V="KeyV";x.X="KeyX";x.Y="KeyY";x.Z="KeyZ";var oL=class extends oe{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){lt(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(xe(this.eLabel,!1),At(this.eLabel,"presentation")):(xe(this.eLabel,!0),At(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Qu(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return Ga(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},zx=class extends oL{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||b_(e)!==null?Ba(e,""):Ba(e,t??"")}setAriaLabel(e){return Yr(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return wi(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},Ts=class extends zx{constructor(e,t,i="text",n="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${n} data-ref="eInput" class="ag-input-field-input"></${n}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=n,this.eLabel=T,this.eWrapper=T,this.eInput=T}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Qu(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return ri(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Yr(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Ga(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)ri(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";ri(this.eInput,"autocomplete",t)}return this}},bm=class extends Ts{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});let n=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},Sm={selector:"AG-CHECKBOX",component:bm},aL=class extends oe{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Sm]),this.eCheckbox=T}init(e){this.refresh(e);let t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),Sx(t,"polite"),this.addManagedListeners(t,{click:i=>{if(Kr(i),this.eCheckbox.isDisabled())return;let n=this.eCheckbox.getValue();this.onCheckboxChanged(n)},dblclick:i=>{Kr(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===x.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===De(this.gos)&&this.eCheckbox.toggle();let n=this.eCheckbox.getValue();this.onCheckboxChanged(n),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,i=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{let a=e.column.getColId();a.startsWith(td)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[a]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);let n=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(n);let s=this.localeService.getLocaleTextFunc(),r=gm(s,t),o=n?r:`${s("ariaToggleCellValue","Press SPACE to toggle cell value")} (${r})`;this.eCheckbox.setInputAriaLabel(o)}onCheckboxChanged(e){let{column:t,node:i,value:n}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:n});let s=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:n,oldValue:n,newValue:e,valueChanged:s}),s||this.updateCheckbox(this.params)}},lL=class extends oe{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=T,this.eLoadingText=T}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=jt("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},cL=class extends oe{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Ba(e.eParentOfValue)),Ba(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Yr(this.getGui(),t)}setupLoading(e){let i=Pe(this.gos).createElement("div");i.classList.add("ag-skeleton-effect");let n=e.node.rowIndex;if(n!=null){let o=75+25*(n%2===0?Math.sin(n):Math.cos(n));i.style.width=`${o}%`}this.getGui().appendChild(i);let r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Yr(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}},Wx=class extends oe{constructor(){super()}destroy(){super.destroy()}},uL=class extends Wx{init(){let e=cn(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},dL=class extends Wx{init(){let e=cn(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},eo=class extends oe{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},hL=class extends eo{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=Ni(t,!0)}};function jx(e){let{inputValue:t,allSuggestions:i,hideIrrelevant:n,filterByPercentageOfBestMatch:s,addSequentialWeight:r}=e,o=i.map((c,u)=>({value:c,relevance:pL(t.toLowerCase(),c.toLocaleLowerCase(),r),idx:u}));if(o.sort((c,u)=>u.relevance-c.relevance),n&&(o=o.filter(c=>c.relevance!==0)),o.length>0&&s&&s>0){let u=o[0].relevance*s;o=o.filter(d=>u-d.relevance<0)}let a=[],l=[];for(let c of o)a.push(c.value),l.push(c.idx);return{values:a,indices:l}}function gL(e){let t=[],i=e.length;for(let n=1;n<=i;n++)for(let s=0;s<=i-n;s++){let r=s+n-1;t.push(e.slice(s,r+1))}return t}function pL(e,t,i=!1){let n=e.replace(/\s/g,""),s=t.replace(/\s/g,""),r=n.length,o=s.length,a=new Array(r+1).fill(null).map(()=>new Array(o+1).fill(0));for(let d=0;d<=r;d+=1)a[d][0]=d;for(let d=0;d<=o;d+=1)a[0][d]=d;for(let d=1;d<=r;d++)for(let h=1;h<=o;h++)n[d-1]===s[h-1]?a[d][h]=a[d-1][h-1]:a[d][h]=1+Math.min(a[d][h-1],Math.min(a[d-1][h],a[d-1][h-1]));let l=a[r][o],u=Math.max(r,o)-l;if(i){let d=gL(n);for(let h=0;h<d.length;h++){let g=d[h];s.indexOf(g)!==-1&&(u+=1,u*=g.length)}}return u}var fL=class extends E{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:Z_,agColumnHeader:Qf,agColumnGroupHeader:tL,agSortIndicator:ym,agAnimateShowChangeCellRenderer:sL,agAnimateSlideCellRenderer:rL,agLoadingCellRenderer:lL,agSkeletonCellRenderer:cL,agCheckboxCellRenderer:aL,agLoadingOverlay:uL,agNoRowsOverlay:dL,agTooltipComponent:hL},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let e=this.gos.get("components");e!=null&&ti(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let i=(a,l,c)=>({componentFromFramework:l,component:a,params:c}),n=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(n!=null)return i(n,!0);let s=this.jsComps[t];if(s){let a=this.getFrameworkOverrides().isFrameworkComponent(s);return i(s,a)}let r=this.agGridDefaults[t];if(r)return i(r,!1,this.agGridDefaultParams[t]);let o=this.enterpriseAgDefaultCompsModule[t];return o?this.gos.assertModuleRegistered(o,`AG Grid '${e}' component: ${t}`):sm(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let i=[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],n=jx({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;F(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),n.length>0&&F(`         Did you mean: [${n.slice(0,3)}]?`),F(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Wt=class Fa{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new Fa(i=>{let n=t.length,s=new Array(n);t.forEach((r,o)=>{r.then(a=>{s[o]=a,n--,n===0&&i(s)})})}):Fa.resolve()}static resolve(t=null){return new Fa(i=>i(t))}then(t){return new Fa(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(n=>i(t(n)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},mL={propertyName:"dateComponent",cellRenderer:!1},vL={propertyName:"dragAndDropImageComponent",cellRenderer:!1},CL={propertyName:"headerComponent",cellRenderer:!1},wL={propertyName:"headerGroupComponent",cellRenderer:!1},TS={propertyName:"cellRenderer",cellRenderer:!0},yL={propertyName:"cellRenderer",cellRenderer:!1},bL={propertyName:"loadingCellRenderer",cellRenderer:!0},SL={propertyName:"cellEditor",cellRenderer:!1},kS={propertyName:"innerRenderer",cellRenderer:!0},xL={propertyName:"loadingOverlayComponent",cellRenderer:!1},DL={propertyName:"noRowsOverlayComponent",cellRenderer:!1},EL={propertyName:"tooltipComponent",cellRenderer:!1},xm={propertyName:"filter",cellRenderer:!1},ML={propertyName:"floatingFilterComponent",cellRenderer:!1},RL={propertyName:"toolPanel",cellRenderer:!1},FL={propertyName:"statusPanel",cellRenderer:!1},IL={propertyName:"fullWidthCellRenderer",cellRenderer:!0},PL={propertyName:"loadingCellRenderer",cellRenderer:!0},AL={propertyName:"groupRowRenderer",cellRenderer:!0},TL={propertyName:"detailCellRenderer",cellRenderer:!0},kL={propertyName:"menuItem",cellRenderer:!1},Ux=class $x extends E{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,vL,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,i){return this.getCompDetails(t,CL,"agColumnHeader",i)}getHeaderGroupCompDetails(t){let i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,wL,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,IL,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,PL,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,AL,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,TL,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,kS,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,kS,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,TS,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,yL,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,bL,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,SL,"agCellEditor",i,!0)}getFilterDetails(t,i,n){return this.getCompDetails(t,xm,n,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,mL,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,xL,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,DL,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,EL,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,TS,null,i)}getFloatingFilterCompDetails(t,i,n){return this.getCompDetails(t,ML,n,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,RL,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,FL,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,kL,"agMenuItem",i,!0)}getCompDetails(t,i,n,s,r=!1){let{propertyName:o,cellRenderer:a}=i,{compName:l,jsComp:c,fwComp:u,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:g}=$x.getCompKeys(this.frameworkOverrides,t,i,s),p,f=w=>{let y=this.userComponentRegistry.retrieve(o,w);y&&(c=y.componentFromFramework?void 0:y.component,u=y.componentFromFramework?y.component:void 0,p=y.params)};if(l!=null&&f(l),c==null&&u==null&&n!=null&&f(n),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!u){r&&ae(`Could not find component ${l}, did you forget to configure this component?`);return}let m=this.mergeParamsWithApplicationProvidedParams(t,i,s,d,p),v=c==null,C=c||u;return{componentFromFramework:v,componentClass:C,params:m,type:i,popupFromSelector:h,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(C,v,m,i)}}static getCompKeys(t,i,n,s){let{propertyName:r}=n,o,a,l,c,u,d;if(i){let h=i,g=h[r+"Selector"],p=g?g(s):null,f=m=>{typeof m=="string"?o=m:m!=null&&m!==!0&&(t.isFrameworkComponent(m)?l=m:a=m)};p?(f(p.component),c=p.params,u=p.popup,d=p.popupPosition):f(h[r])}return{compName:o,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:d}}newAgStackInstance(t,i,n,s){let r=s.propertyName,o=!i,a;if(o)a=new t;else{let c=this.componentMetadataProvider.retrieve(r);a=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,s)}let l=this.initComponent(a,n);return l==null?Wt.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,i,n,s=null,r){let o=this.gos.getGridCommonParams();yt(o,n),r&&yt(o,r);let a=t,l=a&&a[i.propertyName+"Params"];if(typeof l=="function"){let c=l(n);yt(o,c)}else typeof l=="object"&&yt(o,l);return yt(o,s),o}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function Ta(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var id=class ce{static register(t){ce.__register(t,!0,void 0)}static registerModules(t){ce.__registerModules(t,!0,void 0)}static __register(t,i,n){ce.runVersionChecks(t),n!==void 0?(ce.areGridScopedModules=!0,ce.gridModulesMap[n]===void 0&&(ce.gridModulesMap[n]={}),ce.gridModulesMap[n][t.moduleName]=t):ce.globalModulesMap[t.moduleName]=t,ce.setModuleBased(i)}static __unRegisterGridModules(t){delete ce.gridModulesMap[t]}static __registerModules(t,i,n){ce.setModuleBased(i),t&&t.forEach(s=>ce.__register(s,i,n))}static isValidModuleVersion(t){let[i,n]=t.version.split(".")||[],[s,r]=ce.currentModuleVersion.split(".")||[];return i===s&&n===r}static runVersionChecks(t){ce.currentModuleVersion||(ce.currentModuleVersion=t.version);let i=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;if(t.version?ce.isValidModuleVersion(t)||ae(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${ce.currentModuleVersion}.`)):ae(i(`'${t.moduleName}' is incompatible.`)),t.validate){let n=t.validate();n.isValid||ae(`${n.message}`)}}static setModuleBased(t){ce.moduleBased===void 0?ce.moduleBased=t:ce.moduleBased!==t&&(ae("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),ae("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){ce.isBundled=!0}static __assertRegistered(t,i,n){if(this.__isRegistered(t,n))return!0;let s;if(ce.isBundled)s=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(ce.moduleBased||ce.moduleBased===void 0){let r=Object.entries(XS).find(([o,a])=>a===t)?.[0];s=`AG Grid: unable to use ${i} as the ${r} is not registered${ce.areGridScopedModules?` for gridId: ${n}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${r} } from '${t}';
    
    ModuleRegistry.registerModules([ ${r} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return ae(s),!1}static __isRegistered(t,i){return!!ce.globalModulesMap[t]||!!ce.gridModulesMap[i]?.[t]}static __getRegisteredModules(t){return[...Lu(ce.globalModulesMap),...Lu(ce.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return Lu(ce.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!ce.moduleBased}};id.globalModulesMap={};id.gridModulesMap={};id.areGridScopedModules=!1;var ln=id,_L=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,i])=>{this.beans[t]=i}),e.beanClasses.forEach(t=>{let i=new t;i.beanName?this.beans[i.beanName]=i:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(i)}),e.derivedBeans?.forEach(t=>{let{beanName:i,bean:n}=t(this);this.beans[i]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{i.preWireBeans?.(this.beans),i.wireBeans?.(this.beans)}),e.forEach(i=>i.preConstruct?.()),t&&e.forEach(t),e.forEach(i=>i.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},LL=class extends _L{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),ln.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var qx=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(qx||{});var OL=class extends E{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){let i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){let t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),St(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){let i=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);let s=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),r=this.findCurrentDropTarget(e,s);if(r!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,n,t),this.lastDropTarget!==null&&r===null&&this.dragSource?.onGridExit?.(this.dragItem),this.lastDropTarget===null&&r!==null&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(r,e,i,n,t),r&&this.dragAndDropImageComp){let{comp:o,promise:a}=this.dragAndDropImageComp;o?o.setIcon(r.getIconName?r.getIconName():null):a.then(l=>{l&&l.setIcon(r.getIconName?r.getIconName():null)})}this.lastDropTarget=r}else if(r&&r.onDragging){let o=this.createDropTargetEvent(r,e,i,n,t);r.onDragging(o)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(let i of t){let{width:n,height:s,left:r,right:o,top:a,bottom:l}=i.getBoundingClientRect();if(n===0||s===0)return!1;let c=e.clientX>=r&&e.clientX<o,u=e.clientY>=a&&e.clientY<l;if(!c||!u)return!1}return!0}isMouseOnDropTarget(e,t){let i=this.getAllContainersFromDropTarget(t),n=!1;for(let o of i)if(this.allContainersIntersect(e,o)){n=!0;break}let{eElement:s,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(s)?!1:n&&t.isInterestedIn(r,s)}findCurrentDropTarget(e,t){let i=t.length;if(i===0)return null;if(i===1)return t[0];let s=Na(this.gos).elementsFromPoint(e.clientX,e.clientY);for(let r of s)for(let o of t)if(jk(this.getAllContainersFromDropTarget(o)).indexOf(r)!==-1)return o;return null}enterDragTargetIfExists(e,t,i,n,s){if(e&&e.onDragEnter){let r=this.createDropTargetEvent(e,t,i,n,s);e.onDragEnter(r)}}leaveLastTargetIfExists(e,t,i,n){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){let r=this.createDropTargetEvent(this.lastDropTarget,e,t,i,n);this.lastDropTarget.onDragLeave(r)}let s=this.getDragAndDropImageComponent();s&&s.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){let i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:n}=e;return i.contains(n)}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,n,s){let r=e.getContainer(),o=r.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-o.left,u=t.clientY-o.top;return this.gos.addGridCommonParams({event:t,x:c,y:u,vDirection:n,hDirection:i,dragSource:l,fromNudge:s,dragItem:a,dropZoneTarget:r})}positionDragAndDropImageComp(e){let t=this.getDragAndDropImageComponent();if(!t)return;let i=t.getGui(),s=i.getBoundingClientRect().height,r=L_()-2,o=O_()-2;if(!i.offsetParent)return;let l=Tx(i.offsetParent),{clientY:c,clientX:u}=e,d=c-l.top-s/2,h=u-l.left-10,g=Pe(this.gos),p=g.defaultView||window,f=p.pageYOffset||g.documentElement.scrollTop,m=p.pageXOffset||g.documentElement.scrollLeft;r>0&&h+i.clientWidth>r+m&&(h=r+m-i.clientWidth),h<0&&(h=0),o>0&&d+i.clientHeight>o+f&&(d=o+f-i.clientHeight),d<0&&(d=0),i.style.left=`${h}px`,i.style.top=`${d}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){let{comp:e}=this.dragAndDropImageComp;if(e){let t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){let{dragSource:e}=this;if(!e)return;let i=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(n=>{!n||!this.isAlive()||(this.processDragAndDropImageComponent(n),this.dragAndDropImageComp.comp=n)})}processDragAndDropImageComponent(e){let{dragSource:t,mouseEventService:i,environment:n}=this;if(!t)return;let s=e.getGui();s.style.setProperty("position","absolute"),s.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(s),n.applyThemeClasses(s),e.setIcon(null);let{dragItemName:r}=t;rm(r)&&(r=r()),e.setLabel(r||""),s.style.top="20px",s.style.left="20px";let o=Pe(this.gos),a=null,l=null;try{a=o.fullscreenElement}catch{}finally{a||(a=Na(this.gos));let c=a.querySelector("body");c?l=c:a instanceof ShadowRoot?l=a:a instanceof Document?l=a?.documentElement:l=a}this.dragAndDropImageParent=l,l?l.appendChild(s):F("Could not find document body, it is needed for drag and drop.")}},NL=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;let n=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<n.left+s,this.tickRight=e.clientX>n.right-s,this.tickUp=e.clientY<n.top+s&&!i,this.tickDown=e.clientY>n.bottom-s&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var VL=class extends E{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){Fe(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{let t=e.gridBodyCtrl;this.autoScrollService=new NL({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let n=[...this.selectionService.getSelectedNodes()].sort((s,r)=>s.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(r));if(n.indexOf(t)!==-1)return n}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let i=this.isFromThisGrid(e),n=this.gos.get("rowDragManaged"),s=e.dragItem.rowNodes;n&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(te(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,n=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes,r=i?1:0;if(this.isFromThisGrid(e))s.forEach(o=>{o.rowTop<n&&(r-=1)}),this.moveRows(s,n,r);else{let o=Xr(this.gos),a=this.clientSideRowModel.getRowIndexAtPixel(n)+1;this.clientSideRowModel.getHighlightPosition(n)===0&&a--,this.clientSideRowModel.updateRowData({add:s.filter(l=>!this.clientSideRowModel.getRowNode(o?.({data:l.data,level:0,rowPinned:l.rowPinned})??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){F("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){F("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=n=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",n))}),e.onDragLeave&&(t.onDragLeave=n=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",n))}),e.onDragging&&(t.onDragging=n=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",n))}),e.onDragStop&&(t.onDragStop=n=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",n))}),e.onDragCancel&&(t.onDragCancel=n=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",n))}));let i=D({isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0},t);this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}getRowDropZone(e){let t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),s=this.onDragging.bind(this),r=this.onDragStop.bind(this),o=this.onDragCancel.bind(this),a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?l=>{i(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:i,onDragLeave:e.onDragLeave?l=>{n(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:n,onDragging:e.onDragging?l=>{s(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:s,onDragStop:e.onDragStop?l=>{r(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:r,onDragCancel:e.onDragCancel?l=>{o(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:o,fromGrid:!0}:a={getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:s,onDragStop:r,onDragCancel:o,fromGrid:!0},a}draggingToRowDragEvent(e,t){let i=this.mouseEventService.getNormalisedPosition(t).y,n=i>this.pageBoundsService.getCurrentPageHeight(),s=-1,r;n||(s=this.rowModel.getRowIndexAtPixel(i),r=this.rowModel.getRow(s));let o;switch(t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:r,y:i,vDirection:o})}dispatchGridEvent(e,t){let i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},HL=class extends E{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){let n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),St(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:s}=e;i.addEventListener("mousedown",t);let r=null,o=this.gos.get("suppressTouch");n&&!o&&(r=a=>{mm(a.target)||(s&&a.stopPropagation(),this.onTouchStart(e,a))},i.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!n})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let i=t.touches[0];this.touchLastTime=i,this.touchStart=i;let n=l=>this.onTouchMove(l,e.eElement),s=l=>this.onTouchUp(l,e.eElement),r=l=>{l.cancelable&&l.preventDefault()},o=t.target,a=[{target:Na(this.gos),type:"touchmove",listener:r,options:{passive:!1}},{target:o,type:"touchmove",listener:n,options:{passive:!0}},{target:o,type:"touchend",listener:s,options:{passive:!0}},{target:o,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){let i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let n=c=>this.onMouseMove(c,e.eElement),s=c=>this.onMouseUp(c,e.eElement),r=c=>c.preventDefault(),o=c=>{c.key===x.ESCAPE&&this.cancelDrag(e.eElement)},a=Na(this.gos),l=[{target:a,type:"mousemove",listener:n},{target:a,type:"mouseup",listener:s},{target:a,type:"contextmenu",listener:r},{target:a,type:"keydown",listener:o}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:i,type:n,listener:s,options:r}=t;i.addEventListener(n,s,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:i,type:n,listener:s,options:r}=t;i.removeEventListener(n,s,r)})})}isEventNearStartEvent(e,t){let{dragStartPixels:i}=this.currentDragParams,n=P(i)?i:4;return Gx(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){let i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){Hi()&&Pe(this.gos).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},Zf=class extends oe{constructor(e,t,i,n,s,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=s,this.suppressVisibilityChange=r,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(jt("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gos.get("rowDragManaged")?new GL(this,this.beans,this.rowNode,this.column):new BL(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&F("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:n=>{n?.preventDefault()}})[0]);let i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let n=this.getDragItem(),s=n.rowNodes?.length||1,r=this.getRowDragText(this.column);return r?r(n,s):s===1?this.cellValueFn():`${s} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Kx=class extends E{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,n=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=rm(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},BL=class extends Kx{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},GL=class extends Kx{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),n=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),r=i&&!s||n;this.setDisplayedOrVisible(r)}},zL=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),$a=class jn{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=jn.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){let n=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let s=this.createDataChangedEvent(t,n,i);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,n){return{type:"dataChanged",node:this,oldData:i,newData:t,update:n}}getRowIndexString(){return this.rowIndex==null?(ae("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?jn.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?jn.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new jn(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){let n=P(this.id)?this.createDaemonNode():null,s=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,n);let r=this.createDataChangedEvent(t,s,!1);this.localEventService?.dispatchEvent(r)}checkRowSelectable(){let t=om(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),i)return;if(Hs(this.beans.gos)){let s=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:s??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){let i=Xr(this.beans.gos);if(i)if(this.data){let n=this.parent?.getRoute()??[];this.id=i({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(jn.ID_PREFIX_ROW_GROUP)&&ae(`Row IDs cannot start with ${jn.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=bt(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,i=!0,n=0,s=this.__autoHeights;if(s==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(a=>{let l=s[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":c=this.beans.visibleColsService.getRightColsForRow(this);break;case null:c=this.beans.columnViewportService.getColsWithinViewport(this);break}if(c.includes(a)){t=!0;return}l=-1}else{t=!0;return}else i=!1;l>n&&(n=l)}),t)||((i||n<10)&&(n=qn(this.beans.gos,this).height),n==this.rowHeight))return;this.setRowHeight(n),this.beans.rowModel.onRowHeightChangedDebounced?.()}setExpanded(t,i,n){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");let s=_(D({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:t,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s,n),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,i,n){let r=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),o=this.beans.valueService.getValueForDisplay(r,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:r,colDef:r.getColDef(),data:this.data,node:this,oldValue:o,newValue:i,value:i,source:n}),!1;let a=this.beans.valueService.setValue(this,r,i,n);return this.dispatchCellChangedEvent(r,i,o),this.checkRowSelectable(),a}setGroupValue(t,i){let n=this.beans.columnModel.getCol(t);X(this.groupData)&&(this.groupData={});let s=n.getColId(),r=this.groupData[s];r!==i&&(this.groupData[s]=i,this.dispatchCellChangedEvent(n,i,r))}setAggData(t){let i=this.aggData;if(this.aggData=t,this.localEventService){let n=s=>{let r=this.aggData?this.aggData[s]:void 0,o=i?i[s]:void 0;if(r===o)return;let a=this.beans.columnModel.getCol(s);a&&this.dispatchCellChangedEvent(a,r,o)};for(let s in i)n(s);for(let s in t)(!i||!(s in i))&&n(s)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(gn(this.beans.gos)){let n=this.beans.gos.get("treeData"),s=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(n?!!s&&s(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,i,n){let s={type:"cellChanged",node:this,column:t,newValue:i,oldValue:n};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){let t=!1,i=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){let s=this.childrenAfterGroup[n],r=s.isSelected();if(!s.selectable){let o=s.calculateSelectedFromChildren();if(o===null)continue;r=o}switch(r){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){this.localEventService?.dispatchEvent({type:t,node:this})}selectThisNode(t,i,n="api"){let s=!this.selectable&&t,r=this.selected===t;if(s||r)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");let o=this.sibling;return o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent(_(D({},this.createGlobalRowEvent("rowSelected")),{event:i||null,source:n})),!0}setSelected(t,i=!1,n="api"){if(typeof n=="boolean"){F("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:n})}setSelectedParams(t){return this.rowPinned?(F("cannot select pinned rows"),0):this.id===void 0?(F("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(_(D({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return!!this.rowPinned}addEventListener(t,i){this.localEventService||(this.localEventService=new Zr),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new um(this.beans.frameworkOverrides));let n=this.frameworkEventListenerService?.wrap(i)??i;this.localEventService.addEventListener(t,n)}removeEventListener(t,i){if(!this.localEventService)return;let n=this.frameworkEventListenerService?.unwrap(i)??i;this.localEventService.removeEventListener(t,n),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(F("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let t=[],i=this;for(;i&&i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new jn(this.beans);Object.keys(this).forEach(i=>{zL.has(i)||(t[i]=this[i])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};$a.ID_PREFIX_ROW_GROUP="row-group-";$a.ID_PREFIX_TOP_PINNED="t-";$a.ID_PREFIX_BOTTOM_PINNED="b-";$a.OBJECT_ID_SEQUENCE=0;var dn=$a,WL=class extends E{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvancedFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",i=>this.setAdvancedFilterModel(i.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){Gf(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):Wt.resolve()).then(()=>{let s={source:t,type:"filterChanged",columns:n};i&&yt(s,i),this.eventService.dispatchEvent(s),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!Gf(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){F("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){this.columnFilterService?.setColDefPropertiesForDataType(e,t,i)}},jL=class extends oe{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??Wt.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:i}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(n=>{let s=n.getGui();P(s)||F(`getGui method from filter returned ${s}; it should be a DOM element.`),this.appendChild(s),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(lt(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},Yx="ag-resizer-wrapper",zn=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,UL=`<div class="${Yx}">
        ${zn("eTopLeft","topLeft")}
        ${zn("eTop","top")}
        ${zn("eTopRight","topRight")}
        ${zn("eRight","right")}
        ${zn("eBottomRight","bottomRight")}
        ${zn("eBottom","bottom")}
        ${zn("eBottomLeft","bottomLeft")}
        ${zn("eLeft","left")}
    </div>`,$L=class extends E{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:s,height:r,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=yi(this.element);if(u){let d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){let g=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-g}if(h.minHeight!=null){let g=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-g}}if(this.minHeight=s||l,this.minWidth=i||c,n&&this.setWidth(n),r&&this.setHeight(r),(!n||!r)&&this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&t){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){let g=parseFloat(d.style.top),p=parseFloat(d.style.left);h?this.offsetElement(isNaN(p)?0:p,isNaN(g)?0:g):this.setPosition(p,g)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let n=!!e[t],s=this.getResizerElement(t),r={dragStartPixels:0,eElement:s,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragService.addDragSource(r),this.resizeListeners.push(r),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,i=this.element,n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Aa(i,e),e=Ax(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Aa(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:i}=this.offsetParent;if(!i)return null;let n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:n.top,o=e?0:s.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-n.bottom}}return i+o-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:i}=this.config,n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)wi(t,e),e=$u(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:s}=this.offsetParent,r=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+r>s&&(e=s-r)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?wi(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&(this.popupService.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:i,isTop:n,anywhereWithin:s,topBuffer:r}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!i,!!s,o)?0:o,c=this.shouldSkipY(t,!!n,r,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,i,n){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:s.left,l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=o.right;return l?!0:(t?l=n<0&&e.clientX>a+r.left||n>0&&e.clientX<a+r.left:i?l=n<0&&e.clientX>o.right||n>0&&e.clientX<a+r.left:l=n<0&&e.clientX>o.right||n>0&&e.clientX<o.right,l)}shouldSkipY(e,t,i=0,n){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:s.top,l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=o.bottom;return l?!0:(t?l=n<0&&e.clientY>a+r.top+i||n>0&&e.clientY<a+r.top:l=n<0&&e.clientY>o.bottom||n>0&&e.clientY<o.bottom,l)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let i=new DOMParser().parseFromString(UL,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${Yx}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:i,forcePopupParentAsOffsetParent:n}=this.config;!i&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,i=0;for(let n=0;n<e.length;n++){let s=e[n],r=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(r){let l=window.getComputedStyle(s);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=s.offsetHeight,a=s.offsetWidth;t+=o,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null,i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){let s=i[n];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:s,isBottom:r,isLeft:o}=this.currentResizer,a=s||o,l=r||n,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:o,isTop:n}),d=this.position.x,h=this.position.y,g=0,p=0;if(a&&c){let f=o?-1:1,m=this.getWidth(),v=m+c*f,C=!1;o&&(g=m-v,(d+g<=0||v<=this.minWidth)&&(C=!0,g=0)),C||this.setWidth(v)}if(l&&u){let f=n?-1:1,m=this.getHeight(),v=m+u*f,C=!1;n?(p=m-v,(h+p<=0||v<=this.minHeight)&&(C=!0,p=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&m<v&&this.getMinSizeOfSiblings().height+v>this.element.parentElement.offsetHeight&&(C=!0),C||this.setHeight(v)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&g||p)&&this.offsetElement(d+g,h+p)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:i}=this.position,n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());let{movementX:s,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+s,i+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Qx=class Zx extends E{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks=D({shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;let s=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,n.shiftKey);s&&(s.focus(),n.preventDefault())}},i)}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(Zx.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:i=>{if(!(i.defaultPrevented||un(i))){if(this.callbacks.shouldStopEventPropagation(i)){Kr(i);return}i.key===x.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}}})}};Qx.FOCUS_MANAGED_CLASS="ag-focus-managed";var Gs=Qx,Xx={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function Dm(e,t){return Zu(e)?(e.debounceMs!=null&&F("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function Zu(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var qL=class extends oe{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=T,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Gs(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new $L(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Zu(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=Zu(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){let{buttons:i,readOnly:n}=t??{},{buttons:s,readOnly:r}=e;if(n===r&&La(i,s))return;let o=s&&s.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(lt(this.eButtonsPanel),this.buttonListeners.forEach(c=>c()),this.buttonListeners=[]):o&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!o){this.eButtonsPanel&&ni(this.eButtonsPanel);return}let a=document.createDocumentFragment(),l=c=>{let u,d;switch(c){case"apply":u=this.translate("applyFilter"),d=p=>this.onBtApply(!1,!1,p);break;case"clear":u=this.translate("clearFilter"),d=()=>this.onBtClear();break;case"reset":u=this.translate("resetFilter"),d=()=>this.onBtReset();break;case"cancel":u=this.translate("cancelFilter"),d=p=>{this.onBtCancel(p)};break;default:F("Unknown button type specified");return}let g=za(`<button
                    type="${c==="apply"?"submit":"button"}"
                    data-ref="${c}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${u}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(g,{click:d})),a.append(g)};s.forEach(c=>l(c)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=Dm(this.providedFilterParams,this.getDefaultDebounceMs()),t=bt(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let i=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:n}=this.providedFilterParams;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,i=t&&t.key,n;(i==="Enter"||i==="Space")&&(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let i=this.isModelValid(this.getModelFromUi()),n=this.queryForHtmlElement('[data-ref="applyFilterButton"]');n&&Ga(n,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:n}=this;t?(i.restoreLastSize(),i.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){let t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Xx[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},KL=class extends bm{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},YL=class extends oe{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case x.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case x.DOWN:case x.UP:e.preventDefault(),this.navigate(t);break;case x.PAGE_DOWN:case x.PAGE_UP:case x.PAGE_HOME:case x.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===x.DOWN,i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let s=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),i=this.itemEls[s]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,n=this.itemEls[0].clientHeight,s=Math.floor(this.getGui().clientHeight/n),r=-1;e===x.PAGE_HOME?r=0:e===x.PAGE_END?r=i:e===x.PAGE_DOWN?r=Math.min(t+s,i):e===x.PAGE_UP&&(r=Math.max(t-s,0)),r!==-1&&this.highlightItem(this.itemEls[r])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:i}=e,n=i||t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{ni(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{M_(t,i+1),E_(t,e.length)})}renderOption(e,t){let i=Pe(this.gos),n=i.createElement("div");At(n,"option"),n.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let s=i.createElement("span");n.appendChild(s),s.textContent=t,this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Jr({getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let i=this.options.findIndex(n=>n.value===e);if(i!==-1){let n=this.options[i];this.value=n.value,this.displayValue=n.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!yi(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Uu(this.highlightedEl,!0);let t=this.getGui(),{scrollTop:i,clientHeight:n}=t,{offsetTop:s,offsetHeight:r}=e;(s+r>i+n||s<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!yi(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),Uu(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},QL=class extends zx{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=T,this.eWrapper=T,this.eDisplayField=T,this.eIcon=T,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:s,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,i!=null&&this.setPickerMaxHeight(i),s!=null&&this.setPickerMinWidth(s),r!=null&&this.setPickerMaxWidth(r)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:i,inputWidth:n}=this.config;if(i){let s=jt(i,this.gos);s&&this.eIcon.appendChild(s)}n!=null&&this.setInputWidth(n)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),ju(e,!1),this.ariaRole&&At(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case x.UP:case x.DOWN:case x.ENTER:case x.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case x.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:s=!0}=this.config,r={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{let h=ix(this.gos);this.beforeHidePicker(),h&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:this.eWrapper};e.style.position="absolute";let o=this.popupService.addPopup(r),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:u}=this;u?(l&&(e.style.minWidth=l),e.style.width=Cm($u(this.eWrapper)),c&&(e.style.maxWidth=c)):Qu(e,c??$u(this.eWrapper));let d=a??`${vm(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",d),this.alignPickerToComponent(),o.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();ju(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return Qu(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Em=class extends QL{constructor(e){super(D({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new YL("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),k_(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===x.TAB&&this.hidePicker(),t){case x.ENTER:case x.UP:case x.DOWN:case x.PAGE_UP:case x.PAGE_DOWN:case x.PAGE_HOME:case x.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case x.ESCAPE:super.onKeyDown(e);break;case x.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return s==null&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},ZL={selector:"AG-SELECT",component:Em},Jx=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],i=n=>n.some(s=>e[s]!=null)?!0:(F(`ignoring FilterOptionDef as it doesn't contain one of '${n}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(n=>n===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:F("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else F("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},e1=class extends qL{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:n}=t;return n??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let i=!e.operator,n=!t.operator;if(!i&&n||i&&!n)return!1;let r;if(i){let o=e,a=t;r=this.areSimpleModelsEqual(o,a)}else{let o=e,a=t;r=o.operator===a.operator&&Qn(o.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return r}shouldRefresh(e){let t=this.getModel(),i=t?t.conditions??[t]:null,n=e.filterOptions?.map(r=>typeof r=="string"?r:r.displayKey)??this.getDefaultFilterOptions();return!(!(!i||i.every(r=>n.find(o=>o===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let i=e,n=i.conditions;n==null&&(n=[],F("Filter model is missing 'conditions'"));let s=this.validateAndUpdateConditions(n),r=this.getNumConditions();if(s<r)this.removeConditionsAndOperators(s);else if(s>r)for(let a=r;a<s;a++)this.createJoinOperatorPanel(),this.createOption();let o=i.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),n.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Wt.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),F('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:i}=t,n=[];if(i){let r=t;n.push(...r.conditions??[])}else n.push(t);return n[i&&i==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Jx,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(F('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(F('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(F('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new Em);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let i=this.getNumConditions()-1;this.forEachPositionInput(i,n=>this.resetInput(n)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let n=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,s),this.resetJoinOperatorOr(i,n,s),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){let n=this.createManagedBean(new KL);return e.push(n),n.addCssClass("ag-filter-condition-operator"),n.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(n.getGui()),n}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);let n=e+1,s=i-n;s>0&&this.removeConditionsAndOperators(n,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((n,s)=>{let r=this.isConditionDisabled(s,e);n.setDisabled(r||this.filterListOptions.length<=1),s===1&&(Ga(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((n,s)=>{xe(n,this.isConditionBodyVisible(s))});let i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(n=>{n.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(n=>{n.setValue(i,!0)}),this.forEachInput((n,s,r,o)=>{this.setElementDisplayed(n,s<o),this.setElementDisabled(n,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);let i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(s=>ni(s))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(s=>{ni(s.getGui()),this.destroyBean(s)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let t=this.getInputs(0)[0];if(!t)return;t instanceof Ts&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,n=!1,s=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,i=o);else{let a=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),l=o<t;(a||l)&&(this.removeConditionsAndOperators(o,1),n=!0,l&&i--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(i,s),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(rm(this.filterPlaceholder)){let n=this.filterPlaceholder,s=this.eTypes[t].getValue(),r=this.translate(s);i=n({filterOptionKey:s,filterOption:r,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,n,s)=>{if(!(t instanceof Ts))return;let r=i===0&&s>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",o=i===0&&s>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,n)),t.setInputAriaLabel(o)})}setElementValue(e,t,i){e instanceof Ts&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof oe&&xe(e.getGui(),t)}setElementDisabled(e,t){e instanceof oe&&Ga(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Ts&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){let i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){let n=this.getNumberOfInputs(t),s=this.getInputs(e);for(let r=0;r<s.length;r++){let o=s[r];o!=null&&i(o,r,e,n)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Wt.resolve()}resetType(e){let i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,s){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(n),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let i=this.mapValuesFromModel(e);this.forEachInput((n,s,r)=>{r===t&&this.setElementValue(n,i[s]!=null?i[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,n)=>{this.setElementValue(t,i===0&&n===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){let i=this.getCellValue(e.node),n=this.mapValuesFromModel(t),s=this.optionsFactory.getCustomOption(t.type),r=this.evaluateCustomFilter(s,n,i);return r??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;let{predicate:n}=e;if(n!=null&&!t.some(s=>s==null))return n(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},t1=class extends e1{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){let n=this.comparator(),s=e[0]!=null?n(e[0],t):0;switch(i.type){case"equals":return s===0;case"notEqual":return s!==0;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{let r=n(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&r<=0:s>0&&r<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return F('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},XL=65,JL=67,eO=86,tO=68,iO=90,nO=89;function i1(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function Xf(e,t,i,n,s){let r=n?n.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;let o=e.addGridCommonParams({event:t,editing:s,column:n,node:i,data:i.data,colDef:n.getColDef()});return!!(r&&r(o))}function sO(e,t,i,n){let s=n.getDefinition(),r=s&&s.suppressHeaderKeyboardEvent;if(!P(r))return!1;let o=e.addGridCommonParams({colDef:s,column:n,headerRowIndex:i,event:t});return!!r(o)}function rO(e){let{keyCode:t}=e,i;switch(t){case XL:i=x.A;break;case JL:i=x.C;break;case eO:i=x.V;break;case tO:i=x.D;break;case iO:i=x.Z;break;case nO:i=x.Y;break;default:i=e.code}return i}function oO(e,t=!1){return e===x.DELETE?!0:!t&&e===x.BACKSPACE?Rx():!1}var zs=class extends Ts{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=P(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{i1(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{let n=i.clipboardData?.getData("text");n&&n.split("").some(s=>!e.test(s))&&i.preventDefault()}})}},nd={selector:"AG-INPUT-TEXT-FIELD",component:zs},Mm=class extends zs{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let s=parseFloat(this.eInput.value),r=isNaN(s)?"":this.normalizeValue(s.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:e,min:t,max:i,step:n}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof n=="number"&&this.setStep(n)}onWheel(e){De(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}let i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,ri(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,ri(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,ri(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(P(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){i=this.adjustPrecision(i);let s=this.normalizeValue(i);n=i!=s}if(n)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},aO={selector:"AG-INPUT-NUMBER-FIELD",component:Mm},n1=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Rm=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;let t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){let n=e,r=(n.conditions??[]).map(a=>this.getModelAsString(a)),o=n.operator==="AND"?"andCondition":"orCondition";return r.join(` ${i(o,Xx[o])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{let n=e,s=this.optionsFactory.getCustomOption(n.type),{displayKey:r,displayName:o,numberOfInputs:a}=s||{};return r&&o&&a===0?(i(r,o),o):this.conditionToString(n,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},s1=class extends Rm{conditionToString(e,t){let{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function Jf(e){let{allowedCharPattern:t}=e??{};return t??null}var lO=class extends t1{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new s1(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return n1}setElementValue(e,t,i){let n=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,n)}createValueElement(){let e=Jf(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),At(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){let s=this.createManagedBean(n?new zs({allowedCharPattern:n}):new Mm);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(i,n,s,r)=>{n<r&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=cn(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},r1=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],o1=class extends Rm{conditionToString(e,t){let{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function a1(e){let t=e&&e.trim();return t===""?e:t}var cO=class extends e1{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{let n=t.lastIndexOf(i);return n>=0&&n===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new o1(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(F("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:n})=>e(t,i,n)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){let t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let i=[];return this.forEachPositionInput(e,(n,s,r,o)=>{if(s<o){let a=cn(n.getValue());t&&this.textFilterParams.trimInput&&(a=a1(a)??null,n.setValue(a,!0)),i.push(a)}}),i}getDefaultFilterOptions(){return r1}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),At(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){let n=this.createManagedBean(new zs);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,n){let s=e.map(h=>this.formatter(h))||[],r=this.formatter(t),{api:o,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);let d={api:o,colDef:a,column:l,context:c,node:n.node,data:n.data,filterOption:i.type,value:r,textFormatter:u};return s.some(h=>this.matcher(_(D({},d),{filterText:h})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function l1(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e);return isNaN(t)?void 0:t}}function Li(e,t=Number.MAX_VALUE){return i=>{let n=l1(i);if(!(n==null||n<e||n>t))return n}}function ka(e,t){return e.toString().padStart(t,"0")}function uO(e,t){let i=[];for(let n=e;n<=t;n++)i.push(n);return i}function dO(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function oi(e,t=!0,i="-"){if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>ka(s,2)).join(i);return t&&(n+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>ka(s,2)).join(":")),n}var Af=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function _a(e,t="YYYY-MM-DD"){let i=ka(e.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>n[e.getMonth()],MMM:()=>n[e.getMonth()].slice(0,3),MM:()=>ka(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Af(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Af(e.getDate())}`,DD:()=>ka(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Af(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(r).join("|"),"g");return t.replace(o,a=>a in r?r[a]():a)}function Pt(e){if(!e)return null;let[t,i]=e.split(" ");if(!t)return null;let n=t.split("-").map(d=>parseInt(d,10));if(n.filter(d=>!isNaN(d)).length!==3)return null;let[s,r,o]=n,a=new Date(s,r-1,o);if(a.getFullYear()!==s||a.getMonth()!==r-1||a.getDate()!==o)return null;if(!i||i==="00:00:00")return a;let[l,c,u]=i.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var c1=class{constructor(e,t,i,n,s){this.alive=!0,this.context=e,this.eParent=n,t.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(n.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),s?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){xe(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&F("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},u1=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],d1=class extends Rm{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){let{type:i}=e,{numberOfInputs:n}=t||{},s=i=="inRange"||n===2,r=Pt(e.dateFrom),o=Pt(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){let l=r!==null?_a(r,a):"null",c=o!==null?_a(o,a):"null";return`${l}-${c}`}return r!=null?_a(r,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},_S=1e3,LS=1/0,hO=class extends t1{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=_S,this.maxValidYear=LS,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&Pt(t)||null,i&&Pt(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(i,n)=>{if(e[i]!=null)if(isNaN(e[i]))F(`DateFilter ${i} is not a number`);else return e[i]==null?n:Number(e[i]);return n};this.minValidYear=t("minValidYear",_S),this.maxValidYear=t("maxValidYear",LS),this.minValidYear>this.maxValidYear&&F("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Pt(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Pt(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&F("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new d1(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new c1(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return u1}createValueElement(){let t=Pe(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,n){let r=Pe(this.gos).createElement("div");r.classList.add(`ag-filter-${n}`),r.classList.add(`ag-filter-date-${n}`),t.push(r),e.appendChild(r),i.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,s,r)=>{s!==e||!t||n>=r||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=oi(n[0])),n.length>1&&(i.dateTo=oi(n[1])),D({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},i)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(i,n,s,r)=>{n<r&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},Fm=class extends E{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=n,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?te(this.colsSpanning):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let e=this.beans.gos.get("suppressColumnMoveAnimation"),t=P(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),n=this.modifyLeftForPrintLayout(e,i),s=this.modifyLeftForPrintLayout(e,t);this.setLeft(n),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!Xe(this.beans.gos,"print")||e.getPinned()==="left")return t;let n=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){let s=this.beans.visibleColsService.getBodyContainerWidth();return n+s+t}return n+t}setLeft(e){if(P(e)&&(this.eCell.style.left=`${e}px`),ke(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&P_(this.ariaEl,t.length)}}},gO="ag-column-first",pO="ag-column-last";function h1(e,t,i,n){return X(e)?[]:mO(e.headerClass,e,t,i,n)}function g1(e,t,i){e.addOrRemoveCssClass(gO,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(pO,i.isColAtEdge(t,"last"))}function fO(e,t,i,n){return t.addGridCommonParams({colDef:e,column:i,columnGroup:n})}function mO(e,t,i,n,s){if(X(e))return[];let r;if(typeof e=="function"){let o=fO(t,i,n,s);r=e(o)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}var vO=0,p1=class f1 extends E{constructor(t,i,n){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=n,this.beans=i,this.instanceId=t.getUniqueId()+"-"+vO++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){let t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){let{headerRowIndex:i,column:n}=this.focusService.getFocusedHeader();return sO(this.gos,t,i,n)}getWrapperHasFocus(){return De(this.gos)===this.eGui}setGui(t,i){this.eGui=t,this.addDomData(i),i.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),i.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){let{wrapperElement:i,checkMeasuringCallback:n,compBean:s}=t,{animationFrameService:r,resizeObserverService:o,columnModel:a,gos:l}=this.beans,c=f=>{if(!this.isAlive()||!s.isAlive())return;let{paddingTop:m,paddingBottom:v,borderBottomWidth:C,borderTopWidth:w}=Bs(this.getGui()),y=m+v+C+w,b=i.offsetHeight+y;if(f<5){let M=Pe(l),R=!M||!M.contains(i),A=b==0;if(R||A){r.requestAnimationFrame(()=>c(f+1));return}}a.setColHeaderHeight(this.column,b)},u=!1,d,h=()=>{let f=this.column.isAutoHeaderHeight();f&&!u&&g(),!f&&u&&p()},g=()=>{u=!0,c(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),d=o.observeResize(i,()=>c(0))},p=()=>{u=!1,d&&d(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),d=void 0};h(),s.addDestroyFunc(()=>p()),s.addManagedListeners(this.column,{widthChanged:()=>u&&c(0)}),s.addManagedEventListeners({sortChanged:()=>{u&&window.setTimeout(()=>c(0))}}),n&&n(h)}onDisplayedColumnsChanged(){let{comp:t,column:i,beans:n,eGui:s}=this;!t||!i||!s||(g1(t,i,n.visibleColsService),Ex(s,n.visibleColsService.getAriaColIndex(i)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let t=this.focusService.isHeaderFocusSuppressed();this.eGui&&ri(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){let i=De(this.gos),n=t.key===x.LEFT||t.key===x.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),i!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||n)&&(t.preventDefault(),t.stopImmediatePropagation()),!n))return;let s=t.key===x.LEFT!==this.gos.get("enableRtl"),r=qx[s?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let o=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(o,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){let s=this.pinnedWidthService.getPinnedLeftWidth(),r=this.pinnedWidthService.getPinnedRightWidth(),o=Ua(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(s+r+i>o)if(o>s+r)i=o-s-r;else return 0}return i}getResizeDiff(t){let i=t.key===x.LEFT!==this.gos.get("enableRtl"),n=this.column.getPinned(),s=this.gos.get("enableRtl");return n&&s!==(n==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){let i=this.getWrapperHasFocus();switch(t.key){case x.PAGE_DOWN:case x.PAGE_UP:case x.PAGE_HOME:case x.PAGE_END:i&&t.preventDefault()}}addDomData(t){let i=f1.DOM_DATA_KEY_HEADER_CTRL;Vs(this.gos,this.eGui,i,this),t.addDestroyFunc(()=>Vs(this.gos,this.eGui,i,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,n){let s=t??i;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault(),this.menuService.isHeaderContextMenuEnabled(n)&&this.menuService.showHeaderContextMenu(n,t,i),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(t,i){this.eventService.dispatchEvent({type:t,column:i})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};p1.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var sd=p1,Im=class extends E{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},CO=class extends sd{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,n,s){this.comp=e,s=ja(this,this.beans.context,s),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t,s),this.setupActive(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s),s.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(s)}),s.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){let e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=jt("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Gs(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();Yr(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(De(this.gos)===this.eGui)return;let n=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(n){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),n.focus();return}let s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:s},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleColsService,i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case x.UP:case x.DOWN:t||e.preventDefault();case x.LEFT:case x.RIGHT:if(t)return;e.stopPropagation();case x.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case x.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&Ur(e.relatedTarget,"ag-floating-filter");if(i&&n&&e.target===this.eGui){let r=this.lastFocusEvent,o=!!(r&&r.key===x.TAB);if(r&&o){let a=r.shiftKey;this.focusService.focusInto(this.eGui,a)}}let s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(e){e.createManagedBean(new Im([this.column],this.eGui));let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){let t=new Fm(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{filterManager:t}=this.beans,i=n=>{if(n?.source==="filterDestroyed"&&!this.isAlive())return;let s=this.comp.getFloatingFilterComp();s&&s.then(r=>{if(r){let o=t?.getCurrentFloatingFilterParentModel(this.column),a=n?_(D({},n),{columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}):null;r.onParentModelChanged(o,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t?.isFilterActive(this.column)&&i(null)}setupWidth(e){let t=()=>{let i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();!s||!n?this.updateCompDetails(e,n,i):s.then(r=>{!r||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(i=>{let n=!1;i?.refresh&&typeof i.refresh=="function"&&i.refresh(t)!==null&&(n=!0),!n&&i?.onParamsUpdated&&typeof i.onParamsUpdated=="function"&&i.onParamsUpdated(t)!==null&&F("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var N="32.3.3";function wO(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function yO(e,t,i){return e.filterManager?.getFilterInstance(t,i)}function bO(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function SO(e,t){let i=e.columnModel.getColDefCol(t);if(i)return e.filterManager?.destroyFilter(i,"api")}function xO(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function DO(e){return e.filterManager?.getFilterModel()??{}}function EO(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function MO(e,t,i){return e.filterManager?.setColumnFilterModel(t,i)??Promise.resolve()}function RO(e,t){let i=e.columnModel.getCol(t);if(!i){ae(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function FO(e,t,i){if(t==null)return null;let n=null,{compName:s,jsComp:r,fwComp:o}=Ux.getCompKeys(e,t,xm);return s?n={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:r==null&&o==null&&t.filter===!0&&(n=i()),n}var OS={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},NS=["january","february","march","april","may","june","july","august","september","october","november","december"],IO=class extends E{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=D({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}let i=[],n=this.getFilterModel(!0);if(e){let s=new Set(Object.keys(e));this.allColumnFilters.forEach((r,o)=>{let a=e[o];i.push(this.setModelOnFilterWrapper(r.filterPromise,a)),s.delete(o)}),s.forEach(r=>{let o=this.columnModel.getColDefCol(r)||this.columnModel.getCol(r);if(!o){F("setFilterModel() - no column found for colId: "+r);return}if(!o.isFilterAllowed()){F("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+r);return}let a=this.getOrCreateFilterWrapper(o);if(!a){F("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+r);return}i.push(this.setModelOnFilterWrapper(a.filterPromise,e[r]))})}else this.allColumnFilters.forEach(s=>{i.push(this.setModelOnFilterWrapper(s.filterPromise,null))});Wt.all(i).then(()=>{let s=this.getFilterModel(!0),r=[];this.allColumnFilters.forEach((o,a)=>{let l=n?n[a]:null,c=s?s[a]:null;La(l,c)||r.push(o.column)}),r.length>0&&this.filterManager?.onFilterChanged({columns:r,source:t})})}setModelOnFilterWrapper(e,t){return new Wt(i=>{e.then(n=>{typeof n.setModel!="function"&&(F("filter missing setModel method, which is needed for setFilterModel"),i()),(n.setModel(t)||Wt.resolve()).then(()=>i())})})}getFilterModel(e){let t={},{allColumnFilters:i,initialFilterModel:n}=this;return i.forEach((s,r)=>{let o=this.getModelFromFilterWrapper(s);P(o)&&(t[r]=o)}),e||Object.entries(n).forEach(([s,r])=>{P(r)&&!i.has(s)&&this.columnModel.getCol(s)?.isFilterAllowed()&&(t[s]=r)}),t}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(F("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=r=>r?r.isFilterActive?r.isFilterActive():(F("Filter is missing isFilterActive() method"),!1):!1,t=!!Gf(this.gos),i=r=>{if(!r.isPrimary())return!0;let a=!this.columnModel.isPivotActive();return!r.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},n=[],s=[];return this.forEachColumnFilter((r,o)=>{e(r)&&(i(o.column)?n.push(r):s.push(r))}).then(()=>{this.activeAggregateFilters=n,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,n)=>n.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return Wt.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){let{data:n,aggData:s}=e,r=i?this.activeAggregateFilters:this.activeColumnFilters,o=i?s:n;for(let a=0;a<r.length;a++){let l=r[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(n=>{n.filterPromise&&n.filterPromise.then(s=>{s&&s!==t&&s.onAnyFilterChanged&&s.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{let n=i?this.columnModel.getCol(i):e;return n?this.valueService.getValue(n,t,!0):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(Sf(this.gos))t="agSetColumnFilter";else{let i=this.dataTypeService?.getBaseDataType(e);i==="number"?t="agNumberColumnFilter":i==="date"||i==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(Sf(this.gos))t="agSetColumnFloatingFilter";else{let i=this.dataTypeService?.getBaseDataType(e);i==="number"?t="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let i=this.getDefaultFilter(e),n=e.getColDef(),s,r=_(D({},this.createFilterParams(e,n)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(s,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(s,a):!0}),o=this.userComponentFactory.getFilterDetails(n,r,i);return o?{filterPromise:()=>{let a=o.newAgStackInstance();return a?.then(l=>{s=l,t&&(t.filter=l)}),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:hx(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:n}=this.createFilterInstance(e,t);return t.filterPromise=i?.()??null,t.compDetails=n,t}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((i,n)=>{let s;i.column.isPrimary()?s=this.columnModel.getColDefCol(n):s=this.columnModel.getCol(n),!(s&&s===i.column)&&(e.push(i.column),this.disposeFilterWrapper(i,"columnChanged"),this.disposeColumnListener(n))});let t=e.every(i=>i.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof i?.isFilterAllowed=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let i=l=>{let c=this.getOrCreateFilterWrapper(e)?.filterPromise;c?.then(u=>{l(Ta(u))})},n=e.getColDef(),s=_(D({},this.createFilterParams(e,n)),{filterChangedCallback:()=>i(l=>this.filterChangedCallbackFactory(l,e)())}),r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(n,xm,s),o=FO(this.frameworkOverrides,n,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");let a={column:e,filterParams:r,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(n,a,o)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],n&&(this.disposeFilterWrapper(n,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{let n=i?.source??"columnFilter",s={filter:e,additionalEventAttributes:i,columns:[t],source:n};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n)){this.destroyFilter(i,"paramsUpdated");return}let s=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(r=>{(r?.refresh?r.refresh(D(_(D({},this.createFilterParams(i,i.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(r,i),filterChangedCallback:this.filterChangedCallbackFactory(r,i),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,a):!0}),s)):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){let i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{let n=Ta(i);t(n)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(Ta(i))})})}getFilterInstanceImpl(e){let t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??Wt.resolve(null):Wt.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let r=()=>{},o=new Promise(a=>{r=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:r}),o}let i=this.columnModel.getColDefCol(e),n=i?this.getOrCreateFilterWrapper(i):null;return n?(r=>new Promise(o=>{r.then(a=>o(a))}))(this.setModelOnFilterWrapper(n.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){let n=Sf(this.gos),s=this.localeService.getLocaleTextFunc(),r=o=>{let{filterParams:a}=e;e.filterParams=typeof a=="object"?D(D({},a),o):o};switch(t.baseDataType){case"number":{n&&r({comparator:(o,a)=>{let l=o==null?0:parseInt(o),c=a==null?0:parseInt(a);return l===c?0:l>c?1:-1}});break}case"boolean":{r(n?{valueFormatter:o=>P(o.value)?s(String(o.value),o.value?"True":"False"):s("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(o,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(o,a)=>a===!1,numberOfInputs:0}]});break}case"date":{n&&r({valueFormatter:o=>{let a=i(o);return P(a)?a:s("blanks","(Blanks)")},treeList:!0,treeListFormatter:(o,a)=>{if(a===1&&o!=null){let l=NS[Number(o)-1];return s(l,OS[l])}return o??s("blanks","(Blanks)")}});break}case"dateString":{let o=t.dateParser;r(n?{valueFormatter:a=>{let l=i(a);return P(l)?l:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{let l=o(a??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(a,l)=>{if(l===1&&a!=null){let c=NS[Number(a)-1];return s(c,OS[c])}return a??s("blanks","(Blanks)")}}:{comparator:(a,l)=>{let c=o(l);return l==null||c<a?-1:c>a?1:0}});break}case"object":{n?r({valueFormatter:o=>{let a=i(o);return P(a)?a:s("blanks","(Blanks)")}}):e.filterValueGetter=o=>i({column:o.column,node:o.node,value:this.valueService.getValue(o.column,o.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function PO(e){return!!e.filterManager?.isAnyFilterPresent()}function AO(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var TO=class extends oe{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[nd]),this.eFloatingFilterText=T}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},m1=class extends oe{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new Jx,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;let i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},kO=class extends m1{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[nd]),this.eReadOnlyText=T,this.eDateWrapper=T}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return u1}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new d1(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){let i=e;this.dateComp.setDate(Pt(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){xe(this.eDateWrapper,e),xe(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=oi(e);this.params.parentFilterInstance(i=>{if(i){let n=Pt(t);i.onFloatingFilterChanged(this.getLastType()||null,n)}})}getDateComponentParams(){let e=Dm(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:bt(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new c1(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},_O=class extends oe{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[nd]),this.eDateInput=T}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===De(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){let t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Hi(),t.type=i?"date":"text";let{minValidYear:n,maxValidYear:s,minValidDate:r,maxValidDate:o}=e.filterParams||{};if(r&&n&&F("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&s&&F("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),r&&o){let[a,l]=[r,o].map(c=>c instanceof Date?c:Pt(c));a&&l&&a.getTime()>l.getTime()&&F("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}r?r instanceof Date?t.min=_a(r):t.min=r:n&&(t.min=`${n}-01-01`),o?o instanceof Date?t.max=_a(o):t.max=o:s&&(t.max=`${s}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Pt(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(oi(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:pm()||fm()||Hi()&&Mx()>=14.1}},v1=class extends E{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=T,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new zs(this.params?.config));let t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);let i=n=>this.valueChangedListener(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},C1=class extends m1{constructor(){super(...arguments),this.eFloatingFilterInputContainer=T}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Zu(this.params.filterParams),!this.isReadOnly()){let i=Dm(this.params.filterParams,this.getDefaultDebounceMs()),n=bt(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(n)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();lt(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){let t=e.key===x.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=a1(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(n=>{n&&n.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},LO=class extends E{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Mm),this.eFloatingFilterTextInput=this.createManagedBean(new zs),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,n=>this.valueChangedListener(n)),this.setupListeners(i,n=>this.valueChangedListener(n))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},OO=class extends C1{init(e){super.init(e),this.filterModelFormatter=new s1(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){Jf(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return n1}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=Jf(e.filterParams),this.allowedCharPattern?this.createManagedBean(new v1({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new LO)}},NO=class extends C1{init(e){super.init(e),this.filterModelFormatter=new o1(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return r1}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new v1)}};function VO(e){return!!e.filterManager?.isQuickFilterPresent()}function HO(e){return e.gos.get("quickFilterText")}function BO(e){e.filterManager?.resetQuickFilterCache()}var GO=class extends E{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){let e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols(),n=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:i)??[];t&&(n=n.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?n:n.filter(s=>s.isVisible()||s.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return P(e)?Fe(this.gos)?e.toUpperCase():(F("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){F(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{let n=this.getQuickFilterTextForColumn(i,e);return P(n)&&n.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);let{quickFilterParts:n,matcher:s}=this;return s(n,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0),n=e.getColDef();if(n.getQuickFilterText){let s=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(s)}return P(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.colsForQuickFilter.forEach(i=>{let n=this.getQuickFilterTextForColumn(i,e);P(n)&&t.push(n)}),t.join(`
`)}},Pm={version:N,moduleName:"@ag-grid-community/filter-core",beans:[WL]},zO={version:N,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:PO,onFilterChanged:AO},dependantModules:[Pm]},rd={version:N,moduleName:"@ag-grid-community/column-filter",beans:[IO],dependantModules:[Pm]},WO={version:N,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:wO,getFilterInstance:yO,getColumnFilterInstance:bO,destroyFilter:SO,setFilterModel:xO,getFilterModel:DO,getColumnFilterModel:EO,setColumnFilterModel:MO,showColumnFilter:RO},dependantModules:[rd,zO]},Am={version:N,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:CO}],dependantModules:[rd]},lZ={version:N,moduleName:"@ag-grid-community/floating-filter",dependantModules:[Am,rd]},jO={version:N,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:TO}],dependantModules:[Am]},UO={version:N,moduleName:"@ag-grid-community/simple-filter",dependantModules:[rd],userComponents:[{name:"agTextColumnFilter",classImp:cO},{name:"agNumberColumnFilter",classImp:lO},{name:"agDateColumnFilter",classImp:hO},{name:"agDateInput",classImp:_O}]},$O={version:N,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[UO,Am],userComponents:[{name:"agTextColumnFloatingFilter",classImp:NO},{name:"agNumberColumnFloatingFilter",classImp:OO},{name:"agDateColumnFloatingFilter",classImp:kO}]},w1={version:N,moduleName:"@ag-grid-community/quick-filter-core",beans:[GO],dependantModules:[Pm]},qO={version:N,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:VO,getQuickFilter:HO,resetQuickFilter:BO},dependantModules:[w1]},KO={version:N,moduleName:"@ag-grid-community/quick-filter",dependantModules:[w1,qO]},YO={version:N,moduleName:"@ag-grid-community/filter",dependantModules:[$O,jO,KO,WO]},Tm=class extends oe{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},QO=class extends Tm{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=T,this.eButtonWrapper=T,this.eButtonShowMainFilter=T}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(i,n)=>this.addOrRemoveCssClass(i,n),addOrRemoveBodyCssClass:(i,n)=>this.eFloatingFilterBody.classList.toggle(i,n),setButtonWrapperDisplayed:i=>xe(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},ZO=class extends Tm{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=T,this.eHeaderCompWrapper=T,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((s,r)=>{r!=null&&r!=""?e.setAttribute(s,r):e.removeAttribute(s)})("col-id",this.column.getColId());let i={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),setAriaSort:s=>s?A_(e,s):T_(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);let n=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",n)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(t,i))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},XO=class extends Tm{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=T,this.eHeaderCompWrapper=T}postConstruct(){let e=this.getGui(),t=(n,s)=>s!=null?e.setAttribute(n,s):e.removeAttribute(n);e.setAttribute("col-id",this.ctrl.getColId());let i={addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setHeaderWrapperHidden:n=>{n?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:n=>{n!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${n}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",n!=null)},setResizableDisplayed:n=>xe(this.eResize,n),setWidth:n=>e.style.width=n,setAriaExpanded:n=>t("aria-expanded",n),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(i,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let i=this.getGui(),n=e.getGui();this.eHeaderCompWrapper.appendChild(n),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}addOrRemoveHeaderWrapperStyle(e,t){let{eHeaderCompWrapper:i}=this;t?i.style.setProperty(e,t):i.style.removeProperty(e)}};var JO=class extends oe{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){Dx(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,i)=>this.setHeaderCtrls(t,i),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let i=this.headerComps;if(this.headerComps={},e.forEach(n=>{let s=n.instanceId,r=i[s];delete i[s],r==null&&(r=this.createHeaderComp(n),this.getGui().appendChild(r.getGui())),this.headerComps[s]=r}),ti(i,(n,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),t){let n=Kn(this.headerComps);n.sort((r,o)=>{let a=r.getCtrl().getColumnGroupChild().getLeft(),l=o.getCtrl().getColumnGroupChild().getLeft();return a-l});let s=n.map(r=>r.getGui());Lx(this.getGui(),s)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new XO(e);break;case"filter":t=new QO(e);break;default:t=new ZO(e);break}return this.createBean(t),t.setParentComponent(this),t}};var eN=class extends E{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});let e=Pe(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;let s=this.ctrlsService.getHeaderRowContainerCtrl()?.getAllCtrls(),r=te(s||[]).getType()==="filter",o=this.getHeaderRowCount()-1,a=-1,l=i;for(;l;)a++,l=l.getParent();let c=a;return t&&r&&c===o-1&&c++,c===-1?null:{headerRowIndex:c,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:n}=t,s=t.column,r=this.getHeaderRowCount(),o=e===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(s,n):this.headerPositionUtils.getColumnVisibleChild(s,n),u=!1;return a<0&&(a=0,l=s,u=!0),a>=r?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){let n=this.focusService.getFocusedHeader(),s=e===2,r=this.gos.get("enableRtl"),o,a;if(this.currentHeaderRowWithoutSpan!==-1?n.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=n.headerRowIndex,s!==r?(a="Before",o=this.headerPositionUtils.findHeader(n,a)):(a="After",o=this.headerPositionUtils.findHeader(n,a)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(n,a,i)}focusNextHeaderRow(e,t,i){let n=e.headerRowIndex,s=null,r;if(t==="Before"?n>0&&(r=n-1,this.currentHeaderRowWithoutSpan-=1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=n+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!s)return!1;let{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(s.column,s?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(ke(e)){let n=e.getDisplayedLeafColumns();i=t==="Before"?te(n):n[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},tN=class extends E{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new Gs(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let n=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:n}),this.mockContextMenuForIPad(n),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,i=this.columnModel.getGroupRowsHeight().reduce((r,o)=>r+o,0),n=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=n,this.headerHeight===t)return;this.headerHeight=t;let s=`${t+1}px`;this.comp.setHeightAndMinHeight(s),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case x.LEFT:t=2;case x.RIGHT:{P(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case x.UP:t=0;case x.DOWN:{P(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e;!t&&this.eGui.contains(De(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;let{target:n}=e??t;(n===this.eGui||n===this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement())&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!Zn())return;let t=new $n(this.eGui),i=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},km=class extends E{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=Xe(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),n=this.visibleColsService.getDisplayedColumnsRightWidth(),s;e?s=t+i+n:(s=t,this.addSpacer&&(this.gos.get("enableRtl")?i:n)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.scrollVisibleService.getScrollbarWidth())),this.callback(s)}},iN=class extends E{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function y1(e){let{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:s,fakeEvent:r,pinned:o,gos:a,columnModel:l,columnMoveService:c,visibleColsService:u}=e,{allMovingColumns:d}=e;if(t){let S=[];d.forEach(b=>{let M=null,R=b.getParent();for(;R!=null&&R.getDisplayedLeafColumns().length===1;)M=R,R=R.getParent();M!=null?(!!M.getColGroupDef()?.marryChildren?M.getProvidedColumnGroup().getLeafColumns():M.getLeafColumns()).forEach(V=>{S.includes(V)||S.push(V)}):S.includes(b)||S.push(b)}),d=S}let h=d.slice();l.sortColsLikeCols(h);let g=oN({movingCols:h,draggingRight:i,xPosition:n,pinned:o,gos:a,columnModel:l,visibleColsService:u}),p=nN(h,l);if(g.length===0)return;let f=g[0],m=p!==null&&!s;if(t&&(m=p!==null),m&&!r&&(!i&&f>=p||i&&f<=p))return;let v=u.getAllCols(),C=[],w=null;for(let S=0;S<g.length;S++){let b=g[S],M=c.getProposedColumnOrder(h,b);if(!c.doesOrderPassRules(M))continue;let R=M.filter(B=>v.includes(B));if(w===null)w=R;else if(!Qn(R,w))break;let A=sN(M);C.push({move:b,fragCount:A})}if(C.length===0)return;C.sort((S,b)=>S.fragCount-b.fragCount);let y=C[0].move;if(!(y>l.getCols().length-d.length))return{columns:d,toIndex:y}}function _m(e){let{columns:t,toIndex:i}=y1(e)||{},{finished:n,columnMoveService:s}=e;return!t||i==null?null:(s.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i})}function nN(e,t){let i=t.getCols(),n=Gk(e.map(l=>i.indexOf(l))),s=n[0];return te(n)-s!==n.length-1?null:s}function sN(e){function t(n){let s=[],r=n.getOriginalParent();for(;r!=null;)s.push(r),r=r.getOriginalParent();return s}let i=0;for(let n=0;n<e.length-1;n++){let s=t(e[n]),r=t(e[n+1]);[s,r]=s.length>r.length?[s,r]:[r,s],s.forEach(o=>{r.indexOf(o)===-1&&i++})}return i}function rN(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function oN(e){let{movingCols:t,draggingRight:i,xPosition:n,pinned:s,gos:r,columnModel:o,visibleColsService:a}=e;if(r.get("suppressMovableColumns")||t.some(w=>w.getColDef().suppressMovable))return[];let c=rN(a,s),u=o.getCols(),d=c.filter(w=>Ls(t,w)),h=c.filter(w=>!Ls(t,w)),g=u.filter(w=>!Ls(t,w)),p=0,f=n;if(i){let w=0;d.forEach(y=>w+=y.getActualWidth()),f-=w}if(f>0){for(let w=0;w<h.length;w++){let y=h[w];if(f-=y.getActualWidth(),f<0)break;p++}i&&p++}let m;if(p>0){let w=h[p-1];m=g.indexOf(w)+1}else m=g.indexOf(h[0]),m===-1&&(m=0);let v=[m],C=(w,y)=>w-y;if(i){let w=m+1,y=u.length-1;for(;w<=y;)v.push(w),w++;v.sort(C)}else{let w=m,y=u.length-1,S=u[w];for(;w<=y&&c.indexOf(S)<0;)w++,v.push(w),S=u[w];w=m-1;let b=0;for(;w>=b;)v.push(w),w--;v.sort(C).reverse()}return v}function Xu(e){let{pinned:t,fromKeyboard:i,gos:n,ctrlsService:s,useHeaderRow:r,skipScrollPadding:o}=e,a=s.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),n.get("enableRtl")&&(r&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!o&&(l+=s.get("center").getCenterViewportScrollLeft()),l):0}function $r(e,t){for(let i of e)i.setMoving(t,"uiColumnMoved")}var VS=7,em=100,Iu=em/2,aN=5,lN=100,cN=class extends E{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!P(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let e=this.lastDraggingEvent?.dragItem.columns??[];for(let t of e){let i=t.getPinned();if(t.getColDef().lockPinned){if(i==this.pinned)return"move";continue}if(i===this.pinned||!this.pinned)return"move";if(!i&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let n=e.dragItem.visibleState,s=(t||[]).filter(r=>n[r.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){let s=this.gos.get("suppressMoveWhenColumnDragging");if(n&&!s){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!n&&X(e.hDirection))return;let{pinned:r,gos:o,ctrlsService:a}=this,l=Xu({x:e.x,pinned:r,gos:o,ctrlsService:a});t||this.checkCenterForScrolling(l),s?this.handleColumnDragWhileSuppressingMovement(e,t,i,l,n):this.handleColumnDragWhileAllowingMovement(e,t,i,l,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;let n=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColsVisible(n,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;let{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,n,s){let r=this.getAllMovingColumns(e,!0);if(s){let o=this.isAttemptingToPin(r);o&&this.attemptToPinColumns(r,void 0,!0);let{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(r,o)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:r,xPosition:l,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(r,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,s){let r=this.getAllMovingColumns(e),o=this.normaliseDirection(e.hDirection)===1,a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:r,isFromHeader:a,xPosition:n,fromLeft:o,fromEnter:t,fakeEvent:i}),c=_m(_(D({},l),{finished:s}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){let i=e.dragSource.getDragItem(),n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;let s=r=>r.getColDef().lockPinned?r.getPinned()==this.pinned:!0;return n?n.filter(s):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:s,fromEnter:r,fakeEvent:o}=e,{pinned:a,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:s,xPosition:n,pinned:a,fromEnter:r,fakeEvent:o,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}}findFirstAndLastMovingColumns(e){let t=e.length,i,n;for(let s=0;s<=t;s++){if(!i){let r=e[s];r.getLeft()!=null&&(i=r)}if(!n){let r=e[t-1-s];r.getLeft()!=null&&(n=r)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}highlightHoveredColumn(e,t){let{gos:i,columnModel:n}=this,s=i.get("enableRtl"),r=n.getCols().filter(u=>u.isVisible()&&u.getPinned()===this.pinned),o=null,a=null,l=null;for(let u of r){if(a=u.getActualWidth(),o=this.getNormalisedColumnLeft(u,0,s),o!=null){let d=o+a;if(o<=t&&d>=t){l=u;break}}o=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let u=r.length-1;u>=0;u--){let d=r[u],h=r[u].getParent();if(!h){l=d;break}let g=h?.getDisplayedLeafColumns();if(g.length){l=te(g);break}}if(!l)return;o=this.getNormalisedColumnLeft(l,0,s),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||o==null||a==null)return;let c;t-o<a/2!==s?c=0:c=1,l.setHighlighted(c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){let{gos:i,visibleColsService:n}=this,s=i.get("enableRtl"),{firstMovingCol:r,column:o,position:a}=this.getColumnMoveAndTargetInfo(e,t,s);if(!r||!o||a==null)return;let l=n.getAllCols(),c=l.indexOf(r),u=l.indexOf(o),d=a===0!==s,h=c<u||c===u&&!d,g=0;if(d?h&&(g-=1):h||(g+=1),u+g===c)return;let p=l[u+g];if(!p)return;let f=this.getNormalisedColumnLeft(p,20,s);return{fromLeft:h,xPosition:f}}getColumnMoveAndTargetInfo(e,t,i){let n=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:r}=this.findFirstAndLastMovingColumns(e);if(!s||!r||n.column||!t)return D({firstMovingCol:s},n);let a=this.getPinDirection()==="left";return{firstMovingCol:s,position:a?1:0,column:a!==i?s:r}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){let{gos:n,ctrlsService:s}=this,r=e.getLeft();if(r==null)return null;let o=e.getActualWidth();return Xu({x:i?r+o-t:r+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsService:s})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>VS;return t&&i||e.some(n=>n.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:s,fromLeft:r}=e,o=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:r,fromEnter:n,fakeEvent:s}),{columns:a,toIndex:l}=y1(o)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+Iu,this.needToMoveLeft=e>n-Iu):(this.needToMoveLeft=e<i+Iu,this.needToMoveRight=e>n-Iu),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),lN),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*aN,e>em&&(e=em);let t=null,i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=VS+1)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){let n=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(n,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){let n=(e||[]).filter(s=>!s.getColDef().lockPinned);return n.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(n,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),n.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},uN=class extends E{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new cN(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new iN(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},dN=class extends E{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,n,s){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=s}postConstruct(){let e=[],t,i,n=()=>{if(xe(this.eResize,t),!t)return;let o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(o),i){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let c=new $n(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},s=()=>{e.forEach(o=>o()),e.length=0},r=()=>{let o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||a!==i)&&(t=o,i=a,s(),n())};r(),this.addDestroyFunc(s),this.ctrl.setRefreshFunction("resize",r)}onResizing(e,t){let{column:i,lastResizeAmount:n,resizeStartWidth:s}=this,r=this.normaliseResizeAmount(t),o=s+r,a=[{key:i,newWidth:o}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=Ua(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(r-n)>u)return}this.lastResizeAmount=r,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,i=this.pinned!=="left",n=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}},hN=class extends E{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(De(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new bm),this.cbSelectAll.addCssClass("ag-header-select-all"),At(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),n=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${n} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return am(this.gos)?!0:(F(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return Fe(this.gos)||gn(this.gos)?!0:(F(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly(),n="uiSelectAll";i?n="uiSelectAllCurrentPage":t&&(n="uiSelectAllFiltered");let s={source:n,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(s):this.selectionService.deselectAllRowNodes(s)}isCheckboxSelection(){let e=this.gos.get("rowSelection"),t=typeof e=="object"&&Gu(e)&&Wa(this.column),i=this.column.getColDef().headerCheckboxSelection,n=!1;return t?n=!0:typeof i=="function"?n=i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):n=!!i,n&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},gN=class extends sd{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,n,s){this.comp=e,s=ja(this,this.beans.context,s),this.setGui(t,s),this.updateState(),this.setupWidth(s),this.setupMovingCss(s),this.setupMenuClass(s),this.setupSortableClass(s),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:o=>this.setRefreshFunction("measuring",o),compBean:s}),this.addColumnHoverListener(s),this.setupFilterClass(s),this.setupClassesFromColDef(),this.setupTooltip(s),this.addActiveHeaderMouseListeners(s),this.setupSelectAll(s),this.setupUserComp(s),this.refreshAria(),this.resizeFeature=s.createManagedBean(new dN(this.getPinned(),this.column,i,e,this)),s.createManagedBean(new Im([this.column],t)),s.createManagedBean(new Fm(this.column,t,this.beans)),s.createManagedBean(new Gs(t,{shouldStopEventPropagation:o=>this.shouldStopEventPropagation(o),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(s),s.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(s)),s.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(s)}),s.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let r=()=>this.checkDisplayName(s);s.addManagedEventListeners({columnValueChanged:r,columnRowGroupChanged:r,columnPivotChanged:r,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),s.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;let i=this.column.getActualWidth(),n=this.column.getMinWidth(),s=this.column.getMaxWidth(),r=Math.min(Math.max(i+e,n),s);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:r}],t,!0,"uiColumnResized")}moveHeader(e){let{eGui:t,beans:i,column:n,ctrlsService:s}=this,{gos:r,columnModel:o,columnMoveService:a,visibleColsService:l}=i,c=this.getPinned(),u=t.getBoundingClientRect().left,d=n.getActualWidth(),h=r.get("enableRtl"),p=Xu({x:e===0!==h?u-20:u+d+20,pinned:c,fromKeyboard:!0,gos:r,ctrlsService:s}),f=this.focusService.getFocusedHeader();_m({allMovingColumns:[n],isFromHeader:!0,fromLeft:e===1,xPosition:p,pinned:c,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:o,columnMoveService:a,visibleColsService:l,finished:!0}),s.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&f&&this.restoreFocus(f)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:_(D({},e),{column:this.column})})}setupUserComp(e){let t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){let t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:i=>{this.menuService.showColumnMenu({column:this.column,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:i=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:i,positionBy:"mouse"})},showFilter:i=>{this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"columnFilter",positionBy:"button"})},progressSort:i=>{this.beans.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,n)=>{this.beans.sortController.setSortForColumn(this.column,i,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(i,n)=>{this.setupTooltip(e,i,n)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new hN(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===x.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===x.ENTER&&this.onEnterKeyDown(e),e.key===x.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){let t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){let i=this.comp.getUserCompInstance();!i||!(i instanceof Qf)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui,r=this.column.getColDef();!i&&n&&!r.headerComponent&&(i=()=>{let l=s.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});let o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},a=e.createManagedBean(new Jr(o));this.setRefreshFunction("tooltip",()=>a.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),i=h1(t,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(s=>{n.has(s)?n.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),n.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let{column:t,beans:i,displayName:n,dragAndDropService:s,gos:r}=this,{columnModel:o}=i,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:n,onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),$r([t],!0)},onDragStopped:()=>$r([t],!1),onDragCancelled:()=>$r([t],!1),onGridEnter:c=>{if(a){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];o.setColsVisible(u,!0,"uiColumnMoved")}},onGridExit:c=>{if(a){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];o.setColsVisible(u,!1,"uiColumnMoved")}}};s.addDragSource(l,!0)}createDragItem(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){let t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let i=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:i,beans:n}=this,s=this.beans.columnModel.getGroupRowsHeight(),r=s.reduce((d,h)=>d+=h,0)===0;if(i.addOrRemoveCssClass("ag-header-parent-hidden",r),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:o,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",o>0);let{columnModel:l}=n,c=l.getColumnHeaderRowHeight();if(o===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${c}px`);return}i.addOrRemoveCssClass("ag-header-span-total",a);let u=0;for(let d=0;d<o;d++)u+=s[s.length-1-d];e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${c+u}px`)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(y_(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(De(this.beans.gos)))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){let t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return t instanceof Qf?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},pN=class extends E{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,n){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let i=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||i.push(s.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){let t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){let n=this.normaliseDragChange(t),s=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(s,i,e)}getInitialValues(e){let t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),n=this.getSizeRatiosOfColumns(t,i),s={columnsToResize:t,resizeStartWidth:i,resizeRatios:n},r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){let o=r.getDisplayedLeafColumns(),a=s.groupAfterColumns=o.filter(c=>c.isResizable()),l=s.groupAfterStartWidth=this.getInitialSizeOfColumns(a);s.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){let{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:s,groupAfterStartWidth:r,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;let n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i,n=!0){let{columnsToResize:s,resizeStartWidth:r,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:o,width:t}),a){let d=t-r;u.push({columns:a,ratios:c,width:l-d})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},fN=class extends E{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},mN=class extends sd{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let n=this.getGui();this.setDragSource(n)}},this.column=e}setComp(e,t,i,n,s){this.comp=e,s=ja(this,this.beans.context,s),this.setGui(t,s),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(s),this.setupExpandable(s),this.setupTooltip(s),this.setupAutoHeight({wrapperElement:n,compBean:s}),this.setupUserComp(s),this.addHeaderMouseListeners(s),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let r=this.getParentRowCtrl().getPinned(),o=this.column.getProvidedColumnGroup().getLeafColumns();s.createManagedBean(new Im(o,t)),s.createManagedBean(new Fm(this.column,t,this.beans)),s.createManagedBean(new fN(e,this.column)),this.resizeFeature=s.createManagedBean(new pN(e,i,r,this.column)),s.createManagedBean(new Gs(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(s,o),s.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(s),s.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=te(t)===e;if(!i&&!n)return;let s=e.getHighlighted(),r=!!this.getParentRowCtrl().findHeaderCellCtrl(l=>l.getColumnGroupChild().isMoving()),o=!1,a=!1;if(r){let l=this.beans.gos.get("enableRtl"),c=s===1,u=s===0;i&&(l?a=c:o=u),n&&(l?o=u:a=c)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",o),this.comp.addOrRemoveCssClass("ag-header-highlight-after",a)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;let i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){let{beans:t,eGui:i,column:n,ctrlsService:s}=this,{gos:r,columnModel:o,columnMoveService:a,visibleColsService:l}=t,c=r.get("enableRtl"),u=e===0,d=this.getPinned(),h=i.getBoundingClientRect(),g=h.left,p=h.width,f=Xu({x:u!==c?g-20:g+p+20,pinned:d,fromKeyboard:!0,gos:r,ctrlsService:s}),m=n.getGroupId(),v=this.focusService.getFocusedHeader();_m({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:f,pinned:d,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:o,columnMoveService:a,visibleColsService:l,finished:!0});let C=n.getDisplayedLeafColumns(),w=u?C[0]:te(C);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(w,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&v&&this.restoreFocus(m,n,v)}restoreFocus(e,t,i){let n=t.getLeafColumns();if(!n.length)return;let s=n[0].getParent();if(!s)return;let r=this.findGroupWidthId(s,e);r&&this.focusService.focusHeaderPosition({headerPosition:_(D({},i),{column:r})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){let t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,s)=>{this.setupTooltip(e,n,s)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){let t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.column.getColGroupDef(),s=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!i&&s&&!n?.headerGroupComponent&&(i=()=>{let a=r.querySelector(".ag-header-group-text");return a?a.scrollWidth>a.clientWidth:!0});let o={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(n&&n.headerTooltip),shouldDisplayTooltip:i};n&&(o.getColDef=()=>n),e.createManagedBean(new Jr(o))}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let e=this.column.getColGroupDef(),t=h1(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){let i=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());i.forEach(s=>{e.addManagedListeners(s,{movingChanged:n})}),n()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===x.ENTER){let i=this.column,n=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;let{beans:t,column:i,displayName:n,gos:s,dragAndDropService:r}=this,{columnModel:o}=t,a=i.getProvidedColumnGroup().getLeafColumns(),l=!s.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:n,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!s.get("suppressDragLeaveHidesColumns"),$r(a,!0)},onDragStopped:()=>$r(a,!1),onDragCancelled:()=>$r(a,!1),onGridEnter:u=>{if(l){let{columns:d=[],visibleState:h}=u??{},g=d.filter(p=>!p.getColDef().lockVisible&&(!h||h[p.getColId()]));o.setColsVisible(g,!0,"uiColumnMoved")}},onGridExit:u=>{if(l){let d=u?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(d,!1,"uiColumnMoved")}}};r.addDragSource(c,!0)}getDragItemForGroup(e){let t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(o=>i[o.getId()]=o.isVisible());let n=[];this.beans.visibleColsService.getAllCols().forEach(o=>{t.indexOf(o)>=0&&(n.push(o),St(t,o))}),t.forEach(o=>n.push(o));let s=[],r=e.getLeafColumns();for(let o of n)r.indexOf(o)!==-1&&s.push(o);return{columns:n,columnsInSplit:s,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},vN=0,Tf=class extends E{constructor(e,t,i){super(),this.instanceId=vN++,this.rowIndex=e,this.pinned=t,this.type=i;let n=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=Xe(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,i=!0){this.comp=e,t=ja(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return Lu(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=Xe(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:e,filterManager:t}=this.beans,i=[],n=e.getGroupRowsHeight(),s=e.getColumnHeaderRowHeight();i.push(...n),i.push(s),t?.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let r=0;for(let a=0;a<this.rowIndex;a++)r+=i[a];let o=i[this.rowIndex];return{topOffset:r,rowHeight:o}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let n of t)this.recycleAndCreateHeaderCtrls(n,e);let i=n=>{let{focusService:s,visibleColsService:r}=this.beans;return s.isHeaderWrapperFocused(n)?r.isVisible(n.getColumnGroupChild()):!1};if(e)for(let[n,s]of e)i(s)?this.headerCellCtrls.set(n,s):this.destroyBean(s);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let i=e.getUniqueId(),n;if(t&&(n=t.get(i),t.delete(i)),n&&n.getColumnGroupChild()!=e&&(this.destroyBean(n),n=void 0),n==null)switch(this.type){case"filter":{n=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":n=this.createBean(new mN(e,this.beans,this));break;default:n=this.createBean(new gN(e,this.beans,this));break}this.headerCellCtrls.set(i,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(n=>{let s=i.getHeadersToRender(n,t);e=e.concat(s)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;let t=this.getHeaderCellCtrls(),i;return typeof e=="function"?i=t.find(e):i=t.find(n=>n.getColumnGroupChild()==e),i}focusHeader(e,t){let i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},CN=class extends E{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});let n=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(n,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let t=new Qr,i=this.focusService.getFocusHeaderToUseAfterRefresh(),n=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let c=this.createBean(new Tf(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},s=()=>{let a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new Tf(a,this.pinned,"column")))},r=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=t.next();if(this.filtersRowCtrl){let c=this.filtersRowCtrl.getRowIndex()!==l;(!e||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Tf(l,this.pinned,"filter")))};n(),s(),r();let o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){if(Yn(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){let s=this.getAllCtrls()[e];return s?s.focusHeader(t,i):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){let t=new uN(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;let{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new km(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let i=()=>{let n=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(n==null)return;let s=n==0,r=this.hidden!==s,o=this.gos.get("enableRtl"),a=this.scrollVisibleService.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?n+a:n;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!s),r&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},wN='<div class="ag-pinned-left-header" role="rowgroup"></div>',yN='<div class="ag-pinned-right-header" role="rowgroup"></div>',bN=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,kf=class extends oe{constructor(e){super(),this.eCenterContainer=T,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{let n=this.getGui();n.style.width=i,n.style.maxWidth=i,n.style.minWidth=i}};this.createManagedBean(new CN(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",i=e?wN:t?yN:bN;this.setTemplate(i),this.eRowContainer=this.eCenterContainer!==T?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let i,n=s=>{let r=s.getGui();r.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(r),i&&_x(this.eRowContainer,r,i),i=r};e.forEach(s=>{let r=s.instanceId,o=t[r];delete t[r];let a=o||this.createBean(new JO(s));this.headerRowComps[r]=a,this.rowCompsList.push(a),n(a)}),Kn(t).forEach(s=>this.destroyRowComp(s))}},SN=class extends oe{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setHeightAndMinHeight:n=>{this.getGui().style.height=n,this.getGui().style.minHeight=n}};this.createManagedBean(new tN).setComp(e,this.getGui(),this.getFocusableElement());let i=n=>{this.createManagedBean(n),this.appendChild(n)};i(new kf("left")),i(new kf(null)),i(new kf("right"))}},xN={selector:"AG-HEADER-ROOT",component:SN};var Lm=class extends E{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){let e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(F(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},DN=class extends oe{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=T,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==x.TAB||e.defaultPrevented||un(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=this.focusService.focusGridView(te(this.visibleColsService.getAllCols()),!0,!1):i=this.focusService.focusNextGridCoreContainer(!1),i&&e.preventDefault()}updateLayoutClasses(e,t){let i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Lm(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){let s=De(this.gos);s&&!ix(this.gos)&&(this.elToFocusAfter=s)}e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!s)return;if(this.activeOverlay!==s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,n)){let o=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:a})=>{o.refresh?.(this.gos.addGridCommonParams(D({},a??{})))})}let r=this.focusService;i&&r.isGridFocused()&&r.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);let i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),lt(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},EN={selector:"AG-OVERLAY-WRAPPER",component:DN},b1=class extends oe{constructor(e,t){super(),this.direction=t,this.eViewport=T,this.eContainer=T,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Rx()||Zn())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Ix(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){let t=this.getViewportElement();Ik(()=>yi(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},MN=class extends b1{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=T,this.eRightSpacer=T}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new km(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.visibleColsService.getDisplayedColumnsRightWidth(),i=!this.enableRtl&&e,n=this.scrollVisibleService.getScrollbarWidth();i&&(t+=n),wi(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let s=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(s+=n),wi(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=n)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleService.getScrollbarWidth()||0,r=i?0:n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Aa(this.getGui(),r),Aa(this.eViewport,r),Aa(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Ku(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){yi(this.getViewportElement())||this.attemptSettingScrollPosition(e),Yu(this.getViewportElement(),e,this.enableRtl)}},RN={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:MN},S1=class extends E{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},FN=class extends b1{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new S1(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,n=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),wi(this.getGui(),n),wi(this.eViewport,n),wi(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),n=this.getScrollPosition(),s=i.scrollTop;n!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!yi(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},IN={selector:"AG-FAKE-VERTICAL-SCROLL",component:FN},tm=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(tm||{}),PN=class extends E{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=bt(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=bt(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(let e of Object.values(tm)){let t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?bt(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),n=t?bt(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...Object.values(tm),"Viewport"]){if(this.lastScrollSource[1]===t)continue;let i=this.getViewportForSource(t);Yu(i,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;let n=Ku(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent(_(D({},t),{type:"bodyScrollEnd"}))},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!Zn()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=vm(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&qu()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let n=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&qu()?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),Yu(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let i=this.rowModel.getRowCount(),n=-1;for(let s=0;s<i;s++){let r=this.rowModel.getRow(s);if(typeof e=="function"){if(r&&e(r)){n=s;break}}else if(e===r||e===r.data){n=s;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t){if(Xe(this.gos,"print"))return;let i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){F("Invalid row index for ensureIndexVisible: "+e);return}let s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{s||this.paginationService?.goToPageWithIndex(e);let r=this.ctrlsService.getGridBodyCtrl(),o=r.getStickyTopHeight(),a=r.getStickyBottomHeight(),l=this.rowModel.getRow(e),c;do{let u=l.rowTop,d=l.rowHeight,h=this.pageBoundsService.getPixelOffset(),g=l.rowTop-h,p=g+l.rowHeight,f=this.getVScrollPosition(),m=this.heightScaler.getDivStretchOffset(),v=f.top+m,C=f.bottom+m,w=C-v,y=this.heightScaler.getScrollPositionForPixel(g),S=this.heightScaler.getScrollPositionForPixel(p-w),b=Math.min((y+S)/2,g),M=v+o>g,R=C-a<p,A=null;t==="top"?A=y:t==="bottom"?A=S:t==="middle"?A=b:M?A=y-o:R&&(A=S+a),A!==null&&(this.setVerticalScrollPosition(A),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||d!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;let n=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{n!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(n),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,a=(o?i:n)||s,l=o?n:i;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(e);return c?d-r/2:a?o?h:u:o?u-r:h-r}return null}isColumnOutsideViewport(e){let{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:s}=this.getColumnBounds(e),r=this.enableRtl,o=r?t>s:i<s,a=r?i<n:t>n;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),n=e.getActualWidth(),s=e.getLeft(),r=t?-1:1,o=t?i-s:s,a=o+n*r,l=o+n/2*r;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,n=e+t;return{start:i,end:n,width:e}}},AN=class extends E{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=Ua(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50),n=this.gos.getCallback("processUnpinnedColumns");i.length&&(n&&(i=n({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){let t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),n=t+i;if(n<e)return[];let s=[...this.visibleColsService.getLeftCols()],r=[...this.visibleColsService.getRightCols()],o=0,a=0,l=0,c=[],u=n-l-e;for(;(a<s.length||o<r.length)&&u>0;){if(o<r.length){let d=r[o++];u-=d.getActualWidth(),c.push(d)}if(a<s.length&&u>0){let d=s[a++];u-=d.getActualWidth(),c.push(d)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=vm(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},TN=class extends E{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Vi(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),Vi(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},kN=class extends oe{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Sm]),this.eCheckbox=T}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=gm(e,t),[n,s]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],r=e(n,s);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:n=>Kr(n),click:n=>{Kr(n);let s=lm(this.gos)==="filteredDescendants",r=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(r,s)?this.onClicked(!0,s,n||{})===0&&this.onClicked(!1,s,n):r?this.onClicked(!1,s,n):this.onClicked(!0,s,n||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),om(this.gos)||typeof this.getIsVisible()=="function"){let n=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n}),this.addManagedListeners(this.rowNode,{dataChanged:n,cellChanged:n}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&Fe(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable,t=this.getIsVisible();if(e)if(typeof t=="function"){let s=this.overrides?.callbackParams;if(!this.column)e=t(_(D({},s),{node:this.rowNode,data:this.rowNode.data}));else{let r=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t(D(D({},s),r))}}else e=t??!1;let i=this.gos.get("rowSelection");if(i&&typeof i!="string"?!_k(i):this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;let e=this.gos.get("rowSelection");return e&&typeof e!="string"?qr(e):this.column?.getColDef()?.checkboxSelection}},_N=class extends oe{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(jt("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let i=()=>{try{let n=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",n),e.dataTransfer.setData("text/plain",n)}catch{}};if(t){let n=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(n)}else i()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},LN=class extends E{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,n=>this.cellComp.addOrRemoveCssClass(n,!0),n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.cellClassRules=t}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),n=e.cellStyle;t=n(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},ON=class extends E{constructor(e,t,i,n,s){super(),this.cellCtrl=e,this.beans=t,this.rowNode=n,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case x.ENTER:this.onEnterKeyDown(e);break;case x.F2:this.onF2KeyDown(e);break;case x.ESCAPE:this.onEscapeKeyDown(e);break;case x.TAB:this.onTabKeyDown(e);break;case x.BACKSPACE:case x.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case x.DOWN:case x.UP:case x.RIGHT:case x.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:i,beans:n,rowNode:s}=this,{gos:r,rangeService:o,eventService:a}=n;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),oO(e,r.get("enableCellEditingOnBackspace"))){if(o&&Vi(r))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){let l=i.getColumn(),c=this.beans.valueService.getDeleteValue(l,s);s.setDataValue(l,c,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=e.shiftKey?x.UP:x.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(x.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(x.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let n=e.key;n===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(n,e)&&e.preventDefault()}onSpaceKeyDown(e){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&Hu(t)){let i=this.rowNode.isSelected(),n=!i,s=lm(t)==="filteredDescendants",r=this.rowNode.setSelectedParams({newValue:n,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});i===void 0&&r===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},NN=class extends E{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!un(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:i,gos:n}=this.beans,s=e.ctrlKey||e.metaKey;i&&s&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);let r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);let o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(r)})},0),(n.get("singleClickEdit")||o.singleClickEdit)&&!n.get("suppressClickEdit")&&!(e.shiftKey&&i?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Zn()||ux("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let{column:t,beans:i,cellCtrl:n}=this,{eventService:s,frameworkOverrides:r,gos:o}=i,a=t.getColDef(),l=n.createEvent(e,"cellDoubleClicked");s.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&n.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:i,shiftKey:n}=e,s=e.target,{cellCtrl:r,beans:o}=this,{eventService:a,rangeService:l,focusService:c,gos:u}=o;if(this.isRightClickInExistingRange(e))return;let d=l&&l.getCellRanges().length!=0;if(!n||!d){let g=u.get("enableCellTextSelection")&&e.defaultPrevented,p=(Hi()||g)&&!r.isEditing()&&!mm(s);r.focusCell(p)}if(n&&d&&!c.isCellFocused(r.getCellPosition())){e.preventDefault();let h=c.getFocusedCell();if(h){let{column:g,rowIndex:p,rowPinned:f}=h,v=o.rowRenderer.getRowByPosition({rowIndex:p,rowPinned:f})?.getCellCtrl(g);v?.isEditing()&&v.stopEditing(),c.setFocusedCell({column:g,rowIndex:p,rowPinned:f,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(l){let h=this.cellCtrl.getCellPosition();if(n)l.extendLatestRangeToCell(h);else{let g=t||i;l.setRangeToCell(h,g)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),n=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return Ur(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){super.destroy()}},VN=class extends E{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();Qn(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column,n=this.column.getPinned();for(let s=0;i&&s<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||X(i)||n!==i.getPinned()));s++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=te(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;let i=_s(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var Ea="ag-cell-range-selected",HN="ag-cell-range-chart",BN="ag-cell-range-single-cell",GN="ag-cell-range-chart-category",zN="ag-cell-range-handle",WN="ag-cell-range-top",jN="ag-cell-range-right",UN="ag-cell-range-bottom",$N="ag-cell-range-left",qN=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Ea,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Ea}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Ea}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Ea}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Ea}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(HN,this.hasChartRange),Uu(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(BN,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,n=!t&&e.right,s=!t&&e.bottom,r=!t&&e.left;this.cellComp.addOrRemoveCssClass(WN,i),this.cellComp.addOrRemoveCssClass(jN,n),this.cellComp.addOrRemoveCssClass(UN,s),this.cellComp.addOrRemoveCssClass($N,r)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(i=>Ls([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,i=!1,n=!1,s=!1,r=this.cellCtrl.getCellPosition().column,o=this.beans.visibleColsService,a,l;e?(a=o.getColAfter(r),l=o.getColBefore(r)):(a=o.getColBefore(r),l=o.getColAfter(r));let c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(s=!0),l||(i=!0);for(let u=0;u<c.length&&!(t&&i&&n&&s);u++){let d=c[u],h=this.rangeService.getRangeStartRow(d),g=this.rangeService.getRangeEndRow(d);!t&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(t=!0),!n&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(n=!0),!s&&a&&d.columns.indexOf(a)<0&&(s=!0),!i&&l&&d.columns.indexOf(l)<0&&(i=!0)}return{top:t,right:i,bottom:n,left:s}}refreshHandle(){if(this.beans.context.isDestroyed())return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(zN,!!this.selectionHandle)}shouldHaveSelectionHandle(){let e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;let n=te(t),s=this.cellCtrl.getCellPosition(),r=DS(e)&&!this.cellCtrl.isSuppressFillHandle(),o=Vk(e),a=i===1&&!this.cellCtrl.isEditing()&&(r||o);if(this.hasChartRange){let c=t[0].type===1&&this.rangeService.isCellInSpecificRange(s,t[0]);this.cellComp.addOrRemoveCssClass(GN,c),a=n.type===0}return a&&n.endRow!=null&&this.rangeService.isContiguousRange(n)&&this.rangeService.isBottomRightCell(n,s)}addSelectionHandle(){let e=te(this.rangeService.getCellRanges()).type,i=DS(this.beans.gos)&&X(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},KN="ag-cell",YN="ag-cell-auto-height",QN="ag-cell-normal-height",ZN="ag-cell-focus",XN="ag-cell-first-right-pinned",JN="ag-cell-last-left-pinned",e6="ag-cell-not-inline-editing",t6="ag-column-hover",i6="ag-cell-wrap-text",n6=0,x1=class im extends E{constructor(t,i,n,s){super(),this.column=t,this.rowNode=i,this.beans=n,this.rowCtrl=s,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+n6++,this.colIdSanitised=Ni(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new VN(this,this.beans),this.cellCustomStyleFeature=new LN(this,this.beans),this.cellMouseListenerFeature=new NN(this,this.beans,this.column),this.cellKeyboardListenerFeature=new ON(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&Vi(this.beans.gos)&&(this.cellRangeFeature=new qN(this.beans,this))}removeFeatures(){let t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,i){let n=()=>{let o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&P(a))return Pa(a,o.tooltipField,this.column.isTooltipFieldContainsDots());let l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},s=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&s&&!this.isCellRenderer()&&(i=()=>{let o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:n,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new Jr(r,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,i,n,s,r,o){this.cellComp=t,this.eGui=i,this.printLayout=s,o??(o=this),this.addDomData(o),this.addFeatures(),o.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(i),this.cellCustomStyleFeature?.setComp(t),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(a=>a()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,i){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;let n=t.parentElement,s=qn(this.beans.gos,this.rowNode).height,r=l=>{if(this.editing||!this.isAlive()||!i.isAlive())return;let{paddingTop:c,paddingBottom:u,borderBottomWidth:d,borderTopWidth:h}=Bs(n),g=c+u+d+h,f=t.offsetHeight+g;if(l<5){let v=Pe(this.beans.gos),C=!v||!v.contains(t),w=f==0;if(C||w){window.setTimeout(()=>r(l+1),0);return}}let m=Math.max(f,s);this.rowNode.setRowAutoHeight(m,this.column)},o=()=>r(0);o();let a=this.beans.resizeObserverService.observeResize(t,o);i.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){let{beans:i,column:n,rowNode:s,cellRangeFeature:r,cellComp:o}=this,{userComponentFactory:a,animationFrameService:l}=i,c=this.getValueToDisplay(),u;if(s.stub&&s.groupData?.[this.column.getId()]==null){let h=this.createCellRendererParams();u=a.getLoadingCellRendererDetails(n.getColDef(),h)}else if(this.isCellRenderer()){let h=this.createCellRendererParams();u=a.getCellRendererDetails(n.getColDef(),h)}o.setRenderDetails(u,c,t),l.requestAnimationFrame(()=>r?.refreshHandle())}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){let{rowSelection:i}=this.beans.gridOptions;return t.checkboxSelection||Wa(this.column)&&i&&typeof i!="string"&&qr(i)}refreshShouldDestroy(){let t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),n=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),s=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return i||n||s||r}startEditing(t=null,i=!1,n=null){let{editService:s}=this.beans;return!this.isCellEditable()||this.editing||!s?!0:this.cellComp?s.startEditing(this,t,i,n):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,n)}),!0)}setEditing(t,i){this.editCompDetails=i,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];let{editService:i}=this.beans;return!this.editing||!i?!1:i.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,n,s,r)=>this.registerRowDragger(i,n,r),setTooltip:(i,n)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,n),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell(t){if(this.suppressRefreshCell||this.editing)return;let i=this.column.getColDef(),n=t!=null&&!!t.newData,s=t!=null&&!!t.suppressFlash||!!i.suppressCellFlash,r=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,o=t&&t.forceRefresh||r||n,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=o||l;if(a){if(c){this.showValue(n);let u=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!u&&(this.beans.gos.get("enableCellChangeFlash")||i.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){this.beans.editService?.stopEditingAndFocus(this,t,i)}flashCell(t){let i=t?.flashDuration??t?.flashDelay,n=t?.fadeDuration??t?.fadeDelay;this.animateCell("data-changed",i,n)}animateCell(t,i,n){if(!this.cellComp)return;let{gos:s}=this.beans;if(i||(i=s.get("cellFlashDuration")),i===0)return;P(n)||(n=s.get("cellFadeDuration"));let r=`ag-cell-${t}`,o=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${n}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")},n))},i)})}onFlashCells(t){if(!this.cellComp)return;let i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let i=this.value,n=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(t,i){let n=this.column.getColDef();return n.equals?n.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){let i=this.getGui();Vs(this.beans.gos,i,im.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Vs(this.beans.gos,i,im.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){this.cellKeyboardListenerFeature?.processCharacter(t)}onKeyDown(t){this.cellKeyboardListenerFeature?.onKeyDown(t)}onMouseEvent(t,i){this.cellMouseListenerFeature?.onMouseEvent(t,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:t,column:i,beans:n}=this;g1(t,i,n.visibleColsService)}refreshAriaColIndex(){let t=this.beans.visibleColsService.getAriaColIndex(this.column);Ex(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&ri(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(XN,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(JN,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;let i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(ZN,i),i&&t&&t.forceBrowserFocus){let s=this.cellComp.getFocusableElement();if(this.editing){let r=this.beans.focusService.findFocusableElements(s,null,!0);r.length&&(s=r[0])}s.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}let n=this.beans.gos.get("editType")==="fullRow";!i&&!n&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:cn(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(KN,!0),this.cellComp.addOrRemoveCssClass(e6,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(YN,t),this.cellComp.addOrRemoveCssClass(QN,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(t6,t)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(i6,t)}dispatchCellContextMenuEvent(t){let i=this.column.getColDef(),n=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(n),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(n)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new kN;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new _N(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}let s=this.createRowDragComp(t,i,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(t,i,n){let s=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),o=Fe(this.beans.gos);if(r){if(!o){F("managed row dragging is only allowed in the Client Side Row Model");return}if(s){F("managed row dragging is not possible when doing pagination");return}}let a=new Zf(()=>this.value,this.rowNode,this.column,t,i,n);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};x1.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Os=x1,s6=0,D1=class nm extends E{constructor(t,i,n,s,r){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=t,this.paginationPage=i.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+s6++,this.rowId=Ni(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Ni(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,i){t==="left"?this.leftGui=i:t==="right"?this.rightGui=i:t==="fullWidth"?this.fullWidthGui=i:this.centerGui=i}setComp(t,i,n,s){s=ja(this,this.beans.context,s);let r={rowComp:t,element:i,containerType:n,compBean:s};this.allRowGuis.push(r),this.updateGui(n,r),this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let i=t?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=i)}initialiseRowComp(t){let i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),Hu(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let n=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>n.addOrRemoveCssClass(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&ju(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),Vs(i,t.element,nm.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Vs(i,t.element,nm.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=Ni(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:i}=t;this.slideInAnimation[i]&&(SS(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(SS(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(Vi(this.gos)){F("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}let i=this.beans.localeService.getLocaleTextFunc(),n=new Zf(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),s=this.createBean(n,this.beans.context);this.rowDragComps.push(s),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(r=>r!==s),this.destroyBean(s,this.beans.context)})}setupFullWidth(t){let i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;let n=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(n)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(t){let i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),i=!!this.centerGui,n=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&i&&n}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),i=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&ed(this.gos,s);t?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,n=null){let s={list:[],map:{}},r=(o,a)=>{s.list.push(a),s.map[o]=a};return i.forEach(o=>{let a=o.getInstanceId(),l=t.map[a];l||(l=new Os(o,this.rowNode,this.beans,this)),r(a,l)}),t.list.forEach(o=>{let a=o.getColumn().getInstanceId();if(s.map[a]!=null)return;if(!this.isCellEligibleToBeRemoved(o,n)){r(a,o);return}o.destroy()}),s}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{let n=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(n,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let t=this.beans.columnViewportService,i=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let n=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);let s=i.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");let r=i.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;let o=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||a){let c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Xe(this.gos,"print")}listenOnDomOrder(t){let i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],i)}setAnimateFlags(t){if(this.isSticky()||!t)return;let i=P(this.rowNode.oldRowTop),n=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,i=t(this.fullWidthGui,null),n=t(this.centerGui,null),s=t(this.leftGui,"left"),r=t(this.rightGui,"right");return i&&n&&s&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(i=>{this.addRowDraggerToRow(i)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{let n=t===0,s=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-group",t),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),ju(n.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:cn(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(i=>i.element.contains(t))}onKeyboardNavigate(t){let i=this.findFullWidthRowGui(t.target);if(!((i?i.element:null)===t.target))return;let r=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:o?.column??this.getColumnForFullWidth(i)};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||un(t))return;let i=this.allRowGuis.find(l=>l.element.contains(t.target)),n=i?i.element:null,s=n===t.target,r=De(this.gos),o=!1;n&&r&&(o=n.contains(r)&&r.classList.contains("ag-cell"));let a=null;!s&&!o&&(a=this.beans.focusService.findNextFocusableElement(n,!1,t.shiftKey)),(this.isFullWidth()&&s||!a)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let t=this.allRowGuis.find(i=>yi(i.element))?.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){let i=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(n=>{ri(n.element,"tabindex",i)})}onFullWidthRowFocused(t){let i=this.rowNode,n=t?this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",n),n&&t?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,i){let n={list:[],map:{}};return t.list.forEach(s=>{s!==i&&(n.list.push(s),n.map[s.getColumn().getInstanceId()]=s)}),n}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){let n=this.createRowEvent(t,i);return n.source=this,n}onRowDblClick(t){un(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){let{visibleColsService:i}=this.beans;switch(t?.containerType){case"center":return i.getCenterCols()[0];case"left":return i.getLeftCols()[0];case"right":return i.getRightCols()[0];default:return i.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Ur(t.target,"ag-row-drag",3),!this.isFullWidth())return;let i=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let n=this.findFullWidthRowGui(t.target),s=n?.element,r=t.target,o=!0;s&&s.contains(r)&&mm(r)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:this.getColumnForFullWidth(n),rowPinned:i.rowPinned,forceBrowserFocus:o})}onRowClick(t){if(un(t)||this.lastMouseDownOnDragger)return;let{gos:n}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));let s=t.ctrlKey||t.metaKey,r=t.shiftKey,o=this.rowNode.isSelected(),a=Hs(n),l=ES(n),c=Hk(n);if(a&&this.rowNode.group||this.isRowSelectionBlocked()||!c&&!o||!l&&o)return;let u=Bk(n),d="rowClicked";if(o)u?this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):s?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):c&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!r,rangeSelect:r,event:t,source:d});else{let h=u?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:h,rangeSelect:r,event:t,source:d})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!Hu(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let i=()=>{let s=t.clientHeight;if(s!=null&&s>0){let r=()=>{this.rowNode.setRowHeight(s),(Fe(this.gos)||gn(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(r,0)}},n=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(n),i()}createFullWidthCompDetails(t,i){let{gos:n,rowNode:s}=this,r=n.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,u)=>this.addFullWidthRowDragging(a,l,c,u),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(r);default:return o.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;let n={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Jr(n,this.beans))}addFullWidthRowDragging(t,i,n="",s){if(!this.isFullWidth())return;let r=new Zf(()=>n,this.rowNode,void 0,t,i,s);this.createBean(r,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(r,this.beans.context)})}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let i="ag-row-level-"+t,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(i,!0),s.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,t)}setInlineEditingCss(){let t=this.editingRow||this.getAllCellCtrls().some(i=>i.isEditing());this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,i=null,n=null){return this.editingRow?!0:this.beans.rowEditService?.startEditing(this,t,i,n)??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){let i=this.getPinnedForContainer(t),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)}processStylesFromGridOptions(){let t=this.gos.get("rowStyle");if(t&&typeof t=="function"){F("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let i=this.gos.getCallback("getRowStyle"),n;if(i){let s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};n=i(s)}return n||t?Object.assign({},t,n):this.emptyStyle}onRowSelected(t){let i=!!this.rowNode.isSelected();this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-selected",i),Uu(n.element,i),n.element.contains(De(this.gos))&&(n===this.centerGui||n===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let t=this.rowNode.isSelected();if(t&&!ES(this.gos))return;let n=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(n,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;let{element:i,compBean:n}=t,{rowNode:s,beans:r,gos:o}=this;n.addManagedListeners(i,{mouseenter:()=>s.onMouseEnter(),mouseleave:()=>s.onMouseLeave()}),n.addManagedListeners(s,{mouseEnter:()=>{!r.dragService.isDragging()&&!o.get("suppressRowHoverHighlight")&&(i.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{i.classList.remove("ag-row-hover"),s.setHovered(!1)}})}roundRowTopToBounds(t){let i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(i.top,!0)-100,s=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(n,t),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let i=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=ex(this.gos)?qn(this.gos,this.rowNode).height:void 0,o=r?`${Math.min(n,r)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${i}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&jr(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){let s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let t=i=>(i.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let n=this.beans.pageBoundsService.getPixelOffset();return t+n*(i?1:-1)}setRowTop(t){if(!this.printLayout&&P(t)){let i=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let i=this.rowNode,n;if(this.isSticky())n=i.stickyRowTop;else{let s=this.slideInAnimation[t]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,r=this.applyPaginationOffset(s);n=i.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return n+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(n=>{n.getColumn()==t&&(i=n)}),i!=null||this.getAllCellCtrls().forEach(n=>{n.getColSpanningList().indexOf(t)>=0&&(i=n)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let i=this.rowNode.getRowIndexString();if(i===null)return;let n=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2===0,r=n+this.rowNode.rowIndex+1;this.forEachGui(t,o=>{o.rowComp.setRowIndex(i),o.rowComp.addOrRemoveCssClass("ag-row-even",s),o.rowComp.addOrRemoveCssClass("ag-row-odd",!s),Dx(o.element,r)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};D1.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Ns=D1,r6=class extends E{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",ux("touchstart")?"touchstart":"mousedown"].forEach(i=>{let n=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:n})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||un(t))return;let i=this.getRowForEvent(t),n=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,n):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Zn())return;let e=new $n(this.element),t=i=>{let n=this.getRowForEvent(i.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,n,s)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let i=Oa(this.gos,t,Ns.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,n){let s=i?i.getRowNode():null,r=n?n.getColumn():null,o=null;if(r){let c=e||t;n.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(r,s)}let a=this.ctrlsService.getGridBodyCtrl(),l=n?n.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:s,column:r,value:o,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:zf(this.gos,e,Os.DOM_DATA_KEY_CELL_CTRL),rowCtrl:zf(this.gos,e,Ns.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){let n=e.getRowNode(),s=e.getColumn(),r=e.isEditing();!Xf(this.gos,i,n,s,r)&&t==="keydown"&&(!r&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),i1(i)&&e.processCharacter(i)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){let n=e.getRowNode(),s=this.focusService.getFocusedCell(),r=s&&s.column;if(!Xf(this.gos,i,n,r,!1)){let a=i.key;if(t==="keydown")switch(a){case x.PAGE_HOME:case x.PAGE_END:case x.PAGE_UP:case x.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case x.UP:case x.DOWN:e.onKeyboardNavigate(i);break;case x.TAB:e.onTabKeyDown(i);break;default:}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let i=rO(e);if(i===x.A)return this.onCtrlAndA(e);if(i===x.C)return this.onCtrlAndC(e);if(i===x.D)return this.onCtrlAndD(e);if(i===x.V)return this.onCtrlAndV(e);if(i===x.X)return this.onCtrlAndX(e);if(i===x.Y)return this.onCtrlAndY();if(i===x.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,rowModel:i,rangeService:n}=this;if(n&&i.isRowsToRender()){let[s,r]=[t.isEmpty("top"),t.isEmpty("bottom")],o=s?null:"top",a,l;r?(a=null,l=i.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowCount()-1);let c=this.visibleColsService.getAllCols();if(Ut(c))return;n.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:te(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},o6=class extends E{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;xe(this.element,t),wi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},a6=class extends E{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;xe(this.element,t),wi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Pu=e=>e.getTopRowCtrls(),Au=e=>e.getStickyTopRowCtrls(),Tu=e=>e.getStickyBottomRowCtrls(),ku=e=>e.getBottomRowCtrls(),_u=e=>e.getCentreRowCtrls(),l6={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:_u},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:_u},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:_u},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:_u},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Pu},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Pu},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Pu},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Pu},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Au},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Au},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Au},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Au},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Tu},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Tu},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Tu},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Tu},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:ku},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:ku},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:ku},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:ku}};function Wr(e){return l6[e]}var c6=["topCenter","topLeft","topRight"],u6=["bottomCenter","bottomLeft","bottomRight"],d6=["center","left","right"],h6=["center","left","right","fullWidth"],g6=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],p6=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],f6=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],E1=["stickyTopCenter","stickyTopLeft","stickyTopRight"],M1=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],m6=[...E1,"stickyTopFullWidth",...M1,"stickyBottomFullWidth"],v6=[...c6,...u6,...d6,...E1,...M1],C6=class extends E{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Wr(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new AN(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new r6(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let n=()=>this.onPinnedWidthChanged();this.forContainers(p6,()=>{this.pinnedWidthFeature=this.createManagedBean(new o6(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:n})}),this.forContainers(f6,()=>{this.pinnedWidthFeature=this.createManagedBean(new a6(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:n})}),this.forContainers(h6,()=>this.createManagedBean(new S1(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(v6,()=>this.createManagedBean(new TN(this.eContainer))),this.forContainers(g6,()=>this.createManagedBean(new km(s=>this.comp.setContainerWidth(`${s}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(m6.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let i=this.gos.get("ensureDomOrder"),n=Xe(this.gos,"print");this.comp.setDomOrder(i||n)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Ua(this.eViewport)}getCenterViewportScrollLeft(){return Ku(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return kx(this.eViewport)}getViewportScrollLeft(){return Ku(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||G_(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Yu(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let i=Xe(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||i,r=t.filter(o=>{let a=o.isFullWidth();return this.options.fullWidth?!s&&a:s||!a});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}},R1="ag-force-vertical-scroll",w6="ag-selectable",y6="ag-column-moving",b6=class extends E{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,n,s,r,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=s,this.eStickyTop=r,this.eStickyBottom=o,this.eCenterColsViewport=i.querySelector(`.${Wr("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${Wr("fullWidth").container}`),this.eStickyTopFullWidthContainer=r.querySelector(`.${Wr("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=o.querySelector(`.${Wr("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new Lm(this.comp)),this.bodyScrollFeature=this.createManagedBean(new PN(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,s,r,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(n),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){let e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{let{target:n}=i,s=Ur(n,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:i=>{let{target:n,relatedTarget:s}=i,r=t.contains(s),o=Ur(s,"ag-root",t);Ur(n,"ag-root",t)||(!r||o)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(y6,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(w6,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let t=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=Ix()?16:0,n=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){let e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let e=i=>{let n=i.relatedTarget;if(Yf(n)===null){this.rowRenderer.stopEditing();return}let s=t.some(r=>r.contains(n))&&this.mouseEventService.isElementInThisGrid(n);if(!s){let r=this.popupService;s=r.getActivePopups().some(o=>o.contains(n))||r.isElementWithinCustomPopup(n)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?R1:null,i=Xe(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&z_(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes(),t=()=>{let i=e&&jr(this.gos)&&!this.rowContainerHeightService.isStretching(),n=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaX:t,deltaY:i,shiftKey:n}=e,s=n||Math.abs(t)>Math.abs(i),r=e.target;s?(this.eStickyTopFullWidthContainer.contains(r)||this.eStickyBottomFullWidthContainer.contains(r))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();let{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Zn())return;let t=new $n(this.eBodyViewport),i=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new VL(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),i=this.pinnedRowModel.getPinnedTopTotalHeight(),n=0;t>0&&(n+=t),i>0&&(n+=i),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){let e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,n=e+i;this.comp.setStickyBottomBottom(`${n}px`)}sizeColumnsToFit(e,t){let n=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,r=Ua(this.eGridBody)-n;if(r>0){this.columnSizeService.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):F("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},S6=class extends oe{constructor(e,t,i,n,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=n,this.cellCtrl=t;let r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(r);let o=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),At(o,t.getCellAriaRole()),o.setAttribute("col-id",t.colIdSanitised);let a={addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>Ox(o,l),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,u)=>this.setRenderDetails(l,c,u),setEditDetails:(l,c,u)=>this.setEditDetails(l,c,u),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(a,this.getGui(),this.eCellWrapper,i,s,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,n=i&&this.eCellWrapper==null;if(n){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}let s=!i&&this.eCellWrapper!=null;s&&(ni(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);let r=!e&&i,o=r&&this.eCellValue==null;if(o){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let a=!r&&this.eCellValue!=null;a&&(ni(this.eCellValue),this.eCellValue=void 0);let l=n||s||o||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){let n=this.editorVersion,s=e.newAgStackInstance();if(s==null)return;let{params:r}=e;s.then(a=>this.afterCellEditorCreated(n,a,r,t,i)),X(this.cellEditor)&&r.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();lt(t);let i=e!=null?Ni(e,!0):null;i!=null&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),ni(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),ni(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let i=!this.beans.gos.get("suppressAnimationFrame"),n=this.rendererVersion,{componentClass:s}=e,r=()=>{if(this.rendererVersion!==n||!this.isAlive())return;let a=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,n,s);a&&a.then(l)};i&&this.firstRender?this.beans.animationFrameService.createTask(r,this.rowNode.rowIndex,"createTasksP2"):r()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let s=this.getParentOfValue();lt(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,n,s){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){F(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let a=n||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(i,s):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss()}addInCellEditor(){let e=this.getGui();e.contains(De(this.beans.gos))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&F("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));let n=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&n.appendChild(this.cellEditorGui);let s=this.beans.popupService,r=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=t??i.getPopupPosition?.()??"over",a=this.beans.gos.get("enableRtl"),l={ePopup:n,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=s.positionPopupByComponent.bind(s,l),u=this.beans.localeService.getLocaleTextFunc(),d=s.addPopup({modal:r,eChild:n,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui();e.contains(De(this.beans.gos))&&Kf()&&e.focus({preventScroll:!0}),lt(this.getParentOfValue())}},x6=class extends oe{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),n.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(n);let s=this.getGui(),r=s.style;this.domOrder=this.rowCtrl.getDomOrder(),At(s,"row");let o={setDomOrder:a=>this.domOrder=a,setCellCtrls:a=>this.setCellCtrls(a),showFullWidth:a=>this.showFullWidth(a),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(a,l)=>this.addOrRemoveCssClass(a,l),setUserStyles:a=>Ox(s,a),setTop:a=>r.top=a,setTransform:a=>r.transform=a,setRowIndex:a=>s.setAttribute("row-index",a),setRowId:a=>s.setAttribute("row-id",a),setRowBusinessKey:a=>s.setAttribute("row-business-key",a),refreshFullWidth:a=>this.fullWidthCellRenderer?.refresh?.(a())??!1};e.setComp(o,this.getGui(),i,void 0),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){let t=n=>{if(this.isAlive()){let s=n.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(n)}else this.beans.context.destroyBean(n)},i=e.newAgStackInstance();i?.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(n=>{let s=n.instanceId;this.cellComps[s]==null?this.newCellComp(n):t[s]=null});let i=Kn(t).filter(n=>n!=null);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(i=>{let n=this.cellComps[i.instanceId];n&&t.push(n.getGui())}),Lx(this.getGui(),t)}newCellComp(e){let t=new S6(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=Kn(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&ae("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(t=>{if(!t)return;let i=t.getCtrl().instanceId;this.cellComps[i]===t&&(t.detach(),t.destroy(),this.cellComps[i]=null)})}};function D6(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer"></div>`,t}var E6=class extends oe{constructor(){super(),this.eViewport=T,this.eContainer=T,this.rowComps={},this.name=oe.elementGettingCreated.getAttribute("name"),this.options=Wr(this.name),this.setTemplate(D6(this.options))}wireBeans(e){this.beans=e}postConstruct(){let e={setHorizontalScroll:i=>this.eViewport.scrollLeft=i,setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i,setOffsetTop:i=>this.eContainer.style.transform=`translateY(${i})`};this.createManagedBean(new C6(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){let t=D({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let i=n=>{let s=n.instanceId,r=t[s];if(r)this.rowComps[s]=r,delete t[s],this.ensureDomOrder(r.getGui());else{if(!n.getRowNode().displayed)return;let o=new x6(n,this.beans,this.options.type);this.rowComps[s]=o,this.appendRow(o.getGui())}};e.forEach(i),Kn(t).forEach(n=>{this.eContainer.removeChild(n.getGui()),n.destroy()}),At(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?B_(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(_x(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},M6={selector:"AG-ROW-CONTAINER",component:E6};function Ma(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var R6=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${Ma(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${Ma(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${Ma(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${Ma(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${Ma(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,F6=class extends oe{constructor(){super(R6,[EN,RN,IN,xN,M6]),this.eBodyViewport=T,this.eStickyTop=T,this.eStickyBottom=T,this.eTop=T,this.eBottom=T,this.eBody=T}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){let e=(i,n)=>{let s=`${i}px`;n.style.minHeight=s,n.style.height=s},t={setRowAnimationCssOnBodyViewport:(i,n)=>this.setRowAnimationCssOnBodyViewport(i,n),setColumnCount:i=>I_(this.getGui(),i),setRowCount:i=>F_(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setStickyBottomHeight:i=>{this.eStickyBottom.style.height=i,this.eStickyBottom.classList.toggle("ag-hidden",i==="0px")},setStickyBottomBottom:i=>this.eStickyBottom.style.bottom=i,setStickyBottomWidth:i=>this.eStickyBottom.style.width=i,setColumnMovingCss:(i,n)=>this.addOrRemoveCssClass(i,n),updateLayoutClasses:(i,n)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(r=>{r.toggle("ag-layout-auto-height",n.autoHeight),r.toggle("ag-layout-normal",n.normal),r.toggle("ag-layout-print",n.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",n.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",n.normal),this.addOrRemoveCssClass("ag-layout-print",n.print)},setAlwaysVerticalScrollClass:(i,n)=>this.eBodyViewport.classList.toggle(R1,n),registerBodyViewportResizeListener:i=>{let n=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>n())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,n)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(i,n))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new b6),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&Vi(this.gos)||am(this.gos))&&R_(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},I6={selector:"AG-GRID-BODY",component:F6},P6=class extends E{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:N_();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},HS="__ag_grid_instance",F1=class I1 extends E{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=I1.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[HS]=this.gridInstanceId}getRenderedCellForEvent(t){return zf(this.gos,t.target,Os.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){let n=i[HS];if(P(n))return n===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){let i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){let i=Xe(this.gos,"normal"),n=t,s,r;if(n.clientX!=null||n.clientY!=null?(s=n.clientX,r=n.clientY):(s=n.x,r=n.y),i){let o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();s+=l.left,r+=a.top}return{x:s,y:r}}};F1.gridInstanceSequence=new Qr;var A6=F1,T6=class extends E{constructor(){super(),this.beanName="navigationService",this.onPageDown=xS(this.onPageDown,100),this.onPageUp=xS(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let i=e.key,n=e.altKey,s=e.ctrlKey||e.metaKey,r=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e),a=!1;switch(i){case x.PAGE_HOME:case x.PAGE_END:!s&&!n&&(this.onHomeOrEndKey(i),a=!0);break;case x.LEFT:case x.RIGHT:case x.UP:case x.DOWN:if(!o)return!1;s&&!n&&!r&&(this.onCtrlUpDownLeftRight(i,o),a=!0);break;case x.PAGE_DOWN:case x.PAGE_UP:!s&&!n&&(a=this.handlePageUpDown(i,o,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===x.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:s,focusColumn:r}=e;P(n)&&!n.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(n),P(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:r,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:null,column:r})}onPageDown(e){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),r=i.top+n,o=this.rowModel.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){let i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.pageBoundsService.getPixelOffset(),s=i.top,r=this.rowModel.getRowIndexAtPixel(s+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,i=!1){let n=this.getViewportHeight(),s=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow(),o=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=i?a?.rowHeight-n-o:n-o,c=a?.rowTop+l,u=this.rowModel.getRowIndexAtPixel(c+o);if(u===e.rowIndex){let h=i?-1:1;t=u=e.rowIndex+h}let d;i?(d="bottom",u<s&&(u=s),t<s&&(t=s)):(d="top",u>r&&(u=r),t>r&&(t=r)),this.isRowTallerThanView(u)&&(t=u,d="top"),this.navigateTo({scrollIndex:t,scrollType:d,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let i=t?-1:1,n=this.getViewportHeight(),s=this.pageBoundsService.getLastRow(),r=0,o=e.rowIndex;for(;o>=0&&o<=s;){let a=this.rowModel.getRow(o);if(a){let l=a.rowHeight??0;if(r+l>n)break;r+=l}o+=i}return Math.max(0,Math.min(o,s))}getViewportHeight(){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth(),i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){let t=this.rowModel.getRow(e);if(!t)return!1;let i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:n}=i,s=i.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onHomeOrEndKey(e){let t=e===x.PAGE_HOME,i=this.visibleColsService.getAllCols(),n=t?i[0]:te(i),s=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onTabKeyDown(e,t){let i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t);if(n!==!1){n?t.preventDefault():n===null&&this.focusService.allowFocusForNextGridCoreContainer(i);return}if(i){let{rowIndex:s,rowPinned:r}=e.getRowPosition();(r?s===0:s===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Os&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault()}tabToNextCell(e,t){let i=this.focusService.getFocusedCell();if(!i)return!1;let n=this.getCellByPosition(i);return!n&&(n=this.rowRenderer.getRowByPosition(i),!n||!n.isFullWidth())?!1:!!this.tabToNextCellCommon(n,e,t)}tabToNextCellCommon(e,t,i){let n=e.isEditing();if(!n&&e instanceof Os){let o=e.getRowCtrl();o&&(n=o.isEditing())}let s;return n?this.gos.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,t,i):s=this.moveToNextEditingCell(e,t,i):s=this.moveToNextCellNotEditing(e,t),s===null?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){let n=e.getCellPosition();e.getGui().focus(),e.stopEditing();let s=this.findNextCellToFocusOn(n,t,!0);return s===!1?null:s==null?!1:(s.startEditing(null,!0,i),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){let n=e.getCellPosition(),s=this.findNextCellToFocusOn(n,t,!0);if(s===!1)return null;if(s==null)return!1;let r=s.getCellPosition(),o=this.isCellEditable(n),a=this.isCellEditable(r),l=r&&n.rowIndex===r.rowIndex&&n.rowPinned===r.rowPinned;return o&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let i=this.visibleColsService.getAllCols(),n;e instanceof Ns?n=_(D({},e.getRowPosition()),{column:t?i[0]:te(i)}):n=e.getCellPosition();let s=this.findNextCellToFocusOn(n,t,!1);if(s===!1)return null;if(s instanceof Os)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return P(s)}findNextCellToFocusOn(e,t,i){let n=e;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextTabbedCell(n,t);let s=this.gos.getCallback("tabToNextCell");if(P(s)){let l=s({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(l===!0||l===null)l===null&&F("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),n=e;else{if(l===!1)return!1;n={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}}}if(!n)return null;if(n.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+n.rowIndex,column:n.column},fromCell:!0}),null}let r=this.gos.get("editType")==="fullRow";if(i&&!r&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);let o=this.getCellByPosition(n);if(!o){let a=this.rowRenderer.getRowByPosition(n);if(!a||!a.isFullWidth()||i)continue;return a}if(!o.isSuppressNavigable())return this.rangeService?.setRangeToCell(n),o}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,n){let s=i,r=!1;for(;s&&(s===i||!this.isValidNavigateCell(s));)this.gos.get("enableRtl")?t===x.LEFT&&(s=this.getLastCellOfColSpan(s)):t===x.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(t,s),r=X(s);if(r&&e&&e.key===x.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),n){let a=this.gos.getCallback("navigateToNextCell");if(P(a)){let c=a({key:t,previousCellPosition:i,nextCellPosition:s||null,event:e});P(c)?s={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:s=null}}if(!s)return;if(s.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+s.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}let o=this.getNormalisedPosition(s);o?this.focusPosition(o):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let i=this.visibleColsService.getAllCols(),n=this.rowRenderer.getRowByPosition(e);if(!n||!n.isFullWidth())return!1;let s=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?te(i):i[0])};this.focusPosition(r);let o=t??(s!=null&&this.rowPositionUtils.before(r,s));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:o}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:te(i),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=Ju(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&X(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},k6=class extends E{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},_6=class extends E{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,n=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let n=-1,s="left",r=this.menuService.isLegacyMenuEnabled();!r&&this.gos.get("enableRtl")&&(n=1,s="right");let o=r?void 0:4*n,a=r?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:l,nudgeX:o,nudgeY:a,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},i,t,r)}showPopup(e,t,i,n,s){let r=e?this.createBean(new jL(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!r?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let o=document.createElement("div");At(o,"presentation"),o.classList.add("ag-menu"),s||o.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(o,{keydown:p=>this.trapFocusWithin(p,o)}),o.appendChild(r?.getGui());let a,l=()=>r?.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?n??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=p=>{e.setMenuVisible(!1,"contextMenu");let f=p instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),f&&n&&yi(n)){let m=this.focusService.findTabbableParent(n);m&&m.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},d=this.localeService.getLocaleTextFunc(),h=s&&i!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),g=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:h});g&&(this.hidePopup=a=g.hideFunc),r.afterInit().then(()=>{t(o),r.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==x.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},L6=class extends E{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){let n=tx(this.gos).ResizeObserver,s=n?new n(t):null;return s?.observe(e),()=>s?.disconnect()}},O6=class extends E{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){let t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let i=this.paginationService?.getCurrentPage()??0;i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&F(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);let n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((i,n)=>i.index!==n.index?t*(n.index-i.index):n.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,i=t.list,n=this.createTasksP2,s=n.list,r=this.destroyTasks,o=new Date().getTime(),a=new Date().getTime()-o,l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let d;if(i.length)this.sortTaskList(t),d=i.pop().task;else if(s.length)this.sortTaskList(n),d=s.pop().task;else if(r.length)d=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-o}i.length||s.length||r.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=tx(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};var N6=class extends E{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=Fe(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;let t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,n){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,n),e.setExpanded(t,void 0,n))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},V6=class extends E{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){let i=this.getRowCtrl(e),n=this.getCellGui(i,t);if(!n)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};let s=n.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}showContextMenu(e){let t=e.rowNode,i=e.column,{anchorToElement:n,value:s}=e;t&&i&&s==null&&(s=this.valueService.getValueForDisplay(i,t)),n==null&&(n=this.getContextMenuAnchorElement(t,i)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,s,n)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){let{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&Yn(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(Zn()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){let t=e.getColDef(),i=t.floatingFilterComponentParams?.suppressFilterButton;return i!=null&&F("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,n){let{positionBy:s}=t,r=t.column;if(s==="button"){let{buttonElement:o}=t;e.showMenuAfterButtonClick(r,o,i,n)}else if(s==="mouse"){let{mouseEvent:o}=t;e.showMenuAfterMouseEvent(r,o,i,n)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned())?.getHeaderCtrlForColumn(r);o&&e.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(n),i,!0)}))}getRowCtrl(e){let{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){let i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),n=this.getRowCtrl(e);if(!n)return i;let s=this.getCellGui(n,t);return s||(n.isFullWidth()?n.getFullWidthElement():i)}},H6=class extends Ts{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},B6={selector:"AG-INPUT-TEXT-AREA",component:H6},G6=class extends eo{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[B6]),this.eTextArea=T}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),P(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===x.LEFT||t===x.UP||t===x.RIGHT||t===x.DOWN||e.shiftKey&&t===x.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!P(e)&&!P(this.params.value)?this.params.value:this.params.parseValue(e)}},z6=class extends eo{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Vs(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,i=n=>{Xf(this.gos,n,t.node,t.column,!0)||t.onKeyDown(n)};this.addManagedElementListeners(e,{keydown:i})}},W6=class extends eo{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[ZL]),this.eSelect=T,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueService:i,gos:n}=this,{values:s,value:r,eventKey:o}=e;if(X(s)){F("no values found for select cellEditor");return}this.startedByEnter=o!=null?o===x.ENTER:!1;let a=!1;s.forEach(d=>{let h={value:d},g=i.formatValue(e.column,null,d),p=g!=null;h.text=p?g:d,t.addOption(h),a=a||r===d}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),n.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},od=class extends eo{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=T}init(e){this.params=e;let{cellStartedEdit:t,eventKey:i,suppressPreventDefault:n}=e,s=this.eInput;this.cellEditorInput.init(s,e);let r,o=!0;t?(this.focusAfterAttached=!0,i===x.BACKSPACE||i===x.DELETE?r="":i&&i.length===1?n?o=!1:r=i:(r=this.cellEditorInput.getStartValue(),i!==x.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=this.cellEditorInput.getStartValue()),o&&r!=null&&s.setStartValue(r),this.addManagedElementListeners(s.getGui(),{keydown:a=>{let{key:l}=a;(l===x.PAGE_UP||l===x.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Hi()||t.getFocusableElement().focus();let i=t.getInputElement();this.highlightAllOnFocus?i.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},j6=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[nd]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!P(e)&&!P(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=P(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},P1=class extends od{constructor(){super(new j6)}},U6=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[aO]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);let i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===x.UP||e.key===x.DOWN)&&e.preventDefault()}getValue(){let e=this.eInput.getValue();if(!P(e)&&!P(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){Hi()&&this.eInput.getInputElement().focus({preventScroll:!0})}},$6=class extends od{constructor(){super(new U6)}},q6=class extends zs{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=Hi();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){De(this.gos)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?oi(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,ri(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?oi(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,ri(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,ri(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Pt(this.getValue())??void 0}setDate(e,t){this.setValue(oi(e??null,!1),t)}},A1={selector:"AG-INPUT-DATE-FIELD",component:q6},K6=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[A1]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!P(e)&&!P(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return oi(e,!1)}},Y6=class extends od{constructor(){super(new K6)}},Q6=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[A1]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!P(e)&&!P(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return oi(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Pt(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):oi(e??null,!1)??void 0}},Z6=class extends od{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new Q6(()=>this.dataTypeService))}},X6=class extends eo{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Sm]),this.eCheckbox=T}init(e){this.params=e;let t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:n=>this.setAriaLabel(n.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),i=gm(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}},Ia=class{constructor(e){this.cellValueChanges=e}},_f=class extends Ia{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},J6=10,BS=class{constructor(e){this.actionStack=[],this.maxStackSize=e||J6,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},e4=class extends E{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),n=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;let{rowPinned:r,rowIndex:o,column:a,oldValue:l,value:c}=e,u={rowPinned:r,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new BS(e),this.redoStack=new BS(e),this.addListeners();let t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});let t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});let t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,n,s){if(!e)return!1;let r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,o=>o[n],s),r instanceof _f?this.processRange(this.rangeService,r.ranges||[r[i]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,i){e.cellValueChanges.forEach(n=>{let{rowIndex:s,rowPinned:r,columnId:o}=n,a={rowIndex:s,rowPinned:r},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,t(n),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((n,s)=>{if(!n)return;let r=n.startRow,o=n.endRow;s===t.length-1&&(i={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(i));let a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:n.startColumn,columns:n.columns};e.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:i,rowPinned:n}=t,s={rowIndex:i,rowPinned:n},r=this.rowPositionUtils.getRowNode(s),o={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:i,columnId:n,rowPinned:s}=e,r=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getCol(n);if(!o)return;r.ensureIndexVisible(i),r.ensureColumnVisible(o);let a={rowIndex:i,column:o,rowPinned:s};this.focusService.setFocusedCell(_(D({},a),{forceBrowserFocus:!0})),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new Ia(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let i=new Ia(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new Ia(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new _f(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&Vi(this.gos)?e=new _f(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Ia(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function t4(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function i4(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function T1(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function k1(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function n4(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function s4(e){e.undoRedoService?.undo("api")}function r4(e){e.undoRedoService?.redo("api")}function o4(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(Ta)}function a4(e){return e.rowRenderer.getEditingCells()}function l4(e,t=!1){e.rowRenderer.stopEditing(t)}function c4(e,t){let i=e.columnModel.getCol(t.colKey);if(!i){F(`no column found for ${t.colKey}`);return}let n={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&k1(e,t.rowIndex),T1(e,t.colKey);let r=e.navigationService.getCellByPosition(n);if(!r)return;let{focusService:o,gos:a}=e,l=()=>{let u=De(a),d=r.getGui();return u!==d&&!!d?.contains(u)},c=a.get("stopEditingWhenCellsLoseFocus")&&l();(c||!o.isCellFocused(n))&&o.setFocusedCell(_(D({},n),{forceBrowserFocus:c,preventScrollOnBrowserFocus:!0})),r.startRowOrCellEdit(t.key)}function u4(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function d4(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var h4=class extends E{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,n=null){let s=this.createCellEditorParams(e,t,i),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s),a=o?.popupFromSelector!=null?o.popupFromSelector:!!r.cellEditorPopup,l=o?.popupPositionFromSelector!=null?o.popupPositionFromSelector:r.cellEditorPopupPosition;return e.setEditing(!0,o),e.getComp().setEditDetails(o,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(n,"cellEditingStarted")),!o?.params?.suppressPreventDefault}stopEditing(e,t){let i=e.getComp(),{newValue:n,newValueExists:s}=this.takeValueFromCellEditor(t,i),r=e.getRowNode(),o=e.getColumn(),a=this.valueService.getValueForDisplay(o,r),l=!1;return s&&(l=this.saveNewValue(e,a,n,r,o)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent(_(D({},e.createEvent(null,"cellEditingStopped")),{oldValue:a,newValue:n,valueChanged:l})),l}handleColDefChanged(e){let t=e.getCellEditor();if(t?.refresh){let{eventKey:i,cellStartedEdit:n}=e.getEditCompDetails().params,s=this.createCellEditorParams(e,i,n),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s);t.refresh(o.params)}}setFocusOutOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){let t=e.getComp(),i=t.getCellEditor();i?.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>t.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new z6(e)}takeValueFromCellEditor(e,t){let i={newValueExists:!1};if(e)return i;let n=t.getCellEditor();return!n||n.isCancelAfterEnd&&n.isCancelAfterEnd()?i:{newValue:n.getValue(),newValueExists:!0}}saveNewValue(e,t,i,n,s){if(i===t)return!1;e.setSuppressRefreshCell(!0);let r=n.setDataValue(s,i,"edit");return e.setSuppressRefreshCell(!1),r}createCellEditorParams(e,t,i){let n=e.getColumn(),s=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(n,s),eventKey:t,column:n,colDef:n.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:s,data:s.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:r=>this.valueService.parseValue(n,s,r,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let n=e?x.UP:x.DOWN;this.navigationService.navigateToNextCell(null,n,t,!1)}}},g4=class extends E{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,n=null){let s=!0;return e.getAllCellCtrls().reduce((o,a)=>{let l=a===i;return l?s=a.startEditing(t,l,n):a.startEditing(null,l,n),o?!0:a.isEditing()},!1)&&this.setEditing(e,!0),s}stopEditing(e,t=!1){let i=e.getAllCellCtrls(),n=e.isEditing();e.setStoppingRowEdit(!0);let s=!1;for(let r of i){let o=r.stopEditing(t);n&&!t&&!s&&o&&(s=!0)}s&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),n&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,n=>n.rowComp.addOrRemoveCssClass("ag-row-editing",t));let i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},Ws={version:N,moduleName:"@ag-grid-community/edit-core",beans:[h4]},p4={version:N,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:s4,redoCellEditing:r4,getCellEditorInstances:o4,getEditingCells:a4,stopEditing:l4,startEditingCell:c4,getCurrentUndoSize:u4,getCurrentRedoSize:d4},dependantModules:[Ws]},f4={version:N,moduleName:"@ag-grid-community/undo-redo-edit",beans:[e4],dependantModules:[Ws]},m4={version:N,moduleName:"@ag-grid-community/full-row-edit",beans:[g4],dependantModules:[Ws]},_1={version:N,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:P1}],dependantModules:[Ws]},v4={version:N,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:P1},{name:"agNumberCellEditor",classImp:$6,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:Y6},{name:"agDateStringCellEditor",classImp:Z6},{name:"agCheckboxCellEditor",classImp:X6}],dependantModules:[_1]},C4={version:N,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:W6}],dependantModules:[Ws]},w4={version:N,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:G6}],dependantModules:[Ws]},y4={version:N,moduleName:"@ag-grid-community/all-editors",dependantModules:[_1,v4,C4,w4]},b4={version:N,moduleName:"@ag-grid-community/editing",dependantModules:[Ws,f4,m4,y4,p4]},S4=class extends E{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let i=this.getHeaderCellForColumn(e);if(!i)return-1;let n=this.rowRenderer.getAllCellsForColumn(e);return t||n.push(i),this.addElementsToContainerAndGetWidth(n)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let i=this.centerRowContainerCtrl.getContainerElement();e.forEach(r=>this.cloneItemIntoDummy(r,t)),i.appendChild(t);let n=t.offsetWidth;i.removeChild(t);let s=this.getAutoSizePadding();return n+s}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{let n=i.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}),t}cloneItemIntoDummy(e,t){let i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";let n=document.createElement("div"),s=n.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(s.add("ag-header","ag-header-row"),n.style.position="static"):s.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){let c=o.classList[l];c!="ag-row-position-absolute"&&s.add(c)}break}o=o.parentElement}n.appendChild(i),t.appendChild(n)}},x4=class extends E{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=Fe(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.childStore?.getStoreBounds();return e.footer&&(i=e.sibling.childStore?.getStoreBounds()),(i?.heightPx??0)+(i?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.footer?e.sibling:e;for(;n.isExpandable()&&n.expanded;)if(n.master)n=n.detailNode;else if(n.childrenAfterSort){if(n.childrenAfterSort.length===0)break;n=te(n.childrenAfterSort)}return n.rowTop+n.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){let t=e==="top",i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);let n=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,s=new Set,r=c=>{if(s.add(c),t){let u=this.getLastPixelOfGroup(c),d=n+i+c.rowHeight;u<d?c.stickyRowTop=i+(u-d):c.stickyRowTop=i}else{let u=this.getFirstPixelOfGroup(c),d=n-(i+c.rowHeight);u>d?c.stickyRowTop=i-(u-d):c.stickyRowTop=i}i=0,s.forEach(u=>{let d=u.stickyRowTop+u.rowHeight;i<d&&(i=d)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>{if(!c.displayed)return!1;if(c.footer){if(o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1)return!1;let u=c.sibling.rowIndex?c.sibling.rowIndex+1===c.rowIndex:!1;return e==="bottom"&&u?!1:!s.has(c)}return c.isExpandable()?a===!0||e==="bottom"?!1:!s.has(c)&&c.expanded:!1};for(let c=0;c<100;c++){let u=n+i;t||(u=n-i);let d=this.rowModel.getRowIndexAtPixel(u),h=this.rowModel.getRow(d);if(h==null)break;let p=this.getStickyAncestors(h).find(m=>(t?m.rowIndex<d:m.rowIndex>d)&&l(m));if(p){r(p);continue}if((t?h.rowTop<u:h.rowTop+h.rowHeight>u)&&l(h)){r(h);continue}break}return t||s.forEach(c=>{c.stickyRowTop=i-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,s,i)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){let e=Ju(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){let t=[],i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){let n=this.stickyTopRowCtrls[i].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){let n=this.stickyBottomRowCtrls[i].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){let n=e==="top",s=n?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,r={},o=[];for(let h=0;h<s.length;h++){let g=s[h].getRowNode();if(!t.has(g)){r[g.id]=s[h],g.sticky=!1;continue}o.push(s[h])}let a=new Set;for(let h=0;h<o.length;h++)a.add(o[h].getRowNode());let l=[];t.forEach(h=>{a.has(h)||(h.sticky=!0,l.push(this.createRowCon(h,!1,!1)))});let c=!!l.length||o.length!==s.length;n?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),c=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),c=!0),this.destroyRowCtrls(r,!1);let u=[...o,...l];u.sort((h,g)=>g.getRowNode().rowIndex-h.getRowNode().rowIndex),n||u.reverse(),u.forEach(h=>h.setRowTop(h.getRowNode().stickyRowTop));let d=0;return n?(t.forEach(h=>{h.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=h.rowHeight)}),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(t.forEach(h=>{h.rowIndex>this.pageBoundsService.getLastRow()&&(d+=h.rowHeight)}),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),c?(n?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let e=!1,t=i=>{let n=i.getRowNode();if(n.rowHeightEstimated){let s=qn(this.gos,n);n.setRowHeight(s.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},D4=class extends E{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(r=>r.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},n=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Vi(this.gos)?i():n()}),Vi(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),Ju(this.gos)&&(Fe(this.gos)||gn(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new x4(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Xe(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new E4(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let e=Kn(this.rowCtrlsByRowIndex),t=Kn(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{let i=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},n=()=>{i(l=>l.onLeftChanged())},s=()=>{i(l=>l.onWidthChanged())},r=()=>{i(l=>l.onFirstRightPinnedChanged())},o=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};t.addEventListener("leftChanged",n),t.addEventListener("widthChanged",s),t.addEventListener("firstRightPinnedChanged",r),t.addEventListener("lastLeftPinnedChanged",o),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",n),t.removeEventListener("widthChanged",s),t.removeEventListener("firstRightPinnedChanged",r),t.removeEventListener("lastLeftPinnedChanged",o),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let e=Xe(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(i=>{let n=i.getCellElement(e);n&&t.push(n)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){let{pinnedRowModel:i,beans:n,printLayout:s}=this,r=Object.fromEntries(e.map(a=>[a.getRowNode().id,a]));i.forEachPinnedRow(t,(a,l)=>{let c=e[l];c&&i.getPinnedRowById(c.getRowNode().id,t)===void 0&&(c.destroyFirstPass(),c.destroySecondPass()),a.id in r?(e[l]=r[a.id],delete r[a.id]):e[l]=new Ns(a,n,!1,!1,s)});let o=t==="top"?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=o}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let i=n=>{let s=n[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":i(this.topRowCtrls);break;case"bottom":i(this.bottomRowCtrls);break;default:i(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let i=De(this.gos),n=Oa(this.gos,i,Os.DOM_DATA_KEY_CELL_CTRL),s=Oa(this.gos,i,Ns.DOM_DATA_KEY_ROW_CTRL);return n||s?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&jr(this.gos),s=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let r=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();r&&this.updateContainerHeights(r)}this.recycleRows(s,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){let s=t[n].getAllCellCtrls(),r=s.length;for(let o=0;o<r;o++)e.push(s[o])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(let n in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[n]);return i}addRenderedRowListener(e,t,i){let n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&Kf()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){let t=this.getCellCtrls(e.rowNodes,e.columns).map(s=>s.getCellRenderer()).filter(s=>s!=null);if(e.columns?.length)return t;let i=[],n=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(s=>{if(n&&!this.isRowInMap(s.getRowNode(),n)||!s.isFullWidth())return;let r=s.getFullWidthCellRenderers();for(let o=0;o<r.length;o++){let a=r[o];a!=null&&i.push(a)}}),[...i,...t]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{let n=i.getCellEditor();n&&t.push(n)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(i=>{let n=i.id;switch(i.rowPinned){case"top":t.top[n]=i;break;case"bottom":t.bottom[n]=i;break;default:t.normal[n]=i;break}}),t}isRowInMap(e,t){let i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){let t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(n=>{let s=n.getRowNode();return this.isRowInMap(s,t)})}getCellCtrls(e,t){let i;P(t)&&(i={},t.forEach(s=>{let r=this.columnModel.getCol(s);P(r)&&(i[r.getId()]=!0)}));let n=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(r=>{let o=r.getColumn().getId();i&&!i[o]||n.push(r)})}),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let e=[];ti(this.rowCtrlsByRowIndex,(i,n)=>{n.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);let t={};return ti(this.rowCtrlsByRowIndex,(i,n)=>{let s=n.getRowNode();t[s.id]=n}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{let n=this.rowCtrlsByRowIndex[i];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,i;this.stickyRowFeature&&Kf()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);let n=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(this.stickyRowFeature){r=this.stickyRowFeature.checkStickyRows();let a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}let o=this.firstRenderedRow!==n||this.lastRenderedRow!==s;if(!(t&&!r&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),i!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){let i={};e.forEach(r=>i[r]=!0);let s=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!i[r]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){let t=uO(this.firstRenderedRow,this.lastRenderedRow),i=(s,r)=>{let o=r.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(o)};ti(this.rowCtrlsByRowIndex,i),ti(e,i),t.sort((s,r)=>s-r);let n=[];for(let s=0;s<t.length;s++){let r=t[s],o=this.rowModel.getRow(r);o&&!o.sticky&&n.push(r)}return n}recycleRows(e,t=!1,i=!1){let n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);let s=[];n.forEach(r=>{let o=this.createOrUpdateRowCtrl(r,e,t,i);P(o)&&s.push(o)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;let n=i.getRowNode();return!(t!=null&&!this.isRowInMap(n,t))})}createOrUpdateRowCtrl(e,t,i,n){let s,r=this.rowCtrlsByRowIndex[e];if(r||(s=this.rowModel.getRow(e),P(s)&&P(t)&&t[s.id]&&s.alreadyRendered&&(r=t[s.id],t[s.id]=null)),!r)if(s||(s=this.rowModel.getRow(e)),P(s))r=this.createRowCon(s,i,n);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){let i=[];ti(e,(n,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);return}if(s.destroyFirstPass(!t),t){let r=s.instanceId;this.zombieRowCtrls[r]=s,i.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[r]})}else s.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),Rk(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=_s(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation"),u=!1,d,h;do{let v=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:C,pageLastPixel:w}=this.pageBoundsService.getCurrentPagePixelRange(),y=this.rowContainerHeightService.getDivStretchOffset(),S=l.getScrollFeature().getVScrollPosition(),b=S.top,M=S.bottom;c?(d=C+y,h=w+y):(d=Math.max(b+v-a,C)+y,h=Math.min(M+v+a,w)+y),this.firstVisibleVPixel=Math.max(b+v,C)+y,this.lastVisibleVPixel=Math.min(M+v,w)+y,u=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(u);let g=this.rowModel.getRowIndexAtPixel(d),p=this.rowModel.getRowIndexAtPixel(h),f=this.pageBoundsService.getFirstRow(),m=this.pageBoundsService.getLastRow();g<f&&(g=f),p>m&&(p=m),e=g,t=p}let i=Xe(this.gos,"normal"),n=this.gos.get("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);i&&!n&&t-e>s&&(t=e+s);let r=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;(r||o)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let i=this.pinnedRowModel?.ensureRowHeightsValid(),n=this.stickyRowFeature?.ensureRowHeightsValid(),s=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(s||n)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),n||s||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let n=e.getRowNode(),s=this.focusService.isRowNodeFocused(n),r=e.isEditing(),o=n.detail;return s||r||o?!!this.isRowPresent(n):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){let n=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(n)return n;let s=this.gos.get("suppressAnimationFrame"),r=i&&!s&&!this.printLayout;return new Ns(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t,{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},E4=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],St(this.entriesList,i)}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],St(this.entriesList,e)}getEntries(){return this.entriesList}},M4=class extends E{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new GS,this.pinnedBottomRows=new GS}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){let t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0,i=n=>{if(n.rowHeightEstimated){let s=qn(this.gos,n);n.setRowTop(t),n.setRowHeight(s.height),t+=s.height,e=!0}};return this.pinnedBottomRows?.forEach(i),t=0,this.pinnedTopRows?.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){i.clear();return}let n=Xr(this.gos),s=t==="top"?dn.ID_PREFIX_TOP_PINNED:dn.ID_PREFIX_BOTTOM_PINNED,r=i.getIds(),o=[],a=new Set,l=0,c=-1;for(let u of e){let d=n?.({data:u,level:0,rowPinned:t})??s+this.nextId++;if(a.has(d)){F("Duplicate ID",d,"found for pinned row with data",u,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}c++,a.add(d),o.push(d);let h=i.getById(d);if(h!==void 0)h.data!==u&&h.setData(u),l+=this.setRowTopAndRowIndex(h,l,c),r.delete(d);else{let g=new dn(this.beans);g.id=d,g.data=u,g.rowPinned=t,l+=this.setRowTopAndRowIndex(g,l,c),i.push(g)}}r.forEach(u=>{i.getById(u)?.clearRowTopAndRowIndex()}),i.removeAllById(r),i.setOrder(o)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(qn(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){let t=e.getSize();if(t===0)return 0;let i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}},GS=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){let t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(let t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,i)=>{let n=this.cache[t];n&&e(n,i)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}};var R4=class extends E{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){let t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){let t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},F4=class extends E{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=bt(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){let e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){St(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&ii("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(gn(this.gos))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){this.gos.get("debug")&&ii(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},I4={version:N,moduleName:"@ag-grid-community/row-node-block",beans:[F4]},P4=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let i=t[0].id===this.root.id,n=t.findIndex(s=>s.id===e.id);if(n>-1){let s=t.slice(0,n),r=t.slice(n+1);return this.setEndRange(e),i?{keep:s,discard:r}:{keep:r,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){let i=this.getRoot();if(i==null){let s=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&s.push(r)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(s=>s.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}},A4=class extends E{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,n){this.processClassRules(void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,n,s){if(t==null&&e==null)return;let r={},o={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){let l=Object.keys(t);for(let c=0;c<l.length;c++){let u=l[c],d=t[u],h;typeof d=="string"?h=this.expressionService.evaluate(d,i):typeof d=="function"&&(h=d(i)),a(u,g=>{h?r[g]=!0:o[g]=!0})}}e&&s&&Object.keys(e).forEach(l=>a(l,c=>{r[c]||(o[c]=!0)})),s&&Object.keys(o).forEach(s),Object.keys(r).forEach(n)}getStaticCellClasses(e,t){let{cellClass:i}=e;if(!i)return[];let n;return typeof i=="function"?n=i(t):n=i,typeof n=="string"&&(n=[n]),n||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(s=>{i(s)})}};var T4=class extends E{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:o,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,eFocusableElement:g}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=g,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!o,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new Gs(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){let t=Pe(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let s,r;e?(s=0,r=n):(s=n+1,r=i.length);let o=i.slice(s,r),a=this.gos.get("tabIndex");o.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(c.getAttribute("tabindex")||"0");return d===a?1:u===a?-1:u===0?1:d===0?-1:u-d}),o[e?o.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},k4=class extends E{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,s=[t,i],r={setTabIndex:f=>{s.forEach(m=>f!=null?m.setAttribute("tabindex",f):m.removeAttribute("tabindex"))}};this.addTabGuards(t,i);let{focusTrapActive:o=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:p}=e;this.tabGuardCtrl=this.createManagedBean(new T4({comp:r,focusTrapActive:o,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:p}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=Pe(this.gos).createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),At(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];lt(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){wm(t)||(t=t.getGui());let{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}},L1=class extends oe{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new k4(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},_4=0,L4=200,O4=class extends E{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:i}=e,n=this.getPopupIndex(i);if(n!==-1){let g=this.popupList[n];g.alignedToElement=t}let s=t.getBoundingClientRect(),r=this.getParentRect(),o=this.keepXYWithinBounds(i,s.top-r.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;let c=r.right-r.left-a,u;this.gos.get("enableRtl")?(u=h(),u<0&&(u=d(),this.setAlignedStyles(i,"left")),u>c&&(u=0,this.setAlignedStyles(i,"right"))):(u=d(),u>c&&(u=h(),this.setAlignedStyles(i,"right")),u<0&&(u=0,this.setAlignedStyles(i,"left"))),i.style.left=`${u}px`,i.style.top=`${o}px`;function d(){return s.right-r.left-2}function h(){return s.left-r.left-a}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,eventSource:r,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=e,d=r.getBoundingClientRect(),h=this.getParentRect(),g=this.getPopupIndex(t);if(g!==-1){let f=this.popupList[g];f.alignedToElement=r}let p=()=>{let f=d.left-h.left;o==="right"&&(f-=t.offsetWidth-d.width);let m;return a==="over"?(m=d.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)==="under"?m=d.top-h.top+d.height:m=d.top-t.offsetHeight-(n||0)*2-h.top),{x:f,y:m}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,updatePosition:p,postProcessCallback:()=>this.callPostProcessPopup(u,t,r,null,l,c)})}shouldRenderUnderOrAbove(e,t,i,n){let s=i.bottom-t.bottom,r=t.top-i.top,o=e.offsetHeight+n;return s>o?"under":r>o||r>s?"above":"under"}setAlignedStyles(e,t){let i=this.getPopupIndex(e);if(i===-1)return;let n=this.popupList[i],{alignedToElement:s}=n;!s||(["right","left","over","above","under"].forEach(o=>{s.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,n,s,r){let o=this.gos.getCallback("postProcessPopup");o&&o({column:s,rowNode:r,ePopup:t,type:e,eventSource:i,mouseEvent:n})}positionPopup(e){let{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:s,skipObserver:r,updatePosition:o}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=o();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,n&&(u+=n),s&&(d+=s),i&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!r){let c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),L4)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=Pe(this.gos),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Tx(t)}keepXYWithinBounds(e,t,i){let n=i===0,s=n?"clientHeight":"clientWidth",r=n?"top":"left",o=n?"height":"width",a=n?"scrollTop":"scrollLeft",l=Pe(this.gos),c=l.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),h=u.getBoundingClientRect(),g=l.documentElement.getBoundingClientRect(),p=u===l.body,f=Math.ceil(d[o]),v=p?(n?Ax:$u)(c)+c[a]:u[s];p&&(v-=Math.abs(g[r]-h[r]));let C=v-f;return Math.min(Math.max(t,0),Math.abs(C))}addPopup(e){let t=Pe(this.gos),{eChild:i,ariaLabel:n,alwaysOnTop:s,positionCallback:r,anchorToElement:o}=e;if(!t)return F("could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);let l=this.createPopupWrapper(i,n,!!s),c=this.addEventListenersToPopup(_(D({},e),{wrapperEl:l}));return r&&r(),this.addPopupToPopupList(i,l,c,o),{hideFunc:c}}initialisePopupPosition(e){let i=this.getPopupParent().getBoundingClientRect();P(e.style.top)||(e.style.top=`${i.top*-1}px`),P(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){let n=this.getPopupParent(),s=document.createElement("div");return this.environment.applyThemeClasses(s),s.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||At(e,"dialog"),Yr(e,t),s.appendChild(e),n.appendChild(s),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(e){if(e.themeChanged)for(let t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){let t=Pe(this.gos),i=this.getPopupParent(),{wrapperEl:n,eChild:s,closedCallback:r,afterGuiAttached:o,closeOnEsc:a,modal:l}=e,c=!1,u=p=>{if(!n.contains(De(this.gos)))return;p.key===x.ESCAPE&&!un(p)&&g({keyboardEvent:p})},d=p=>g({mouseEvent:p}),h=p=>g({touchEvent:p}),g=(p={})=>{let{mouseEvent:f,touchEvent:m,keyboardEvent:v,forceHide:C}=p;!C&&(this.isEventFromCurrentPopup({mouseEvent:f,touchEvent:m},s)||c)||(c=!0,i.removeChild(n),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",d),t.removeEventListener("touchstart",h),t.removeEventListener("contextmenu",d),this.eventService.removeEventListener("dragStarted",d),r&&r(f||m||v),this.removePopupFromPopupList(s))};return o&&o({hidePopup:g}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",d),this.eventService.addEventListener("dragStarted",d),t.addEventListener("touchstart",h),t.addEventListener("contextmenu",d))},0),g}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:_4++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let i=this.getPopupIndex(e);if(i===-1)return;let n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(r=>r&&r()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;let s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=s,n.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:s}=e,r=n.getBoundingClientRect(),o=d=>parseInt(d.substring(0,d.length-1),10),a=(d,h)=>{let g=i[d]-r[d],p=o(s.style[d]);return{initialDiff:g,lastDiff:g,initial:p,last:p,direction:h}},l=a("top",0),c=a("left",1),u=this.getFrameworkOverrides();return new Wt(d=>{u.wrapIncoming(()=>{u.setInterval(()=>{let h=t.getBoundingClientRect(),g=n.getBoundingClientRect();if(g.top==0&&g.left==0&&g.height==0&&g.width==0){e.hidePopup();return}let f=(m,v)=>{let C=o(s.style[v]);m.last!==C&&(m.initial=C,m.last=C);let w=h[v]-g[v];if(w!=m.lastDiff){let y=this.keepXYWithinBounds(s,m.initial+m.initialDiff-w,m.direction);s.style[v]=`${y}px`,m.last=y}m.lastDiff=w};f(l,"top"),f(c,"left")},200).then(h=>{d(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:i,touchEvent:n}=e,s=i||n;if(!s)return!1;let r=this.getPopupIndex(t);if(r===-1)return!1;for(let o=r;o<this.popupList.length;o++){let a=this.popupList[o];if($k(a.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){let t=Pe(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){let t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,s=this.getWrapper(e);if(!s||n<=1||!t.contains(e))return;let r=[],o=[];for(let h of i)h!==s&&(h.classList.contains("ag-always-on-top")?o.push(h):r.push(h));let a=[],l=o.length,d=s.classList.contains("ag-always-on-top")||!l?[...r,...o,s]:[...r,s,...o];for(let h=0;h<=n;h++){let g=d[h];if(i[h]===d[h]||g===s)continue;g.querySelectorAll("div").forEach(f=>{f.scrollTop!==0&&a.push([f,f.scrollTop])}),h===0?t.insertAdjacentElement("afterbegin",g):d[h-1].insertAdjacentElement("afterend",g)}for(;a.length;){let h=a.pop();h[0].scrollTop=h[1]}}},N4=["touchstart","touchend","touchmove","touchcancel"],Om=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new Wt(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,n){let s=Ls(N4,t);e.addEventListener(t,i,{capture:!!n,passive:s})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},V4=class extends E{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let i=e===x.UP,n=e===x.DOWN,s=e===x.LEFT,r,o;if(i||n)o=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{let a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");o=t.rowIndex,r=s!==l?a[0]:te(a)}return{rowIndex:o,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case x.UP:i=this.getCellAbove(i);break;case x.DOWN:i=this.getCellBelow(i);break;case x.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case x.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,F("unknown key for navigation ",e);break}i?n=this.isCellGoodToFocusOn(i):n=!0}return i}isCellGoodToFocusOn(e){let t=e.column,i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;let t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,i=e.rowPinned,n=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(n=!0);let s=this.rowModel.getRow(e.rowIndex),r=n?void 0:this.getNextStickyPosition(s);return r||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!Ju(this.gos)||!e||!e.sticky)return;let i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex),n=[];i?n=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):n=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let s=t?-1:1,r=n.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=n[r+s];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){let t=e.rowIndex,i=e.rowPinned,n=i?t===0:t===this.pageBoundsService.getFirstRow(),s=!1;if(n)return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(s=!0);let r=this.rowModel.getRow(e.rowIndex),o=s?void 0:this.getNextStickyPosition(r,!0);return o||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.visibleColsService.getAllCols(),i=e.rowIndex,n=e.rowPinned,s=this.visibleColsService.getColAfter(e.column);if(!s){s=t[0];let r=this.getRowBelow(e);if(X(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;i=r?r.rowIndex:null,n=r?r.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}getNextTabbedCellBackwards(e){let t=this.visibleColsService.getAllCols(),i=e.rowIndex,n=e.rowPinned,s=this.visibleColsService.getColBefore(e.column);if(!s){s=te(t);let r=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(X(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;i=r?r.rowIndex:null,n=r?r.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}},vt=(e,t)=>{for(let i in t)t[i]=e;return t},zS=D(D(D(D(D(D(D(D(D(D(D(D(D(D(D({},vt("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),vt("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),vt("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0})),vt("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),vt("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),vt("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),vt("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),vt("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),vt("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),vt("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0})),vt("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),vt("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),vt("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),vt("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),vt("@ag-grid-enterprise/status-bar",{getStatusPanel:0})),Lf={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},H4=(e,t)=>e.eventService.dispatchEvent(t),O1=class{};Reflect.defineProperty(O1,"name",{value:"GridApi"});var B4=class extends E{constructor(){super(),this.beanName="apiFunctionService",this.api=new O1,this.fns=_(D({},Lf),{dispatchEvent:H4}),this.beans=null,this.preDestroyLink="";let{api:e}=this;for(let t in zS)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:i,beans:n}=this;i!==Lf&&(i[e]=n?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:i,fns:{[e]:n}}=this;return n?n(i,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:i,preDestroyLink:n}=this;if(!t)F(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${n}`);else{let s=zS[e];i.assertModuleRegistered(s,`api.${e}`)&&F(`API function '${e}' not registered to module '${s}'`)}}destroy(){super.destroy(),this.fns=Lf,this.beans=null}};function G4(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var z4=class extends E{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){let n=[],s={};return e.forEach(r=>{let o=this.createDefFromColumn(r,t,i),a=!0,l=o,c=r.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}let h=s[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],s[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&n.push(l)}),n}createDefFromGroup(e){let t=jf(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){let n=jf(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}},W4=class extends E{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){let{movedColumns:t,source:i,toIndex:n,finished:s}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:n,finished:s,source:i})}columnPinned(e,t){if(!e.length)return;let i=e.length===1?e[0]:null,n=this.getCommonValue(e,s=>s.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:n??null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;let i=e.length===1?e[0]:null,n=this.getCommonValue(e,s=>s.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:n,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;let i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i})}columnResized(e,t,i,n=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:n,finished:t,source:i})}},j4=class extends E{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){let e=this.columnModel.getColDefCols();if(X(e)||!this.columnModel.isAlive())return[];let i=this.columnModel.getAllCols().map(n=>this.createStateItemFromColumn(n));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){let t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),n=e.isRowGroupActive()?t.indexOf(e):null,s=e.isPivotActive()?i.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:a,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:n,pivot:e.isPivotActive(),pivotIndex:s,flex:l}}orderColumnStateList(e){let t=this.columnModel.getCols(),i=new Map(t.map((n,s)=>[n.getColId(),s]));e.sort((n,s)=>{let r=i.has(n.colId)?i.get(n.colId):-1,o=i.has(s.colId)?i.get(s.colId):-1;return r-o})}},U4=class extends E{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){let e=[],t=this.columnModel.getColTree();return hn(null,t,i=>{wt(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){let t=this.columnModel.getColDefColTree();if(!t)return;let i=[];hn(null,t,n=>{if(wt(n)){let s=n.getColGroupDef(),r={groupId:n.getGroupId(),open:s?s.openByDefault:void 0};i.push(r)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let n=[];e.forEach(s=>{let r=s.groupId,o=s.open,a=this.columnModel.getProvidedColGroup(r);a&&a.isExpanded()!==o&&(a.setExpanded(o),n.push(a))}),this.visibleColsService.refresh(t,!0),n.length&&this.eventDispatcher.groupOpened(n),this.columnAnimationService.finish()}},$4=class extends E{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){let n=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let r=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=r-this.scrollPosition-this.scrollWidth,this.viewportRight=r-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){let e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,s=this.viewportRight+200,r=t<n&&i<n,o=t>s&&i>s;return!r&&!o}getViewportColumns(){let e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let t=s=>{let r=s.getLeft();return P(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),n=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,n,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(r=>e[r.getId()]=!0);let s=(r,o,a)=>{let l=!1;for(let c=0;c<r.length;c++){let u=r[c],d=!1;if(Yn(u))d=e[u.getId()]===!0;else{let g=u.getDisplayedChildren();g&&(d=s(g,o,a+1))}d&&(l=!0,o[a]||(o[a]=[]),o[a].push(u))}return l};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},q4=class extends E{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){let i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(n){let s=e(n),r=typeof s;if(r==="string"||r==="number"||r==="boolean"){this.eGui=za("<span>"+s+"</span>");return}if(s==null){this.eGui=za("<span></span>");return}this.eGui=s}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},K4=class extends E{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},Y4=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],WS=Object.fromEntries(Y4.map((e,t)=>[e,t]));function Q4(e,t){let i=(e.beanName?WS[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,n=(t.beanName?WS[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-n}function Z4(e,t){return e?.beanName==="gridDestroyService"?-1:0}var X4=class extends E{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){let i=this.registry[e];if(i!=null)return new i(...t)}},J4=class extends E{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},eV=class extends E{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){let{rowIndex:t,rowPinned:i,column:n}=e;return this.createIdFromValues({rowIndex:t,column:n,rowPinned:i})}createIdFromValues(e){let{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${i??"null"}.${n.getId()}`}equals(e,t){let i=e.column===t.column,n=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return i&&n&&s}},tV=class extends E{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){Fe(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(n=>this.eventService.dispatchEvent(n)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},iV=class extends E{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,i=this.pinnedRowModel.getPinnedBottomRowCount(),n=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):n&&(t="top",e=n-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(P(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},jS={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},US={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},$S={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},nV=class extends E{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(jS),this.getSizeEl(US),this.getSizeEl($S)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(jS)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(US)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue($S)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){let t=this.getThemeClasses();for(let i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let i=t.offsetWidth;return i===qS?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${qS}px)`,i.appendChild(t),this.sizeEls.set(e,t);let n=this.measureSizeEl(e);n==="no-styles"&&F(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);let s=this.resizeObserverService.observeResize(t,()=>{let r=this.measureSizeEl(e);r==="detached"||r==="no-styles"||(this.lastKnownValues.set(e,r),r!==n&&(n=r,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){let e=new MutationObserver(()=>{let i=this.readAncestorThemeClasses();sV(i,this.ancestorThemeClasses)||(this.ancestorThemeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))}),t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv,t=[];for(;e;){let i=Array.from(e.classList).filter(n=>n.startsWith("ag-theme-"));for(let n of i)t.includes(n)||t.unshift(n);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){let{gos:e,eMeasurementContainer:t,gridTheme:i}=this,n=e.get("theme")||null;n!==i&&(i?.stopUse(),this.gridTheme=n,n?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},sV=(e,t)=>e.length===t.length&&e.findIndex((i,n)=>e[n]!==t[n])===-1,qS=15538,rV=class extends E{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new Zr}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let e=Bu(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},Nm=class ei extends E{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",ei.toggleKeyboardMode),t.addEventListener("mousedown",ei.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",ei.toggleKeyboardMode),t.removeEventListener("mousedown",ei.toggleKeyboardMode))}static toggleKeyboardMode(t){let i=ei.keyboardModeActive,n=t.type==="keydown";n&&(t.ctrlKey||t.metaKey||t.altKey)||i!==n&&(ei.keyboardModeActive=n)}postConstruct(){let t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,i=>{this.gridCtrl=i.gridCtrl})}registerKeyboardFocusEvents(){let t=Pe(this.gos);ei.addKeyboardModeEvents(t),ei.instanceCount++,this.addDestroyFunc(()=>{ei.instanceCount--,ei.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,i=this.columnModel.getCol(t.getId());t!==i&&this.clearFocusedCell()}isKeyboardMode(){return ei.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(De(this.gos),Ns.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(De(this.gos),sd.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,i){let n=t;for(;n;){if(Oa(this.gos,n,i))return!1;n=n.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,i){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),i())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){let{rowIndex:i,rowPinned:n,column:s}=t,r={rowIndex:i,rowPinned:n,column:s,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:n});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent(D({type:"cellFocusCleared"},t))}setFocusedCell(t){let{column:i,rowIndex:n,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=t,a=this.columnModel.getCol(i);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:n,rowPinned:cn(s),column:a},this.eventService.dispatchEvent(_(D({type:"cellFocused"},this.getFocusEventParams(this.focusedCellPosition)),{forceBrowserFocus:r,preventScrollOnBrowserFocus:o}))}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let i=t.getColumnGroupChild(),n=t.getRowIndex(),s=t.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return i===r&&n===o&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,i){this.focusedHeaderPosition={headerRowIndex:t,column:i}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){if(this.isHeaderFocusSuppressed())return!1;let{direction:i,fromTab:n,allowUserOverride:s,event:r,fromCell:o,rowWithoutSpanValue:a}=t,{headerPosition:l}=t;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(s){let c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(n){let d=this.gos.getCallback("tabToNextHeader");d&&(l=this.getHeaderPositionFromUserFunc({userFunc:d,direction:i,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let d=this.gos.getCallback("navigateToNextHeader");if(d&&r){let h={key:r.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:r};l=d(h)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:i,event:r,fromCell:o,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;let{userFunc:i,headerPosition:n,direction:s,event:r}=t,o=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:i,direction:s,currentPosition:o,headerPosition:n,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:s,event:r})}getHeaderPositionFromUserFunc(t){let{userFunc:i,direction:n,currentPosition:s,headerPosition:r,headerRowCount:o}=t,l=i({backwards:n==="Before",previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:o});return l===!0||l===null?(l===null&&F("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):l===!1?null:l}focusProvidedHeaderPosition(t){let{headerPosition:i,direction:n,fromCell:s,rowWithoutSpanValue:r,event:o}=t,{column:a,headerRowIndex:l}=i;if(l===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(i):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,n);let u=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned())?.focusHeader(i.headerRowIndex,a,o)||!1;return u&&(r!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),u}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));let i=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;let i=this.headerNavigationService.getHeaderRowCount()-1,n=te(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:n},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===cn(i)}findFocusableElements(t,i,n=!1){let s=V_,r=Px;i&&(r+=", "+i),n&&(r+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(t.querySelectorAll(s)).filter(c=>yi(c)),a=Array.prototype.slice.apply(t.querySelectorAll(r));return a.length?((c,u)=>c.filter(d=>u.indexOf(d)===-1))(o,a):o}focusInto(t,i=!1,n=!1){let s=this.findFocusableElements(t,null,n),r=i?te(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,i){if(!i)return null;let n=this.findFocusableElements(t),s=n.indexOf(i);if(s===-1)return null;let r=-1;for(let o=s-1;o>=0;o--)if(n[o].classList.contains("ag-tab-guard-top")){r=o;break}return r<=0?null:n[r-1]}findNextFocusableElement(t=this.eGridDiv,i,n){let s=this.findFocusableElements(t,i?':not([tabindex="-1"])':null),r=De(this.gos),o;i?o=s.findIndex(l=>l.contains(r)):o=s.indexOf(r);let a=o+(n?-1:1);return a<0||a>=s.length?null:s[a]}isTargetUnderManagedComponent(t,i){if(!i)return!1;let n=t.querySelectorAll(`.${Gs.FOCUS_MANAGED_CLASS}`);if(!n.length)return!1;for(let s=0;s<n.length;s++)if(n[s].contains(i))return!0;return!1}findTabbableParent(t,i=5){let n=0;for(;t&&Yf(t)===null&&++n<=i;)t=t.parentElement;return Yf(t)===null?null:t}focusOverlay(t){let i=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!i&&this.focusInto(i,t)}focusGridViewFailed(t,i){return i&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,i=!1,n=!0){if(this.overlayService.isExclusive())return n&&this.focusOverlay(i);if(this.isCellFocusSuppressed())return i&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():n&&this.focusOverlay(i)?!0:this.focusNextGridCoreContainer(!1);let s=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(s){let{rowIndex:r,rowPinned:o}=s;if(t??(t=this.getFocusedHeader()?.column),t&&r!==void 0&&r!==null)return this.navigationService.ensureCellVisible({rowIndex:r,column:t,rowPinned:o}),i&&this.rowRenderer.getRowByPosition(s)?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(s,i)||(this.setFocusedCell({rowIndex:r,column:t,rowPinned:cn(o),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:r,rowPinned:o,column:t})),!0}return!!(n&&this.focusOverlay(i)||i&&this.focusLastHeader())}isGridFocused(){let t=De(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,i=!1){return!i&&this.gridCtrl.focusNextInnerContainer(t)?!0:((i||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,i){let n=(i?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return t?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(n)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};Nm.keyboardModeActive=!1;Nm.instanceCount=0;var oV=Nm,aV=class extends E{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=Xe(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},lV=class extends E{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());let{dragAndDropService:n,mouseEventService:s,ctrlsService:r,resizeObserverService:o}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:c=>c===1||c===0,getIconName:()=>"notAllowed"};n.addDropTarget(a),this.addDestroyFunc(()=>n.removeDropTarget(a)),s.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Lm(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});let l=o.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>l()),r.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(n===0){if(i>0){let s=this.visibleColsService.getAllCols(),r=te(s);if(this.focusService.focusGridView(r,!0))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){let t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;let i=this.getFocusableContainers(),n=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(te(i),!0);let s=te(n);if(this.focusService.focusGridView(s,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(n[0]))return!0;for(let s=1;s<i.length;s++)if(this.focusService.focusInto(i[s].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(n===-1||i<0||i>=t.length)return;let s=t[i];s.setAllowFocus?.(!0),setTimeout(()=>{s.setAllowFocus?.(!1)})}getNextFocusableIndex(e,t){let i=De(this.gos),n=e.findIndex(r=>r.getGui().contains(i)),s=n+(t?-1:1);return{indexWithFocus:n,nextIndex:s}}focusContainer(e,t){e.setAllowFocus?.(!0);let i=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){let e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},cV=class extends L1{constructor(e){super(),this.gridBody=T,this.sideBar=T,this.pagination=T,this.rootWrapperBody=T,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:r=>this.addCssClass(r),setGridThemeClass:r=>this.addCssClass(r),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:r=>{this.getGui().style.userSelect=r??"",this.getGui().style.webkitUserSelect=r??""},setCursor:r=>{this.getGui().style.cursor=r??""}},t=this.createManagedBean(new lV),i=t.getOptionalSelectors(),n=this.createTemplate(i),s=[I6,...Object.values(i).filter(r=>!!r)];this.setTemplate(n,s),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>t.focusInnerElement(r),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&ii("Grid removed from DOM")})}updateLayoutClasses(e,t){let i=this.rootWrapperBody.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",i=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",n=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",s=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",r=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${i}
                </div>
                ${n}
                ${r}
                ${s}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>yi(t.getGui()))}},uV=class extends E{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";typeof e=="function"&&(e=e());let i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(s=>{if(!s){ae("alignedGrids contains an undefined option."),t||ae(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),ae(i());return}if(this.isGridApi(s))return s;let r=s;return"current"in r?r.current?.api:(r.api||ae(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),r.api)}).filter(s=>!!s&&!s.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let i=[];return e.columns?e.columns.forEach(n=>{i.push(t(n))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":F("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){let{columnModel:t}=this;e.columnGroups.forEach(i=>{let n=null;i&&(n=t.getProvidedColGroup(i.getGroupId())),!(i&&!n)&&t.setColumnGroupOpened(n,i.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;let n=this.getMasterColumns(e),{columnApplyStateService:s,columnSizeService:r,ctrlsService:o}=this;switch(e.type){case"columnMoved":{let u=e.api.getColumnState().map(d=>({colId:d.colId}));s.applyColumnState({state:u,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let u=e.api.getColumnState().map(d=>({colId:d.colId,hide:d.hide}));s.applyColumnState({state:u},"alignedGridChanged")}break;case"columnPinned":{let u=e.api.getColumnState().map(d=>({colId:d.colId,pinned:d.pinned}));s.applyColumnState({state:u},"alignedGridChanged")}break;case"columnResized":{let c=e,u={};n.forEach(d=>{u[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),c.flexColumns?.forEach(d=>{u[d.getId()]&&delete u[d.getId()]}),r.setColumnWidths(Object.values(u),!1,c.finished,"alignedGridChanged");break}}let l=o.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(c=>{c.setGridOption("alwaysShowVerticalScroll",l)})}},dV={version:N,moduleName:"@ag-grid-community/aligned-grid",beans:[uV]};function hV(e,t){let i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function gV(e){return e.columnModel.getColumnDefs()}function pV(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function fV(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function mV(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function vV(e,t){return e.columnModel.getProvidedColGroup(t)}function CV(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function wV(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function yV(e,t){return e.columnModel.getColDefCol(t)}function bV(e){return e.columnModel.getColDefCols()}function SV(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function xV(e){return e.columnGetStateService.getColumnState()}function DV(e){e.columnApplyStateService.resetColumnState("api")}function EV(e){return e.columnGroupStateService.getColumnGroupState()}function MV(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function RV(e){e.columnGroupStateService.resetColumnGroupState("api")}function FV(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function IV(e){return e.visibleColsService.isPinningLeft()}function PV(e){return e.visibleColsService.isPinningRight()}function AV(e,t){return e.visibleColsService.getColAfter(t)}function TV(e,t){return e.visibleColsService.getColBefore(t)}function kV(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function _V(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function LV(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function OV(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function NV(e){return e.columnModel.getCols()}function VV(e){return e.visibleColsService.getLeftCols()}function HV(e){return e.visibleColsService.getCenterCols()}function BV(e){return e.visibleColsService.getRightCols()}function GV(e){return e.visibleColsService.getAllCols()}function zV(e){return e.columnViewportService.getViewportColumns()}function WV(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function jV(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function UV(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function $V(e,t,i,n=!0,s="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,n,s)}function qV(e,t,i=!0,n="api"){e.columnSizeService.setColumnWidths(t,!1,i,n)}function KV(e){return e.visibleColsService.getTreeLeft()}function YV(e){return e.visibleColsService.getTreeCenter()}function QV(e){return e.visibleColsService.getTreeRight()}function ZV(e){return e.visibleColsService.getAllTrees()}function XV(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function JV(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function e5(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var t5=class extends E{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Ps(e.source))})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let t=n=>s=>{let{column:r,node:o,value:a}=s,l=r.getColDef().valueFormatter;return l===n.groupSafeValueFormatter&&(l=n.valueFormatter),this.valueService.formatValue(r,o,a,l)};Object.entries(e).forEach(([n,s])=>{let r=_(D({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)});this.dataTypeDefinitions[n]=r,this.formatValueFuncs[n]=t(r)});let i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([n,s])=>{let r=this.processDataTypeDefinition(s,i,[n],e);r&&(this.dataTypeDefinitions[n]=r,s.dataTypeMatcher&&(this.dataTypeMatchers[n]=s.dataTypeMatcher),this.formatValueFuncs[n]=t(r))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(n=>{let s=this.dataTypeMatchers[n];s&&delete this.dataTypeMatchers[n],this.dataTypeMatchers[n]=s??e[n].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let i=D(D({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...Nu(e.columnTypes),...Nu(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,n){let s,r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=n[r],a=t[r];if(o&&a&&(o=a),!this.validateDataTypeDefinition(e,o,r))return;s=this.mergeDataTypeDefinitions(o,e)}else{if(i.includes(r)){F('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let o=t[r];if(!this.validateDataTypeDefinition(e,o,r))return;let a=this.processDataTypeDefinition(o,t,[...i,r],n);if(!a)return;s=this.mergeDataTypeDefinitions(a,e)}return _(D({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(F('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(F(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){let i=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(i){if(i==="first"||i==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&i!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(_(D({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(_(D({},t),{value:t.value.value}))}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t,{field:s}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(s,i):!1),!n){e.cellDataType=!1;return}let r=this.dataTypeDefinitions[n];if(!r){F(`Missing data type definition - "${n}"`);return}return e.cellDataType=n,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,r,i),r.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let i=n=>{t.add(n.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(!Fe(this.gos))return!1;let i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;let n=t.type===null?e.type:t.type;if(n){let s=this.gos.get("columnTypes")??{};if(Nu(n).some(o=>{let a=s[o.trim()];return a&&this.doColDefPropsPreventInference(a,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>this.doesColDefPropPreventInference(e,t,i,n))}doesColDefPropPreventInference(e,t,i,n){if(!t[i])return!1;let s=e[i];return s===null?(t[i]=!1,!1):n===void 0?!!s:s===n}inferCellDataType(e,t){if(!e)return;let i,n=this.getInitialData();if(n){let r=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=Pa(n,e,r)}else this.initWaitForRowData(t);if(i==null)return;let[s]=Object.entries(this.dataTypeMatchers).find(([r,o])=>o(i))??["object"];return s}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let[i]=this.addManagedEventListeners({rowDataUpdateStarted:n=>{let{firstRowData:s}=n;s&&(i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let i=[];this.destroyColumnStateUpdateListeners();let n={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([r,o])=>{let a=this.columnModel.getCol(r);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let u=this.getUpdatedColumnState(a,o);u.rowGroup&&u.rowGroupIndex==null&&(n[r]=u),u.pivot&&u.pivotIndex==null&&(s[r]=u),i.push(u)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(n,s)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(n=>{delete i[n],n==="rowGroup"?delete i.rowGroupIndex:n==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let i=this.getDataTypeDefinition(e)?.dataTypeMatcher;return i?i(t):!0}validateColDef(e){let t=i=>F(`Cell data type is "object" but no Value ${i} has been provided. Please either provide an object data type definition with a Value ${i}, or set "colDef.value${i}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,n){let s=this.formatValueFuncs[t];switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=r=>!!r.colDef.editable&&r.event.key===x.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=s;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=s;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(r,o)=>{let a=this.columnModel.getColDefCol(n),l=a?.getColDef();if(!a||!l)return 0;let c=r==null?"":s({column:a,node:null,value:r}),u=o==null?"":s({column:a,node:null,value:o});return c===u?0:c>u?1:-1},e.keyCreator=s;break}}this.filterManager?.setColDefPropertiesForDataType(e,i,s)}getDefaultDataTypes(){let e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>i.newValue?.trim?.()===""?null:Number(i.newValue),valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:Nf(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>i.newValue==null?i.newValue:i.newValue?.trim?.()===""?null:String(i.newValue).toLowerCase()==="true",valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Pt(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):oi(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>Pt(i)??void 0,dateFormatter:i=>oi(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>Nf(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},i5={version:N,moduleName:"@ag-grid-community/data-type",beans:[t5]},n5={version:N,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:hV,getColumnDefs:gV,sizeColumnsToFit:pV,setColumnGroupOpened:fV,getColumnGroup:mV,getProvidedColumnGroup:vV,getDisplayNameForColumn:CV,getDisplayNameForColumnGroup:wV,getColumn:yV,getColumns:bV,applyColumnState:SV,getColumnState:xV,resetColumnState:DV,getColumnGroupState:EV,setColumnGroupState:MV,resetColumnGroupState:RV,isPinning:FV,isPinningLeft:IV,isPinningRight:PV,getDisplayedColAfter:AV,getDisplayedColBefore:TV,setColumnVisible:kV,setColumnsVisible:_V,setColumnPinned:LV,setColumnsPinned:OV,getAllGridColumns:NV,getDisplayedLeftColumns:VV,getDisplayedCenterColumns:HV,getDisplayedRightColumns:BV,getAllDisplayedColumns:GV,getAllDisplayedVirtualColumns:zV,moveColumn:WV,moveColumnByIndex:jV,moveColumns:UV,setColumnWidth:$V,setColumnWidths:qV,getLeftDisplayedColumnGroups:KV,getCenterDisplayedColumnGroups:YV,getRightDisplayedColumnGroups:QV,getAllDisplayedColumnGroups:ZV,autoSizeColumn:XV,autoSizeColumns:JV,autoSizeAllColumns:e5}};function s5(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function r5(e,t){let i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function o5(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var a5={version:N,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:s5,removeRowDropZone:r5,getRowDropZoneParams:o5}};function l5(e){return e.pinnedRowModel.getPinnedTopRowCount()}function c5(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function u5(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function d5(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var h5={version:N,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:l5,getPinnedBottomRowCount:c5,getPinnedTopRow:u5,getPinnedBottomRow:d5}};function g5(e){e.overlayService.showLoadingOverlay()}function p5(e){e.overlayService.showNoRowsOverlay()}function f5(e){e.overlayService.hideOverlay()}var m5={version:N,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:g5,showNoRowsOverlay:p5,hideOverlay:f5}};function v5(e,t,i){if(!t)return;let n=e.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${t}`;i===null?n.removeAttribute(s):n.setAttribute(s,i)}function C5(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function w5(e,t={}){let i=n=>F(`Since v31.1 api.flashCells parameter '${n}Delay' is deprecated. Please use '${n}Duration' instead.`);P(t.fadeDelay)&&i("fade"),P(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function y5(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function b5(e){return e.animationFrameService.isQueueEmpty()}function S5(e){e.animationFrameService.flushAllFrames()}function x5(e){return{rowHeight:_s(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function D5(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(Ta)}var E5={version:N,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:v5,refreshCells:C5,flashCells:w5,refreshHeader:y5,isAnimationFrameQueueEmpty:b5,flushAllAnimationFrames:S5,getSizesForCurrentTheme:x5,getCellRendererInstances:D5}};function M5(e){e.valueCache.expire()}function R5(e,t,i){return N1(e,{colKey:t,rowNode:i})}function N1(e,t){let{colKey:i,rowNode:n,useFormatter:s}=t,r=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(X(r))return null;let o=e.valueService.getValueForDisplay(r,n);return s?e.valueService.formatValue(r,n,o)??Ni(o,!0):o}function F5(e){return e.context.getGridId()}function I5(e){e.gridDestroyService.destroy()}function P5(e){return e.gridDestroyService.isDestroyCalled()}function A5(e,t){return e.gos.get(t)}function T5(e,t,i){V1(e,{[t]:i})}function V1(e,t){e.gos.updateGridOptions({options:t})}function k5(e,t,i){e.apiEventService.addEventListener(t,i)}function _5(e,t,i){e.apiEventService.removeEventListener(t,i)}function L5(e,t){e.apiEventService.addGlobalListener(t)}function O5(e,t){e.apiEventService.removeGlobalListener(t)}function N5(e){return e.focusService.getFocusedCell()}function V5(e){return e.focusService.clearFocusedCell()}function H5(e,t,i,n){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})}function B5(e,t){return e.navigationService.tabToNextCell(!1,t)}function G5(e,t){return e.navigationService.tabToNextCell(!0,t)}function z5(e,t,i=!1){let n=e.headerNavigationService.getHeaderPositionForColumn(t,i);n&&e.focusService.focusHeaderPosition({headerPosition:n})}function W5(e,t,i){let n=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:n,buttonElement:i,positionBy:"button"})}function j5(e,t,i){let n=e.columnModel.getCol(t);if(n||(n=e.columnModel.getColDefCol(t)),!n){ae(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:n,mouseEvent:i,positionBy:"mouse"})}function U5(e,t){let i=e.columnModel.getCol(t);if(!i){ae(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function $5(e){e.menuService.hidePopupMenu()}function q5(e,t={}){let i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function K5(e,t,i,n,s){e.expansionService.setRowNodeExpanded(t,i,n,s)}function Y5(e,t){return e.rowModel.getRowNode(t)}function Q5(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)}function Z5(e){return e.rowRenderer.getRenderedNodes()}function X5(e,t,i){e.rowModel.forEachNode(t,i)}function J5(e){return H1(e)}function H1(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function e8(e){return B1(e)}function B1(e){return e.rowRenderer.getLastVirtualRenderedRow()}function t8(e,t){return e.rowModel.getRow(t)}function i8(e){return e.rowModel.getRowCount()}function n8(e){return e.rowModel}function s8(e,t){if(!t.nodes.every(a=>a.rowPinned?(F("cannot select pinned rows"),!1):a.id===void 0?(F("cannot select node until id for node is known"),!1):!0))return;let{nodes:n,source:s,newValue:r}=t,o=n;e.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:r})}function r8(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function o8(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function a8(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function l8(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function c8(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function u8(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function d8(e){return e.selectionService.getSelectedNodes()}function h8(e){return e.selectionService.getSelectedRows()}function g8(e){e.sortController.onSortChanged("api")}var p8={version:N,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:F5,destroy:I5,isDestroyed:P5,getGridOption:A5,setGridOption:T5,updateGridOptions:V1}},f8={version:N,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:s8,selectAll:r8,deselectAll:o8,selectAllFiltered:a8,deselectAllFiltered:l8,selectAllOnCurrentPage:c8,deselectAllOnCurrentPage:u8,getSelectedNodes:d8,getSelectedRows:h8}},m8={version:N,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:q5,setRowNodeExpanded:K5,getRowNode:Y5,addRenderedRowListener:Q5,getRenderedNodes:Z5,forEachNode:X5,getFirstDisplayedRow:J5,getFirstDisplayedRowIndex:H1,getLastDisplayedRow:e8,getLastDisplayedRowIndex:B1,getDisplayedRowAtIndex:t8,getDisplayedRowCount:i8,getModel:n8}},v8={version:N,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:t4,getHorizontalPixelRange:i4,ensureColumnVisible:T1,ensureIndexVisible:k1,ensureNodeVisible:n4}},C8={version:N,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:N5,clearFocusedCell:V5,setFocusedCell:H5,setFocusedHeader:z5,tabToNextCell:B5,tabToPreviousCell:G5}},w8={version:N,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:k5,addGlobalListener:L5,removeEventListener:_5,removeGlobalListener:O5}},y8={version:N,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:M5,getValue:R5,getCellValue:N1}},b8={version:N,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:W5,showColumnMenuAfterMouseClick:j5,showColumnMenu:U5,hidePopupMenu:$5}},S8={version:N,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:g8}},x8={version:N,moduleName:"@ag-grid-community/api",dependantModules:[p8,h5,f8,n5,m8,a5,v8,m5,C8,w8,E5,y8,b8,S8]};function D8(e){return e.stateService?.getState()??{}}function E8(e){switch(e=D({},e),e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=M8(e)}return e}function M8(e){return e.cellSelection=R8(e,"rangeSelection"),e}function R8(e,t){if(e&&typeof e=="object")return e[t]}var F8=class extends E{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=bt(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=bt(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=bt(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=Fe(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",N),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:n})=>{n==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return E8(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());let t=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:n}=this.getInitialState(),s=this.gos.get("advancedFilterModel");(e||s)&&this.setFilterState(e,s),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),n&&this.setPaginationState(n),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());let r=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:r,columnRowGroupChanged:r,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{r()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:o=>{(o.newPage||o.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,cellSelection:t,focusedCell:i,columnOrder:n}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!n?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());let s=this.getRangeSelectionState();this.updateCachedState("rangeSelection",s),this.updateCachedState("cellSelection",s),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:r=>{if(r.finished){let o=this.getRangeSelectionState();this.updateCachedState("rangeSelection",o),this.updateCachedState("cellSelection",o)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let e=this.columnModel.isPivotMode(),t=[],i=[],n=[],s=[],r=[],o=[],a=[],l=[],c=[],u=0,d=this.columnGetStateService.getColumnState();for(let h=0;h<d.length;h++){let{colId:g,sort:p,sortIndex:f,rowGroup:m,rowGroupIndex:v,aggFunc:C,pivot:w,pivotIndex:y,pinned:S,hide:b,width:M,flex:R}=d[h];c.push(g),p&&(t[f??u++]={colId:g,sort:p}),m&&(i[v??0]=g),typeof C=="string"&&n.push({colId:g,aggFunc:C}),w&&(s[y??0]=g),S&&(S==="right"?o:r).push(g),b&&a.push(g),(R||M)&&l.push({colId:g,flex:R??void 0,width:M})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:s.length||e?{pivotMode:e,pivotColIds:s}:void 0,columnPinning:r.length||o.length?{leftColIds:r,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){let{sort:t,rowGroup:i,aggregation:n,pivot:s,columnPinning:r,columnVisibility:o,columnSizing:a,columnOrder:l,partialColumnState:c}=e,u={},d=m=>{let v=u[m];return v||(v={colId:m},u[m]=v,v)},h=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:m,sort:v},C)=>{let w=d(m);w.sort=v,w.sortIndex=C}),h.sort=null,h.sortIndex=null),i&&(i.groupColIds.forEach((m,v)=>{let C=d(m);C.rowGroup=!0,C.rowGroupIndex=v}),h.rowGroup=null,h.rowGroupIndex=null),n&&(n.aggregationModel.forEach(({colId:m,aggFunc:v})=>{d(m).aggFunc=v}),h.aggFunc=null),s&&(s.pivotColIds.forEach((m,v)=>{let C=d(m);C.pivot=!0,C.pivotIndex=v}),this.gos.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"}),h.pivot=null,h.pivotIndex=null),r&&(r.leftColIds.forEach(m=>{d(m).pinned="left"}),r.rightColIds.forEach(m=>{d(m).pinned="right"}),h.pinned=null),o&&(o.hiddenColIds.forEach(m=>{d(m).hide=!0}),h.hide=null),a&&(a.columnSizingModel.forEach(({colId:m,flex:v,width:C})=>{let w=d(m);w.flex=v??null,w.width=C}),h.flex=null);let g=l?.orderedColIds,p=!!g?.length,f=p?g.map(m=>d(m)):Object.values(u);f.length&&(this.columnStates=f,this.columnApplyStateService.applyColumnState({state:f,applyOrder:p,defaultState:h},"gridInitializing"))}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){let n=[];for(let s of t)this.pivotResultColsService.getPivotResultCol(s.colId)&&n.push(s);this.columnApplyStateService.applyColumnState({state:n,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){let e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:n})=>{n&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let t=new Set(e.columnGroup?.openColumnGroupIds),n=this.columnGroupStateService.getColumnGroupState().map(({groupId:s})=>{let r=t.has(s);return r&&t.delete(s),{groupId:s,open:r}});t.forEach(s=>{n.push({groupId:s,open:!0})}),n.length&&(this.columnGroupStates=n),this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){let{filterModel:i,advancedFilterModel:n}=e??{advancedFilterModel:t};i&&this.filterManager?.setFilterModel(i,"columnFilter"),n&&this.filterManager?.setAdvancedFilterModel(n)}getRangeSelectionState(){let e=this.rangeService?.getCellRanges().map(t=>{let{id:i,type:n,startRow:s,endRow:r,columns:o,startColumn:a}=t;return{id:i,type:n,startRow:s,endRow:r,colIds:o.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeService:i,columnModel:n,visibleColsService:s}=this;if(!Vi(t)||!i)return;let r=[];if(e.cellRanges.forEach(o=>{let a=[];if(o.colIds.forEach(c=>{let u=n.getCol(c);u&&a.push(u)}),!a.length)return;let l=n.getCol(o.startColId);if(!l){let c=s.getAllCols(),u=new Set(a);l=c.find(d=>u.has(d))}r.push(_(D({},o),{columns:a,startColumn:l}))}),Ok(t)&&Nk(t)&&r.length>1)return F("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(r)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:i}=e?.getVScrollPosition()??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:i}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.focusService.getFocusedCell();if(e){let{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:i,rowPinned:n}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),i=!1;Object.entries(t).forEach(([n,s])=>{La(s,this.cachedState[n])||(i=!0)}),this.cachedState=D(D({},this.cachedState),t),i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let i=this.cachedState[e];this.setCachedStateValue(e,t),La(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=_(D({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},G1={version:N,moduleName:"@ag-grid-community/state-core",beans:[F8]},I8={version:N,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:D8},dependantModules:[G1]},P8={version:N,moduleName:"@ag-grid-community/state",dependantModules:[G1,I8]};function A8(e){return e.rowModel.isLastRowIndexKnown()}function T8(e){return e.paginationService?.getPageSize()??100}function k8(e){return e.paginationService?.getCurrentPage()??0}function _8(e){return e.paginationService?.getTotalPages()??1}function L8(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function O8(e){e.paginationService?.goToNextPage()}function N8(e){e.paginationService?.goToPreviousPage()}function V8(e){e.paginationService?.goToFirstPage()}function H8(e){e.paginationService?.goToLastPage()}function B8(e,t){e.paginationService?.goToPage(t)}var G8=class extends E{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let i=Math.max(_s(this.gos),1),n=Math.floor(e/i);this.paginationService.setPageSize(n,"autoCalculated")};this.isBodyRendered?bt(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function z8(e,t,i){e.addManagedElementListeners(t,{keydown:n=>{if(!n.defaultPrevented&&n.key===x.TAB){let s=n.shiftKey;i.findNextFocusableElement(t,!1,s)||i.focusNextGridCoreContainer(s)&&n.preventDefault()}}})}var Ra="paginationPageSizeSelector",W8=class extends oe{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(Ra,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){lt(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Ra)!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){let s=this.gos.exists("paginationPageSize"),r=this.gos.get(Ra)!==!0;F(`'paginationPageSize=${t}'${s?"":" (default value)"}, but ${t} is not included in${r?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),r||F(`Either set '${Ra}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}let n=String(i?"":t);this.selectPageSizeComp?(Qn(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){let i=this.localeService.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),s=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Em).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(s).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get(Ra);return!Array.isArray(t)||Ut(t)?e:[...t].sort((i,n)=>i-n)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},j8={selector:"AG-PAGE-SIZE-SELECTOR",component:W8},U8=class extends L1{constructor(){super(),this.btFirst=T,this.btPrevious=T,this.btNext=T,this.btLast=T,this.lbRecordCount=T,this.lbFirstRowOnPage=T,this.lbLastRowOnPage=T,this.lbCurrent=T,this.lbTotal=T,this.pageSizeComp=T,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[j8]);let{btFirst:t,btPrevious:i,btNext:n,btLast:s}=this;this.activateTabIndex([t,i,n,s]),t.insertAdjacentElement("afterbegin",jt(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",jt(e?"next":"previous",this.gos)),n.insertAdjacentElement("afterbegin",jt(e?"previous":"next",this.gos)),s.insertAdjacentElement("afterbegin",jt(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):this.focusService.focusGridInnerElement(r)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:n=>{(n.key===x.ENTER||n.key===x.SPACE)&&(n.preventDefault(),i())}})}),z8(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});let i=this.localeService.getLocaleTextFunc(),n=i("thousandSeparator",","),s=i("decimalSeparator",".");return dO(e,n,s)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),s=e("firstPage","First Page"),r=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${i}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${n}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${n}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let n=this.isZeroPagesToDisplay(),s=e===i-1;this.nextButtonDisabled=s||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){D_(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),n=e?i:null;if(n===1){let C=this.rowModel.getRow(0);if(C&&C.group&&!(C.groupData||C.aggData)){this.setTotalLabelsToZero();return}}let s=this.paginationService.getCurrentPage(),r=this.paginationService.getPageSize(),o,a;this.isZeroPagesToDisplay()?o=a=0:(o=r*s+1,a=o+r-1,e&&a>n&&(a=n));let l=o+r-1,c=!e&&i<l,u=this.formatNumber(o);this.lbFirstRowOnPage.textContent=u;let d,h=this.localeService.getLocaleTextFunc();c?d=h("pageLastRowUnknown","?"):d=this.formatNumber(a),this.lbLastRowOnPage.textContent=d;let p=t>0?s+1:0,f=this.formatNumber(p);this.lbCurrent.textContent=f;let m,v;if(e)m=this.formatNumber(t),v=this.formatNumber(n);else{let C=h("more","more");m=C,v=C}this.lbTotal.textContent=m,this.lbRecordCount.textContent=v,this.announceAriaStatus(u,d,v,f,m)}announceAriaStatus(e,t,i,n,s){let r=this.localeService.getLocaleTextFunc(),o=r("page","Page"),a=r("to","to"),l=r("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,u=`${o} ${n} ${l} ${s}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,this.ariaAnnouncementService.announceValue(u,"paginationPage"))}setTotalLabelsToZero(){let e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},$8={selector:"AG-PAGINATION",component:U8},q8=class extends E{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return $8}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return P(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:P(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:P(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:P(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let n=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=n-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}},z1={version:N,moduleName:"@ag-grid-community/pagination-core",beans:[q8,G8]},K8={version:N,moduleName:"@ag-grid-community/pagination-api",dependantModules:[z1],apiFunctions:{paginationIsLastPageFound:A8,paginationGetPageSize:T8,paginationGetCurrentPage:k8,paginationGetTotalPages:_8,paginationGetRowCount:L8,paginationGoToNextPage:O8,paginationGoToPreviousPage:N8,paginationGoToFirstPage:V8,paginationGoToLastPage:H8,paginationGoToPage:B8}},Y8={version:N,moduleName:"@ag-grid-community/pagination",dependantModules:[z1,K8]},It="clientSide",Ct="serverSide",Gr="infinite",Q8={onGroupExpandedOrCollapsed:[It],refreshClientSideRowModel:[It],isRowDataEmpty:[It],forEachLeafNode:[It],forEachNodeAfterFilter:[It],forEachNodeAfterFilterAndSort:[It],resetRowHeights:[It],applyTransaction:[It],applyTransactionAsync:[It],flushAsyncTransactions:[It],getBestCostNodeSelection:[It],getServerSideSelectionState:[Ct],setServerSideSelectionState:[Ct],applyServerSideTransaction:[Ct],applyServerSideTransactionAsync:[Ct],applyServerSideRowData:[Ct],retryServerSideLoads:[Ct],flushServerSideAsyncTransactions:[Ct],refreshServerSide:[Ct],getServerSideGroupLevelState:[Ct],refreshInfiniteCache:[Gr],purgeInfiniteCache:[Gr],getInfiniteRowCount:[Gr],isLastRowIndexKnown:[Gr,Ct],expandAll:[It,Ct],collapseAll:[It,Ct],onRowHeightChanged:[It,Ct],setRowCount:[Gr,Ct],getCacheBlockState:[Gr,Ct]},Z8={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function X8(e,t,i){let n=Z8[e];if(n){let{version:r,new:o,old:a,message:l}=n,c=a??e;return(...u)=>{let d=o?`Please use ${o} instead. `:"";return F(`Since ${r} api.${c} is deprecated. ${d}${l??""}`),t.apply(t,u)}}let s=Q8[e];return s?(...r)=>{let o=i.rowModel.getType();if(!s.includes(o)){ae(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,r)}:t}var J8={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},Wn=(e,t)=>{let i=t.rowModelType??"clientSide";return i==="clientSide"||i==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},eH={enableRowGroup:Wn,rowGroup:Wn,rowGroupIndex:Wn,enablePivot:Wn,enableValue:Wn,pivot:Wn,pivotIndex:Wn,aggFunc:Wn,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(i=>t.includes(i))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>zr},tH={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},iH=Object.keys(tH),zr={objectName:"colDef",allProperties:iH,docsUrl:"column-properties/",deprecations:J8,validations:eH},nH=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),sH={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},rH=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{let i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{let t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>zr,defaultColDef:()=>zr,defaultColGroupDef:()=>zr,autoGroupColumnDef:()=>zr,selectionColumnDef:()=>zr}),oH=()=>({objectName:"gridOptions",allProperties:[...Va.ALL_PROPERTIES,...Ha.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:nH(),validations:rH()}),aH=class extends E{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,oH())}validateApiFunction(e,t){return X8(e,t,this.beans)}processOptions(e,t){let{validations:i,deprecations:n,allProperties:s,propertyExceptions:r,objectName:o,docsUrl:a}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(n)],s,o,a);let l=new Set;Object.keys(e).forEach(u=>{let d=n[u];if(d)if("renamed"in d){let{renamed:w,version:y}=d;l.add(`As of v${y}, ${String(u)} is deprecated. Please use ${String(w)} instead.`),e[w]=e[u]}else{let{message:w,version:y}=d;l.add(`As of v${y}, ${String(u)} is deprecated. ${w??""}`)}let h=e[u];if(h==null||h===!1)return;let g=i[u],p;if(g)if(typeof g=="function"){let w=g(e,this.gridOptions);if(!w)return;if("objectName"in w){let y=e[u];if(Array.isArray(y)){y.forEach(S=>{this.processOptions(S,w)});return}this.processOptions(e[u],w);return}p=w}else p=g;else return;let{module:f,dependencies:m,validate:v,supportedRowModels:C}=p;if(C){let w=this.gridOptions.rowModelType??"clientSide";if(!C.includes(w)){l.add(`${String(u)} is not supported with the '${w}' row model.`);return}}if(f){let w=Array.isArray(f)?f:[f],y=!0;if(w.forEach(S=>{this.gos.assertModuleRegistered(S,String(u))||(y=!1,l.add(`${String(u)} is only available when ${S} is loaded.`))}),!y)return}if(m){let w=this.checkForRequiredDependencies(u,m,e);if(w){l.add(w);return}}if(v){let w=v(e,this.gridOptions);if(w){l.add(w);return}}}),l.size>0&&l.forEach(u=>{F(u)})}checkForRequiredDependencies(e,t,i){let s=Object.entries(t).find(([a,l])=>{let c=i[a];return!l.includes(c)});if(!s)return null;let[r,o]=s;return o.length>1?`'${String(e)}' requires '${r}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${o[0]}.`}checkProperties(e,t,i,n,s){let r=["__ob__","__v_skip","__metadata__"],o=lH(Object.getOwnPropertyNames(e),[...r,...t,...i],i);if(ti(o,(a,l)=>{let c=`invalid ${n} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;i.includes("context")&&(c+=`
If you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),F(c)}),Object.keys(o).length>0&&s){let a=this.getFrameworkOverrides().getDocLink(s);F(`to see all the valid ${n} properties please check: ${a}`)}}};function lH(e,t,i){let n={},s=e.filter(r=>!t.some(o=>o===r));return s.length>0&&s.forEach(r=>n[r]=jx({inputValue:r,allSuggestions:i}).values),n}var cH={version:N,moduleName:"@ag-grid-community/core"},uH={version:N,moduleName:"@ag-grid-community/core-validations",beans:[aH]},W1={version:N,moduleName:"@ag-grid-community/core-community-features",dependantModules:[cH,uH,b4,YO,P8,i5,dV,Y8,x8]},dH=class extends E{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Vu=new Set(["gridPreDestroyed","fillStart","pasteStart"]),hH=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",gH=new Map([...Va.BOOLEAN_PROPERTIES.map(e=>[e,Hf]),...Va.NUMBER_PROPERTIES.map(e=>[e,l1]),["groupAggFiltering",e=>typeof e=="function"?e:Hf(e)],["pageSize",Li(1)],["autoSizePadding",Li(0)],["keepDetailRowsCount",Li(1)],["rowBuffer",Li(0)],["infiniteInitialRowCount",Li(1)],["cacheOverflowSize",Li(1)],["cacheBlockSize",Li(1)],["serverSideInitialRowCount",Li(1)],["viewportRowModelPageSize",Li(1)],["viewportRowModelBufferSize",Li(0)]]);function j1(e,t){let i=gH.get(e);return i?i(t):t}function pH(e){let t={};return Object.entries(e).forEach(([i,n])=>{let s=j1(i,n);t[i]=s}),t}var U1=class $1 extends E{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Zr,this.globalEventHandlerFactory=t=>(i,n)=>{if(!this.isAlive())return;let s=Vu.has(i);if(s&&!t||!s&&t)return;let r=Ha.getCallbackForEvent(i),o=this.gridOptions[r];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(n)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:i})=>{this.updateGridOptions({options:i,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??sH[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return P(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(n=>{let s=n;return s.api=this.api,s.context=this.gridOptionsContext,t(s)})}updateGridOptions({options:t,force:i,source:n="api"}){let s={id:$1.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([o,a])=>{n==="api"&&C_[o]&&F(`${o} is an initial property and cannot be updated.`);let l=j1(o,a),c=i||typeof l=="object"&&n==="api",u=this.gridOptions[o];if(c||u!==l){this.gridOptions[o]=l;let d={type:o,currentValue:l,previousValue:u,changeSet:s,source:n};r.push(d)}}),this.validationService?.processGridOptions(this.gridOptions),s.properties=r.map(o=>o.type),r.forEach(o=>{this.gridOptions.debug&&ii(`Updated property ${o.type} from`,o.previousValue," to ",o.currentValue),this.propertyEventService.dispatchEvent(o)})}addPropertyEventListener(t,i){this.propertyEventService.addEventListener(t,i)}removePropertyEventListener(t,i){this.propertyEventService.removeEventListener(t,i)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){let i=t;return i.api=this.api,i.context=this.gridOptionsContext,i}assertModuleRegistered(t,i){return ln.__assertRegistered(t,i,this.gridId)}isModuleRegistered(t){return ln.__isRegistered(t,this.gridId)}};U1.changeSetId=0;var fH=U1,mH=class extends E{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,n;if(ke(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(n=`getCol${t}`,i=this.visibleColsService[n](e.column)),!i)return;let{headerRowIndex:s}=e;if(this.getHeaderRowType(s)!=="filter"){let a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-s]}let{column:r,headerRowIndex:o}=this.getHeaderIndexToFocus(i,s);return{column:r,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let i;if(ke(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){let n=e;i=n.getLeafColumns()[0];let s=i;for(;s!==n;)t++,s=s.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let i=this.getHeaderRowType(t),n=i==="filter",s=i==="column",r=n?e:e.getParent(),o=t-1,a=o;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;a=o,o<0&&(r=e,o=t,a=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,i="After"){let n=this.getHeaderRowType(t),s=e,r=t+1,o=r;if(n==="group"){let a=e.getDisplayedLeafColumns(),l=i==="After"?a[0]:te(a),c=[],u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(s=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){let h=c[d];if(!h.isPadding()){s=h;break}r++}else s=te(c),s||(s=l)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let i=this.visibleColsService.getAllCols(),n=i[t==="start"?0:i.length-1];if(!n)return;let r=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned())?.getRowType(e);if(r=="group"){let o=this.visibleColsService.getColGroupAtLevel(n,e);return{headerRowIndex:e,column:o}}return{headerRowIndex:r==null?-1:e,column:n}}},vH=class extends E{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let e=this.gos.getCallback("getLocaleText");if(e)return(i,n,s)=>e({key:i,defaultValue:n,variableValues:s});let t=this.gos.get("localeText");return(i,n,s)=>{let r=t&&t[i];if(r&&s&&s.length){let o=0;for(;!(o>=s.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",s[o++])}return r??n}}},CH=class extends E{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new um(this.getFrameworkOverrides())}addEventListener(e,t){let i=this.frameworkEventWrappingService.wrap(t),n=Bu(this.gos)&&!Vu.has(e),s=n?this.asyncEventListeners:this.syncEventListeners;s.has(e)||s.set(e,new Set),s.get(e).add(i),this.eventService.addEventListener(e,i,n)}removeEventListener(e,t){let i=this.frameworkEventWrappingService.unwrap(t),s=!!this.asyncEventListeners.get(e)?.delete(i);s||this.syncEventListeners.get(e)?.delete(i),this.eventService.removeEventListener(e,i,s)}addGlobalListener(e){let t=this.frameworkEventWrappingService.wrapGlobal(e);if(Bu(this.gos)){let n=(r,o)=>{Vu.has(r)&&t(r,o)},s=(r,o)=>{Vu.has(r)||t(r,o)};this.globalEventListenerPairs.set(e,{syncListener:n,asyncListener:s}),this.eventService.addGlobalListener(n,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){let t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){let{syncListener:n,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(n,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,n)=>{i.forEach(s=>this.eventService.removeEventListener(n,s,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},wH=class extends E{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},yH=class extends E{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return X(this.topRowBounds)||X(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=P(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},bH=class extends E{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=bt(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){let e=Pe(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),Sx(t,"polite"),x_(t,"additions text"),S_(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(lt(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},SH=class extends E{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}let i=n=>{for(;n.length;){let s=n.pop();s&&s()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),i(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),i(this.executeLaterFuncs)},200)})}},xH=class extends E{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},DH=class extends E{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=Fe(this.gos);let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){F("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){let n=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(n,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){let e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;this.state===2?e=this.ctrlsService.get("gridHeaderCtrl")?.getHeaderHeight()||0:this.wrapperPadding!==0&&(e=0),this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},EH=class extends E{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){let t=[];return P(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),MS(t,this.processClassesFromGridOptions(e.rowNode)),MS(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],i=r=>{typeof r=="string"?t.push(r):Array.isArray(r)&&r.forEach(o=>t.push(o))},n=this.gos.get("rowClass");if(n){if(typeof n=="function")return F("rowClass should not be a function, please use getRowClass instead"),[];i(n)}let s=this.gos.getCallback("getRowClass");if(s){let r={data:e.data,node:e,rowIndex:e.rowIndex},o=s(r);i(o)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){let n=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),n,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},MH=class extends E{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=__(),this.gos.get("debug")&&ii("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&ii(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},RH=class extends E{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Oi(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Oi(this.gos))}doFullSort(e,t){let i=(s,r)=>({currentPos:r,rowNode:s}),n=e.map(i);return n.sort(this.compareRowNodes.bind(this,t)),n.map(s=>s.rowNode)}compareRowNodes(e,t,i){let n=t.rowNode,s=i.rowNode;for(let r=0,o=e.length;r<o;r++){let a=e[r],l=a.sort==="desc",c=this.getValue(n,a.column),u=this.getValue(s,a.column),d,h=this.getComparator(a,n);if(h?d=h(c,u,n,s,l):d=Ak(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return t.currentPos-i.currentPos}getComparator(e,t){let i=e.column,n=i.getColDef().comparator;if(n!=null)return n;if(!i.getColDef().showRowGroup)return;let s=!t.group&&i.getColDef().field;if(!s)return;let r=this.columnModel.getColDefCol(s);if(r)return r.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(ed(this.gos,this.columnModel.isPivotActive())){let r=e.allLeafChildren?.[0];return r?this.valueService.getValue(t,r,!1,!1):void 0}let s=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return s?e.groupData?.[s.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},ad=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let n=0;n<e.childrenAfterGroup.length;n++){let s=e.childrenAfterGroup[n];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[n],t,i):i&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){let n={rowNode:t,children:null};this.mapToItems[t.id]=n,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(n=>this.nodeIdsToColumns[i.id][n.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){let s=this.mapToItems[i.id],r=this.mapToItems[i.parent.id];r.children||(r.children=[]),r.children.push(s),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let i=this.nodeIdsToColumns[e.id];return t.filter(s=>i[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let i=this.nodeIdsToColumns[e.id];return t.filter(s=>!i[s.getId()])}},q1=class extends E{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new P4,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){let{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=zu(e),this.groupSelectsChildren=Hs(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{let n=Hs(e),s=zu(e);(n!==this.groupSelectsChildren||s!==this.rowSelectionMode)&&(this.groupSelectsChildren=n,this.rowSelectionMode=s,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!hH(t))return e;let i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){let{newValue:t,clearSelection:i,suppressFinishActions:n,rangeSelect:s,nodes:r,event:o,source:a}=e;if(r.length===0)return 0;if(r.length>1&&!this.isMultiSelect())return F("cannot multi select unless selection mode is 'multiRow'"),0;let l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=r.map(d=>d.footer?d.sibling:d);if(s){if(c.length>1)return F("cannot range select while selecting multiple rows"),0;let d=c[0],h=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(d)){let g=this.selectionCtx.truncate(d);return h&&this.selectRange(g.discard,!1,a),this.selectRange(g.keep,h,a)}else if(this.selectionCtx.getRoot()!==d){let f=this.selectionCtx.extend(d,this.groupSelectsChildren);return h&&this.selectRange(f.discard,!1,a),this.selectRange(f.keep,h,a)}}}n||this.selectionCtx.setRoot(c[0]);let u=0;for(let d=0;d<c.length;d++){let h=c[d];l&&h.group||h.selectThisNode(t,o,a)&&u++,this.groupSelectsChildren&&h.childrenAfterGroup?.length&&(u+=this.selectChildren(h,t,l,a))}return n||(t&&(i||!this.isMultiSelect())&&(u+=this.clearOtherNodes(c[0],a)),u>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),u}selectRange(e,t,i){let n=0;return e.forEach(s=>{if(s.group&&this.groupSelectsChildren)return;s.selectThisNode(t,void 0,i)&&n++}),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i,n){let s=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return X(s)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:n,nodes:s})}getSelectedNodes(){let e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((i,n)=>{i&&e(i)&&t.set(n,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!Fe(this.gos))return!1;let n=this.rowModel.getRootNode();t||(t=new ad(!0,n),t.setInactive());let s=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==n){let o=r.calculateSelectedFromChildren();s=r.selectThisNode(o===null?!1:o,void 0,e)||s}}),s}clearOtherNodes(e,t){let i=new Map,n=0;return this.selectedNodes.forEach(s=>{if(s&&s.id!==e.id){let r=this.selectedNodes.get(s.id);n+=r.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&s.parent&&i.set(s.parent.id,s.parent)}}),i.forEach(s=>{let r=s.calculateSelectedFromChildren();s.selectThisNode(r===null?!1:r,void 0,t)}),n}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(P(t)&&e.id!==t.id&&t){let n=t.id;this.selectedNodes.get(n)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!Fe(this.gos))return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let i=[];function n(s){for(let r=0,o=s.length;r<o;r++){let a=s[r];if(a.isSelected())i.push(a);else{let l=a;l.group&&l.children&&n(l.children)}}}return n(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){let t=o=>o.selectThisNode(!1,void 0,n),i=Fe(this.gos),{source:n,justFiltered:s,justCurrentPage:r}=e;if(r||s){if(!i){ae("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,r).forEach(t)}else this.selectedNodes.forEach(o=>{o&&t(o)}),this.reset(n);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)}getSelectedCounts(e,t){let i=0,n=0,s=r=>{this.groupSelectsChildren&&r.group||(r.isSelected()?i++:r.selectable&&n++)};return this.getNodesToSelect(e,t).forEach(s),{selectedCount:i,notSelectedCount:n}}getSelectAllState(e,t){let{selectedCount:i,notSelectedCount:n}=this.getSelectedCounts(e,t);return i===0&&n===0?!1:i>0&&n>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();let i=[];if(t)return this.forEachNodeOnPage(s=>{if(!s.group){i.push(s);return}if(!s.expanded){let r=o=>{i.push(o),o.childrenAfterFilter?.length&&o.childrenAfterFilter.forEach(r)};r(s);return}this.groupSelectsChildren||i.push(s)}),i;let n=this.rowModel;return e?(n.forEachNodeAfterFilter(s=>{i.push(s)}),i):(n.forEachNode(s=>{i.push(s)}),i)}forEachNodeOnPage(e){let t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let n=t;n<=i;n++){let s=this.rowModel.getRow(n);s&&e(s)}}selectAllRowNodes(e){if(Lk(this.gos)&&!am(this.gos))return F("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();let{source:t,justFiltered:i,justCurrentPage:n}=e,s=this.getNodesToSelect(i,n);s.forEach(r=>r.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(s[0]??null),this.selectionCtx.setEndRange(te(s)??null),Fe(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return ae("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");let i=new Set(e),n=[];this.rowModel.forEachNode(s=>{i.has(s.id)&&n.push(s)}),this.setNodesSelected({newValue:!0,nodes:n,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!Fe(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},FH=class extends E{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){let{gos:t}=this,i=Hu(t),n=om(t);if(!i||!n)return;let s=Hs(t),r=Fe(t)&&s,o=[],a=l=>{if(e&&!l.group)return;if(r&&l.group){let u=l.childrenAfterGroup.some(d=>d.selectable===!0);l.setRowSelectable(u,!0);return}let c=n?.(l)??!0;l.setRowSelectable(c,!0),!c&&l.isSelected()&&o.push(l)};if(r){let l=this.rowModel;new ad(!1,l.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);o.length&&this.selectionService.setNodesSelected({nodes:o,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof q1&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},KS=["asc","desc",null],IH=class extends E{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){let n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}setSortForColumn(e,t,i,n){t!=="asc"&&t!=="desc"&&(t=null);let s=Oi(this.gos),r=[e];if(s&&e.getColDef().showRowGroup){let c=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(u=>u.isSortable());c&&(r=[e,...c])}r.forEach(l=>l.setSort(t,n));let o=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){let l=this.clearSortBarTheseColumns(r,n);a.push(...l)}this.updateSortIndex(e),a.push(...r),this.dispatchSortChangedEvents(n,a)}updateSortIndex(e){let t=Oi(this.gos),i=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),n=t&&i||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(a=>a.setSortIndex(null));let r=s.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==n);(n.getSort()?[...r,n]:r).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){let i=[];return this.columnModel.getAllCols().forEach(n=>{e.includes(n)||(n.getSort()&&i.push(n),n.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=KS,!Array.isArray(t)||t.length<=0)return F(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;let i=t.indexOf(e.getSort()),n=i<0,s=i==t.length-1,r;return n||s?r=t[0]:r=t[i+1],KS.indexOf(r)<0?(F("invalid sort type ",r),null):r}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(r=>!!r.getSort());if(this.columnModel.isPivotMode()){let r=Oi(this.gos);e=e.filter(o=>{let a=!!o.getAggFunc(),l=!o.isPrimary(),c=r?this.showRowGroupColsService?.getShowRowGroupCol(o.getId()):o.getColDef().showRowGroup;return a||l||c})}let t=this.funcColsService.getRowGroupColumns().filter(r=>!!r.getSort()),i={};e.forEach((r,o)=>i[r.getId()]=o),e.sort((r,o)=>{let a=r.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let c=i[r.getId()],u=i[o.getId()];return c>u?1:-1}else return l==null?-1:1});let n=Oi(this.gos)&&!!t.length;n&&(e=[...new Set(e.map(r=>this.showRowGroupColsService?.getShowRowGroupCol(r.getId())??r))]);let s=new Map;return e.forEach((r,o)=>s.set(r,o)),n&&t.forEach(r=>{let o=this.showRowGroupColsService.getShowRowGroupCol(r.getId());s.set(r,s.get(o))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,n])=>t-n).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=Oi(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){let t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=n[0].getSort();return n.every(o=>o.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},PH=class extends E{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});let e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&ii(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,Ps(e.source))}}},AH="paste",TH=class extends E{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){Fe(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==AH&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;let i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let n=this.gos.get("aggregateOnlyChangedColumns"),s=new ad(n,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(r=>{i.push(r)})}this.rowRenderer.refreshCells({rowNodes:i})}},kH=class extends E{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);ae("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return ii("Processing of the expression failed"),ii("Expression = ",e),ii("Params = ",t),ii("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},_H=class extends E{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},LH=class extends E{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=gn(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=i=>this.callColumnCellValueChangedHandler(i),t=Bu(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e,t){let i=t.leafGroup&&this.columnModel.isPivotMode(),n=t.group&&t.expanded&&!t.footer&&!i,s=this.gos.get("groupSuppressBlankHeader");if(!n||s)return this.getValue(e,t);let r=!1,o=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof o!="function"?r=!!o:r=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});let a=n&&r;return this.getValue(e,t,!1,a)}getValue(e,t,i=!1,n=!1){if(this.initialised||this.init(),!t)return;let s=e.getColDef(),r=s.field,o=e.getColId(),a=t.data,l,c=t.groupData&&t.groupData[o]!==void 0,u=!n&&t.aggData&&t.aggData[o]!==void 0,d=this.isSsrm&&n&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&s.filterValueGetter?l=this.executeFilterValueGetter(s.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[o]:this.isTreeData&&s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):this.isTreeData&&r&&a?l=Pa(a,r,e.isFieldContainsDots()):c?l=t.groupData[o]:u?l=t.aggData[o]:s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):h?l=Pa(a,t.field,e.isFieldContainsDots()):r&&a&&!d&&(l=Pa(a,r,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let g=l.substring(1);l=this.executeValueGetter(g,a,e,t)}if(l==null){let g=this.getOpenedGroup(t,e);if(g!=null)return g}return l}parseValue(e,t,i,n){let s=e.getColDef(),r=s.valueParser;if(P(r)){let o=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:n,newValue:i,colDef:s,column:e});return typeof r=="function"?r(o):this.expressionService.evaluate(r,o)}return i}getDeleteValue(e,t){return P(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,n,s=!0){let r=null,o,a=e.getColDef();if(n?o=n:s&&(o=a.valueFormatter),o){let l=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});typeof o=="function"?r=o(l):r=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[i]||"";return r==null&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let n=t.getColDef().showRowGroup,s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(n===!0||n===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,n){let s=this.columnModel.getColDefCol(t);if(!e||!s)return!1;X(e.data)&&(e.data={});let{field:r,valueSetter:o}=s.getColDef();if(X(r)&&X(o))return F("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(s,i))return F("Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s});a.newValue=i;let l;if(P(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(e.data,r,i,s.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();let c=this.getValue(s,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:n}),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let s=!1;if(!n)s=e[t]===i,s||(e[t]=i);else{let r=t.split("."),o=e;for(;r.length>0&&o;){let a=r.shift();r.length===0?(s=o[a]===i,s||(o[a]=i)):o=o[a]}}return!s}executeFilterValueGetter(e,t,i,n){let s=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,t,i,n){let s=i.getColId(),r=this.valueCache.getValue(n,s);if(r!==void 0)return r;let o=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)}),a;return typeof e=="function"?a=e(o):a=this.expressionService.evaluate(e,o),this.valueCache.setValue(n,s,a),a}getValueCallback(e,t){let i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){let i=this.getValue(e,t),n=e.getColDef().keyCreator,s=i;if(n){let r=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});s=n(r)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&F("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),s}},Vm=class Is{static applyGlobalGridOptions(t){if(!Is.gridOptions)return t;let i={};return yt(i,Is.gridOptions,!0,!0),Is.mergeStrategy==="deep"?yt(i,t,!0,!0):i=D(D({},i),t),Is.gridOptions.context&&(i.context=Is.gridOptions.context),t.context&&(Is.mergeStrategy==="deep"&&i.context&&yt(t.context,i.context,!0,!0),i.context=t.context),i}};Vm.gridOptions=void 0;Vm.mergeStrategy="shallow";var OH=Vm;function K1(e,t,i){if(!t)return ae("No gridOptions provided to createGrid"),{};let n=new VH().create(e,t,s=>{let r=new cV(e);s.createBean(r)},void 0,i);if(!Object.isFrozen(t)&&!i?.frameworkOverrides){let s="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{ae(`gridOptions.api is no longer supported. See ${s}.`)},configurable:!0})}return n}var NH=1,VH=class{create(e,t,i,n,s){let r=OH.applyGlobalGridOptions(t),o=pH(r),a=o.gridId??String(NH++),l=this.getRegisteredModules(s,a),c=this.createBeansList(o.rowModelType,l,a),u=this.createProvidedBeans(e,o,s);if(!c){ae("Failed to create grid.");return}let d={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:Q4,beanDestroyComparator:Z4,derivedBeans:[G4]},h=new LL(d);return this.registerModuleUserComponents(h,l),this.registerControllers(h,l),this.registerModuleApiFunctions(h,l),i(h),h.getBean("syncService").start(),n&&n(h),h.getBean("gridApi")}registerControllers(e,t){let i=e.getBean("ctrlsFactory");t.forEach(n=>{n.controllers&&n.controllers.forEach(s=>i.register(s))})}getRegisteredModules(e,t){let i=e?e.modules:null,n=ln.__getRegisteredModules(t),s=[],r={},o=(a,l,c)=>{(d=>{r[d.moduleName]||(r[d.moduleName]=!0,s.push(d),ln.__register(d,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(d=>o(a,d,c))};return o(!!i?.length||!ln.__isPackageBased(),W1,void 0),i&&i.forEach(a=>o(!0,a,t)),n&&n.forEach(a=>o(!ln.__isPackageBased(),a,void 0)),s}registerModuleUserComponents(e,t){let i=this.extractModuleEntity(t,s=>s.userComponents?s.userComponents:[]),n=e.getBean("userComponentRegistry");i.forEach(({name:s,classImp:r,params:o})=>{n.registerDefaultComponent(s,r,o)})}registerModuleApiFunctions(e,t){let i=e.getBean("apiFunctionService");t.forEach(n=>{let s=n.apiFunctions;s&&Object.keys(s).forEach(o=>{i?.addFunction(o,s[o])})})}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;X(n)&&(n=new Om);let s={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(s,i.providedBeanInstances),s}createBeansList(e="clientSide",t,i){let n=t.filter(l=>!l.rowModel||l.rowModel===e),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e]){ae("Could not find row model for rowModelType = ",e);return}if(!ln.__assertRegistered(s[e],`rowModelType = '${e}'`,i))return;let r=[iV,eV,mH,dH,B4,fL,q4,K4,L6,Ux,MH,k6,vH,M4,HL,f_,rV,fH,O4,q1,i_,eN,yH,wH,D4,kH,t_,T6,_H,LH,S4,_6,OL,oV,A6,nV,V4,A4,P6,IH,xH,SH,FH,TH,O6,z4,EH,RH,J4,aV,tV,X4,PH,DH,N6,CH,bH,V6,r_,W4,o_,n_,j4,U4,p_,s_,h_,$4,g_,Qk],o=this.extractModuleEntity(n,l=>l.beans?l.beans:[]);r.push(...o);let a=[];return r.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},Y1=class extends E{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){let e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function HH(e){e.expansionService.expandAll(!0)}function BH(e){e.expansionService.expandAll(!1)}function GH(e){let t=e.rowModelHelperService?.getClientSideRowModel(),i=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function zH(e,t,i){let n=e.rowModelHelperService?.getServerSideRowModel();if(n){if(e.funcColsService.isRowGroupEmpty()){n.setRowCount(t,i);return}ae("setRowCount cannot be used while using row grouping.");return}let s=e.rowModelHelperService?.getInfiniteRowModel();if(s){s.setRowCount(t,i);return}}function WH(e){return e.rowNodeBlockLoader?.getBlockState()??{}}function jH(e){return e.rowModel.isLastRowIndexKnown()}var UH={version:N,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:HH,collapseAll:BH,onRowHeightChanged:GH}},$H={version:N,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:zH,getCacheBlockState:WH,isLastRowIndexKnown:jH}},Q1=class{wrap(e,t,i=[],n){let s=this.createWrapper(e,n);return t.forEach(r=>{this.createMethod(s,r,!0)}),i.forEach(r=>{this.createMethod(s,r,!1)}),s}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&F("Framework component is missing the method "+t+"()"),null)}}},Hm=class{};Hm.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};Hm.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];Hm.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var to=typeof global>"u"?{}:global;to.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;to.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;to.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;to.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;to.Node=typeof Node>"u"?{}:Node;to.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var qH="ROOT_NODE_ID",Of=0,KH=class{constructor(e,t,i,n,s,r){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=n,this.beans=r,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=qH,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return hx(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){F("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((n,s)=>this.createNode(n,this.rootNode,Of,s)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){let t=this.rootNode.allLeafChildren,i=t?.length??0,n=new Map,s=-1,r=-1;for(let o=0;o<i;++o){let a=t[o],l=a.data;l!==e[o]&&(r<0&&(s=o),r=o,n.set(l,a))}if(s<0)return!1;for(let o=s;o<=r;++o){let a=n.get(e[o]);a!==void 0&&(t[o]=a,a.sourceRowIndex=o)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){let i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){let i=e.add;if(Ut(i))return;let n=this.rootNode.allLeafChildren,s=n.length;if(typeof e.addIndex=="number"&&(s=this.sanitizeAddIndex(e.addIndex),s>0&&this.gos.get("treeData"))){for(let l=0;l<n.length;l++)if(n[l]?.rowIndex==s-1){s=l+1;break}}let r=i.map((a,l)=>this.createNode(a,this.rootNode,Of,s+l));if(s<n.length){let a=n.slice(0,s),l=n.slice(s,n.length),c=a.length+r.length;for(let u=0,d=l.length;u<d;++u)l[u].sourceRowIndex=c+u;this.rootNode.allLeafChildren=[...a,...r,...l],t.rowsInserted=!0}else this.rootNode.allLeafChildren=n.concat(r);let o=this.rootNode.sibling;o&&(o.allLeafChildren=n),t.rowNodeTransaction.add=r}sanitizeAddIndex(e){let t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){let{remove:n}=e;if(Ut(n))return;let s={};n.forEach(o=>{let a=this.lookupRowNode(o);a&&(a.isSelected()&&i.push(a),a.clearRowTopAndRowIndex(),s[a.id]=!0,delete this.allNodesMap[a.id],t.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(o=>!s[o.id])??null,this.rootNode.allLeafChildren?.forEach((o,a)=>{o.sourceRowIndex=a});let r=this.rootNode.sibling;r&&(r.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){let{update:n}=e;Ut(n)||n.forEach(s=>{let r=this.lookupRowNode(s);r&&(r.updateData(s),!r.selectable&&r.isSelected()&&i.push(r),this.setMasterForRow(r,s,Of,!1),t.update.push(r))})}lookupRowNode(e){let t=Xr(this.gos),i;if(t){let n=t({data:e,level:0});if(i=this.allNodesMap[n],!i)return ae(`could not find row id=${n}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren?.find(n=>n.data===e),!i)return ae("could not find data item as object was not found",e),ae("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,n){let s=new dn(this.beans);return s.sourceRowIndex=n,s.group=!1,this.setMasterForRow(s,e,i,!0),t&&(s.parent=t),s.level=i,s.setDataAndId(e,this.nextId.toString()),this.allNodesMap[s.id]&&F(`duplicate node id '${s.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[s.id]=s,this.nextId++,s}setMasterForRow(e,t,i,n){if(this.gos.get("treeData"))e.setMaster(!1),n&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let o=this.gos.get("isRowMaster");o?e.setMaster(o(t)):e.setMaster(!0)}else e.setMaster(!1);if(n){let o=this.funcColsService.getRowGroupColumns(),a=o?o.length:0,l=i+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){let t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},YH=class extends E{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=bt(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){let e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new dn(this.beans),this.nodeManager=new KH(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),n=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...i,...n,...n,...s,...r,...o,...a];this.addManagedPropertyListeners(l,c=>{let u=c.changeSet?.properties;if(!u)return;let d=h=>u.some(g=>h.has(g));if(d(e)){this.setRowData(this.rootNode.allLeafChildren.map(h=>h.data));return}if(d(t)){this.refreshModel({step:"group"});return}if(d(i)){this.refreshModel({step:"filter"});return}if(d(n)){this.refreshModel({step:"pivot"});return}if(d(s)){this.refreshModel({step:"aggregate"});return}if(d(r)){this.refreshModel({step:"sort"});return}if(d(o)){this.refreshModel({step:"filter_aggregates"});return}d(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,n){let s,r=!1;do{s=!1;let o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,i),c=Math.min(a,n);for(let u=l;u<=c;u++){let d=this.getRow(u);if(d.rowHeightEstimated){let h=qn(this.gos,d);d.setRowHeight(h.height),s=!0,r=!0}}s&&this.setRowTopAndRowIndex()}while(s);return r}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,i=new Set,n=Xe(this.gos,"normal");for(let s=0;s<this.rowsToDisplay.length;s++){let r=this.rowsToDisplay[s];if(r.id!=null&&i.add(r.id),r.rowHeight==null){let o=qn(this.gos,r,n,e);r.setRowHeight(o.height,o.estimated)}r.setRowTop(t),r.setRowIndex(s),t+=r.rowHeight}return i}clearRowTopAndRowIndex(e,t){let i=e.isActive(),n=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{if(n(r),n(r.detailNode),n(r.sibling),r.hasChildren()&&r.childrenAfterGroup){let o=r.level==-1;i&&!o&&!r.expanded||r.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,i=0){let n=this.getRowIndexAtPixel(t),s=this.getRow(n),r=!this.gos.get("suppressAnimationFrame");if(s===e[0])return!1;let o=this.rootNode.allLeafChildren;return e.forEach(a=>{St(o,a)}),e.forEach((a,l)=>{Wu(o,a,Math.max(n+i,0)+l)}),e.forEach((a,l)=>{a.sourceRowIndex=l}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:r,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){let i=t!=null?this.getRowIndexAtPixel(t):null,n=i!=null?this.getRow(i):null;if(!n||!e||t==null){this.clearHighlightedRow();return}let s=this.getHighlightPosition(t,n),r=this.isHighlightingCurrentPosition(e,n,s),o=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==n;(r||o)&&(this.clearHighlightedRow(),r)||(n.setHighlighted(s),this.lastHighlightedRow=n)}getHighlightPosition(e,t){if(!t){let s=this.getRowIndexAtPixel(e);if(t=this.getRow(s||0),!t)return 1}let{rowTop:i,rowHeight:n}=t;return e-i<n/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;let n=i===0?-1:1;return this.getRow(t.rowIndex+n)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.childrenAfterAggFilter,i=this.rootNode.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}let n=this.rowsToDisplay[this.rowsToDisplay.length-1],s=i>=this.rootNode.childrenAfterSort.length;if(n.footer&&s)return n.rowIndex;let r=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;r.expanded&&r.childrenAfterSort&&r.childrenAfterSort.length>0;)r=r.childrenAfterSort[0];return r.rowIndex}getRowBounds(e){if(X(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=jr(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=jr(this.gos),n=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=jr(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){let t=Ut(e),i=new ad(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(n=>n.add!=null&&n.add.length>0||n.remove!=null&&n.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group",i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(P(e)&&(t=i[e]),X(t)){ae(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}let n=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}let n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,n),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){let e=X(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return X(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return P(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1,s=[],r=Hs(this.gos);return this.forEachNodeAfterFilterAndSort(o=>{if(n)return;if(i&&(o===t||o===e)&&(n=!0,o.group&&r)){s.push(...o.allLeafChildren);return}if(!i){if(o!==t&&o!==e)return;i=!0}if(!o.group||!r){s.push(o);return}}),s}setDatasource(e){ae("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(te(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,r=-1;for(;;){let o=Math.floor((t+i)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=o+1:a.rowTop>e&&(i=o-1),s===t&&r===i))return o;s=t,r=i}}isRowInPixel(e,t){let i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){let{nodes:t,callback:i,recursionType:n,includeFooterNodes:s}=e,{index:r}=e,o=a=>{let l=t[0]?.parent;if(!l)return;let c=s&&nx(this.gos),u=sx(this.gos),d=s&&u({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),i(l.sibling,r++));return}d===a&&(l.createFooter(),i(l.sibling,r++))};o("top");for(let a=0;a<t.length;a++){let l=t[a];if(i(l,r++),l.hasChildren()&&!l.footer){let c=null;switch(n){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:i,recursionType:n,index:r,includeFooterNodes:s}))}}return o("bottom"),r}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),n=s=>{s&&s.forEach(r=>{let o=()=>{r.expanded=e,n(r.childrenAfterGroup)};if(t){P(r.childrenAfterGroup)&&o();return}if(i){!r.leafGroup&&o();return}r.group&&o()})};this.rootNode&&n(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,n){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:n}),Hs(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{let s=this.rootNode,r=s.sibling;s.childrenAfterGroup=s.allLeafChildren,r&&(r.childrenAfterGroup=s.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(dn.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(n=>{n.id===e&&(i=n)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let i=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],i=!1;this.rowDataTransactionBatch?.forEach(n=>{let{rowNodeTransaction:s,rowsInserted:r}=this.nodeManager.updateRowData(n.rowDataTransaction);r&&(i=!0),t.push(s),n.callback&&e.push(n.callback.bind(null,s))}),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();let{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;let i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function QH(e){e.expansionService.onGroupExpandedOrCollapsed()}function ZH(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function XH(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0}function JH(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function eB(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function tB(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function iB(e){if(e.columnModel.isAutoRowHeightActive()){F("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function nB(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function sB(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,i))}function rB(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function oB(e){return e.selectionService.getBestCostNodeSelection()}var aB=class extends E{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let i=(n,s)=>{n.hasChildren()&&e&&!s?n.childrenAfterFilter=n.childrenAfterGroup.filter(r=>{let o=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return o||a}):n.childrenAfterFilter=n.childrenAfterGroup,n.sibling&&(n.sibling.childrenAfterFilter=n.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let n=(r,o)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){let l=r.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?n(r.childrenAfterGroup[a],c):i(l,c)}i(r,o)},s=r=>n(r,!1);t.executeFromRootNode(s)}else{let n=s=>i(s,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},lB=class extends E{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){let t=e.rowNode,i=[],n=this.columnModel.isPivotMode(),s=n&&t.leafGroup,r=s?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,r,i,n,0);let a=i.length>0;if(!s&&a&&o.grandTotalRow){t.createFooter();let c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,t.sibling,i,0,c)}return i}getFlattenDetails(){let e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:rx(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:nx(this.gos),groupTotalRow:sx(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,n,s){if(!Ut(t))for(let r=0;r<t.length;r++){let o=t[r],a=o.hasChildren(),l=n&&!a,c=e.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,d=n&&o.leafGroup,h=e.hideOpenParents&&o.expanded&&!o.master&&!d;if(!l&&!h&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,o,i,s),!(n&&o.leafGroup)){if(a){let p=c||u;if(o.expanded||p){let f=e.groupTotalRow({node:o});f||o.destroyFooter();let m=p?s:s+1;f==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,i,m)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,i,n,m),f==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,i,m))}}else if(o.master&&o.expanded){let p=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,p,i,s)}}}}addRowNodeToRowsToDisplay(e,t,i,n,s){s?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}createDetailNode(e){if(P(e.detailNode))return e.detailNode;let t=new dn(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,P(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},cB=class extends E{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){Fe(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:n,rowsInserted:s}=i.updateRowData(t),r=!1;this.gos.get("suppressMaintainUnsortedOrder")||(r=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(n,r||s)}createTransactionForRowData(e){if(!Fe(this.gos))return ae("ImmutableService only works with ClientSideRowModel"),null;let t=Xr(this.gos);if(t==null)return ae("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;let i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),n=[],s=[],r=[];return P(e)&&e.forEach(o=>{let a=t({data:o,level:0}),l=i[a];l?(l.data!==o&&s.push(o),i[a]=void 0):r.push(o)}),ti(i,(o,a)=>{a&&n.push(a.data)}),{remove:n,update:s,add:r}}onRowDataUpdated(){let e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},uB=class extends E{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,n,s,r){let o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(h=>h.isRowGroupActive()),l={};i&&n&&(l=this.calculateDirtyNodes(n));let c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=h=>{this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);let g=c&&h.leafGroup;if(o&&a&&!h.leafGroup&&!r){let m=this.funcColsService.getRowGroupColumns()?.[h.level+1]?.getSort()===null,v=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!m){let C={};h.childrenAfterSort.forEach((w,y)=>{C[w.id]=y}),v.sort((w,y)=>(C[w.id]??0)-(C[y.id]??0))}h.childrenAfterSort=v}else!t||g?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):i?h.childrenAfterSort=this.doDeltaSort(h,l,s,e):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,e);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){let f={nodes:h.childrenAfterSort};u(f)}};s&&s.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){let t={},i=n=>{n&&n.forEach(s=>t[s.id]=!0)};return e&&e.forEach(n=>{i(n.add),i(n.update),i(n.remove)}),t}doDeltaSort(e,t,i,n){let s=e.childrenAfterAggFilter,r=e.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(s,n);let o={},a=[];s.forEach(d=>{t[d.id]||!i.canSkip(d)?a.push(d):o[d.id]=!0});let l=r.filter(d=>o[d.id]),c=(d,h)=>({currentPos:h,rowNode:d}),u=a.map(c).sort((d,h)=>this.rowNodeSorter.compareRowNodes(n,d,h));return this.mergeSortedArrays(n,u,l.map(c)).map(({rowNode:d})=>d)}mergeSortedArrays(e,t,i){let n=[],s=0,r=0;for(;s<t.length&&r<i.length;)this.rowNodeSorter.compareRowNodes(e,t[s],i[r])<0?n.push(t[s++]):n.push(i[r++]);for(;s<t.length;)n.push(t[s++]);for(;r<i.length;)n.push(i[r++]);return n}updateChildIndexes(e){if(X(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let i=0;i<t.length;i++){let n=t[i],s=i===0,r=i===e.childrenAfterSort.length-1;n.setFirstChild(s),n.setLastChild(r),n.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return F("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(n=>{n.hasChildren()&&t(n)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||X(e)||e.forEach(i=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(s=>{let r=s.getColDef().showRowGroup;if(typeof r!="string"){ae("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let o=r,a=this.columnModel.getColDefCol(o);if(a!==i.rowGroupColumn)if(t)i.setGroupValue(s.getId(),void 0);else{let c=this.getFirstChildOfFirstChild(i,a);c&&i.setGroupValue(s.getId(),c.key)}})})}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){let n=i.parent;if(n&&i.firstChild){if(n.rowGroupColumn===t)return n}else return null;i=n}return null}},dB=class extends E{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){let t=this.sortController.getSortOptions(),i=P(t)&&t.length>0,n=i&&P(e.rowNodeTransactions)&&this.gos.get("deltaSort"),s=t.some(r=>Oi(this.gos)?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(t,i,n,e.rowNodeTransactions,e.changedPath,s)}},Bm="32.3.3",Z1={version:Bm,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[YH,aB,dB,lB,uB,cB]},hB={version:Bm,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[Y1],apiFunctions:{onGroupExpandedOrCollapsed:QH,refreshClientSideRowModel:ZH,isRowDataEmpty:XH,forEachLeafNode:JH,forEachNodeAfterFilter:eB,forEachNodeAfterFilterAndSort:tB,resetRowHeights:iB,applyTransaction:nB,applyTransactionAsync:sB,flushAsyncTransactions:rB,getBestCostNodeSelection:oB},dependantModules:[Z1,UH]},gB={version:Bm,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[Z1,hB]},pB=class extends E{setBeans(e){this.beans=e}getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},fB=class{constructor(e){this.groupColumns=[];let{columnModel:t,funcColsService:i,columnNameService:n,valueService:s,gos:r,processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=n,this.valueService=s,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,n,s){let o=(!this.gos.get("groupHideOpenParents")||s.footer)&&this.shouldRenderGroupSummaryCell(s,e,t)?this.createValueForGroupNode(e,s):this.valueService.getValue(e,s);return this.processCell({accumulatedRowIndex:i,rowNode:s,column:e,value:o,processCellCallback:this.processCellCallback,type:n})}shouldRenderGroupSummaryCell(e,t,i){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){let o=e.groupData?.[t.getId()],a=this.gos.get("suppressGroupMaintainValueType");if(a&&o!=null||!a&&o!==void 0||gn(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){let l=t.getColDef();return l==null||l.showRowGroup===!0||l.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let r=ed(this.gos,this.columnModel.isPivotMode());return i===0&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));let i=this.gos.get("treeData"),n=this.gos.get("suppressGroupMaintainValueType"),s=l=>{if(i||n)return l.key;let c=l.groupData?.[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},r=t.footer,o=[s(t)];if(!rx(this.gos))for(;t.parent;)t=t.parent,o.push(s(t));let a=o.reverse().join(" -> ");return r?`Total ${a}`:a}processCell(e){let{accumulatedRowIndex:t,rowNode:i,column:n,value:s,processCellCallback:r,type:o}=e;return r?{value:r(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:n,node:i,value:s,type:o,parseValue:a=>this.valueService.parseValue(n,i,a,this.valueService.getValue(n,i)),formatValue:a=>this.valueService.formatValue(n,i,a)??a}))??""}:n.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueService.formatValue(n,i,s)}:{value:s??""}}},mB=class{static download(e,t){let i=document.defaultView||window;if(!i){F("There is no `window` associated with the current `document`");return}let n=document.createElement("a"),s=i.URL.createObjectURL(t);n.setAttribute("href",s),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(n),i.setTimeout(()=>{i.URL.revokeObjectURL(s)},0)}},YS=`\r
`,vB=class extends fB{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,YS),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,n)=>{n!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);let n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(F("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=YS),this.isFirstLine=!1}},CB=class extends pB{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){F("Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\uFEFF",i],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;mB.download(this.getFileName(s),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{columnModel:t,columnNameService:i,funcColsService:n,valueService:s,gos:r}=this,{processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=e;return new vB({columnModel:t,columnNameService:i,funcColsService:n,valueService:s,gos:r,processCellCallback:o||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function wB(e,t){return e.csvCreator?.getDataAsCsv(t)}function yB(e,t){e.csvCreator?.exportDataAsCsv(t)}var bB=class extends E{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){let{allColumns:i,columnKeys:n,skipRowGroups:s}=t,r=this.getColumnsToExport(i,s,n);return Pk(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,i,n){let s=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?n.leafGroup:!n.group,d=!!n.footer,h=o&&n.leafGroup,g=n.allChildrenCount===1&&n.childrenAfterGroup?.length===1&&(r||h);if(!u&&!d&&(t.skipRowGroups||g||c)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&n.rowPinned==="top"||t.skipPinnedBottom&&n.rowPinned==="bottom"||n.level===-1&&!u&&!d||s(this.gos.addGridCommonParams({node:n})))return;let m=e.onNewBodyRow(n);if(i.forEach((v,C)=>{m.onColumn(v,C,n)}),t.getCustomContentBelowRow){let v=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:n}));v&&e.addCustomContent(v)}}appendContent(e){return t=>{let i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{let i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){let n=new mx,s=this.visibleColsService.createGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){let n=i.onNewHeaderRow();t.forEach((s,r)=>{n.onColumn(s,r,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{let n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedTopRow(s.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedRow("top",n),i}}processRows(e,t){return i=>{let n=this.rowModel,s=Fe(this.gos),r=gn(this.gos),o=!s&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>n.getRow(c.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())s?n.forEachPivotNode(a,!0):r?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);else if(e.onlySelectedAllPages||o){let c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?n.forEachNode(a):s||r?n.forEachNodeAfterFilterAndSort(a,!0):n.forEachNode(a);return i}}replicateSortedOrder(e){let t=this.sortController.getSortOptions(),i=(n,s)=>n.rowIndex!=null&&s.rowIndex!=null?n.rowIndex-s.rowIndex:n.level===s.level?n.parent?.id===s.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:n,currentPos:n.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):i(n.parent,s.parent):n.level>s.level?i(n.parent,s):i(n,s.parent);e.sort(i)}processPinnedBottomRows(e,t){return i=>{let n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedBottomRow(s.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedRow("bottom",n),i}}getColumnsToExport(e=!1,t=!1,i){let n=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);let s=this.gos.get("treeData"),r=[];return e&&!n?r=this.columnModel.getCols():r=this.visibleColsService.getAllCols(),t&&!s&&(r=r.filter(o=>Wf(o)||Wa(o))),r}recursivelyAddHeaderGroups(e,t,i){let n=[];e.forEach(s=>{let r=s;r.getChildren&&r.getChildren().forEach(o=>n.push(o))}),e.length>0&&ke(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){let n=e.onNewHeaderGroupingRow(),s=0;t.forEach(r=>{let o=r,a;i?a=i(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnNameService.getDisplayNameForColumnGroup(o,"header");let l=o.getLeafColumns().reduce((c,u,d,h)=>{let g=te(c);return u.getColumnGroupShow()==="open"?(!g||g[1]!=null)&&(g=[d],c.push(g)):g&&g[1]==null&&(g[1]=d-1),d===h.length-1&&g&&g[1]==null&&(g[1]=d),c},[]);n.onColumn(o,a||"",s++,o.getLeafColumns().length-1,l)})}},Gm="32.3.3",X1={version:Gm,moduleName:"@ag-grid-community/csv-export-core",beans:[CB,bB]},SB={version:Gm,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:wB,exportDataAsCsv:yB},dependantModules:[X1]},xB={version:Gm,moduleName:"@ag-grid-community/csv-export",dependantModules:[X1,SB]};var DB=e=>$i(void 0,null,function*(){let t=0,i=[],n=new WritableStream({write:o=>{i.push(o),t+=o.length}}),s=new ReadableStream({start:o=>{let a=new FileReader;a.onload=l=>{l.target?.result&&o.enqueue(l.target.result),o.close()},a.readAsArrayBuffer(e)}}),r=new window.CompressionStream("deflate-raw");return yield s.pipeThrough(r).pipeTo(n),{size:t,content:new Blob(i)}}),EB=e=>$i(void 0,null,function*(){let t=new Blob([e]),{size:i,content:n}=yield DB(t),s=new Uint8Array(yield n.arrayBuffer());return{size:i,content:s}}),MB=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},RB=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function ot(e,t){let i="";for(let n=0;n<t;n++)i+=String.fromCharCode(e&255),e>>>=8;return i}var QS=e=>{if(!e.length)return 0;let t=-1,i=0,n=0,s=0;for(let r=0;r<e.length;r++)i=e[r],n=(t^i)&255,s=FB[n],t=t>>>8^s;return t^-1},ZS=e=>e.length?QS(typeof e=="string"?new TextEncoder().encode(e):e):0,FB=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),J1=(e,t,i,n,s,r)=>{let{content:o,path:a,created:l}=e,c=MB(l),u=RB(l),d=ZS(s),h=r!==void 0?r:n,g=c_(a),p=g!==a,f="";if(p){let w=ot(1,1)+ot(ZS(g),4)+g;f="up"+ot(w.length,2)+w}let m="\0"+(p?"\0\b":"\0\0")+ot(t?8:0,2)+ot(c,2)+ot(u,2)+ot(h?d:0,4)+ot(r??n,4)+ot(n,4)+ot(g.length,2)+ot(f.length,2),v="PK"+m+g+f,C="PK\0"+m+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\0\0\0")+ot(i,4)+g+f;return{localFileHeader:Uint8Array.from(v,w=>w.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(C,w=>w.charCodeAt(0))}},eD=e=>{let t;if(typeof e=="string"){let i=atob(e.split(";base64,")[1]);t=Uint8Array.from(i,n=>n.charCodeAt(0))}else t=e;return{size:t.length,content:t}},IB=(e,t)=>$i(void 0,null,function*(){let{content:i}=e,{size:n,content:s}=i?eD(i):{size:0,content:Uint8Array.from([])},r,o,a=!1;if(e.type==="file"&&s&&n>0){let u=yield EB(s);r=u.content,o=u.size,a=!0}let c=J1(e,a,t,n,s,o);return _(D({},c),{content:r||s,isCompressed:a})}),PB=(e,t)=>{let{content:i}=e,{content:n}=i?eD(i):{content:Uint8Array.from([])},s=J1(e,!1,t,n.length,n,void 0);return _(D({},s),{content:n,isCompressed:!1})},AB=(e,t,i)=>{let n="PK\0\0\0\0"+ot(e,2)+ot(e,2)+ot(t,4)+ot(i,4)+"\0\0";return Uint8Array.from(n,s=>s.charCodeAt(0))},tD=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,i=!1){this.files.push({path:e,created:new Date,content:i?t:new TextEncoder().encode(t),isBase64:i,type:"file"})}static getZipFile(e="application/zip"){return $i(this,null,function*(){let t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})})}static getUncompressedZipFile(e="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,i=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;t+=u.length+h.length,i+=d.length}let n=new Uint8Array(t),s=new Uint8Array(i),r=0,o=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;n.set(u,r),r+=u.length,n.set(h,r),r+=h.length,s.set(d,o),o+=d.length}let a=AB(e.length,i,t),l=new Uint8Array(n.length+s.length+a.length);return l.set(n),l.set(s,n.length),l.set(a,n.length+s.length),l}static buildCompressedFileStream(){return $i(this,null,function*(){let e=[...this.folders,...this.files],t=[],i=0;for(let n of e){let s=yield IB(n,i),{localFileHeader:r,content:o}=s;t.push(s),i+=r.length+o.length}return this.packageFiles(t)})}static buildFileStream(){let e=[...this.folders,...this.files],t=[],i=0;for(let n of e){let s=PB(n,i),{localFileHeader:r,content:o}=s;t.push(s),i+=r.length+o.length}return this.packageFiles(t)}};tD.folders=[];tD.files=[];var TB=class extends R4{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){P(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(X(this.params.datasource.getRows)){F("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((n,s)=>{this.startRow+s<i&&e(n,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,i=new dn(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,n)=>{let s=e.rowData?e.rowData[n]:void 0;!i.id&&i.alreadyRendered&&s&&(this.rowNodes[n]=new dn(this.beans),this.rowNodes[n].setRowIndex(i.rowIndex),this.rowNodes[n].setRowTop(i.rowTop),this.rowNodes[n].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[n],s,this.startRow+n)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},kB=2,_B=class extends E{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){let i=Math.floor(e/this.params.blockSize),n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){let t=this.createBean(new TB(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&ii(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(o=>o!=e),i=(o,a)=>a.getLastAccessed()-o.getLastAccessed();t.sort(i);let n=this.params.maxBlocksInCache>0,s=n?this.params.maxBlocksInCache-1:null,r=kB-1;t.forEach((o,a)=>{let l=o.getState()==="needsLoading"&&a>=r,c=n?a>=s:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let i=e.getStartRow(),n=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let n=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,P(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new Qr;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(i,n)=>i.getId()-n.getId();return Kn(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let i=[],n=-1,s=!1,r=new Qr,o=!1;return this.getBlocksInOrder().forEach(l=>{if(!o){if(s&&n+1!==l.getId()){o=!0;return}n=l.getId(),l.forEachNode(c=>{let u=c===e||c===t;(s||u)&&i.push(c),u&&(s=!s)},r,this.rowCount)}}),o||s?[]:i}},LB=class extends E{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=_s(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&F("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=_s(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!La(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;Xr(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:_s(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Qr},this.infiniteCache=this.createBean(new _B(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function OB(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function NB(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function VB(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}var zm="32.3.3",iD={version:zm,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[LB],dependantModules:[I4]},HB={version:zm,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[Y1],apiFunctions:{refreshInfiniteCache:OB,purgeInfiniteCache:NB,getInfiniteRowCount:VB},dependantModules:[iD,$H]},BB={version:zm,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[iD,HB]};var GB=e=>{let t=new Map;return i=>{let n=i;return t.has(n)||t.set(n,e(i)),t.get(n)}},cZ=GB(e=>{if(/Color$/.test(e))return"color";if(/Scale?$/.test(e))return"scale";if(e==="spacing"||/(Padding|Spacing|Size|Width|Height|Radius|Indent|Start|End|Top|Bottom|Horizontal|Vertical)$/.test(e))return"length";if(/Border$/.test(e))return"border";if(/BorderStyle$/.test(e))return"borderStyle";if(/Shadow$/.test(e))return"shadow";if(/Image$/.test(e))return"image";if(/Family$/.test(e))return"fontFamily";if(/Weight$/.test(e))return"fontWeight";if(/Duration$/.test(e))return"duration";if(/ColorScheme$/.test(e))return"colorScheme";throw new Error(`"${e}" is not a valid theme parameter.`)});var uZ=typeof window!="object"||!window||typeof document!="object"||window.document!==document;ln.__registerModules([W1,gB,BB,xB],!1,void 0);var nD=(()=>{class e extends Q1{setViewContainerRef(i,n){this.viewContainerRef=i,this.angularFrameworkOverrides=n}createWrapper(i){let n=this.angularFrameworkOverrides,s=this;class r extends Wm{init(l){n.runInsideAngular(()=>{super.init(l),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return n.runInsideAngular(()=>s.createComponent(i))}hasMethod(l){return o.getFrameworkComponentInstance()[l]!=null}callMethod(l,c){let u=this.getFrameworkComponentInstance();return n.runInsideAngular(()=>o.getFrameworkComponentInstance()[l].apply(u,c))}addMethod(l,c){o[l]=c}}let o=new r;return o}createComponent(i){return this.viewContainerRef.createComponent(i)}static{this.\u0275fac=(()=>{let i;return function(s){return(i||(i=en(e)))(s||e)}})()}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),Wm=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,ni(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},sD=(()=>{class e extends Om{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(n,s)=>this.runOutside(n,s),this.wrapOutgoing=n=>this.runInsideAngular(n),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(n,s)=>s==="resize-observer"||s==="popupPositioning"?this._ngZone.runOutsideAngular(n):n():this.runOutside=n=>this._ngZone.runOutsideAngular(n):this.runOutside=n=>n()}get shouldWrapOutgoing(){return this._ngZone&&he.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let n=i.prototype;return n&&"agInit"in n}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,n){return this.runOutside(i,n)}static{this.\u0275fac=function(n){return new(n||e)(H(he))}}static{this.\u0275prov=O({token:e,factory:e.\u0275fac})}}return e})(),io=(()=>{class e{constructor(i,n,s,r){this.viewContainerRef=n,this.angularFrameworkOverrides=s,this.frameworkComponentWrapper=r,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(o=>{this._resolveFullyReady=o}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new I,this.toolPanelSizeChanged=new I,this.columnMenuVisibleChanged=new I,this.contextMenuVisibleChanged=new I,this.cutStart=new I,this.cutEnd=new I,this.pasteStart=new I,this.pasteEnd=new I,this.columnVisible=new I,this.columnPinned=new I,this.columnResized=new I,this.columnMoved=new I,this.columnValueChanged=new I,this.columnPivotModeChanged=new I,this.columnPivotChanged=new I,this.columnGroupOpened=new I,this.newColumnsLoaded=new I,this.gridColumnsChanged=new I,this.displayedColumnsChanged=new I,this.virtualColumnsChanged=new I,this.columnEverythingChanged=new I,this.columnHeaderMouseOver=new I,this.columnHeaderMouseLeave=new I,this.columnHeaderClicked=new I,this.columnHeaderContextMenu=new I,this.componentStateChanged=new I,this.cellValueChanged=new I,this.cellEditRequest=new I,this.rowValueChanged=new I,this.cellEditingStarted=new I,this.cellEditingStopped=new I,this.rowEditingStarted=new I,this.rowEditingStopped=new I,this.undoStarted=new I,this.undoEnded=new I,this.redoStarted=new I,this.redoEnded=new I,this.cellSelectionDeleteStart=new I,this.cellSelectionDeleteEnd=new I,this.rangeDeleteStart=new I,this.rangeDeleteEnd=new I,this.fillStart=new I,this.fillEnd=new I,this.filterOpened=new I,this.filterChanged=new I,this.filterModified=new I,this.advancedFilterBuilderVisibleChanged=new I,this.chartCreated=new I,this.chartRangeSelectionChanged=new I,this.chartOptionsChanged=new I,this.chartDestroyed=new I,this.cellKeyDown=new I,this.gridReady=new I,this.firstDataRendered=new I,this.gridSizeChanged=new I,this.modelUpdated=new I,this.virtualRowRemoved=new I,this.viewportChanged=new I,this.bodyScroll=new I,this.bodyScrollEnd=new I,this.dragStarted=new I,this.dragStopped=new I,this.dragCancelled=new I,this.stateUpdated=new I,this.paginationChanged=new I,this.rowDragEnter=new I,this.rowDragMove=new I,this.rowDragLeave=new I,this.rowDragEnd=new I,this.rowDragCancel=new I,this.columnRowGroupChanged=new I,this.rowGroupOpened=new I,this.expandOrCollapseAll=new I,this.pivotMaxColumnsExceeded=new I,this.pinnedRowDataChanged=new I,this.rowDataUpdated=new I,this.asyncTransactionsFlushed=new I,this.storeRefreshed=new I,this.headerFocused=new I,this.cellClicked=new I,this.cellDoubleClicked=new I,this.cellFocused=new I,this.cellMouseOver=new I,this.cellMouseOut=new I,this.cellMouseDown=new I,this.rowClicked=new I,this.rowDoubleClicked=new I,this.rowSelected=new I,this.selectionChanged=new I,this.cellContextMenu=new I,this.rangeSelectionChanged=new I,this.cellSelectionChanged=new I,this.tooltipShow=new I,this.tooltipHide=new I,this.sortChanged=new I,this._nativeElement=i.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=Cx(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let n=K1(this._nativeElement,i,this.gridParams);n&&(this.api=n),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let n={};Object.entries(i).forEach(([s,r])=>{n[s]=r.currentValue}),wx(n,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let s=this[i],r=s?.observed??s?.observers?.length>0,o=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[o];return r||a}globalEventListener(i,n){if(this._destroyed)return;let s=this[i];if(s&&this.isEmitterUsed(i)){let r=()=>this.angularFrameworkOverrides.runInsideAngular(()=>s.emit(n));this._holdEvents?this._fullyReady.then(()=>r()):r()}}static{this.\u0275fac=function(n){return new(n||e)(q(Et),q(tn),q(sD),q(nD))}}static{this.\u0275cmp=Ge({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",enableStrictPivotColumnOrder:"enableStrictPivotColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressMoveWhenColumnDragging:"suppressMoveWhenColumnDragging",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",suppressSetFilterByDefault:"suppressSetFilterByDefault",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",selectionColumnDef:"selectionColumnDef",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",theme:"theme",loadThemeGoogleFonts:"loadThemeGoogleFonts",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[On([sD,nD]),mi,Hc],decls:0,vars:0,template:function(n,s){},encapsulation:2})}}return e})(),rD=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({})}}return e})();function zB(e,t){if(e&1){let i=Oc();z(0,"form")(1,"div",5)(2,"label",6),Se(3,"seqId:"),j(),z(4,"input",7),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.seqId,s)||(r.seqId=s),pt(s)}),j()(),z(5,"div",5)(6,"label",8),Se(7,"Id:"),j(),z(8,"input",9),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.id,s)||(r.id=s),pt(s)}),j()(),z(9,"div",5)(10,"label",10),Se(11,"Label:"),j(),z(12,"input",11),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.label,s)||(r.label=s),pt(s)}),j()(),z(13,"div",5)(14,"label",12),Se(15,"City:"),j(),z(16,"input",13),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.city,s)||(r.city=s),pt(s)}),j()(),z(17,"div",5)(18,"label",14),Se(19,"State:"),j(),z(20,"input",15),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.state,s)||(r.state=s),pt(s)}),j()(),z(21,"button",16),je("click",function(){gt(i);let s=Ze();return pt(s.addStore())}),Se(22,"Add Store"),j()()}if(e&2){let i=Ze();rt(4),Mt("ngModel",i.seqId),rt(4),Mt("ngModel",i.id),rt(4),Mt("ngModel",i.label),rt(4),Mt("ngModel",i.city),rt(4),Mt("ngModel",i.state)}}var oD=(()=>{class e{constructor(i){this.cdr=i,this.seqId=0,this.id="",this.showForm=!1,this.columnDefs=[{headerName:"",cellRenderer:n=>`<button class="delete-btn" data-id="${n.data.ID}">\u{1F5D1}</button>`,width:50},{headerName:"S.No",field:"seqId",width:80},{headerName:"Store Name",field:"label",width:250,editable:!0},{headerName:"City",field:"city",width:100,editable:!0},{headerName:"State",field:"state",width:100,editable:!0}],this.rowData=[]=Jt.stores,this.gridOptions={rowSelection:"multiple",suppressRowClickSelection:!1,defaultColDef:{sortable:!0,filter:!0},rowDragManaged:!0,animateRows:!0}}deleteStore(i){i&&this.gridApi.applyTransaction({remove:[i.data]})}onGridReady(i){this.gridApi=i.api,i.api.sizeColumnsToFit(),this.gridApi.addEventListener("cellClicked",n=>{n.event.target.classList.contains("delete-btn")&&this.deleteStore(n.node)})}toggleAddForm(){this.showForm=!this.showForm}addStore(){let i={seqId:this.seqId,id:this.id,label:this.label,city:this.city,state:this.state};console.log(i),this.rowData=[...this.rowData,i],this.cdr.detectChanges(),this.showForm=!1,this.resetForm()}resetForm(){this.seqId=0,this.id="",this.label="",this.city="",this.state=""}removeSelected(){let i=this.gridApi.getSelectedRows();this.rowData=this.rowData.filter(n=>!i.includes(n)),this.gridApi.setGridOption("rowData",this.rowData)}onRowDragEnd(i){let n=i.node.data;console.log("Row moved:",n)}static{this.\u0275fac=function(n){return new(n||e)(q(Zt))}}static{this.\u0275cmp=Ge({type:e,selectors:[["app-store"]],decls:7,vars:5,consts:[[1,"store-container"],["rowSelection","multiple",1,"ag-theme-alpine",2,"height","400px","width","100%",3,"gridReady","rowDragEnd","rowData","columnDefs","gridOptions","pagination"],[1,"add-btn",3,"click"],[1,"delete-btn",3,"click"],[4,"ngIf"],[1,"input-row"],["for","seqId"],["type","number","name","seqId","required","",3,"ngModelChange","ngModel"],["for","label"],["type","digit","name","id","required","",3,"ngModelChange","ngModel"],["for","class"],["type","text","name","label","required","",3,"ngModelChange","ngModel"],["for","department"],["type","text","name","city","required","",3,"ngModelChange","ngModel"],["for","price"],["type","text","name","state","required","",3,"ngModelChange","ngModel"],["type","submit",3,"click"]],template:function(n,s){n&1&&(z(0,"div",0)(1,"ag-grid-angular",1),je("gridReady",function(o){return s.onGridReady(o)})("rowDragEnd",function(o){return s.onRowDragEnd(o)}),j()(),z(2,"button",2),je("click",function(){return s.toggleAddForm()}),Se(3,"\u2795 Add New Store"),j(),z(4,"button",3),je("click",function(){return s.removeSelected()}),Se(5,"\u{1F5D1} Remove Selected"),j(),zo(6,zB,23,5,"form",4)),n&2&&(rt(),nn("rowData",s.rowData)("columnDefs",s.columnDefs)("gridOptions",s.gridOptions)("pagination",!0),rt(5),nn("ngIf",s.showForm))},dependencies:[qc,Mu,Br,Sa,xu,Du,xa,ba,ya,io],styles:["button[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 12px;font-size:14px;cursor:pointer;background-color:#007bff;color:#fff;border:none;border-radius:4px}form[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#333}div[_ngcontent-%COMP%]{margin-bottom:15px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:600px;margin:20px auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 10px #0000001a}.input-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px}label[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px;flex-basis:40%;display:flex;align-items:center}.placeholder[_ngcontent-%COMP%]{font-size:14px;color:#f9f9f9;flex-basis:40%}input[_ngcontent-%COMP%]{width:55%;padding:10px;font-size:14px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;background-color:#f9f9f9;transition:border-color .3s ease,box-shadow .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff80;outline:none}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.store-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;background-color:#f8f9fa;border-radius:10px;box-shadow:0 4px 8px #0000001a}.ag-theme-alpine[_ngcontent-%COMP%]{width:100%;max-width:1200px;height:auto;border-radius:8px;overflow:hidden}.actions[_ngcontent-%COMP%]{margin-top:15px;display:flex;gap:10px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px;font-size:14px;font-weight:700;border:none;border-radius:5px;cursor:pointer;transition:all .2s ease-in-out}.actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.actions[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.actions[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return e})();function WB(e,t){if(e&1){let i=Oc();z(0,"form")(1,"div",3)(2,"label",4),Se(3,"SKU:"),j(),z(4,"input",5),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.sku,s)||(r.sku=s),pt(s)}),j()(),z(5,"div",3)(6,"label",6),Se(7,"Label:"),j(),z(8,"input",7),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.label,s)||(r.label=s),pt(s)}),j()(),z(9,"div",3)(10,"label",8),Se(11,"Class:"),j(),z(12,"input",9),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.class,s)||(r.class=s),pt(s)}),j()(),z(13,"div",3)(14,"label",10),Se(15,"Department:"),j(),z(16,"input",11),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.department,s)||(r.department=s),pt(s)}),j()(),z(17,"div",3)(18,"label",12),Se(19,"Price:"),j(),z(20,"input",13),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.price,s)||(r.price=s),pt(s)}),j()(),z(21,"div",3)(22,"label",14),Se(23,"Cost:"),j(),z(24,"input",15),Rt("ngModelChange",function(s){gt(i);let r=Ze();return Bt(r.cost,s)||(r.cost=s),pt(s)}),j()(),z(25,"button",16),je("click",function(){gt(i);let s=Ze();return pt(s.addSku())}),Se(26,"Add SKU"),j()()}if(e&2){let i=Ze();rt(4),Mt("ngModel",i.sku),rt(4),Mt("ngModel",i.label),rt(4),Mt("ngModel",i.class),rt(4),Mt("ngModel",i.department),rt(4),Mt("ngModel",i.price),rt(4),Mt("ngModel",i.cost)}}var aD=(()=>{class e{constructor(i){this.cdr=i,this.price=0,this.cost=0,this.isModalVisible=!1,this.rowData=Jt.SKUs,this.columnDefs=[{headerName:"",cellRenderer:n=>`<button class="delete-btn" data-id="${n.data.id}">\u{1F5D1}</button>`,width:70},{field:"label",headerName:"SKU",sortable:!0,filter:!0,editable:!0},{field:"price",headerName:"Price",sortable:!0,filter:!0,editable:!0},{field:"cost",headerName:"Cost",sortable:!0,filter:!0,editable:!0}],this.showForm=!1}openModal(){this.isModalVisible=!0}closeModal(){this.isModalVisible=!1}onGridReady(i){this.gridApi=i.api,this.gridApi.addEventListener("cellClicked",n=>{n.event.target.classList.contains("delete-btn")&&this.deleteRow(n.event.target.getAttribute("data-id"))})}toggleAddForm(){this.showForm=!this.showForm}addSku(){let i={sku:this.sku,label:this.label,class:this.class,department:this.department,price:this.price,cost:this.cost};console.log("Adding SKU:",i),this.rowData=[...this.rowData,i],this.cdr.detectChanges(),this.showForm=!1,this.resetForm()}resetForm(){this.sku="",this.label="",this.class="",this.department="",this.price=0,this.cost=0,this.showForm=!1}deleteRow(i){console.log("delete"+i),this.rowData=this.rowData.filter(n=>n.id!==i)}static{this.\u0275fac=function(n){return new(n||e)(q(Zt))}}static{this.\u0275cmp=Ge({type:e,selectors:[["app-sku"]],decls:4,vars:4,consts:[[1,"ag-theme-alpine",2,"width","100%","height","400px",3,"gridReady","rowData","columnDefs","pagination"],[3,"click"],[4,"ngIf"],[1,"input-row"],["for","sku"],["type","text","name","sku","required","",3,"ngModelChange","ngModel"],["for","label"],["type","text","name","label","required","",3,"ngModelChange","ngModel"],["for","class"],["type","text","name","class","required","",3,"ngModelChange","ngModel"],["for","department"],["type","text","name","department","required","",3,"ngModelChange","ngModel"],["for","price"],["type","number","name","price","required","",3,"ngModelChange","ngModel"],["for","cost"],["type","number","name","cost","required","",3,"ngModelChange","ngModel"],["type","submit",3,"click"]],template:function(n,s){n&1&&(z(0,"ag-grid-angular",0),je("gridReady",function(o){return s.onGridReady(o)}),j(),z(1,"button",1),je("click",function(){return s.toggleAddForm()}),Se(2,"Add New SKU"),j(),zo(3,WB,27,6,"form",2)),n&2&&(nn("rowData",s.rowData)("columnDefs",s.columnDefs)("pagination",!0),rt(3),nn("ngIf",s.showForm))},dependencies:[qc,Mu,Br,Sa,xu,Du,xa,ba,ya,io],styles:["button[_ngcontent-%COMP%]{margin-bottom:10px;padding:8px 12px;font-size:14px;cursor:pointer;background-color:#007bff;color:#fff;border:none;border-radius:4px}form[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;color:#333}div[_ngcontent-%COMP%]{margin-bottom:15px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:600px;margin:20px auto;padding:20px;background-color:#f9f9f9;border-radius:8px;box-shadow:0 4px 10px #0000001a}.input-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:15px}label[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px;flex-basis:40%;display:flex;align-items:center}.placeholder[_ngcontent-%COMP%]{font-size:14px;color:#f9f9f9;flex-basis:40%}input[_ngcontent-%COMP%]{width:55%;padding:10px;font-size:14px;border:1px solid #ddd;border-radius:5px;box-sizing:border-box;background-color:#f9f9f9;transition:border-color .3s ease,box-shadow .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff80;outline:none}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.store-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;background-color:#f8f9fa;border-radius:10px;box-shadow:0 4px 8px #0000001a}.ag-theme-alpine[_ngcontent-%COMP%]{width:100%;max-width:1200px;height:auto;border-radius:8px;overflow:hidden}.actions[_ngcontent-%COMP%]{margin-top:15px;display:flex;gap:10px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 15px;font-size:14px;font-weight:700;border:none;border-radius:5px;cursor:pointer;transition:all .2s ease-in-out}.actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.actions[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.actions[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:.8}"]})}}return e})();var lD=(()=>{class e{constructor(){this.rowData=Jt.planning,this.calender=Jt.calendar,this.sku=Jt.SKUs,this.store=Jt.stores,this.columnDefs=[]}getPriceById(i){let n=this.sku.find(s=>s.id===i);return n?n.price:0}getCostById(i){let n=this.sku.find(s=>s.id===i);return n?n.cost:0}getSKUById(i){let n=this.sku.find(s=>s.id===i);return n?n.label:""}getStoreById(i){let n=this.store.find(s=>s.id===i);return n?n.label:""}ngOnInit(){this.createColumnDefs(),this.rowData=Object.values(this.rowData.reduce((i,n)=>{let s=`${n.store}_${n.sku}`;i[s]||(i[s]={Store:this.getStoreById(n.id),SKU:this.getSKUById(n.sku)}),i[s][`Sales Units_${n.week}`]=n.salesUnits?n.salesUnits:0;var r=n.salesUnits*this.getPriceById(n.sku);i[s][`Sales Dollars_${n.week}`]="$ "+r;var o=r-n.salesUnits*this.getCostById(n.sku);return i[s][`GM Dollars_${n.week}`]="$ "+o,i[s][`GM %_${n.week}`]=o/r*100,i},{})),this.rowData=Object.values(this.rowData),console.log(this.rowData)}onGridReady(i){this.gridApi=i.api,this.gridApi.addEventListener("cellClicked",n=>{n.event.target.classList.contains("delete-btn")&&this.deleteRow(n.event.target.getAttribute("data-id"))})}createColumnDefs(){this.columnDefs=[{headerName:"Store",field:"Store",sortable:!0,filter:!0},{headerName:"SKU",field:"SKU",sortable:!0,filter:!0}];let i=this.calender.map(n=>({headerName:n.weekLabel,children:[{headerName:"Sales Units",field:`Sales Units_${n.week}`,sortable:!0,filter:!0,editable:!0,valueGetter:s=>s.data?.[`Sales Units_${n.week}`]||0},{headerName:"Sales Dollars",field:`Sales Dollars_${n.week}`,sortable:!0,filter:!0,valueGetter:s=>s.data?.[`Sales Dollars_${n.week}`]||0},{headerName:"GM Dollars",field:`GM Dollars_${n.week}`,sortable:!0,filter:!0,valueGetter:s=>s.data?.[`GM Dollars_${n.week}`]||0},{headerName:"GM Percent",field:`GM %_${n.week}`,sortable:!0,filter:!0,valueGetter:s=>s.data?.[`GM %_${n.week}`]||0,cellStyle:s=>s.value>=40?{backgroundColor:"green",color:"white"}:s.value>=10?{backgroundColor:"yellow",color:"black"}:s.value>5?{backgroundColor:"orange",color:"black"}:{backgroundColor:"red",color:"white"}}]}));this.columnDefs=[...this.columnDefs,...i]}addRow(){let i={sku:"NEW001",label:"New SKU",class:"Tops",department:"New Dept",price:0,cost:0};this.rowData=[...this.rowData,i]}deleteRow(i){console.log("delete"+i),this.rowData=this.rowData.filter(n=>n.ID!==i)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=Ge({type:e,selectors:[["app-planning"]],decls:1,vars:3,consts:[[1,"ag-theme-alpine",2,"width","100%","height","400px",3,"gridReady","rowData","columnDefs","pagination"]],template:function(n,s){n&1&&(z(0,"ag-grid-angular",0),je("gridReady",function(o){return s.onGridReady(o)}),j()),n&2&&nn("rowData",s.rowData)("columnDefs",s.columnDefs)("pagination",!0)},dependencies:[io]})}}return e})();function Ya(e){return e+.5|0}var Xn=(e,t,i)=>Math.max(Math.min(e,i),t);function qa(e){return Xn(Ya(e*2.55),0,255)}function Jn(e){return Xn(Ya(e*255),0,255)}function fn(e){return Xn(Ya(e/2.55)/100,0,1)}function cD(e){return Xn(Ya(e*100),0,100)}var ai={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$m=[..."0123456789ABCDEF"],jB=e=>$m[e&15],UB=e=>$m[(e&240)>>4]+$m[e&15],ld=e=>(e&240)>>4===(e&15),$B=e=>ld(e.r)&&ld(e.g)&&ld(e.b)&&ld(e.a);function qB(e){var t=e.length,i;return e[0]==="#"&&(t===4||t===5?i={r:255&ai[e[1]]*17,g:255&ai[e[2]]*17,b:255&ai[e[3]]*17,a:t===5?ai[e[4]]*17:255}:(t===7||t===9)&&(i={r:ai[e[1]]<<4|ai[e[2]],g:ai[e[3]]<<4|ai[e[4]],b:ai[e[5]]<<4|ai[e[6]],a:t===9?ai[e[7]]<<4|ai[e[8]]:255})),i}var KB=(e,t)=>e<255?t(e):"";function YB(e){var t=$B(e)?jB:UB;return e?"#"+t(e.r)+t(e.g)+t(e.b)+KB(e.a,t):void 0}var QB=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function gD(e,t,i){let n=t*Math.min(i,1-i),s=(r,o=(r+e/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function ZB(e,t,i){let n=(s,r=(s+e/60)%6)=>i-i*t*Math.max(Math.min(r,4-r,1),0);return[n(5),n(3),n(1)]}function XB(e,t,i){let n=gD(e,1,.5),s;for(t+i>1&&(s=1/(t+i),t*=s,i*=s),s=0;s<3;s++)n[s]*=1-t-i,n[s]+=t;return n}function JB(e,t,i,n,s){return e===s?(t-i)/n+(t<i?6:0):t===s?(i-e)/n+2:(e-t)/n+4}function qm(e){let i=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(i,n,s),o=Math.min(i,n,s),a=(r+o)/2,l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=JB(i,n,s,u,r),l=l*60+.5),[l|0,c||0,a]}function Km(e,t,i,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,i,n)).map(Jn)}function Ym(e,t,i){return Km(gD,e,t,i)}function e7(e,t,i){return Km(XB,e,t,i)}function t7(e,t,i){return Km(ZB,e,t,i)}function pD(e){return(e%360+360)%360}function i7(e){let t=QB.exec(e),i=255,n;if(!t)return;t[5]!==n&&(i=t[6]?qa(+t[5]):Jn(+t[5]));let s=pD(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=e7(s,r,o):t[1]==="hsv"?n=t7(s,r,o):n=Ym(s,r,o),{r:n[0],g:n[1],b:n[2],a:i}}function n7(e,t){var i=qm(e);i[0]=pD(i[0]+t),i=Ym(i),e.r=i[0],e.g=i[1],e.b=i[2]}function s7(e){if(!e)return;let t=qm(e),i=t[0],n=cD(t[1]),s=cD(t[2]);return e.a<255?`hsla(${i}, ${n}%, ${s}%, ${fn(e.a)})`:`hsl(${i}, ${n}%, ${s}%)`}var uD={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},dD={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function r7(){let e={},t=Object.keys(dD),i=Object.keys(uD),n,s,r,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],s=0;s<i.length;s++)r=i[s],a=a.replace(r,uD[r]);r=parseInt(dD[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}var cd;function o7(e){cd||(cd=r7(),cd.transparent=[0,0,0,0]);let t=cd[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var a7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function l7(e){let t=a7.exec(e),i=255,n,s,r;if(t){if(t[7]!==n){let o=+t[7];i=t[8]?qa(o):Xn(o*255,0,255)}return n=+t[1],s=+t[3],r=+t[5],n=255&(t[2]?qa(n):Xn(n,0,255)),s=255&(t[4]?qa(s):Xn(s,0,255)),r=255&(t[6]?qa(r):Xn(r,0,255)),{r:n,g:s,b:r,a:i}}}function c7(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${fn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}var Um=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,no=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function u7(e,t,i){let n=no(fn(e.r)),s=no(fn(e.g)),r=no(fn(e.b));return{r:Jn(Um(n+i*(no(fn(t.r))-n))),g:Jn(Um(s+i*(no(fn(t.g))-s))),b:Jn(Um(r+i*(no(fn(t.b))-r))),a:e.a+i*(t.a-e.a)}}function ud(e,t,i){if(e){let n=qm(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*i,t===0?360:1)),n=Ym(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function fD(e,t){return e&&Object.assign(t||{},e)}function hD(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Jn(e[3]))):(t=fD(e,{r:0,g:0,b:0,a:1}),t.a=Jn(t.a)),t}function d7(e){return e.charAt(0)==="r"?l7(e):i7(e)}var Ka=class e{constructor(t){if(t instanceof e)return t;let i=typeof t,n;i==="object"?n=hD(t):i==="string"&&(n=qB(t)||o7(t)||d7(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=fD(this._rgb);return t&&(t.a=fn(t.a)),t}set rgb(t){this._rgb=hD(t)}rgbString(){return this._valid?c7(this._rgb):void 0}hexString(){return this._valid?YB(this._rgb):void 0}hslString(){return this._valid?s7(this._rgb):void 0}mix(t,i){if(t){let n=this.rgb,s=t.rgb,r,o=i===r?.5:i,a=2*o-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,n.r=255&c*n.r+r*s.r+.5,n.g=255&c*n.g+r*s.g+.5,n.b=255&c*n.b+r*s.b+.5,n.a=o*n.a+(1-o)*s.a,this.rgb=n}return this}interpolate(t,i){return t&&(this._rgb=u7(this._rgb,t._rgb,i)),this}clone(){return new e(this.rgb)}alpha(t){return this._rgb.a=Jn(t),this}clearer(t){let i=this._rgb;return i.a*=1-t,this}greyscale(){let t=this._rgb,i=Ya(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=i,this}opaquer(t){let i=this._rgb;return i.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return ud(this._rgb,2,t),this}darken(t){return ud(this._rgb,2,-t),this}saturate(t){return ud(this._rgb,1,t),this}desaturate(t){return ud(this._rgb,1,-t),this}rotate(t){return n7(this._rgb,t),this}};function zi(){}var MD=(()=>{let e=0;return()=>e++})();function J(e){return e==null}function we(e){if(Array.isArray&&Array.isArray(e))return!0;let t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ie(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ie(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function kt(e,t){return Ie(e)?e:t}function K(e,t){return typeof e>"u"?t:e}var RD=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,Jm=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ce(e,t,i){if(e&&typeof e.call=="function")return e.apply(i,t)}function pe(e,t,i,n){let s,r,o;if(we(e))if(r=e.length,n)for(s=r-1;s>=0;s--)t.call(i,e[s],s);else for(s=0;s<r;s++)t.call(i,e[s],s);else if(ie(e))for(o=Object.keys(e),r=o.length,s=0;s<r;s++)t.call(i,e[o[s]],o[s])}function Xa(e,t){let i,n,s,r;if(!e||!t||e.length!==t.length)return!1;for(i=0,n=e.length;i<n;++i)if(s=e[i],r=t[i],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function pd(e){if(we(e))return e.map(pd);if(ie(e)){let t=Object.create(null),i=Object.keys(e),n=i.length,s=0;for(;s<n;++s)t[i[s]]=pd(e[i[s]]);return t}return e}function FD(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function h7(e,t,i,n){if(!FD(e))return;let s=t[e],r=i[e];ie(s)&&ie(r)?ro(s,r,n):t[e]=pd(r)}function ro(e,t,i){let n=we(t)?t:[t],s=n.length;if(!ie(e))return e;i=i||{};let r=i.merger||h7,o;for(let a=0;a<s;++a){if(o=n[a],!ie(o))continue;let l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],e,o,i)}return e}function ao(e,t){return ro(e,t,{merger:g7})}function g7(e,t,i){if(!FD(e))return;let n=t[e],s=i[e];ie(n)&&ie(s)?ao(n,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=pd(s))}var mD={"":e=>e,x:e=>e.x,y:e=>e.y};function p7(e){let t=e.split("."),i=[],n="";for(let s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function f7(e){let t=p7(e);return i=>{for(let n of t){if(n==="")break;i=i&&i[n]}return i}}function Cn(e,t){return(mD[t]||(mD[t]=f7(t)))(e)}function Cd(e){return e.charAt(0).toUpperCase()+e.slice(1)}var lo=e=>typeof e<"u",mn=e=>typeof e=="function",ev=(e,t)=>{if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;return!0};function ID(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}var ye=Math.PI,be=2*ye,m7=be+ye,fd=Number.POSITIVE_INFINITY,v7=ye/180,Ae=ye/2,js=ye/4,vD=ye*2/3,vn=Math.log10,Si=Math.sign;function co(e,t,i){return Math.abs(e-t)<i}function tv(e){let t=Math.round(e);e=co(e,t,e/1e3)?t:e;let i=Math.pow(10,Math.floor(vn(e))),n=e/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function PD(e){let t=[],i=Math.sqrt(e),n;for(n=1;n<i;n++)e%n===0&&(t.push(n),t.push(e/n));return i===(i|0)&&t.push(i),t.sort((s,r)=>s-r).pop(),t}function C7(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function qs(e){return!C7(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function AD(e,t){let i=Math.round(e);return i-t<=e&&i+t>=e}function iv(e,t,i){let n,s,r;for(n=0,s=e.length;n<s;n++)r=e[n][i],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function li(e){return e*(ye/180)}function wd(e){return e*(180/ye)}function nv(e){if(!Ie(e))return;let t=1,i=0;for(;Math.round(e*t)/t!==e;)t*=10,i++;return i}function sv(e,t){let i=t.x-e.x,n=t.y-e.y,s=Math.sqrt(i*i+n*n),r=Math.atan2(n,i);return r<-.5*ye&&(r+=be),{angle:r,distance:s}}function md(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function w7(e,t){return(e-t+m7)%be-ye}function Tt(e){return(e%be+be)%be}function uo(e,t,i,n){let s=Tt(e),r=Tt(t),o=Tt(i),a=Tt(r-s),l=Tt(o-s),c=Tt(s-r),u=Tt(s-o);return s===r||s===o||n&&r===o||a>l&&c<u}function Ve(e,t,i){return Math.max(t,Math.min(i,e))}function TD(e){return Ve(e,-32768,32767)}function Wi(e,t,i,n=1e-6){return e>=Math.min(t,i)-n&&e<=Math.max(t,i)+n}function yd(e,t,i){i=i||(o=>e[o]<t);let n=e.length-1,s=0,r;for(;n-s>1;)r=s+n>>1,i(r)?s=r:n=r;return{lo:s,hi:n}}var Bi=(e,t,i,n)=>yd(e,i,n?s=>{let r=e[s][t];return r<i||r===i&&e[s+1][t]===i}:s=>e[s][t]<i),kD=(e,t,i)=>yd(e,i,n=>e[n][t]>=i);function _D(e,t,i){let n=0,s=e.length;for(;n<s&&e[n]<t;)n++;for(;s>n&&e[s-1]>i;)s--;return n>0||s<e.length?e.slice(n,s):e}var LD=["push","pop","shift","splice","unshift"];function OD(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),LD.forEach(i=>{let n="_onData"+Cd(i),s=e[i];Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value(...r){let o=s.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...r)}),o}})})}function rv(e,t){let i=e._chartjs;if(!i)return;let n=i.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(LD.forEach(r=>{delete e[r]}),delete e._chartjs)}function ov(e){let t=new Set(e);return t.size===e.length?e:Array.from(t)}var av=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function lv(e,t){let i=[],n=!1;return function(...s){i=s,n||(n=!0,av.call(window,()=>{n=!1,e.apply(t,i)}))}}function ND(e,t){let i;return function(...n){return t?(clearTimeout(i),i=setTimeout(e,t,n)):e.apply(this,n),t}}var bd=e=>e==="start"?"left":e==="end"?"right":"center",Je=(e,t,i)=>e==="start"?t:e==="end"?i:(t+i)/2,VD=(e,t,i,n)=>e===(n?"left":"right")?i:e==="center"?(t+i)/2:t;function cv(e,t,i){let n=t.length,s=0,r=n;if(e._sorted){let{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:g,maxDefined:p}=o.getUserBounds();if(g){if(s=Math.min(Bi(l,u,d).lo,i?n:Bi(t,u,o.getPixelForValue(d)).lo),c){let f=l.slice(0,s+1).reverse().findIndex(m=>!J(m[a.axis]));s-=Math.max(0,f)}s=Ve(s,0,n-1)}if(p){let f=Math.max(Bi(l,o.axis,h,!0).hi+1,i?0:Bi(t,u,o.getPixelForValue(h),!0).hi+1);if(c){let m=l.slice(f-1).findIndex(v=>!J(v[a.axis]));f+=Math.max(0,m)}r=Ve(f,s,n)-s}else r=n-s}return{start:s,count:r}}function uv(e){let{xScale:t,yScale:i,_scaleRanges:n}=e,s={xmin:t.min,xmax:t.max,ymin:i.min,ymax:i.max};if(!n)return e._scaleRanges=s,!0;let r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,s),r}var dd=e=>e===0||e===1,CD=(e,t,i)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*be/i)),wD=(e,t,i)=>Math.pow(2,-10*e)*Math.sin((e-t)*be/i)+1,so={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Ae)+1,easeOutSine:e=>Math.sin(e*Ae),easeInOutSine:e=>-.5*(Math.cos(ye*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>dd(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>dd(e)?e:CD(e,.075,.3),easeOutElastic:e=>dd(e)?e:wD(e,.075,.3),easeInOutElastic(e){return dd(e)?e:e<.5?.5*CD(e*2,.1125,.45):.5+.5*wD(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-so.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?so.easeInBounce(e*2)*.5:so.easeOutBounce(e*2-1)*.5+.5};function dv(e){if(e&&typeof e=="object"){let t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function hv(e){return dv(e)?e:new Ka(e)}function Qm(e){return dv(e)?e:new Ka(e).saturate(.5).darken(.1).hexString()}var y7=["x","y","borderWidth","radius","tension"],b7=["color","borderColor","backgroundColor"];function S7(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:b7},numbers:{type:"number",properties:y7}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function x7(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var yD=new Map;function D7(e,t){t=t||{};let i=e+JSON.stringify(t),n=yD.get(i);return n||(n=new Intl.NumberFormat(e,t),yD.set(i,n)),n}function ho(e,t,i){return D7(t,i).format(e)}var HD={values(e){return we(e)?e:""+e},numeric(e,t,i){if(e===0)return"0";let n=this.chart.options.locale,s,r=e;if(i.length>1){let c=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=E7(e,i)}let o=vn(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ho(e,n,l)},logarithmic(e,t,i){if(e===0)return"0";let n=i[t].significand||e/Math.pow(10,Math.floor(vn(e)));return[1,2,3,5,10,15].includes(n)||t>.8*i.length?HD.numeric.call(this,e,t,i):""}};function E7(e,t){let i=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(i)>=1&&e!==Math.floor(e)&&(i=e-Math.floor(e)),i}var Ja={formatters:HD};function M7(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,i)=>i.lineWidth,tickColor:(t,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ja.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var ts=Object.create(null),Sd=Object.create(null);function Qa(e,t){if(!t)return e;let i=t.split(".");for(let n=0,s=i.length;n<s;++n){let r=i[n];e=e[r]||(e[r]=Object.create(null))}return e}function Zm(e,t,i){return typeof t=="string"?ro(Qa(e,t),i):ro(Qa(e,""),t)}var Xm=class{constructor(t,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Qm(s.backgroundColor),this.hoverBorderColor=(n,s)=>Qm(s.borderColor),this.hoverColor=(n,s)=>Qm(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(i)}set(t,i){return Zm(this,t,i)}get(t){return Qa(this,t)}describe(t,i){return Zm(Sd,t,i)}override(t,i){return Zm(ts,t,i)}route(t,i,n,s){let r=Qa(this,t),o=Qa(this,n),a="_"+i;Object.defineProperties(r,{[a]:{value:r[i],writable:!0},[i]:{enumerable:!0,get(){let l=this[a],c=o[s];return ie(l)?Object.assign({},c,l):K(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(i=>i(this))}},Ee=new Xm({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[S7,x7,M7]);function R7(e){return!e||J(e.size)||J(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Za(e,t,i,n,s){let r=t[s];return r||(r=t[s]=e.measureText(s).width,i.push(s)),r>n&&(n=r),n}function BD(e,t,i,n){n=n||{};let s=n.data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(s=n.data={},r=n.garbageCollect=[],n.font=t),e.save(),e.font=t;let o=0,a=i.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=i[l],d!=null&&!we(d))o=Za(e,s,r,o,d);else if(we(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!we(h)&&(o=Za(e,s,r,o,h));e.restore();let g=r.length/2;if(g>i.length){for(l=0;l<g;l++)delete s[r[l]];r.splice(0,g)}return o}function is(e,t,i){let n=e.currentDevicePixelRatio,s=i!==0?Math.max(i/2,.5):0;return Math.round((t-s)*n)/n+s}function gv(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function xd(e,t,i,n){pv(e,t,i,n,null)}function pv(e,t,i,n,s){let r,o,a,l,c,u,d,h,g=t.pointStyle,p=t.rotation,f=t.radius,m=(p||0)*v7;if(g&&typeof g=="object"&&(r=g.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(i,n),e.rotate(m),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(f)||f<=0)){switch(e.beginPath(),g){default:s?e.ellipse(i,n,s/2,f,0,0,be):e.arc(i,n,f,0,be),e.closePath();break;case"triangle":u=s?s/2:f,e.moveTo(i+Math.sin(m)*u,n-Math.cos(m)*f),m+=vD,e.lineTo(i+Math.sin(m)*u,n-Math.cos(m)*f),m+=vD,e.lineTo(i+Math.sin(m)*u,n-Math.cos(m)*f),e.closePath();break;case"rectRounded":c=f*.516,l=f-c,o=Math.cos(m+js)*l,d=Math.cos(m+js)*(s?s/2-c:l),a=Math.sin(m+js)*l,h=Math.sin(m+js)*(s?s/2-c:l),e.arc(i-d,n-a,c,m-ye,m-Ae),e.arc(i+h,n-o,c,m-Ae,m),e.arc(i+d,n+a,c,m,m+Ae),e.arc(i-h,n+o,c,m+Ae,m+ye),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*f,u=s?s/2:l,e.rect(i-u,n-l,2*u,2*l);break}m+=js;case"rectRot":d=Math.cos(m)*(s?s/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(s?s/2:f),e.moveTo(i-d,n-a),e.lineTo(i+h,n-o),e.lineTo(i+d,n+a),e.lineTo(i-h,n+o),e.closePath();break;case"crossRot":m+=js;case"cross":d=Math.cos(m)*(s?s/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(s?s/2:f),e.moveTo(i-d,n-a),e.lineTo(i+d,n+a),e.moveTo(i+h,n-o),e.lineTo(i-h,n+o);break;case"star":d=Math.cos(m)*(s?s/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(s?s/2:f),e.moveTo(i-d,n-a),e.lineTo(i+d,n+a),e.moveTo(i+h,n-o),e.lineTo(i-h,n+o),m+=js,d=Math.cos(m)*(s?s/2:f),o=Math.cos(m)*f,a=Math.sin(m)*f,h=Math.sin(m)*(s?s/2:f),e.moveTo(i-d,n-a),e.lineTo(i+d,n+a),e.moveTo(i+h,n-o),e.lineTo(i-h,n+o);break;case"line":o=s?s/2:Math.cos(m)*f,a=Math.sin(m)*f,e.moveTo(i-o,n-a),e.lineTo(i+o,n+a);break;case"dash":e.moveTo(i,n),e.lineTo(i+Math.cos(m)*(s?s/2:f),n+Math.sin(m)*f);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Gi(e,t,i){return i=i||.5,!t||e&&e.x>t.left-i&&e.x<t.right+i&&e.y>t.top-i&&e.y<t.bottom+i}function el(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function tl(e){e.restore()}function GD(e,t,i,n,s){if(!t)return e.lineTo(i.x,i.y);if(s==="middle"){let r=(t.x+i.x)/2;e.lineTo(r,t.y),e.lineTo(r,i.y)}else s==="after"!=!!n?e.lineTo(t.x,i.y):e.lineTo(i.x,t.y);e.lineTo(i.x,i.y)}function zD(e,t,i,n){if(!t)return e.lineTo(i.x,i.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function F7(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),J(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function I7(e,t,i,n,s){if(s.strikethrough||s.underline){let r=e.measureText(n),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function P7(e,t){let i=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=i}function ns(e,t,i,n,s,r={}){let o=we(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="",l,c;for(e.save(),e.font=s.string,F7(e,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&P7(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),J(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,i,n,r.maxWidth)),e.fillText(c,i,n,r.maxWidth),I7(e,i,n,c,r),n+=Number(s.lineHeight);e.restore()}function go(e,t){let{x:i,y:n,w:s,h:r,radius:o}=t;e.arc(i+o.topLeft,n+o.topLeft,o.topLeft,1.5*ye,ye,!0),e.lineTo(i,n+r-o.bottomLeft),e.arc(i+o.bottomLeft,n+r-o.bottomLeft,o.bottomLeft,ye,Ae,!0),e.lineTo(i+s-o.bottomRight,n+r),e.arc(i+s-o.bottomRight,n+r-o.bottomRight,o.bottomRight,Ae,0,!0),e.lineTo(i+s,n+o.topRight),e.arc(i+s-o.topRight,n+o.topRight,o.topRight,0,-Ae,!0),e.lineTo(i+o.topLeft,n)}var A7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,T7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function k7(e,t){let i=(""+e).match(A7);if(!i||i[1]==="normal")return t*1.2;switch(e=+i[2],i[3]){case"px":return e;case"%":e/=100;break}return t*e}var _7=e=>+e||0;function Dd(e,t){let i={},n=ie(t),s=n?Object.keys(t):t,r=ie(e)?n?o=>K(e[o],e[t[o]]):o=>e[o]:()=>e;for(let o of s)i[o]=_7(r(o));return i}function fv(e){return Dd(e,{top:"y",right:"x",bottom:"y",left:"x"})}function ss(e){return Dd(e,["topLeft","topRight","bottomLeft","bottomRight"])}function et(e){let t=fv(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Oe(e,t){e=e||{},t=t||Ee.font;let i=K(e.size,t.size);typeof i=="string"&&(i=parseInt(i,10));let n=K(e.style,t.style);n&&!(""+n).match(T7)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let s={family:K(e.family,t.family),lineHeight:k7(K(e.lineHeight,t.lineHeight),i),size:i,style:n,weight:K(e.weight,t.weight),string:""};return s.string=R7(s),s}function po(e,t,i,n){let s=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),i!==void 0&&we(a)&&(a=a[i%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function WD(e,t,i){let{min:n,max:s}=e,r=Jm(t,(s-n)/2),o=(a,l)=>i&&a===0?0:a+l;return{min:o(n,-Math.abs(r)),max:o(s,r)}}function wn(e,t){return Object.assign(Object.create(e),t)}function Ed(e,t=[""],i,n,s=()=>e[0]){let r=i||e;typeof n>"u"&&(n=$D("_fallback",e));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:s,override:a=>Ed([a,...e],t,r,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return jD(a,l,()=>z7(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return SD(a).includes(l)},ownKeys(a){return SD(a)},set(a,l,c){let u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function $s(e,t,i,n){let s={_cacheable:!1,_proxy:e,_context:t,_subProxy:i,_stack:new Set,_descriptors:mv(e,n),setContext:r=>$s(e,r,i,n),override:r=>$s(e.override(r),t,i,n)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return jD(r,o,()=>O7(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function mv(e,t={scriptable:!0,indexable:!0}){let{_scriptable:i=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:i,indexable:n,isScriptable:mn(i)?i:()=>i,isIndexable:mn(n)?n:()=>n}}var L7=(e,t)=>e?e+Cd(t):t,vv=(e,t)=>ie(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function jD(e,t,i){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];let n=i();return e[t]=n,n}function O7(e,t,i){let{_proxy:n,_context:s,_subProxy:r,_descriptors:o}=e,a=n[t];return mn(a)&&o.isScriptable(t)&&(a=N7(t,a,e,i)),we(a)&&a.length&&(a=V7(t,a,e,o.isIndexable)),vv(t,a)&&(a=$s(a,s,r&&r[t],o)),a}function N7(e,t,i,n){let{_proxy:s,_context:r,_subProxy:o,_stack:a}=i;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(r,o||n);return a.delete(e),vv(e,l)&&(l=Cv(s._scopes,s,e,l)),l}function V7(e,t,i,n){let{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=i;if(typeof r.index<"u"&&n(e))return t[r.index%t.length];if(ie(t[0])){let l=t,c=s._scopes.filter(u=>u!==l);t=[];for(let u of l){let d=Cv(c,s,e,u);t.push($s(d,r,o&&o[e],a))}}return t}function UD(e,t,i){return mn(e)?e(t,i):e}var H7=(e,t)=>e===!0?t:typeof e=="string"?Cn(t,e):void 0;function B7(e,t,i,n,s){for(let r of t){let o=H7(i,r);if(o){e.add(o);let a=UD(o._fallback,i,s);if(typeof a<"u"&&a!==i&&a!==n)return a}else if(o===!1&&typeof n<"u"&&i!==n)return null}return!1}function Cv(e,t,i,n){let s=t._rootScopes,r=UD(t._fallback,i,n),o=[...e,...s],a=new Set;a.add(n);let l=bD(a,o,i,r||i,n);return l===null||typeof r<"u"&&r!==i&&(l=bD(a,o,r,l,n),l===null)?!1:Ed(Array.from(a),[""],s,r,()=>G7(t,i,n))}function bD(e,t,i,n,s){for(;i;)i=B7(e,t,i,n,s);return i}function G7(e,t,i){let n=e._getTarget();t in n||(n[t]={});let s=n[t];return we(s)&&ie(i)?i:s||{}}function z7(e,t,i,n){let s;for(let r of t)if(s=$D(L7(r,e),i),typeof s<"u")return vv(e,s)?Cv(i,n,e,s):s}function $D(e,t){for(let i of t){if(!i)continue;let n=i[e];if(typeof n<"u")return n}}function SD(e){let t=e._keys;return t||(t=e._keys=W7(e._scopes)),t}function W7(e){let t=new Set;for(let i of e)for(let n of Object.keys(i).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}function wv(e,t,i,n){let{iScale:s}=e,{key:r="r"}=this._parsing,o=new Array(n),a,l,c,u;for(a=0,l=n;a<l;++a)c=a+i,u=t[c],o[a]={r:s.parse(Cn(u,r),c)};return o}var j7=Number.EPSILON||1e-14,oo=(e,t)=>t<e.length&&!e[t].skip&&e[t],qD=e=>e==="x"?"y":"x";function U7(e,t,i,n){let s=e.skip?t:e,r=t,o=i.skip?t:i,a=md(r,s),l=md(o,r),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=n*c,h=n*u;return{previous:{x:r.x-d*(o.x-s.x),y:r.y-d*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}}function $7(e,t,i){let n=e.length,s,r,o,a,l,c=oo(e,0);for(let u=0;u<n-1;++u)if(l=c,c=oo(e,u+1),!(!l||!c)){if(co(t[u],0,j7)){i[u]=i[u+1]=0;continue}s=i[u]/t[u],r=i[u+1]/t[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),i[u]=s*o*t[u],i[u+1]=r*o*t[u])}}function q7(e,t,i="x"){let n=qD(i),s=e.length,r,o,a,l=oo(e,0);for(let c=0;c<s;++c){if(o=a,a=l,l=oo(e,c+1),!a)continue;let u=a[i],d=a[n];o&&(r=(u-o[i])/3,a[`cp1${i}`]=u-r,a[`cp1${n}`]=d-r*t[c]),l&&(r=(l[i]-u)/3,a[`cp2${i}`]=u+r,a[`cp2${n}`]=d+r*t[c])}}function K7(e,t="x"){let i=qD(t),n=e.length,s=Array(n).fill(0),r=Array(n),o,a,l,c=oo(e,0);for(o=0;o<n;++o)if(a=l,l=c,c=oo(e,o+1),!!l){if(c){let u=c[t]-l[t];s[o]=u!==0?(c[i]-l[i])/u:0}r[o]=a?c?Si(s[o-1])!==Si(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}$7(e,s,r),q7(e,r,t)}function hd(e,t,i){return Math.max(Math.min(e,i),t)}function Y7(e,t){let i,n,s,r,o,a=Gi(e[0],t);for(i=0,n=e.length;i<n;++i)o=r,r=a,a=i<n-1&&Gi(e[i+1],t),r&&(s=e[i],o&&(s.cp1x=hd(s.cp1x,t.left,t.right),s.cp1y=hd(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=hd(s.cp2x,t.left,t.right),s.cp2y=hd(s.cp2y,t.top,t.bottom)))}function KD(e,t,i,n,s){let r,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")K7(e,s);else{let c=n?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],l=U7(c,a,e[Math.min(r+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Y7(e,i)}function Md(){return typeof window<"u"&&typeof document<"u"}function Rd(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function vd(e,t,i){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[i])):n=e,n}var Fd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function Q7(e,t){return Fd(e).getPropertyValue(t)}var Z7=["top","right","bottom","left"];function Us(e,t,i){let n={};i=i?"-"+i:"";for(let s=0;s<4;s++){let r=Z7[s];n[r]=parseFloat(e[t+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var X7=(e,t,i)=>(e>0||t>0)&&(!i||!i.shadowRoot);function J7(e,t){let i=e.touches,n=i&&i.length?i[0]:e,{offsetX:s,offsetY:r}=n,o=!1,a,l;if(X7(s,r,e.target))a=s,l=r;else{let c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function rs(e,t){if("native"in e)return e;let{canvas:i,currentDevicePixelRatio:n}=t,s=Fd(i),r=s.boxSizing==="border-box",o=Us(s,"padding"),a=Us(s,"border","width"),{x:l,y:c,box:u}=J7(e,i),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:g,height:p}=t;return r&&(g-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/g*i.width/n),y:Math.round((c-h)/p*i.height/n)}}function eG(e,t,i){let n,s;if(t===void 0||i===void 0){let r=e&&Rd(e);if(!r)t=e.clientWidth,i=e.clientHeight;else{let o=r.getBoundingClientRect(),a=Fd(r),l=Us(a,"border","width"),c=Us(a,"padding");t=o.width-c.width-l.width,i=o.height-c.height-l.height,n=vd(a.maxWidth,r,"clientWidth"),s=vd(a.maxHeight,r,"clientHeight")}}return{width:t,height:i,maxWidth:n||fd,maxHeight:s||fd}}var gd=e=>Math.round(e*10)/10;function YD(e,t,i,n){let s=Fd(e),r=Us(s,"margin"),o=vd(s.maxWidth,e,"clientWidth")||fd,a=vd(s.maxHeight,e,"clientHeight")||fd,l=eG(e,t,i),{width:c,height:u}=l;if(s.boxSizing==="content-box"){let h=Us(s,"border","width"),g=Us(s,"padding");c-=g.width+h.width,u-=g.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,n?c/n:u-r.height),c=gd(Math.min(c,o,l.maxWidth)),u=gd(Math.min(u,a,l.maxHeight)),c&&!u&&(u=gd(c/2)),(t!==void 0||i!==void 0)&&n&&l.height&&u>l.height&&(u=l.height,c=gd(Math.floor(u*n))),{width:c,height:u}}function yv(e,t,i){let n=t||1,s=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);let o=e.canvas;return o.style&&(i||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==s||o.width!==r?(e.currentDevicePixelRatio=n,o.height=s,o.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}var QD=function(){let e=!1;try{let t={get passive(){return e=!0,!1}};Md()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function bv(e,t){let i=Q7(e,t),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function es(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}function ZD(e,t,i,n){return{x:e.x+i*(t.x-e.x),y:n==="middle"?i<.5?e.y:t.y:n==="after"?i<1?e.y:t.y:i>0?t.y:e.y}}function XD(e,t,i,n){let s={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=es(e,s,i),a=es(s,r,i),l=es(r,t,i),c=es(o,a,i),u=es(a,l,i);return es(c,u,i)}var tG=function(e,t){return{x(i){return e+e+t-i},setWidth(i){t=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},iG=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Ks(e,t,i){return e?tG(t,i):iG()}function Sv(e,t){let i,n;(t==="ltr"||t==="rtl")&&(i=e.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",t,"important"),e.prevTextDirection=n)}function xv(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function JD(e){return e==="angle"?{between:uo,compare:w7,normalize:Tt}:{between:Wi,compare:(t,i)=>t-i,normalize:t=>t}}function xD({start:e,end:t,count:i,loop:n,style:s}){return{start:e%i,end:t%i,loop:n&&(t-e+1)%i===0,style:s}}function nG(e,t,i){let{property:n,start:s,end:r}=i,{between:o,normalize:a}=JD(n),l=t.length,{start:c,end:u,loop:d}=e,h,g;if(d){for(c+=l,u+=l,h=0,g=l;h<g&&o(a(t[c%l][n]),s,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:e.style}}function Dv(e,t,i){if(!i)return[e];let{property:n,start:s,end:r}=i,o=t.length,{compare:a,between:l,normalize:c}=JD(n),{start:u,end:d,loop:h,style:g}=nG(e,t,i),p=[],f=!1,m=null,v,C,w,y=()=>l(s,w,v)&&a(s,w)!==0,S=()=>a(r,v)===0||l(r,w,v),b=()=>f||y(),M=()=>!f||S();for(let R=u,A=u;R<=d;++R)C=t[R%o],!C.skip&&(v=c(C[n]),v!==w&&(f=l(v,s,r),m===null&&b()&&(m=a(v,s)===0?R:A),m!==null&&M()&&(p.push(xD({start:m,end:R,loop:h,count:o,style:g})),m=null),A=R,w=v));return m!==null&&p.push(xD({start:m,end:d,loop:h,count:o,style:g})),p}function Ev(e,t){let i=[],n=e.segments;for(let s=0;s<n.length;s++){let r=Dv(n[s],e.points,t);r.length&&i.push(...r)}return i}function sG(e,t,i,n){let s=0,r=t-1;if(i&&!n)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,i&&(r+=s);r>s&&e[r%t].skip;)r--;return r%=t,{start:s,end:r}}function rG(e,t,i,n){let s=e.length,r=[],o=t,a=e[t],l;for(l=t+1;l<=i;++l){let c=e[l%s];c.skip||c.stop?a.skip||(n=!1,r.push({start:t%s,end:(l-1)%s,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&r.push({start:t%s,end:o%s,loop:n}),r}function eE(e,t){let i=e.points,n=e.options.spanGaps,s=i.length;if(!s)return[];let r=!!e._loop,{start:o,end:a}=sG(i,s,r,n);if(n===!0)return DD(e,[{start:o,end:a,loop:r}],i,t);let l=a<o?a+s:a,c=!!e._fullLoop&&o===0&&a===s-1;return DD(e,rG(i,o,l,c),i,t)}function DD(e,t,i,n){return!n||!n.setContext||!i?t:oG(e,t,i,n)}function oG(e,t,i,n){let s=e._chart.getContext(),r=ED(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=i.length,c=[],u=r,d=t[0].start,h=d;function g(p,f,m,v){let C=a?-1:1;if(p!==f){for(p+=l;i[p%l].skip;)p-=C;for(;i[f%l].skip;)f+=C;p%l!==f%l&&(c.push({start:p%l,end:f%l,loop:m,style:v}),u=v,d=f%l)}}for(let p of t){d=a?d:p.start;let f=i[d%l],m;for(h=d+1;h<=p.end;h++){let v=i[h%l];m=ED(n.setContext(wn(s,{type:"segment",p0:f,p1:v,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),aG(m,u)&&g(d,h-1,p.loop,u),f=v,u=m}d<h-1&&g(d,h-1,p.loop,u)}return c}function ED(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function aG(e,t){if(!t)return!1;let i=[],n=function(s,r){return dv(r)?(i.includes(r)||i.push(r),i.indexOf(r)):r};return JSON.stringify(e,n)!==JSON.stringify(t,n)}var Ov=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,i,n,s){let r=i.listeners[s],o=i.duration;r.forEach(a=>a({chart:t,initial:i.initial,numSteps:o,currentStep:Math.min(n-i.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=av.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let i=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;let r=n.items,o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),r.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),i+=r.length}),this._lastDate=t,i===0&&(this._running=!1)}_getAnims(t){let i=this._charts,n=i.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(t,n)),n}listen(t,i,n){this._getAnims(t).listeners[i].push(n)}add(t,i){!i||!i.length||this._getAnims(t).items.push(...i)}has(t){return this._getAnims(t).items.length>0}start(t){let i=this._charts.get(t);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;let i=this._charts.get(t);return!(!i||!i.running||!i.items.length)}stop(t){let i=this._charts.get(t);if(!i||!i.items.length)return;let n=i.items,s=n.length-1;for(;s>=0;--s)n[s].cancel();i.items=[],this._notify(t,i,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},yn=new Ov,tE="transparent",lG={boolean(e,t,i){return i>.5?t:e},color(e,t,i){let n=hv(e||tE),s=n.valid&&hv(t||tE);return s&&s.valid?s.mix(n,i).hexString():t},number(e,t,i){return e+(t-e)*i}},Nv=class{constructor(t,i,n,s){let r=i[n];s=po([t.to,s,r,t.from]);let o=po([t.from,r,s]);this._active=!0,this._fn=t.fn||lG[t.type||typeof o],this._easing=so[t.easing]||so.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=i,this._prop=n,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,i,n){if(this._active){this._notify(!1);let s=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=po([t.to,i,s,t.from]),this._from=po([t.from,s,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let i=t-this._start,n=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to,l;if(this._active=r!==a&&(o||i<n),!this._active){this._target[s]=a,this._notify(!0);return}if(i<0){this._target[s]=r;return}l=i/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((i,n)=>{t.push({res:i,rej:n})})}_notify(t){let i=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][i]()}},Vd=class{constructor(t,i){this._chart=t,this._properties=new Map,this.configure(i)}configure(t){if(!ie(t))return;let i=Object.keys(Ee.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{let r=t[s];if(!ie(r))return;let o={};for(let a of i)o[a]=r[a];(we(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,i){let n=i.options,s=uG(t,n);if(!s)return[];let r=this._createAnimations(s,n);return n.$shared&&cG(t.options.$animations,n).then(()=>{t.options=n},()=>{}),r}_createAnimations(t,i){let n=this._properties,s=[],r=t.$animations||(t.$animations={}),o=Object.keys(i),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,i));continue}let u=i[c],d=r[c],h=n.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}r[c]=d=new Nv(h,t,c,u),s.push(d)}return s}update(t,i){if(this._properties.size===0){Object.assign(t,i);return}let n=this._createAnimations(t,i);if(n.length)return yn.add(this._chart,n),!0}};function cG(e,t){let i=[],n=Object.keys(t);for(let s=0;s<n.length;s++){let r=e[n[s]];r&&r.active()&&i.push(r.wait())}return Promise.all(i)}function uG(e,t){if(!t)return;let i=e.options;if(!i){e.options=t;return}return i.$shared&&(e.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function iE(e,t){let i=e&&e.options||{},n=i.reverse,s=i.min===void 0?t:0,r=i.max===void 0?t:0;return{start:n?r:s,end:n?s:r}}function dG(e,t,i){if(i===!1)return!1;let n=iE(e,i),s=iE(t,i);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function hG(e){let t,i,n,s;return ie(e)?(t=e.top,i=e.right,n=e.bottom,s=e.left):t=i=n=s=e,{top:t,right:i,bottom:n,left:s,disabled:e===!1}}function tM(e,t){let i=[],n=e._getSortedDatasetMetas(t),s,r;for(s=0,r=n.length;s<r;++s)i.push(n[s].index);return i}function nE(e,t,i,n={}){let s=e.keys,r=n.mode==="single",o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===i){if(u=!0,n.all)continue;break}c=e.values[l],Ie(c)&&(r||t===0||Si(t)===Si(c))&&(t+=c)}return!u&&!n.all?0:t}function gG(e,t){let{iScale:i,vScale:n}=t,s=i.axis==="x"?"x":"y",r=n.axis==="x"?"x":"y",o=Object.keys(e),a=new Array(o.length),l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:e[u]};return a}function Mv(e,t){let i=e&&e.options.stacked;return i||i===void 0&&t.stack!==void 0}function pG(e,t,i){return`${e.id}.${t.id}.${i.stack||i.type}`}function fG(e){let{min:t,max:i,minDefined:n,maxDefined:s}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?i:Number.POSITIVE_INFINITY}}function mG(e,t,i){let n=e[t]||(e[t]={});return n[i]||(n[i]={})}function sE(e,t,i,n){for(let s of t.getMatchingVisibleMetas(n).reverse()){let r=e[s.index];if(i&&r>0||!i&&r<0)return s.index}return null}function rE(e,t){let{chart:i,_cachedMeta:n}=e,s=i._stacks||(i._stacks={}),{iScale:r,vScale:o,index:a}=n,l=r.axis,c=o.axis,u=pG(r,o,n),d=t.length,h;for(let g=0;g<d;++g){let p=t[g],{[l]:f,[c]:m}=p,v=p._stacks||(p._stacks={});h=v[c]=mG(s,u,f),h[a]=m,h._top=sE(h,o,!0,n.type),h._bottom=sE(h,o,!1,n.type);let C=h._visualValues||(h._visualValues={});C[a]=m}}function Rv(e,t){let i=e.scales;return Object.keys(i).filter(n=>i[n].axis===t).shift()}function vG(e,t){return wn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function CG(e,t,i){return wn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:i,index:t,mode:"default",type:"data"})}function il(e,t){let i=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(let s of t){let r=s._stacks;if(!r||r[n]===void 0||r[n][i]===void 0)return;delete r[n][i],r[n]._visualValues!==void 0&&r[n]._visualValues[i]!==void 0&&delete r[n]._visualValues[i]}}}var Fv=e=>e==="reset"||e==="none",oE=(e,t)=>t?e:Object.assign({},e),wG=(e,t,i)=>e&&!t.hidden&&t._stacked&&{keys:tM(i,!0),values:null},as=(()=>{class e{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(i,n){this.chart=i,this._ctx=i.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let i=this._cachedMeta;this.configure(),this.linkScales(),i._stacked=Mv(i.vScale,i),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(i){this.index!==i&&il(this._cachedMeta),this.index=i}linkScales(){let i=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,g,p,f)=>h==="x"?g:h==="r"?f:p,o=n.xAxisID=K(s.xAxisID,Rv(i,"x")),a=n.yAxisID=K(s.yAxisID,Rv(i,"y")),l=n.rAxisID=K(s.rAxisID,Rv(i,"r")),c=n.indexAxis,u=n.iAxisID=r(c,o,a,l),d=n.vAxisID=r(c,a,o,l);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(i){return this.chart.scales[i]}_getOtherScale(i){let n=this._cachedMeta;return i===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){let i=this._cachedMeta;this._data&&rv(this._data,this),i._stacked&&il(i)}_dataCheck(){let i=this.getDataset(),n=i.data||(i.data=[]),s=this._data;if(ie(n)){let r=this._cachedMeta;this._data=gG(n,r)}else if(s!==n){if(s){rv(s,this);let r=this._cachedMeta;il(r),r._parsed=[]}n&&Object.isExtensible(n)&&OD(n,this),this._syncList=[],this._data=n}}addElements(){let i=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(i.dataset=new this.datasetElementType)}buildOrUpdateElements(i){let n=this._cachedMeta,s=this.getDataset(),r=!1;this._dataCheck();let o=n._stacked;n._stacked=Mv(n.vScale,n),n.stack!==s.stack&&(r=!0,il(n),n.stack=s.stack),this._resyncElements(i),(r||o!==n._stacked)&&(rE(this,n._parsed),n._stacked=Mv(n.vScale,n))}configure(){let i=this.chart.config,n=i.datasetScopeKeys(this._type),s=i.getOptionScopes(this.getDataset(),n,!0);this.options=i.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(i,n){let{_cachedMeta:s,_data:r}=this,{iScale:o,_stacked:a}=s,l=o.axis,c=i===0&&n===r.length?!0:s._sorted,u=i>0&&s._parsed[i-1],d,h,g;if(this._parsing===!1)s._parsed=r,s._sorted=!0,g=r;else{we(r[i])?g=this.parseArrayData(s,r,i,n):ie(r[i])?g=this.parseObjectData(s,r,i,n):g=this.parsePrimitiveData(s,r,i,n);let p=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)s._parsed[d+i]=h=g[d],c&&(p()&&(c=!1),u=h);s._sorted=c}a&&rE(this,g)}parsePrimitiveData(i,n,s,r){let{iScale:o,vScale:a}=i,l=o.axis,c=a.axis,u=o.getLabels(),d=o===a,h=new Array(r),g,p,f;for(g=0,p=r;g<p;++g)f=g+s,h[g]={[l]:d||o.parse(u[f],f),[c]:a.parse(n[f],f)};return h}parseArrayData(i,n,s,r){let{xScale:o,yScale:a}=i,l=new Array(r),c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=n[d],l[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(i,n,s,r){let{xScale:o,yScale:a}=i,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r),d,h,g,p;for(d=0,h=r;d<h;++d)g=d+s,p=n[g],u[d]={x:o.parse(Cn(p,l),g),y:a.parse(Cn(p,c),g)};return u}getParsed(i){return this._cachedMeta._parsed[i]}getDataElement(i){return this._cachedMeta.data[i]}applyStack(i,n,s){let r=this.chart,o=this._cachedMeta,a=n[i.axis],l={keys:tM(r,!0),values:n._stacks[i.axis]._visualValues};return nE(l,a,o.index,{mode:s})}updateRangeFromParsed(i,n,s,r){let o=s[n.axis],a=o===null?NaN:o,l=r&&s._stacks[n.axis];r&&l&&(r.values=l,a=nE(r,o,this._cachedMeta.index)),i.min=Math.min(i.min,a),i.max=Math.max(i.max,a)}getMinMax(i,n){let s=this._cachedMeta,r=s._parsed,o=s._sorted&&i===s.iScale,a=r.length,l=this._getOtherScale(i),c=wG(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=fG(l),g,p;function f(){p=r[g];let m=p[l.axis];return!Ie(p[i.axis])||d>m||h<m}for(g=0;g<a&&!(!f()&&(this.updateRangeFromParsed(u,i,p,c),o));++g);if(o){for(g=a-1;g>=0;--g)if(!f()){this.updateRangeFromParsed(u,i,p,c);break}}return u}getAllParsedValues(i){let n=this._cachedMeta._parsed,s=[],r,o,a;for(r=0,o=n.length;r<o;++r)a=n[r][i.axis],Ie(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(i){let n=this._cachedMeta,s=n.iScale,r=n.vScale,o=this.getParsed(i);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(i){let n=this._cachedMeta;this.update(i||"default"),n._clip=hG(K(this.options.clip,dG(n.xScale,n.yScale,this.getMaxOverflow())))}update(i){}draw(){let i=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],o=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop,d;for(s.dataset&&s.dataset.draw(i,o,l,c),d=l;d<l+c;++d){let h=r[d];h.hidden||(h.active&&u?a.push(h):h.draw(i,o))}for(d=0;d<a.length;++d)a[d].draw(i,o)}getStyle(i,n){let s=n?"active":"default";return i===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(i||0,s)}getContext(i,n,s){let r=this.getDataset(),o;if(i>=0&&i<this._cachedMeta.data.length){let a=this._cachedMeta.data[i];o=a.$context||(a.$context=CG(this.getContext(),i,a)),o.parsed=this.getParsed(i),o.raw=r.data[i],o.index=o.dataIndex=i}else o=this.$context||(this.$context=vG(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=s,o}resolveDatasetElementOptions(i){return this._resolveElementOptions(this.datasetElementType.id,i)}resolveDataElementOptions(i,n){return this._resolveElementOptions(this.dataElementType.id,n,i)}_resolveElementOptions(i,n="default",s){let r=n==="active",o=this._cachedDataOpts,a=i+"-"+n,l=o[a],c=this.enableOptionSharing&&lo(s);if(l)return oE(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,i),h=r?[`${i}Hover`,"hover",i,""]:[i,""],g=u.getOptionScopes(this.getDataset(),d),p=Object.keys(Ee.elements[i]),f=()=>this.getContext(s,r,n),m=u.resolveNamedOptions(g,p,f,h);return m.$shared&&(m.$shared=c,o[a]=Object.freeze(oE(m,c))),m}_resolveAnimations(i,n,s){let r=this.chart,o=this._cachedDataOpts,a=`animation-${n}`,l=o[a];if(l)return l;let c;if(r.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),g=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(g,this.getContext(i,s,n))}let u=new Vd(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(i){if(i.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},i))}includeOptions(i,n){return!n||Fv(i)||this.chart._animationsDisabled}_getSharedOptions(i,n){let s=this.resolveDataElementOptions(i,n),r=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(n,o)||o!==r;return this.updateSharedOptions(o,n,s),{sharedOptions:o,includeOptions:a}}updateElement(i,n,s,r){Fv(r)?Object.assign(i,s):this._resolveAnimations(n,r).update(i,s)}updateSharedOptions(i,n,s){i&&!Fv(n)&&this._resolveAnimations(void 0,n).update(i,s)}_setStyle(i,n,s,r){i.active=r;let o=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(i,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(i,n,s){this._setStyle(i,s,"active",!1)}setHoverStyle(i,n,s){this._setStyle(i,s,"active",!0)}_removeDatasetHoverStyle(){let i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!1)}_setDatasetHoverStyle(){let i=this._cachedMeta.dataset;i&&this._setStyle(i,void 0,"active",!0)}_resyncElements(i){let n=this._data,s=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let r=s.length,o=n.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,i):o<r&&this._removeElements(o,r-o)}_insertElements(i,n,s=!0){let r=this._cachedMeta,o=r.data,a=i+n,l,c=u=>{for(u.length+=n,l=u.length-1;l>=a;l--)u[l]=u[l-n]};for(c(o),l=i;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(i,n),s&&this.updateElements(o,i,n,"reset")}updateElements(i,n,s,r){}_removeElements(i,n){let s=this._cachedMeta;if(this._parsing){let r=s._parsed.splice(i,n);s._stacked&&il(s,r)}s.data.splice(i,n)}_sync(i){if(this._parsing)this._syncList.push(i);else{let[n,s,r]=i;this[n](s,r)}this.chart._dataChanges.push([this.index,...i])}_onDataPush(){let i=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-i,i])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(i,n){n&&this._sync(["_removeElements",i,n]);let s=arguments.length-2;s&&this._sync(["_insertElements",i,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return e})();function yG(e,t){if(!e._cache.$bar){let i=e.getMatchingVisibleMetas(t),n=[];for(let s=0,r=i.length;s<r;s++)n=n.concat(i[s].controller.getAllParsedValues(e));e._cache.$bar=ov(n.sort((s,r)=>s-r))}return e._cache.$bar}function bG(e){let t=e.iScale,i=yG(t,e.type),n=t._length,s,r,o,a,l=()=>{o===32767||o===-32768||(lo(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(s=0,r=i.length;s<r;++s)o=t.getPixelForValue(i[s]),l();for(a=void 0,s=0,r=t.ticks.length;s<r;++s)o=t.getPixelForTick(s),l();return n}function SG(e,t,i,n){let s=i.barThickness,r,o;return J(s)?(r=t.min*i.categoryPercentage,o=i.barPercentage):(r=s*n,o=1),{chunk:r/n,ratio:o,start:t.pixels[e]-r/2}}function xG(e,t,i,n){let s=t.pixels,r=s[e],o=e>0?s[e-1]:null,a=e<s.length-1?s[e+1]:null,l=i.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);let c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:i.barPercentage,start:c}}function DG(e,t,i,n){let s=i.parse(e[0],n),r=i.parse(e[1],n),o=Math.min(s,r),a=Math.max(s,r),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[i.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function iM(e,t,i,n){return we(e)?DG(e,t,i,n):t[i.axis]=i.parse(e,n),t}function aE(e,t,i,n){let s=e.iScale,r=e.vScale,o=s.getLabels(),a=s===r,l=[],c,u,d,h;for(c=i,u=i+n;c<u;++c)h=t[c],d={},d[s.axis]=a||s.parse(o[c],c),l.push(iM(h,d,r,c));return l}function Iv(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function EG(e,t,i){return e!==0?Si(e):(t.isHorizontal()?1:-1)*(t.min>=i?1:-1)}function MG(e){let t,i,n,s,r;return e.horizontal?(t=e.base>e.x,i="left",n="right"):(t=e.base<e.y,i="bottom",n="top"),t?(s="end",r="start"):(s="start",r="end"),{start:i,end:n,reverse:t,top:s,bottom:r}}function RG(e,t,i,n){let s=t.borderSkipped,r={};if(!s){e.borderSkipped=r;return}if(s===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=MG(e);s==="middle"&&i&&(e.enableBorderRadius=!0,(i._top||0)===n?s=c:(i._bottom||0)===n?s=u:(r[lE(u,o,a,l)]=!0,s=c)),r[lE(s,o,a,l)]=!0,e.borderSkipped=r}function lE(e,t,i,n){return n?(e=FG(e,t,i),e=cE(e,i,t)):e=cE(e,t,i),e}function FG(e,t,i){return e===t?i:e===i?t:e}function cE(e,t,i){return e==="start"?t:e==="end"?i:e}function IG(e,{inflateAmount:t},i){e.inflateAmount=t==="auto"?i===1?.33:0:t}var PG=(()=>{class e extends as{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(i,n,s,r){return aE(i,n,s,r)}parseArrayData(i,n,s,r){return aE(i,n,s,r)}parseObjectData(i,n,s,r){let{iScale:o,vScale:a}=i,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=o.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],g,p,f,m;for(g=s,p=s+r;g<p;++g)m=n[g],f={},f[o.axis]=o.parse(Cn(m,u),g),h.push(iM(Cn(m,d),f,a,g));return h}updateRangeFromParsed(i,n,s,r){super.updateRangeFromParsed(i,n,s,r);let o=s._custom;o&&n===this._cachedMeta.vScale&&(i.min=Math.min(i.min,o.min),i.max=Math.max(i.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(i){let n=this._cachedMeta,{iScale:s,vScale:r}=n,o=this.getParsed(i),a=o._custom,l=Iv(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let i=this._cachedMeta;i.stack=this.getDataset().stack}update(i){let n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,i)}updateElements(i,n,s,r){let o=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:g}=this._getSharedOptions(n,r);for(let p=n;p<n+s;p++){let f=this.getParsed(p),m=o||J(f[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,d),C=(f._stacks||{})[l.axis],w={horizontal:u,base:m.base,enableBorderRadius:!C||Iv(f._custom)||a===C._top||a===C._bottom,x:u?m.head:v.center,y:u?v.center:m.head,height:u?v.size:Math.abs(m.size),width:u?Math.abs(m.size):v.size};g&&(w.options=h||this.resolveDataElementOptions(p,i[p].active?"active":r));let y=w.options||i[p].options;RG(w,y,C,a),IG(w,y,d.ratio),this.updateElement(i[p],p,w,r)}}_getStacks(i,n){let{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=s.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],u=d=>{let h=d._parsed.find(p=>p[s.axis]===c),g=h&&h[d.vScale.axis];if(J(g)||isNaN(g))return!0};for(let d of r)if(!(n!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===i))break;return a.length||a.push(void 0),a}_getStackCount(i){return this._getStacks(void 0,i).length}_getStackIndex(i,n,s){let r=this._getStacks(i,s),o=n!==void 0?r.indexOf(n):-1;return o===-1?r.length-1:o}_getRuler(){let i=this.options,n=this._cachedMeta,s=n.iScale,r=[],o,a;for(o=0,a=n.data.length;o<a;++o)r.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));let l=i.barThickness;return{min:l||bG(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:i.grouped,ratio:l?1:i.categoryPercentage*i.barPercentage}}_calculateBarValuePixels(i){let{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(i),u=c._custom,d=Iv(u),h=c[n.axis],g=0,p=s?this.applyStack(n,c,s):h,f,m;p!==h&&(g=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&Si(h)!==Si(u.barEnd)&&(g=0),g+=h);let v=!J(o)&&!d?o:g,C=n.getPixelForValue(v);if(this.chart.getDataVisibility(i)?f=n.getPixelForValue(g+p):f=C,m=f-C,Math.abs(m)<a){m=EG(m,n,l)*a,h===l&&(C-=m/2);let w=n.getPixelForDecimal(0),y=n.getPixelForDecimal(1),S=Math.min(w,y),b=Math.max(w,y);C=Math.max(Math.min(C,b),S),f=C+m,s&&!d&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(f)-n.getValueForPixel(C))}if(C===n.getPixelForValue(l)){let w=Si(m)*n.getLineWidthForValue(l)/2;C+=w,m-=w}return{size:m,base:C,head:f,center:f+m/2}}_calculateBarIndexPixels(i,n){let s=n.scale,r=this.options,o=r.skipNull,a=K(r.maxBarThickness,1/0),l,c;if(n.grouped){let u=o?this._getStackCount(i):n.stackCount,d=r.barThickness==="flex"?xG(i,n,r,u):SG(i,n,r,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?i:void 0);l=d.start+d.chunk*h+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=s.getPixelForValue(this.getParsed(i)[s.axis],i),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let i=this._cachedMeta,n=i.vScale,s=i.data,r=s.length,o=0;for(;o<r;++o)this.getParsed(o)[n.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}return e})(),AG=(()=>{class e extends as{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(i,n,s,r){let o=super.parsePrimitiveData(i,n,s,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+s).radius;return o}parseArrayData(i,n,s,r){let o=super.parseArrayData(i,n,s,r);for(let a=0;a<o.length;a++){let l=n[s+a];o[a]._custom=K(l[2],this.resolveDataElementOptions(a+s).radius)}return o}parseObjectData(i,n,s,r){let o=super.parseObjectData(i,n,s,r);for(let a=0;a<o.length;a++){let l=n[s+a];o[a]._custom=K(l&&l.r&&+l.r,this.resolveDataElementOptions(a+s).radius)}return o}getMaxOverflow(){let i=this._cachedMeta.data,n=0;for(let s=i.length-1;s>=0;--s)n=Math.max(n,i[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(i){let n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:o}=n,a=this.getParsed(i),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:s[i]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(i){let n=this._cachedMeta.data;this.updateElements(n,0,n.length,i)}updateElements(i,n,s,r){let o=r==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(n,r),d=a.axis,h=l.axis;for(let g=n;g<n+s;g++){let p=i[g],f=!o&&this.getParsed(g),m={},v=m[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(f[d]),C=m[h]=o?l.getBasePixel():l.getPixelForValue(f[h]);m.skip=isNaN(v)||isNaN(C),u&&(m.options=c||this.resolveDataElementOptions(g,p.active?"active":r),o&&(m.options.radius=0)),this.updateElement(p,g,m,r)}}resolveDataElementOptions(i,n){let s=this.getParsed(i),r=super.resolveDataElementOptions(i,n);r.$shared&&(r=Object.assign({},r,{$shared:!1}));let o=r.radius;return n!=="active"&&(r.radius=0),r.radius+=K(s&&s._custom,o),r}}return e})();function TG(e,t,i){let n=1,s=1,r=0,o=0;if(t<be){let a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),g=(w,y,S)=>uo(w,a,l,!0)?1:Math.max(y,y*i,S,S*i),p=(w,y,S)=>uo(w,a,l,!0)?-1:Math.min(y,y*i,S,S*i),f=g(0,c,d),m=g(Ae,u,h),v=p(ye,c,d),C=p(ye+Ae,u,h);n=(f-v)/2,s=(m-C)/2,r=-(f+v)/2,o=-(m+C)/2}return{ratioX:n,ratioY:s,offsetX:r,offsetY:o}}var nC=(()=>{class e extends as{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:i=>i!=="spacing",_indexable:i=>i!=="spacing"&&!i.startsWith("borderDash")&&!i.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){let n=i.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:s,color:r}}=i.legend.options;return n.labels.map((o,a)=>{let c=i.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:s,hidden:!i.getDataVisibility(a),index:a}})}return[]}},onClick(i,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(i,n){super(i,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(i,n){let s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let o=c=>+s[c];if(ie(s[i])){let{key:c="value"}=this._parsing;o=u=>+Cn(s[u],c)}let a,l;for(a=i,l=i+n;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return li(this.options.rotation-90)}_getCircumference(){return li(this.options.circumference)}_getRotationExtents(){let i=be,n=-be;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){let r=this.chart.getDatasetMeta(s).controller,o=r._getRotation(),a=r._getCircumference();i=Math.min(i,o),n=Math.max(n,o+a)}return{rotation:i,circumference:n-i}}update(i){let n=this.chart,{chartArea:s}=n,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(RD(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:g,ratioY:p,offsetX:f,offsetY:m}=TG(h,d,c),v=(s.width-a)/g,C=(s.height-a)/p,w=Math.max(Math.min(v,C)/2,0),y=Jm(this.options.radius,w),S=Math.max(y*c,0),b=(y-S)/this._getVisibleDatasetWeightTotal();this.offsetX=f*y,this.offsetY=m*y,r.total=this.calculateTotal(),this.outerRadius=y-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*u,0),this.updateElements(o,0,o.length,i)}_circumference(i,n){let s=this.options,r=this._cachedMeta,o=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(i)||r._parsed[i]===null||r.data[i].hidden?0:this.calculateCircumference(r._parsed[i]*o/be)}updateElements(i,n,s,r){let o=r==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,g=o&&u.animateScale,p=g?0:this.innerRadius,f=g?0:this.outerRadius,{sharedOptions:m,includeOptions:v}=this._getSharedOptions(n,r),C=this._getRotation(),w;for(w=0;w<n;++w)C+=this._circumference(w,o);for(w=n;w<n+s;++w){let y=this._circumference(w,o),S=i[w],b={x:d+this.offsetX,y:h+this.offsetY,startAngle:C,endAngle:C+y,circumference:y,outerRadius:f,innerRadius:p};v&&(b.options=m||this.resolveDataElementOptions(w,S.active?"active":r)),C+=y,this.updateElement(S,w,b,r)}}calculateTotal(){let i=this._cachedMeta,n=i.data,s=0,r;for(r=0;r<n.length;r++){let o=i._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(i){let n=this._cachedMeta.total;return n>0&&!isNaN(i)?be*(Math.abs(i)/n):0}getLabelAndValue(i){let n=this._cachedMeta,s=this.chart,r=s.data.labels||[],o=ho(n._parsed[i],s.options.locale);return{label:r[i]||"",value:o}}getMaxBorderWidth(i){let n=0,s=this.chart,r,o,a,l,c;if(!i){for(r=0,o=s.data.datasets.length;r<o;++r)if(s.isDatasetVisible(r)){a=s.getDatasetMeta(r),i=a.data,l=a.controller;break}}if(!i)return 0;for(r=0,o=i.length;r<o;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(i){let n=0;for(let s=0,r=i.length;s<r;++s){let o=this.resolveDataElementOptions(s);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(i){let n=0;for(let s=0;s<i;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(i){return Math.max(K(this.chart.data.datasets[i].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return e})(),kG=(()=>{class e extends as{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(i){let n=this._cachedMeta,{dataset:s,data:r=[],_dataset:o}=n,a=this.chart._animationsDisabled,{start:l,count:c}=cv(n,r,a);this._drawStart=l,this._drawCount=c,uv(n)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=r;let u=this.resolveDatasetElementOptions(i);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:u},i),this.updateElements(r,l,c,i)}updateElements(i,n,s,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r),g=a.axis,p=l.axis,{spanGaps:f,segment:m}=this.options,v=qs(f)?f:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||o||r==="none",w=n+s,y=i.length,S=n>0&&this.getParsed(n-1);for(let b=0;b<y;++b){let M=i[b],R=C?M:{};if(b<n||b>=w){R.skip=!0;continue}let A=this.getParsed(b),B=J(A[p]),V=R[g]=a.getPixelForValue(A[g],b),ne=R[p]=o||B?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,A,c):A[p],b);R.skip=isNaN(V)||isNaN(ne)||B,R.stop=b>0&&Math.abs(A[g]-S[g])>v,m&&(R.parsed=A,R.raw=u.data[b]),h&&(R.options=d||this.resolveDataElementOptions(b,M.active?"active":r)),C||this.updateElement(M,b,R,r),S=A}}getMaxOverflow(){let i=this._cachedMeta,n=i.dataset,s=n.options&&n.options.borderWidth||0,r=i.data||[];if(!r.length)return s;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}draw(){let i=this._cachedMeta;i.dataset.updateControlPoints(this.chart.chartArea,i.iScale.axis),super.draw()}}return e})(),nM=(()=>{class e extends as{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(i){let n=i.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:s,color:r}}=i.legend.options;return n.labels.map((o,a)=>{let c=i.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:s,hidden:!i.getDataVisibility(a),index:a}})}return[]}},onClick(i,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(i,n){super(i,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(i){let n=this._cachedMeta,s=this.chart,r=s.data.labels||[],o=ho(n._parsed[i].r,s.options.locale);return{label:r[i]||"",value:o}}parseObjectData(i,n,s,r){return wv.bind(this)(i,n,s,r)}update(i){let n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,i)}getMinMax(){let i=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return i.data.forEach((s,r)=>{let o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){let i=this.chart,n=i.chartArea,s=i.options,r=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(r/2,0),a=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),l=(o-a)/i.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(i,n,s,r){let o=r==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,g=u.getIndexAngle(0)-.5*ye,p=g,f,m=360/this.countVisibleElements();for(f=0;f<n;++f)p+=this._computeAngle(f,r,m);for(f=n;f<n+s;f++){let v=i[f],C=p,w=p+this._computeAngle(f,r,m),y=a.getDataVisibility(f)?u.getDistanceFromCenterForValue(this.getParsed(f).r):0;p=w,o&&(c.animateScale&&(y=0),c.animateRotate&&(C=w=g));let S={x:d,y:h,innerRadius:0,outerRadius:y,startAngle:C,endAngle:w,options:this.resolveDataElementOptions(f,v.active?"active":r)};this.updateElement(v,f,S,r)}}countVisibleElements(){let i=this._cachedMeta,n=0;return i.data.forEach((s,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&n++}),n}_computeAngle(i,n,s){return this.chart.getDataVisibility(i)?li(this.resolveDataElementOptions(i,n).angle||s):0}}return e})(),_G=(()=>{class e extends nC{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return e})(),LG=(()=>{class e extends as{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(i){let n=this._cachedMeta.vScale,s=this.getParsed(i);return{label:n.getLabels()[i],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(i,n,s,r){return wv.bind(this)(i,n,s,r)}update(i){let n=this._cachedMeta,s=n.dataset,r=n.data||[],o=n.iScale.getLabels();if(s.points=r,i!=="resize"){let a=this.resolveDatasetElementOptions(i);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===r.length,options:a};this.updateElement(s,void 0,l,i)}this.updateElements(r,0,r.length,i)}updateElements(i,n,s,r){let o=this._cachedMeta.rScale,a=r==="reset";for(let l=n;l<n+s;l++){let c=i[l],u=this.resolveDataElementOptions(l,c.active?"active":r),d=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:d.x,g=a?o.yCenter:d.y,p={x:h,y:g,angle:d.angle,skip:isNaN(h)||isNaN(g),options:u};this.updateElement(c,l,p,r)}}}return e})(),OG=(()=>{class e extends as{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(i){let n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:r,yScale:o}=n,a=this.getParsed(i),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:s[i]||"",value:"("+l+", "+c+")"}}update(i){let n=this._cachedMeta,{data:s=[]}=n,r=this.chart._animationsDisabled,{start:o,count:a}=cv(n,s,r);if(this._drawStart=o,this._drawCount=a,uv(n)&&(o=0,a=s.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=n;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=s;let u=this.resolveDatasetElementOptions(i);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:u},i)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,o,a,i)}addElements(){let{showLine:i}=this.options;!this.datasetElementType&&i&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(i,n,s,r){let o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(n,r),h=this.getSharedOptions(d),g=this.includeOptions(r,h),p=a.axis,f=l.axis,{spanGaps:m,segment:v}=this.options,C=qs(m)?m:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||r==="none",y=n>0&&this.getParsed(n-1);for(let S=n;S<n+s;++S){let b=i[S],M=this.getParsed(S),R=w?b:{},A=J(M[f]),B=R[p]=a.getPixelForValue(M[p],S),V=R[f]=o||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,M,c):M[f],S);R.skip=isNaN(B)||isNaN(V)||A,R.stop=S>0&&Math.abs(M[p]-y[p])>C,v&&(R.parsed=M,R.raw=u.data[S]),g&&(R.options=h||this.resolveDataElementOptions(S,b.active?"active":r)),w||this.updateElement(b,S,R,r),y=M}this.updateSharedOptions(h,r,d)}getMaxOverflow(){let i=this._cachedMeta,n=i.data||[];if(!this.options.showLine){let l=0;for(let c=n.length-1;c>=0;--c)l=Math.max(l,n[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let s=i.dataset,r=s.options&&s.options.borderWidth||0;if(!n.length)return r;let o=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(r,o,a)/2}}return e})(),NG=Object.freeze({__proto__:null,BarController:PG,BubbleController:AG,DoughnutController:nC,LineController:kG,PieController:_G,PolarAreaController:nM,RadarController:LG,ScatterController:OG});function Ys(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Vv=class e{static override(t){Object.assign(e.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ys()}parse(){return Ys()}format(){return Ys()}add(){return Ys()}diff(){return Ys()}startOf(){return Ys()}endOf(){return Ys()}},VG={_date:Vv};function HG(e,t,i,n){let{controller:s,data:r,_sorted:o}=e,a=s._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&r.length){let c=a._reversePixels?kD:Bi;if(n){if(s._sharedOptions){let u=r[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){let h=c(r,t,i-d),g=c(r,t,i+d);return{lo:h.lo,hi:g.hi}}}}else{let u=c(r,t,i);if(l){let{vScale:d}=s._cachedMeta,{_parsed:h}=e,g=h.slice(0,u.lo+1).reverse().findIndex(f=>!J(f[d.axis]));u.lo-=Math.max(0,g);let p=h.slice(u.hi).findIndex(f=>!J(f[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:r.length-1}}function hl(e,t,i,n,s){let r=e.getSortedVisibleDatasetMetas(),o=i[t];for(let a=0,l=r.length;a<l;++a){let{index:c,data:u}=r[a],{lo:d,hi:h}=HG(r[a],t,o,s);for(let g=d;g<=h;++g){let p=u[g];p.skip||n(p,c,g)}}}function BG(e){let t=e.indexOf("x")!==-1,i=e.indexOf("y")!==-1;return function(n,s){let r=t?Math.abs(n.x-s.x):0,o=i?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Pv(e,t,i,n,s){let r=[];return!s&&!e.isPointInArea(t)||hl(e,i,t,function(a,l,c){!s&&!Gi(a,e.chartArea,0)||a.inRange(t.x,t.y,n)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function GG(e,t,i,n){let s=[];function r(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:d}=sv(o,{x:t.x,y:t.y});uo(d,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return hl(e,i,t,r),s}function zG(e,t,i,n,s,r){let o=[],a=BG(i),l=Number.POSITIVE_INFINITY;function c(u,d,h){let g=u.inRange(t.x,t.y,s);if(n&&!g)return;let p=u.getCenterPoint(s);if(!(!!r||e.isPointInArea(p))&&!g)return;let m=a(t,p);m<l?(o=[{element:u,datasetIndex:d,index:h}],l=m):m===l&&o.push({element:u,datasetIndex:d,index:h})}return hl(e,i,t,c),o}function Av(e,t,i,n,s,r){return!r&&!e.isPointInArea(t)?[]:i==="r"&&!n?GG(e,t,i,s):zG(e,t,i,n,s,r)}function uE(e,t,i,n,s){let r=[],o=i==="x"?"inXRange":"inYRange",a=!1;return hl(e,i,t,(l,c,u)=>{l[o]&&l[o](t[i],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:r}var WG={evaluateInteractionItems:hl,modes:{index(e,t,i,n){let s=rs(t,e),r=i.axis||"x",o=i.includeInvisible||!1,a=i.intersect?Pv(e,s,r,n,o):Av(e,s,r,!1,n,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,i,n){let s=rs(t,e),r=i.axis||"xy",o=i.includeInvisible||!1,a=i.intersect?Pv(e,s,r,n,o):Av(e,s,r,!1,n,o);if(a.length>0){let l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,i,n){let s=rs(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return Pv(e,s,r,n,o)},nearest(e,t,i,n){let s=rs(t,e),r=i.axis||"xy",o=i.includeInvisible||!1;return Av(e,s,r,i.intersect,n,o)},x(e,t,i,n){let s=rs(t,e);return uE(e,s,"x",i.intersect,n)},y(e,t,i,n){let s=rs(t,e);return uE(e,s,"y",i.intersect,n)}}},sM=["left","top","right","bottom"];function nl(e,t){return e.filter(i=>i.pos===t)}function dE(e,t){return e.filter(i=>sM.indexOf(i.pos)===-1&&i.box.axis===t)}function sl(e,t){return e.sort((i,n)=>{let s=t?n:i,r=t?i:n;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function jG(e){let t=[],i,n,s,r,o,a;for(i=0,n=(e||[]).length;i<n;++i)s=e[i],{position:r,options:{stack:o,stackWeight:a=1}}=s,t.push({index:i,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return t}function UG(e){let t={};for(let i of e){let{stack:n,pos:s,stackWeight:r}=i;if(!n||!sM.includes(s))continue;let o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function $G(e,t){let i=UG(e),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t,r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];let{fullSize:l}=a.box,c=i[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=u?u*s:l&&t.availableHeight)}return i}function qG(e){let t=jG(e),i=sl(t.filter(c=>c.box.fullSize),!0),n=sl(nl(t,"left"),!0),s=sl(nl(t,"right")),r=sl(nl(t,"top"),!0),o=sl(nl(t,"bottom")),a=dE(t,"x"),l=dE(t,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:nl(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function hE(e,t,i,n){return Math.max(e[i],t[i])+Math.max(e[n],t[n])}function rM(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function KG(e,t,i,n){let{pos:s,box:r}=i,o=e.maxPadding;if(!ie(s)){i.size&&(e[s]-=i.size);let d=n[i.stack]||{size:0,count:1};d.size=Math.max(d.size,i.horizontal?r.height:r.width),i.size=d.size/d.count,e[s]+=i.size}r.getPadding&&rM(o,r.getPadding());let a=Math.max(0,t.outerWidth-hE(o,e,"left","right")),l=Math.max(0,t.outerHeight-hE(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,i.horizontal?{same:c,other:u}:{same:u,other:c}}function YG(e){let t=e.maxPadding;function i(n){let s=Math.max(t[n]-e[n],0);return e[n]+=s,s}e.y+=i("top"),e.x+=i("left"),i("right"),i("bottom")}function QG(e,t){let i=t.maxPadding;function n(s){let r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(t[o],i[o])}),r}return n(e?["left","right"]:["top","bottom"])}function al(e,t,i,n){let s=[],r,o,a,l,c,u;for(r=0,o=e.length,c=0;r<o;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,QG(a.horizontal,t));let{same:d,other:h}=KG(t,i,a,n);c|=d&&s.length,u=u||h,l.fullSize||s.push(a)}return c&&al(s,t,i,n)||u}function Id(e,t,i,n,s){e.top=i,e.left=t,e.right=t+n,e.bottom=i+s,e.width=n,e.height=s}function gE(e,t,i,n){let s=i.padding,{x:r,y:o}=t;for(let a of e){let l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=t.w*u,h=c.size||l.height;lo(c.start)&&(o=c.start),l.fullSize?Id(l,s.left,o,i.outerWidth-s.right-s.left,h):Id(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=t.h*u,h=c.size||l.width;lo(c.start)&&(r=c.start),l.fullSize?Id(l,r,s.top,h,i.outerHeight-s.bottom-s.top):Id(l,r,t.top+c.placed,h,d),c.start=r,c.placed+=d,r=l.right}}t.x=r,t.y=o}var ct={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(i){t.draw(i)}}]},e.boxes.push(t)},removeBox(e,t){let i=e.boxes?e.boxes.indexOf(t):-1;i!==-1&&e.boxes.splice(i,1)},configure(e,t,i){t.fullSize=i.fullSize,t.position=i.position,t.weight=i.weight},update(e,t,i,n){if(!e)return;let s=et(e.options.layout.padding),r=Math.max(t-s.width,0),o=Math.max(i-s.height,0),a=qG(e.boxes),l=a.vertical,c=a.horizontal;pe(e.boxes,f=>{typeof f.beforeLayout=="function"&&f.beforeLayout()});let u=l.reduce((f,m)=>m.box.options&&m.box.options.display===!1?f:f+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:i,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);rM(h,et(n));let g=Object.assign({maxPadding:h,w:r,h:o,x:s.left,y:s.top},s),p=$G(l.concat(c),d);al(a.fullSize,g,d,p),al(l,g,d,p),al(c,g,d,p)&&al(l,g,d,p),YG(g),gE(a.leftAndTop,g,d,p),g.x+=g.w,g.y+=g.h,gE(a.rightAndBottom,g,d,p),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},pe(a.chartArea,f=>{let m=f.box;Object.assign(m,e.chartArea),m.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},Hd=class{acquireContext(t,i){}releaseContext(t){return!1}addEventListener(t,i,n){}removeEventListener(t,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,i,n,s){return i=Math.max(0,i||t.width),n=n||t.height,{width:i,height:Math.max(0,s?Math.floor(i/s):n)}}isAttached(t){return!0}updateConfig(t){}},Hv=class extends Hd{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Od="$chartjs",ZG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pE=e=>e===null||e==="";function XG(e,t){let i=e.style,n=e.getAttribute("height"),s=e.getAttribute("width");if(e[Od]={initial:{height:n,width:s,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",pE(s)){let r=bv(e,"width");r!==void 0&&(e.width=r)}if(pE(n))if(e.style.height==="")e.height=e.width/(t||2);else{let r=bv(e,"height");r!==void 0&&(e.height=r)}return e}var oM=QD?{passive:!0}:!1;function JG(e,t,i){e&&e.addEventListener(t,i,oM)}function ez(e,t,i){e&&e.canvas&&e.canvas.removeEventListener(t,i,oM)}function tz(e,t){let i=ZG[e.type]||e.type,{x:n,y:s}=rs(e,t);return{type:i,chart:t,native:e,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Bd(e,t){for(let i of e)if(i===t||i.contains(t))return!0}function iz(e,t,i){let n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Bd(a.addedNodes,n),o=o&&!Bd(a.removedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}function nz(e,t,i){let n=e.canvas,s=new MutationObserver(r=>{let o=!1;for(let a of r)o=o||Bd(a.removedNodes,n),o=o&&!Bd(a.addedNodes,n);o&&i()});return s.observe(document,{childList:!0,subtree:!0}),s}var cl=new Map,fE=0;function aM(){let e=window.devicePixelRatio;e!==fE&&(fE=e,cl.forEach((t,i)=>{i.currentDevicePixelRatio!==e&&t()}))}function sz(e,t){cl.size||window.addEventListener("resize",aM),cl.set(e,t)}function rz(e){cl.delete(e),cl.size||window.removeEventListener("resize",aM)}function oz(e,t,i){let n=e.canvas,s=n&&Rd(n);if(!s)return;let r=lv((a,l)=>{let c=s.clientWidth;i(a,l),c<s.clientWidth&&i()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),sz(e,r),o}function Tv(e,t,i){i&&i.disconnect(),t==="resize"&&rz(e)}function az(e,t,i){let n=e.canvas,s=lv(r=>{e.ctx!==null&&i(tz(r,e))},e);return JG(n,t,s),s}var Bv=class extends Hd{acquireContext(t,i){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(XG(t,i),n):null}releaseContext(t){let i=t.canvas;if(!i[Od])return!1;let n=i[Od].initial;["height","width"].forEach(r=>{let o=n[r];J(o)?i.removeAttribute(r):i.setAttribute(r,o)});let s=n.style||{};return Object.keys(s).forEach(r=>{i.style[r]=s[r]}),i.width=i.width,delete i[Od],!0}addEventListener(t,i,n){this.removeEventListener(t,i);let s=t.$proxies||(t.$proxies={}),o={attach:iz,detach:nz,resize:oz}[i]||az;s[i]=o(t,i,n)}removeEventListener(t,i){let n=t.$proxies||(t.$proxies={}),s=n[i];if(!s)return;({attach:Tv,detach:Tv,resize:Tv}[i]||ez)(t,i,s),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,i,n,s){return YD(t,i,n,s)}isAttached(t){let i=t&&Rd(t);return!!(i&&i.isConnected)}};function lz(e){return!Md()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?Hv:Bv}var xi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}hasValue(){return qs(this.x)&&qs(this.y)}getProps(t,i){let n=this.$animations;if(!i||!n)return this;let s={};return t.forEach(r=>{s[r]=n[r]&&n[r].active()?n[r]._to:this[r]}),s}};function cz(e,t){let i=e.options.ticks,n=uz(e),s=Math.min(i.maxTicksLimit||n,n),r=i.major.enabled?hz(t):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return gz(t,c,r,o/s),c;let u=dz(r,t,s);if(o>0){let d,h,g=o>1?Math.round((l-a)/(o-1)):null;for(Pd(t,c,u,J(g)?0:a-g,a),d=0,h=o-1;d<h;d++)Pd(t,c,u,r[d],r[d+1]);return Pd(t,c,u,l,J(g)?t.length:l+g),c}return Pd(t,c,u),c}function uz(e){let t=e.options.offset,i=e._tickSize(),n=e._length/i+(t?0:1),s=e._maxLength/i;return Math.floor(Math.min(n,s))}function dz(e,t,i){let n=pz(e),s=t.length/i;if(!n)return Math.max(s,1);let r=PD(n);for(let o=0,a=r.length-1;o<a;o++){let l=r[o];if(l>s)return l}return Math.max(s,1)}function hz(e){let t=[],i,n;for(i=0,n=e.length;i<n;i++)e[i].major&&t.push(i);return t}function gz(e,t,i,n){let s=0,r=i[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===r&&(t.push(e[o]),s++,r=i[s*n])}function Pd(e,t,i,n,s){let r=K(n,0),o=Math.min(K(s,e.length),e.length),a=0,l,c,u;for(i=Math.ceil(i),s&&(l=s-n,i=l/Math.floor(l/i)),u=r;u<0;)a++,u=Math.round(r+a*i);for(c=Math.max(r,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(r+a*i))}function pz(e){let t=e.length,i,n;if(t<2)return!1;for(n=e[0],i=1;i<t;++i)if(e[i]-e[i-1]!==n)return!1;return n}var fz=e=>e==="left"?"right":e==="right"?"left":e,mE=(e,t,i)=>t==="top"||t==="left"?e[t]+i:e[t]-i,vE=(e,t)=>Math.min(t||e,e);function CE(e,t){let i=[],n=e.length/t,s=e.length,r=0;for(;r<s;r+=n)i.push(e[Math.floor(r)]);return i}function mz(e,t,i){let n=e.ticks.length,s=Math.min(t,n-1),r=e._startPixel,o=e._endPixel,a=1e-6,l=e.getPixelForTick(s),c;if(!(i&&(n===1?c=Math.max(l-r,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<r-a||l>o+a)))return l}function vz(e,t){pe(e,i=>{let n=i.gc,s=n.length/2,r;if(s>t){for(r=0;r<s;++r)delete i.data[n[r]];n.splice(0,s)}})}function rl(e){return e.drawTicks?e.tickLength:0}function wE(e,t){if(!e.display)return 0;let i=Oe(e.font,t),n=et(e.padding);return(we(e.text)?e.text.length:1)*i.lineHeight+n.height}function Cz(e,t){return wn(e,{scale:t,type:"scale"})}function wz(e,t,i){return wn(e,{tick:i,index:t,type:"tick"})}function yz(e,t,i){let n=bd(e);return(i&&t!=="right"||!i&&t==="right")&&(n=fz(n)),n}function bz(e,t,i,n){let{top:s,left:r,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l,d=0,h,g,p,f=o-s,m=a-r;if(e.isHorizontal()){if(g=Je(n,r,a),ie(i)){let v=Object.keys(i)[0],C=i[v];p=u[v].getPixelForValue(C)+f-t}else i==="center"?p=(c.bottom+c.top)/2+f-t:p=mE(e,i,t);h=a-r}else{if(ie(i)){let v=Object.keys(i)[0],C=i[v];g=u[v].getPixelForValue(C)-m+t}else i==="center"?g=(c.left+c.right)/2-m+t:g=mE(e,i,t);p=Je(n,o,s),d=i==="left"?-Ae:Ae}return{titleX:g,titleY:p,maxWidth:h,rotation:d}}var Zs=class e extends xi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,i){return t}getUserBounds(){let{_userMin:t,_userMax:i,_suggestedMin:n,_suggestedMax:s}=this;return t=kt(t,Number.POSITIVE_INFINITY),i=kt(i,Number.NEGATIVE_INFINITY),n=kt(n,Number.POSITIVE_INFINITY),s=kt(s,Number.NEGATIVE_INFINITY),{min:kt(t,n),max:kt(i,s),minDefined:Ie(t),maxDefined:Ie(i)}}getMinMax(t){let{min:i,max:n,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:i,max:n};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),s||(i=Math.min(i,o.min)),r||(n=Math.max(n,o.max));return i=r&&i>n?n:i,n=s&&i>n?i:n,{min:kt(i,kt(n,i)),max:kt(n,kt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ce(this.options.beforeUpdate,[this])}update(t,i,n){let{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=WD(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?CE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=cz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,t=!t),this._startPixel=i,this._endPixel=n,this._reversePixels=t,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ce(this.options.afterUpdate,[this])}beforeSetDimensions(){Ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ce(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ce(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let i=this.options.ticks,n,s,r;for(n=0,s=t.length;n<s;n++)r=t[n],r.label=Ce(i.callback,[r.value,n,t],this)}afterTickToLabelConversion(){Ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,i=t.ticks,n=vE(this.ticks.length,t.ticks.maxTicksLimit),s=i.minRotation||0,r=i.maxRotation,o=s,a,l,c;if(!this._isVisible()||!i.display||s>=r||n<=1||!this.isHorizontal()){this.labelRotation=s;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,g=Ve(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:g/(n-1),d+6>a&&(a=g/(n-(t.offset?.5:1)),l=this.maxHeight-rl(t.grid)-i.padding-wE(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=wd(Math.min(Math.asin(Ve((u.highest.height+6)/a,-1,1)),Math.asin(Ve(l/c,-1,1))-Math.asin(Ve(h/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ce(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:i,options:{ticks:n,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=wE(s,i.options.font);if(a?(t.width=this.maxWidth,t.height=rl(r)+l):(t.height=this.maxHeight,t.width=rl(r)+l),n.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),g=n.padding*2,p=li(this.labelRotation),f=Math.cos(p),m=Math.sin(p);if(a){let v=n.mirror?0:m*d.width+f*h.height;t.height=Math.min(this.maxHeight,t.height+v+g)}else{let v=n.mirror?0:f*d.width+m*h.height;t.width=Math.min(this.maxWidth,t.width+v+g)}this._calculatePadding(c,u,m,f)}}this._handleMargins(),a?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,i,n,s){let{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,g=0;l?c?(h=s*t.width,g=n*i.height):(h=n*t.height,g=s*i.width):r==="start"?g=i.width:r==="end"?h=t.width:r!=="inner"&&(h=t.width/2,g=i.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let u=i.height/2,d=t.height/2;r==="start"?(u=0,d=t.height):r==="end"&&(u=i.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ce(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:i}=this.options;return i==="top"||i==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let i,n;for(i=0,n=t.length;i<n;i++)J(t[i].label)&&(t.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let i=this.options.ticks.sampleSize,n=this.ticks;i<n.length&&(n=CE(n,i)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,i,n){let{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(i/vE(i,n)),c=0,u=0,d,h,g,p,f,m,v,C,w,y,S;for(d=0;d<i;d+=l){if(p=t[d].label,f=this._resolveTickFontOptions(d),s.font=m=f.string,v=r[m]=r[m]||{data:{},gc:[]},C=f.lineHeight,w=y=0,!J(p)&&!we(p))w=Za(s,v.data,v.gc,w,p),y=C;else if(we(p))for(h=0,g=p.length;h<g;++h)S=p[h],!J(S)&&!we(S)&&(w=Za(s,v.data,v.gc,w,S),y+=C);o.push(w),a.push(y),c=Math.max(w,c),u=Math.max(y,u)}vz(r,i);let b=o.indexOf(c),M=a.indexOf(u),R=A=>({width:o[A]||0,height:a[A]||0});return{first:R(0),last:R(i-1),widest:R(b),highest:R(M),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,i){return NaN}getValueForPixel(t){}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let i=this._startPixel+t*this._length;return TD(this._alignToPixels?is(this.chart,i,0):i)}getDecimalForPixel(t){let i=(t-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:i}=this;return t<0&&i<0?i:t>0&&i>0?t:0}getContext(t){let i=this.ticks||[];if(t>=0&&t<i.length){let n=i[t];return n.$context||(n.$context=wz(this.getContext(),t,n))}return this.$context||(this.$context=Cz(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,i=li(this.labelRotation),n=Math.abs(Math.cos(i)),s=Math.abs(Math.sin(i)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let i=this.axis,n=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=rl(r),g=[],p=a.setContext(this.getContext()),f=p.display?p.width:0,m=f/2,v=function(Me){return is(n,Me,f)},C,w,y,S,b,M,R,A,B,V,ne,$e;if(o==="top")C=v(this.bottom),M=this.bottom-h,A=C-m,V=v(t.top)+m,$e=t.bottom;else if(o==="bottom")C=v(this.top),V=t.top,$e=v(t.bottom)-m,M=C+m,A=this.top+h;else if(o==="left")C=v(this.right),b=this.right-h,R=C-m,B=v(t.left)+m,ne=t.right;else if(o==="right")C=v(this.left),B=t.left,ne=v(t.right)-m,b=C+m,R=this.left+h;else if(i==="x"){if(o==="center")C=v((t.top+t.bottom)/2+.5);else if(ie(o)){let Me=Object.keys(o)[0],Te=o[Me];C=v(this.chart.scales[Me].getPixelForValue(Te))}V=t.top,$e=t.bottom,M=C+m,A=M+h}else if(i==="y"){if(o==="center")C=v((t.left+t.right)/2);else if(ie(o)){let Me=Object.keys(o)[0],Te=o[Me];C=v(this.chart.scales[Me].getPixelForValue(Te))}b=C-m,R=b-h,B=t.left,ne=t.right}let Ot=K(s.ticks.maxTicksLimit,d),fe=Math.max(1,Math.ceil(d/Ot));for(w=0;w<d;w+=fe){let Me=this.getContext(w),Te=r.setContext(Me),ci=a.setContext(Me),tt=Te.lineWidth,Xs=Te.color,gl=ci.dash||[],Js=ci.dashOffset,Co=Te.tickWidth,ls=Te.tickColor,wo=Te.tickBorderDash||[],cs=Te.tickBorderDashOffset;y=mz(this,w,l),y!==void 0&&(S=is(n,y,tt),c?b=R=B=ne=S:M=A=V=$e=S,g.push({tx1:b,ty1:M,tx2:R,ty2:A,x1:B,y1:V,x2:ne,y2:$e,width:tt,color:Xs,borderDash:gl,borderDashOffset:Js,tickWidth:Co,tickColor:ls,tickBorderDash:wo,tickBorderDashOffset:cs}))}return this._ticksLength=d,this._borderValue=C,g}_computeLabelItems(t){let i=this.axis,n=this.options,{position:s,ticks:r}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=r,h=rl(n.grid),g=h+u,p=d?-u:g,f=-li(this.labelRotation),m=[],v,C,w,y,S,b,M,R,A,B,V,ne,$e="middle";if(s==="top")b=this.bottom-p,M=this._getXAxisLabelAlignment();else if(s==="bottom")b=this.top+p,M=this._getXAxisLabelAlignment();else if(s==="left"){let fe=this._getYAxisLabelAlignment(h);M=fe.textAlign,S=fe.x}else if(s==="right"){let fe=this._getYAxisLabelAlignment(h);M=fe.textAlign,S=fe.x}else if(i==="x"){if(s==="center")b=(t.top+t.bottom)/2+g;else if(ie(s)){let fe=Object.keys(s)[0],Me=s[fe];b=this.chart.scales[fe].getPixelForValue(Me)+g}M=this._getXAxisLabelAlignment()}else if(i==="y"){if(s==="center")S=(t.left+t.right)/2-g;else if(ie(s)){let fe=Object.keys(s)[0],Me=s[fe];S=this.chart.scales[fe].getPixelForValue(Me)}M=this._getYAxisLabelAlignment(h).textAlign}i==="y"&&(l==="start"?$e="top":l==="end"&&($e="bottom"));let Ot=this._getLabelSizes();for(v=0,C=a.length;v<C;++v){w=a[v],y=w.label;let fe=r.setContext(this.getContext(v));R=this.getPixelForTick(v)+r.labelOffset,A=this._resolveTickFontOptions(v),B=A.lineHeight,V=we(y)?y.length:1;let Me=V/2,Te=fe.color,ci=fe.textStrokeColor,tt=fe.textStrokeWidth,Xs=M;o?(S=R,M==="inner"&&(v===C-1?Xs=this.options.reverse?"left":"right":v===0?Xs=this.options.reverse?"right":"left":Xs="center"),s==="top"?c==="near"||f!==0?ne=-V*B+B/2:c==="center"?ne=-Ot.highest.height/2-Me*B+B:ne=-Ot.highest.height+B/2:c==="near"||f!==0?ne=B/2:c==="center"?ne=Ot.highest.height/2-Me*B:ne=Ot.highest.height-V*B,d&&(ne*=-1),f!==0&&!fe.showLabelBackdrop&&(S+=B/2*Math.sin(f))):(b=R,ne=(1-V)*B/2);let gl;if(fe.showLabelBackdrop){let Js=et(fe.backdropPadding),Co=Ot.heights[v],ls=Ot.widths[v],wo=ne-Js.top,cs=0-Js.left;switch($e){case"middle":wo-=Co/2;break;case"bottom":wo-=Co;break}switch(M){case"center":cs-=ls/2;break;case"right":cs-=ls;break;case"inner":v===C-1?cs-=ls:v>0&&(cs-=ls/2);break}gl={left:cs,top:wo,width:ls+Js.width,height:Co+Js.height,color:fe.backdropColor}}m.push({label:y,font:A,textOffset:ne,options:{rotation:f,color:Te,strokeColor:ci,strokeWidth:tt,textAlign:Xs,textBaseline:$e,translation:[S,b],backdrop:gl}})}return m}_getXAxisLabelAlignment(){let{position:t,ticks:i}=this.options;if(-li(this.labelRotation))return t==="top"?"left":"right";let s="center";return i.align==="start"?s="left":i.align==="end"?s="right":i.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){let{position:i,ticks:{crossAlign:n,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,l=o.widest.width,c,u;return i==="left"?s?(u=this.right+r,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u=this.left)):i==="right"?s?(u=this.left+r,n==="near"?c="right":n==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,n==="near"?c="left":n==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:i},left:n,top:s,width:r,height:o}=this;i&&(t.save(),t.fillStyle=i,t.fillRect(n,s,r,o),t.restore())}getLineWidthForValue(t){let i=this.options.grid;if(!this._isVisible()||!i.display)return 0;let s=this.ticks.findIndex(r=>r.value===t);return s>=0?i.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){let i=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),r,o,a=(l,c,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(i.display)for(r=0,o=s.length;r<o;++r){let l=s[r];i.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),i.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:i,options:{border:n,grid:s}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;let a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=is(t,this.left,o)-o/2,u=is(t,this.right,a)+a/2,d=h=l):(d=is(t,this.top,o)-o/2,h=is(t,this.bottom,a)+a/2,c=u=l),i.save(),i.lineWidth=r.width,i.strokeStyle=r.color,i.beginPath(),i.moveTo(c,d),i.lineTo(u,h),i.stroke(),i.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,s=this._computeLabelArea();s&&el(n,s);let r=this.getLabelItems(t);for(let o of r){let a=o.options,l=o.font,c=o.label,u=o.textOffset;ns(n,c,0,u,l,a)}s&&tl(n)}drawTitle(){let{ctx:t,options:{position:i,title:n,reverse:s}}=this;if(!n.display)return;let r=Oe(n.font),o=et(n.padding),a=n.align,l=r.lineHeight/2;i==="bottom"||i==="center"||ie(i)?(l+=o.bottom,we(n.text)&&(l+=r.lineHeight*(n.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=bz(this,l,i,a);ns(t,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:h,textAlign:yz(a,i,s),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,i=t.ticks&&t.ticks.z||0,n=K(t.grid&&t.grid.z,-1),s=K(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==e.prototype.draw?[{z:i,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:i,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){let i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[],r,o;for(r=0,o=i.length;r<o;++r){let a=i[r];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){let i=this.options.ticks.setContext(this.getContext(t));return Oe(i.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},mo=class{constructor(t,i,n){this.type=t,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let i=Object.getPrototypeOf(t),n;Dz(i)&&(n=this.register(i));let s=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in s||(s[r]=t,Sz(t,o,n),this.override&&Ee.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let i=this.items,n=t.id,s=this.scope;n in i&&delete i[n],s&&n in Ee[s]&&(delete Ee[s][n],this.override&&delete ts[n])}};function Sz(e,t,i){let n=ro(Object.create(null),[i?Ee.get(i):{},Ee.get(t),e.defaults]);Ee.set(t,n),e.defaultRoutes&&xz(t,e.defaultRoutes),e.descriptors&&Ee.describe(t,e.descriptors)}function xz(e,t){Object.keys(t).forEach(i=>{let n=i.split("."),s=n.pop(),r=[e].concat(n).join("."),o=t[i].split("."),a=o.pop(),l=o.join(".");Ee.route(r,s,l,a)})}function Dz(e){return"id"in e&&"defaults"in e}var Gv=class{constructor(){this.controllers=new mo(as,"datasets",!0),this.elements=new mo(xi,"elements"),this.plugins=new mo(Object,"plugins"),this.scales=new mo(Zs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,i,n){[...i].forEach(s=>{let r=n||this._getRegistryForType(s);n||r.isForType(s)||r===this.plugins&&s.id?this._exec(t,r,s):pe(s,o=>{let a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,i,n){let s=Cd(t);Ce(n["before"+s],[],n),i[t](n),Ce(n["after"+s],[],n)}_getRegistryForType(t){for(let i=0;i<this._typedRegistries.length;i++){let n=this._typedRegistries[i];if(n.isForType(t))return n}return this.plugins}_get(t,i,n){let s=i.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}},Ui=new Gv,zv=class{constructor(){this._init=[]}notify(t,i,n,s){i==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let r=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(r,t,i,n);return i==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,i,n,s){s=s||{};for(let r of t){let o=r.plugin,a=o[n],l=[i,s,r.options];if(Ce(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){J(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let i=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),i}_createDescriptors(t,i){let n=t&&t.config,s=K(n.options&&n.options.plugins,{}),r=Ez(n);return s===!1&&!i?[]:Rz(t,r,s,i)}_notifyStateChanges(t){let i=this._oldCache||[],n=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(i,n),t,"stop"),this._notify(s(n,i),t,"start")}};function Ez(e){let t={},i=[],n=Object.keys(Ui.plugins.items);for(let r=0;r<n.length;r++)i.push(Ui.getPlugin(n[r]));let s=e.plugins||[];for(let r=0;r<s.length;r++){let o=s[r];i.indexOf(o)===-1&&(i.push(o),t[o.id]=!0)}return{plugins:i,localIds:t}}function Mz(e,t){return!t&&e===!1?null:e===!0?{}:e}function Rz(e,{plugins:t,localIds:i},n,s){let r=[],o=e.getContext();for(let a of t){let l=a.id,c=Mz(n[l],s);c!==null&&r.push({plugin:a,options:Fz(e.config,{plugin:a,local:i[l]},c,o)})}return r}function Fz(e,{plugin:t,local:i},n,s){let r=e.pluginScopeKeys(t),o=e.getOptionScopes(n,r);return i&&t.defaults&&o.push(t.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wv(e,t){let i=Ee.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||i.indexAxis||"x"}function Iz(e,t){let i=e;return e==="_index_"?i=t:e==="_value_"&&(i=t==="x"?"y":"x"),i}function Pz(e,t){return e===t?"_index_":"_value_"}function yE(e){if(e==="x"||e==="y"||e==="r")return e}function Az(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function jv(e,...t){if(yE(e))return e;for(let i of t){let n=i.axis||Az(i.position)||e.length>1&&yE(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function bE(e,t,i){if(i[t+"AxisID"]===e)return{axis:t}}function Tz(e,t){if(t.data&&t.data.datasets){let i=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(i.length)return bE(e,"x",i[0])||bE(e,"y",i[0])}return{}}function kz(e,t){let i=ts[e.type]||{scales:{}},n=t.scales||{},s=Wv(e.type,t),r=Object.create(null);return Object.keys(n).forEach(o=>{let a=n[o];if(!ie(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=jv(o,a,Tz(o,e),Ee.scales[a.type]),c=Pz(l,s),u=i.scales||{};r[o]=ao(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{let a=o.type||e.type,l=o.indexAxis||Wv(a,t),u=(ts[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=Iz(d,l),g=o[h+"AxisID"]||h;r[g]=r[g]||Object.create(null),ao(r[g],[{axis:h},n[g],u[d]])})}),Object.keys(r).forEach(o=>{let a=r[o];ao(a,[Ee.scales[a.type],Ee.scale])}),r}function lM(e){let t=e.options||(e.options={});t.plugins=K(t.plugins,{}),t.scales=kz(e,t)}function cM(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function _z(e){return e=e||{},e.data=cM(e.data),lM(e),e}var SE=new Map,uM=new Set;function Ad(e,t){let i=SE.get(e);return i||(i=t(),SE.set(e,i),uM.add(i)),i}var ol=(e,t,i)=>{let n=Cn(t,i);n!==void 0&&e.add(n)},Uv=class{constructor(t){this._config=_z(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=cM(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),lM(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ad(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,i){return Ad(`${t}.transition.${i}`,()=>[[`datasets.${t}.transitions.${i}`,`transitions.${i}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,i){return Ad(`${t}-${i}`,()=>[[`datasets.${t}.elements.${i}`,`datasets.${t}`,`elements.${i}`,""]])}pluginScopeKeys(t){let i=t.id,n=this.type;return Ad(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,i){let n=this._scopeCache,s=n.get(t);return(!s||i)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,i,n){let{options:s,type:r}=this,o=this._cachedScopes(t,n),a=o.get(i);if(a)return a;let l=new Set;i.forEach(u=>{t&&(l.add(t),u.forEach(d=>ol(l,t,d))),u.forEach(d=>ol(l,s,d)),u.forEach(d=>ol(l,ts[r]||{},d)),u.forEach(d=>ol(l,Ee,d)),u.forEach(d=>ol(l,Sd,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),uM.has(i)&&o.set(i,c),c}chartOptionScopes(){let{options:t,type:i}=this;return[t,ts[i]||{},Ee.datasets[i]||{},{type:i},Ee,Sd]}resolveNamedOptions(t,i,n,s=[""]){let r={$shared:!0},{resolver:o,subPrefixes:a}=xE(this._resolverCache,t,s),l=o;if(Oz(o,i)){r.$shared=!1,n=mn(n)?n():n;let c=this.createResolver(t,n,a);l=$s(o,n,c)}for(let c of i)r[c]=l[c];return r}createResolver(t,i,n=[""],s){let{resolver:r}=xE(this._resolverCache,t,n);return ie(i)?$s(r,i,void 0,s):r}};function xE(e,t,i){let n=e.get(t);n||(n=new Map,e.set(t,n));let s=i.join(),r=n.get(s);return r||(r={resolver:Ed(t,i),subPrefixes:i.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,r)),r}var Lz=e=>ie(e)&&Object.getOwnPropertyNames(e).some(t=>mn(e[t]));function Oz(e,t){let{isScriptable:i,isIndexable:n}=mv(e);for(let s of t){let r=i(s),o=n(s),a=(o||r)&&e[s];if(r&&(mn(a)||Lz(a))||o&&we(a))return!0}return!1}var Nz="4.4.8",Vz=["top","bottom","left","right","chartArea"];function DE(e,t){return e==="top"||e==="bottom"||Vz.indexOf(e)===-1&&t==="x"}function EE(e,t){return function(i,n){return i[e]===n[e]?i[t]-n[t]:i[e]-n[e]}}function ME(e){let t=e.chart,i=t.options.animation;t.notifyPlugins("afterRender"),Ce(i&&i.onComplete,[e],t)}function Hz(e){let t=e.chart,i=t.options.animation;Ce(i&&i.onProgress,[e],t)}function dM(e){return Md()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var Nd={},RE=e=>{let t=dM(e);return Object.values(Nd).filter(i=>i.canvas===t).pop()};function Bz(e,t,i){let n=Object.keys(e);for(let s of n){let r=+s;if(r>=t){let o=e[s];delete e[s],(i>0||r>t)&&(e[r+i]=o)}}}function Gz(e,t,i,n){return!i||e.type==="mouseout"?null:n?t:e}function Td(e,t,i){return e.options.clip?e[i]:t[i]}function zz(e,t){let{xScale:i,yScale:n}=e;return i&&n?{left:Td(i,t,"left"),right:Td(i,t,"right"),top:Td(n,t,"top"),bottom:Td(n,t,"bottom")}:t}var jd=(()=>{class e{static defaults=Ee;static instances=Nd;static overrides=ts;static registry=Ui;static version=Nz;static getChart=RE;static register(...i){Ui.add(...i),FE()}static unregister(...i){Ui.remove(...i),FE()}constructor(i,n){let s=this.config=new Uv(n),r=dM(i),o=RE(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||lz(r)),this.platform.updateConfig(s);let l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=MD(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ND(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],Nd[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}yn.listen(this,"complete",ME),yn.listen(this,"progress",Hz),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:i,maintainAspectRatio:n},width:s,height:r,_aspectRatio:o}=this;return J(i)?n&&o?o:r?s/r:null:i}get data(){return this.config.data}set data(i){this.config.data=i}get options(){return this._options}set options(i){this.config.options=i}get registry(){return Ui}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():yv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gv(this.canvas,this.ctx),this}stop(){return yn.stop(this),this}resize(i,n){yn.running(this)?this._resizeBeforeDraw={width:i,height:n}:this._resize(i,n)}_resize(i,n){let s=this.options,r=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,i,n,o),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,yv(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Ce(s.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let n=this.options.scales||{};pe(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){let i=this.options,n=i.scales,s=this.scales,r=Object.keys(s).reduce((a,l)=>(a[l]=!1,a),{}),o=[];n&&(o=o.concat(Object.keys(n).map(a=>{let l=n[a],c=jv(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),pe(o,a=>{let l=a.options,c=l.id,u=jv(c,l),d=K(l.type,a.dtype);(l.position===void 0||DE(l.position,u)!==DE(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===d)h=s[c];else{let g=Ui.getScale(d);h=new g({id:c,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,i)}),pe(r,(a,l)=>{a||delete s[l]}),pe(s,a=>{ct.configure(this,a,a.options),ct.addBox(this,a)})}_updateMetasets(){let i=this._metasets,n=this.data.datasets.length,s=i.length;if(i.sort((r,o)=>r.index-o.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);i.splice(n,s-n)}this._sortedMetasets=i.slice(0).sort(EE("order","index"))}_removeUnreferencedMetasets(){let{_metasets:i,data:{datasets:n}}=this;i.length>n.length&&delete this._stacks,i.forEach((s,r)=>{n.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){let i=[],n=this.data.datasets,s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){let o=n[s],a=this.getDatasetMeta(s),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=l,a.indexAxis=o.indexAxis||Wv(l,this.options),a.order=o.order||0,a.index=s,a.label=""+o.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{let c=Ui.getController(l),{datasetElementType:u,dataElementType:d}=Ee.datasets[l];Object.assign(c,{dataElementType:Ui.getElement(d),datasetElementType:u&&Ui.getElement(u)}),a.controller=new c(this,s),i.push(a.controller)}}return this._updateMetasets(),i}_resetElements(){pe(this.data.datasets,(i,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(i){let n=this.config;n.update();let s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:i,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),g=!r&&o.indexOf(h)===-1;h.buildOrUpdateElements(g),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),r||pe(o,u=>{u.reset()}),this._updateDatasets(i),this.notifyPlugins("afterUpdate",{mode:i}),this._layers.sort(EE("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){pe(this.scales,i=>{ct.removeBox(this,i)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let i=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(i.events);(!ev(n,s)||!!this._responsiveListeners!==i.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:i}=this,n=this._getUniformDataChanges()||[];for(let{method:s,start:r,count:o}of n){let a=s==="_removeElements"?-o:o;Bz(i,r,a)}}_getUniformDataChanges(){let i=this._dataChanges;if(!i||!i.length)return;this._dataChanges=[];let n=this.data.datasets.length,s=o=>new Set(i.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),r=s(0);for(let o=1;o<n;o++)if(!ev(r,s(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(i){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ct.update(this,this.width,this.height,i);let n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],pe(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(i){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:i,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,mn(i)?i({datasetIndex:n}):i);this.notifyPlugins("afterDatasetsUpdate",{mode:i})}}_updateDataset(i,n){let s=this.getDatasetMeta(i),r={meta:s,index:i,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yn.has(this)?this.attached&&!yn.running(this)&&yn.start(this):(this.draw(),ME({chart:this})))}draw(){let i;if(this._resizeBeforeDraw){let{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let n=this._layers;for(i=0;i<n.length&&n[i].z<=0;++i)n[i].draw(this.chartArea);for(this._drawDatasets();i<n.length;++i)n[i].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(i){let n=this._sortedMetasets,s=[],r,o;for(r=0,o=n.length;r<o;++r){let a=n[r];(!i||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let i=this.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n)this._drawDataset(i[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(i){let n=this.ctx,s=i._clip,r=!s.disabled,o=zz(i,this.chartArea),a={meta:i,index:i.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(r&&el(n,{left:s.left===!1?0:o.left-s.left,right:s.right===!1?this.width:o.right+s.right,top:s.top===!1?0:o.top-s.top,bottom:s.bottom===!1?this.height:o.bottom+s.bottom}),i.controller.draw(),r&&tl(n),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(i){return Gi(i,this.chartArea,this._minPadding)}getElementsAtEventForMode(i,n,s,r){let o=WG.modes[n];return typeof o=="function"?o(this,i,s,r):[]}getDatasetMeta(i){let n=this.data.datasets[i],s=this._metasets,r=s.filter(o=>o&&o._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:i,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=wn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(i){let n=this.data.datasets[i];if(!n)return!1;let s=this.getDatasetMeta(i);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(i,n){let s=this.getDatasetMeta(i);s.hidden=!n}toggleDataVisibility(i){this._hiddenIndices[i]=!this._hiddenIndices[i]}getDataVisibility(i){return!this._hiddenIndices[i]}_updateVisibility(i,n,s){let r=s?"show":"hide",o=this.getDatasetMeta(i),a=o.controller._resolveAnimations(void 0,r);lo(n)?(o.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(i,s),a.update(o,{visible:s}),this.update(l=>l.datasetIndex===i?r:void 0))}hide(i,n){this._updateVisibility(i,n,!1)}show(i,n){this._updateVisibility(i,n,!0)}_destroyDatasetMeta(i){let n=this._metasets[i];n&&n.controller&&n.controller._destroy(),delete this._metasets[i]}_stop(){let i,n;for(this.stop(),yn.remove(this),i=0,n=this.data.datasets.length;i<n;++i)this._destroyDatasetMeta(i)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:i,ctx:n}=this;this._stop(),this.config.clearCache(),i&&(this.unbindEvents(),gv(i,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Nd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...i){return this.canvas.toDataURL(...i)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let i=this._listeners,n=this.platform,s=(o,a)=>{n.addEventListener(this,o,a),i[o]=a},r=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};pe(this.options.events,o=>s(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let i=this._responsiveListeners,n=this.platform,s=(c,u)=>{n.addEventListener(this,c,u),i[c]=u},r=(c,u)=>{i[c]&&(n.removeEventListener(this,c,u),delete i[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)},a,l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",o),s("detach",a)};a=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){pe(this._listeners,(i,n)=>{this.platform.removeEventListener(this,n,i)}),this._listeners={},pe(this._responsiveListeners,(i,n)=>{this.platform.removeEventListener(this,n,i)}),this._responsiveListeners=void 0}updateHoverStyle(i,n,s){let r=s?"set":"remove",o,a,l,c;for(n==="dataset"&&(o=this.getDatasetMeta(i[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=i.length;l<c;++l){a=i[l];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(i){let n=this._active||[],s=i.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Xa(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(i,n,s){return this._plugins.notify(this,i,n,s)}isPluginEnabled(i){return this._plugins._cache.filter(n=>n.plugin.id===i).length===1}_updateHoverStyles(i,n,s){let r=this.options.hover,o=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(n,i),l=s?i:o(i,n);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(i,n){let s={event:i,replay:n,cancelable:!0,inChartArea:this.isPointInArea(i)},r=a=>(a.options.events||this.options.events).includes(i.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;let o=this._handleEvent(i,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(o||s.changed)&&this.render(),this}_handleEvent(i,n,s){let{_active:r=[],options:o}=this,a=n,l=this._getActiveElements(i,r,s,a),c=ID(i),u=Gz(i,this._lastEvent,s,c);s&&(this._lastEvent=null,Ce(o.onHover,[i,l,this],this),c&&Ce(o.onClick,[i,l,this],this));let d=!Xa(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,d}_getActiveElements(i,n,s,r){if(i.type==="mouseout")return[];if(!s)return n;let o=this.options.hover;return this.getElementsAtEventForMode(i,o.mode,o,r)}}return e})();function FE(){return pe(jd.instances,e=>e._plugins.invalidate())}function Wz(e,t,i){let{startAngle:n,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=t,c=s/a;e.beginPath(),e.arc(r,o,a,n-c,i+c),l>s?(c=s/l,e.arc(r,o,l,i+c,n-c,!0)):e.arc(r,o,s,i+Ae,n-Ae),e.closePath(),e.clip()}function jz(e){return Dd(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Uz(e,t,i,n){let s=jz(e.options.borderRadius),r=(i-t)/2,o=Math.min(r,n*t/2),a=l=>{let c=(i-Math.min(r,l))*n/2;return Ve(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Ve(s.innerStart,0,o),innerEnd:Ve(s.innerEnd,0,o)}}function fo(e,t,i,n){return{x:i+e*Math.cos(t),y:n+e*Math.sin(t)}}function Gd(e,t,i,n,s,r){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+n+i-c,0),h=u>0?u+n+i+c:0,g=0,p=s-l;if(n){let fe=u>0?u-n:0,Me=d>0?d-n:0,Te=(fe+Me)/2,ci=Te!==0?p*Te/(Te+n):p;g=(p-ci)/2}let f=Math.max(.001,p*d-i/ye)/d,m=(p-f)/2,v=l+m+g,C=s-m-g,{outerStart:w,outerEnd:y,innerStart:S,innerEnd:b}=Uz(t,h,d,C-v),M=d-w,R=d-y,A=v+w/M,B=C-y/R,V=h+S,ne=h+b,$e=v+S/V,Ot=C-b/ne;if(e.beginPath(),r){let fe=(A+B)/2;if(e.arc(o,a,d,A,fe),e.arc(o,a,d,fe,B),y>0){let tt=fo(R,B,o,a);e.arc(tt.x,tt.y,y,B,C+Ae)}let Me=fo(ne,C,o,a);if(e.lineTo(Me.x,Me.y),b>0){let tt=fo(ne,Ot,o,a);e.arc(tt.x,tt.y,b,C+Ae,Ot+Math.PI)}let Te=(C-b/h+(v+S/h))/2;if(e.arc(o,a,h,C-b/h,Te,!0),e.arc(o,a,h,Te,v+S/h,!0),S>0){let tt=fo(V,$e,o,a);e.arc(tt.x,tt.y,S,$e+Math.PI,v-Ae)}let ci=fo(M,v,o,a);if(e.lineTo(ci.x,ci.y),w>0){let tt=fo(M,A,o,a);e.arc(tt.x,tt.y,w,v-Ae,A)}}else{e.moveTo(o,a);let fe=Math.cos(A)*d+o,Me=Math.sin(A)*d+a;e.lineTo(fe,Me);let Te=Math.cos(B)*d+o,ci=Math.sin(B)*d+a;e.lineTo(Te,ci)}e.closePath()}function $z(e,t,i,n,s){let{fullCircles:r,startAngle:o,circumference:a}=t,l=t.endAngle;if(r){Gd(e,t,i,n,l,s);for(let c=0;c<r;++c)e.fill();isNaN(a)||(l=o+(a%be||be))}return Gd(e,t,i,n,l,s),e.fill(),l}function qz(e,t,i,n,s){let{fullCircles:r,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,g=l.borderAlign==="inner";if(!c)return;e.setLineDash(d||[]),e.lineDashOffset=h,g?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(r){Gd(e,t,i,n,p,s);for(let f=0;f<r;++f)e.stroke();isNaN(a)||(p=o+(a%be||be))}g&&Wz(e,t,p),r||(Gd(e,t,i,n,p,s),e.stroke())}var $v=class extends xi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,n){let s=this.getProps(["x","y"],n),{angle:r,distance:o}=sv(s,{x:t,y:i}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,g=K(d,l-a),p=uo(r,a,l)&&a!==l,f=g>=be||p,m=Wi(o,c+h,u+h);return f&&m}getCenterPoint(t){let{x:i,y:n,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(s+r)/2,d=(o+a+c+l)/2;return{x:i+Math.cos(u)*d,y:n+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:i,circumference:n}=this,s=(i.offset||0)/4,r=(i.spacing||0)/2,o=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>be?Math.floor(n/be):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*s,Math.sin(a)*s);let l=1-Math.sin(Math.min(ye,n||0)),c=s*l;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,$z(t,this,c,r,o),qz(t,this,c,r,o),t.restore()}};function hM(e,t,i=t){e.lineCap=K(i.borderCapStyle,t.borderCapStyle),e.setLineDash(K(i.borderDash,t.borderDash)),e.lineDashOffset=K(i.borderDashOffset,t.borderDashOffset),e.lineJoin=K(i.borderJoinStyle,t.borderJoinStyle),e.lineWidth=K(i.borderWidth,t.borderWidth),e.strokeStyle=K(i.borderColor,t.borderColor)}function Kz(e,t,i){e.lineTo(i.x,i.y)}function Yz(e){return e.stepped?GD:e.tension||e.cubicInterpolationMode==="monotone"?zD:Kz}function gM(e,t,i={}){let n=e.length,{start:s=0,end:r=n-1}=i,{start:o,end:a}=t,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!u?n+c-l:c-l}}function Qz(e,t,i,n){let{points:s,options:r}=t,{count:o,start:a,loop:l,ilen:c}=gM(s,i,n),u=Yz(r),{move:d=!0,reverse:h}=n||{},g,p,f;for(g=0;g<=c;++g)p=s[(a+(h?c-g:g))%o],!p.skip&&(d?(e.moveTo(p.x,p.y),d=!1):u(e,f,p,h,r.stepped),f=p);return l&&(p=s[(a+(h?c:0))%o],u(e,f,p,h,r.stepped)),!!l}function Zz(e,t,i,n){let s=t.points,{count:r,start:o,ilen:a}=gM(s,i,n),{move:l=!0,reverse:c}=n||{},u=0,d=0,h,g,p,f,m,v,C=y=>(o+(c?a-y:y))%r,w=()=>{f!==m&&(e.lineTo(u,m),e.lineTo(u,f),e.lineTo(u,v))};for(l&&(g=s[C(0)],e.moveTo(g.x,g.y)),h=0;h<=a;++h){if(g=s[C(h)],g.skip)continue;let y=g.x,S=g.y,b=y|0;b===p?(S<f?f=S:S>m&&(m=S),u=(d*u+y)/++d):(w(),e.lineTo(y,S),p=b,d=0,f=m=S),v=S}w()}function qv(e){let t=e.options,i=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!i?Zz:Qz}function Xz(e){return e.stepped?ZD:e.tension||e.cubicInterpolationMode==="monotone"?XD:es}function Jz(e,t,i,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,i,n)&&s.closePath()),hM(e,t.options),e.stroke(s)}function eW(e,t,i,n){let{segments:s,options:r}=t,o=qv(t);for(let a of s)hM(e,r,a.style),e.beginPath(),o(e,t,a,{start:i,end:i+n-1})&&e.closePath(),e.stroke()}var tW=typeof Path2D=="function";function iW(e,t,i,n){tW&&!t.options.segment?Jz(e,t,i,n):eW(e,t,i,n)}var Ud=(()=>{class e extends xi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"&&i!=="fill"};constructor(i){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,i&&Object.assign(this,i)}updateControlPoints(i,n){let s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){let r=s.spanGaps?this._loop:this._fullLoop;KD(this._points,s,i,r,n),this._pointsUpdated=!0}}set points(i){this._points=i,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eE(this,this.options.segment))}first(){let i=this.segments,n=this.points;return i.length&&n[i[0].start]}last(){let i=this.segments,n=this.points,s=i.length;return s&&n[i[s-1].end]}interpolate(i,n){let s=this.options,r=i[n],o=this.points,a=Ev(this,{property:n,start:r,end:r});if(!a.length)return;let l=[],c=Xz(s),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:g}=a[u],p=o[h],f=o[g];if(p===f){l.push(p);continue}let m=Math.abs((r-p[n])/(f[n]-p[n])),v=c(p,f,m,s.stepped);v[n]=i[n],l.push(v)}return l.length===1?l[0]:l}pathSegment(i,n,s){return qv(this)(i,this,n,s)}path(i,n,s){let r=this.segments,o=qv(this),a=this._loop;n=n||0,s=s||this.points.length-n;for(let l of r)a&=o(i,this,l,{start:n,end:n+s-1});return!!a}draw(i,n,s,r){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(i.save(),iW(i,this,s,r),i.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return e})();function IE(e,t,i,n){let s=e.options,{[i]:r}=e.getProps([i],n);return Math.abs(t-r)<s.radius+s.hitRadius}var nW=(()=>{class e extends xi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,n,s){let r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(i-o,2)+Math.pow(n-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(i,n){return IE(this,i,"x",n)}inYRange(i,n){return IE(this,i,"y",n)}getCenterPoint(i){let{x:n,y:s}=this.getProps(["x","y"],i);return{x:n,y:s}}size(i){i=i||this.options||{};let n=i.radius||0;n=Math.max(n,n&&i.hoverRadius||0);let s=n&&i.borderWidth||0;return(n+s)*2}draw(i,n){let s=this.options;this.skip||s.radius<.1||!Gi(this,n,this.size(s)/2)||(i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.fillStyle=s.backgroundColor,xd(i,s,this.x,this.y))}getRange(){let i=this.options||{};return i.radius+i.hitRadius}}return e})();function pM(e,t){let{x:i,y:n,base:s,width:r,height:o}=e.getProps(["x","y","base","width","height"],t),a,l,c,u,d;return e.horizontal?(d=o/2,a=Math.min(i,s),l=Math.max(i,s),c=n-d,u=n+d):(d=r/2,a=i-d,l=i+d,c=Math.min(n,s),u=Math.max(n,s)),{left:a,top:c,right:l,bottom:u}}function os(e,t,i,n){return e?0:Ve(t,i,n)}function sW(e,t,i){let n=e.options.borderWidth,s=e.borderSkipped,r=fv(n);return{t:os(s.top,r.top,0,i),r:os(s.right,r.right,0,t),b:os(s.bottom,r.bottom,0,i),l:os(s.left,r.left,0,t)}}function rW(e,t,i){let{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,r=ss(s),o=Math.min(t,i),a=e.borderSkipped,l=n||ie(s);return{topLeft:os(!l||a.top||a.left,r.topLeft,0,o),topRight:os(!l||a.top||a.right,r.topRight,0,o),bottomLeft:os(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:os(!l||a.bottom||a.right,r.bottomRight,0,o)}}function oW(e){let t=pM(e),i=t.right-t.left,n=t.bottom-t.top,s=sW(e,i/2,n/2),r=rW(e,i/2,n/2);return{outer:{x:t.left,y:t.top,w:i,h:n,radius:r},inner:{x:t.left+s.l,y:t.top+s.t,w:i-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function kv(e,t,i,n){let s=t===null,r=i===null,a=e&&!(s&&r)&&pM(e,n);return a&&(s||Wi(t,a.left,a.right))&&(r||Wi(i,a.top,a.bottom))}function aW(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function lW(e,t){e.rect(t.x,t.y,t.w,t.h)}function _v(e,t,i={}){let n=e.x!==i.x?-t:0,s=e.y!==i.y?-t:0,r=(e.x+e.w!==i.x+i.w?t:0)-n,o=(e.y+e.h!==i.y+i.h?t:0)-s;return{x:e.x+n,y:e.y+s,w:e.w+r,h:e.h+o,radius:e.radius}}var Kv=class extends xi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:i,options:{borderColor:n,backgroundColor:s}}=this,{inner:r,outer:o}=oW(this),a=aW(o.radius)?go:lW;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,_v(o,i,r)),t.clip(),a(t,_v(r,-i,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,_v(r,i)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,i,n){return kv(this,t,i,n)}inXRange(t,i){return kv(this,t,null,i)}inYRange(t,i){return kv(this,null,t,i)}getCenterPoint(t){let{x:i,y:n,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(i+s)/2:i,y:r?n:(n+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},cW=Object.freeze({__proto__:null,ArcElement:$v,BarElement:Kv,LineElement:Ud,PointElement:nW}),Yv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],PE=Yv.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function fM(e){return Yv[e%Yv.length]}function mM(e){return PE[e%PE.length]}function uW(e,t){return e.borderColor=fM(t),e.backgroundColor=mM(t),++t}function dW(e,t){return e.backgroundColor=e.data.map(()=>fM(t++)),t}function hW(e,t){return e.backgroundColor=e.data.map(()=>mM(t++)),t}function gW(e){let t=0;return(i,n)=>{let s=e.getDatasetMeta(n).controller;s instanceof nC?t=dW(i,t):s instanceof nM?t=hW(i,t):s&&(t=uW(i,t))}}function AE(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function pW(e){return e&&(e.borderColor||e.backgroundColor)}function fW(){return Ee.borderColor!=="rgba(0,0,0,0.1)"||Ee.backgroundColor!=="rgba(0,0,0,0.1)"}var mW={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,i){if(!i.enabled)return;let{data:{datasets:n},options:s}=e.config,{elements:r}=s,o=AE(n)||pW(s)||r&&AE(r)||fW();if(!i.forceOverride&&o)return;let a=gW(e);n.forEach(a)}};function vW(e,t,i,n,s){let r=s.samples||n;if(r>=i)return e.slice(t,t+i);let o=[],a=(i-2)/(r-2),l=0,c=t+i-1,u=t,d,h,g,p,f;for(o[l++]=e[u],d=0;d<r-2;d++){let m=0,v=0,C,w=Math.floor((d+1)*a)+1+t,y=Math.min(Math.floor((d+2)*a)+1,i)+t,S=y-w;for(C=w;C<y;C++)m+=e[C].x,v+=e[C].y;m/=S,v/=S;let b=Math.floor(d*a)+1+t,M=Math.min(Math.floor((d+1)*a)+1,i)+t,{x:R,y:A}=e[u];for(g=p=-1,C=b;C<M;C++)p=.5*Math.abs((R-m)*(e[C].y-A)-(R-e[C].x)*(v-A)),p>g&&(g=p,h=e[C],f=C);o[l++]=h,u=f}return o[l++]=e[c],o}function CW(e,t,i,n){let s=0,r=0,o,a,l,c,u,d,h,g,p,f,m=[],v=t+i-1,C=e[t].x,y=e[v].x-C;for(o=t;o<t+i;++o){a=e[o],l=(a.x-C)/y*n,c=a.y;let S=l|0;if(S===u)c<p?(p=c,d=o):c>f&&(f=c,h=o),s=(r*s+a.x)/++r;else{let b=o-1;if(!J(d)&&!J(h)){let M=Math.min(d,h),R=Math.max(d,h);M!==g&&M!==b&&m.push(_(D({},e[M]),{x:s})),R!==g&&R!==b&&m.push(_(D({},e[R]),{x:s}))}o>0&&b!==g&&m.push(e[b]),m.push(a),u=S,r=0,p=f=c,d=h=g=o}}return m}function vM(e){if(e._decimated){let t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function TE(e){e.data.datasets.forEach(t=>{vM(t)})}function wW(e,t){let i=t.length,n=0,s,{iScale:r}=e,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(n=Ve(Bi(t,r.axis,o).lo,0,i-1)),c?s=Ve(Bi(t,r.axis,a).hi+1,n,i)-n:s=i-n,{start:n,count:s}}var yW={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,i)=>{if(!i.enabled){TE(e);return}let n=e.width;e.data.datasets.forEach((s,r)=>{let{_data:o,indexAxis:a}=s,l=e.getDatasetMeta(r),c=o||s.data;if(po([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:d,count:h}=wW(l,c),g=i.threshold||4*n;if(h<=g){vM(s);return}J(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(f){this._data=f}}));let p;switch(i.algorithm){case"lttb":p=vW(c,d,h,n,i);break;case"min-max":p=CW(c,d,h,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}s._decimated=p})},destroy(e){TE(e)}};function bW(e,t,i){let n=e.segments,s=e.points,r=t.points,o=[];for(let a of n){let{start:l,end:c}=a;c=sC(l,c,s);let u=Qv(i,s[l],s[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}let d=Ev(t,u);for(let h of d){let g=Qv(i,r[h.start],r[h.end],h.loop),p=Dv(a,s,g);for(let f of p)o.push({source:f,target:h,start:{[i]:kE(u,g,"start",Math.max)},end:{[i]:kE(u,g,"end",Math.min)}})}}return o}function Qv(e,t,i,n){if(n)return;let s=t[e],r=i[e];return e==="angle"&&(s=Tt(s),r=Tt(r)),{property:e,start:s,end:r}}function SW(e,t){let{x:i=null,y:n=null}=e||{},s=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=sC(o,a,s);let l=s[o],c=s[a];n!==null?(r.push({x:l.x,y:n}),r.push({x:c.x,y:n})):i!==null&&(r.push({x:i,y:l.y}),r.push({x:i,y:c.y}))}),r}function sC(e,t,i){for(;t>e;t--){let n=i[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function kE(e,t,i,n){return e&&t?n(e[i],t[i]):e?e[i]:t?t[i]:0}function CM(e,t){let i=[],n=!1;return we(e)?(n=!0,i=e):i=SW(e,t),i.length?new Ud({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function _E(e){return e&&e.fill!==!1}function xW(e,t,i){let s=e[t].fill,r=[t],o;if(!i)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!Ie(s))return s;if(o=e[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function DW(e,t,i){let n=FW(e);if(ie(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return Ie(s)&&Math.floor(s)===s?EW(n[0],t,s,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function EW(e,t,i,n){return(e==="-"||e==="+")&&(i=t+i),i===t||i<0||i>=n?!1:i}function MW(e,t){let i=null;return e==="start"?i=t.bottom:e==="end"?i=t.top:ie(e)?i=t.getPixelForValue(e.value):t.getBasePixel&&(i=t.getBasePixel()),i}function RW(e,t,i){let n;return e==="start"?n=i:e==="end"?n=t.options.reverse?t.min:t.max:ie(e)?n=e.value:n=t.getBaseValue(),n}function FW(e){let t=e.options,i=t.fill,n=K(i&&i.target,i);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function IW(e){let{scale:t,index:i,line:n}=e,s=[],r=n.segments,o=n.points,a=PW(t,i);a.push(CM({x:null,y:t.bottom},n));for(let l=0;l<r.length;l++){let c=r[l];for(let u=c.start;u<=c.end;u++)AW(s,o[u],a)}return new Ud({points:s,options:{}})}function PW(e,t){let i=[],n=e.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){let r=n[s];if(r.index===t)break;r.hidden||i.unshift(r.dataset)}return i}function AW(e,t,i){let n=[];for(let s=0;s<i.length;s++){let r=i[s],{first:o,last:a,point:l}=TW(r,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(e.push(l),!a)break}}e.push(...n)}function TW(e,t,i){let n=e.interpolate(t,i);if(!n)return{};let s=n[i],r=e.segments,o=e.points,a=!1,l=!1;for(let c=0;c<r.length;c++){let u=r[c],d=o[u.start][i],h=o[u.end][i];if(Wi(s,d,h)){a=s===d,l=s===h;break}}return{first:a,last:l,point:n}}var zd=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,i,n){let{x:s,y:r,radius:o}=this;return i=i||{start:0,end:be},t.arc(s,r,o,i.end,i.start,!0),!n.bounds}interpolate(t){let{x:i,y:n,radius:s}=this,r=t.angle;return{x:i+Math.cos(r)*s,y:n+Math.sin(r)*s,angle:r}}};function kW(e){let{chart:t,fill:i,line:n}=e;if(Ie(i))return _W(t,i);if(i==="stack")return IW(e);if(i==="shape")return!0;let s=LW(e);return s instanceof zd?s:CM(s,n)}function _W(e,t){let i=e.getDatasetMeta(t);return i&&e.isDatasetVisible(t)?i.dataset:null}function LW(e){return(e.scale||{}).getPointPositionForValue?NW(e):OW(e)}function OW(e){let{scale:t={},fill:i}=e,n=MW(i,t);if(Ie(n)){let s=t.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function NW(e){let{scale:t,fill:i}=e,n=t.options,s=t.getLabels().length,r=n.reverse?t.max:t.min,o=RW(i,t,r),a=[];if(n.grid.circular){let l=t.getPointPositionForValue(0,r);return new zd({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,o));return a}function Lv(e,t,i){let n=kW(t),{line:s,scale:r,axis:o}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};n&&s.points.length&&(el(e,i),VW(e,{line:s,target:n,above:u,below:d,area:i,scale:r,axis:o}),tl(e))}function VW(e,t){let{line:i,target:n,above:s,below:r,area:o,scale:a}=t,l=i._loop?"angle":t.axis;e.save(),l==="x"&&r!==s&&(LE(e,n,o.top),OE(e,{line:i,target:n,color:s,scale:a,property:l}),e.restore(),e.save(),LE(e,n,o.bottom)),OE(e,{line:i,target:n,color:r,scale:a,property:l}),e.restore()}function LE(e,t,i){let{segments:n,points:s}=t,r=!0,o=!1;e.beginPath();for(let a of n){let{start:l,end:c}=a,u=s[l],d=s[sC(l,c,s)];r?(e.moveTo(u.x,u.y),r=!1):(e.lineTo(u.x,i),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(d.x,i)}e.lineTo(t.first().x,i),e.closePath(),e.clip()}function OE(e,t){let{line:i,target:n,property:s,color:r,scale:o}=t,a=bW(i,n,s);for(let{source:l,target:c,start:u,end:d}of a){let{style:{backgroundColor:h=r}={}}=l,g=n!==!0;e.save(),e.fillStyle=h,HW(e,o,g&&Qv(s,u,d)),e.beginPath();let p=!!i.pathSegment(e,l),f;if(g){p?e.closePath():NE(e,n,d,s);let m=!!n.pathSegment(e,c,{move:p,reverse:!0});f=p&&m,f||NE(e,n,u,s)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function HW(e,t,i){let{top:n,bottom:s}=t.chart.chartArea,{property:r,start:o,end:a}=i||{};r==="x"&&(e.beginPath(),e.rect(o,n,a-o,s-n),e.clip())}function NE(e,t,i,n){let s=t.interpolate(i,n);s&&e.lineTo(s.x,s.y)}var BW={id:"filler",afterDatasetsUpdate(e,t,i){let n=(e.data.datasets||[]).length,s=[],r,o,a,l;for(o=0;o<n;++o)r=e.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof Ud&&(l={visible:e.isDatasetVisible(o),index:o,fill:DW(a,o,n),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<n;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=xW(s,o,i.propagate))},beforeDraw(e,t,i){let n=i.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=s.length-1;o>=0;--o){let a=s[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),n&&a.fill&&Lv(e.ctx,a,r))}},beforeDatasetsDraw(e,t,i){if(i.drawTime!=="beforeDatasetsDraw")return;let n=e.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){let r=n[s].$filler;_E(r)&&Lv(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,i){let n=t.meta.$filler;!_E(n)||i.drawTime!=="beforeDatasetDraw"||Lv(e.ctx,n,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},VE=(e,t)=>{let{boxHeight:i=t,boxWidth:n=t}=e;return e.usePointStyle&&(i=Math.min(i,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(t,i)}},GW=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index,Wd=class extends xi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i,n){this.maxWidth=t,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},i=Ce(t.generateLabels,[this.chart],this)||[];t.filter&&(i=i.filter(n=>t.filter(n,this.chart.data))),t.sort&&(i=i.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){let{options:t,ctx:i}=this;if(!t.display){this.width=this.height=0;return}let n=t.labels,s=Oe(n.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=VE(n,r),c,u;i.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,i,n,s){let{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a,d=t;r.textAlign="left",r.textBaseline="middle";let h=-1,g=-u;return this.legendItems.forEach((p,f)=>{let m=n+i/2+r.measureText(p.text).width;(f===0||c[c.length-1]+m+2*a>o)&&(d+=u,c[c.length-(f>0?0:1)]=0,g+=u,h++),l[f]={left:0,top:g,row:h,width:m,height:s},c[c.length-1]+=m+a}),d}_fitCols(t,i,n,s){let{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t,d=a,h=0,g=0,p=0,f=0;return this.legendItems.forEach((m,v)=>{let{itemWidth:C,itemHeight:w}=zW(n,i,r,m,s);v>0&&g+w+2*a>u&&(d+=h+a,c.push({width:h,height:g}),p+=h+a,f++,h=g=0),l[v]={left:p,top:g,col:f,width:C,height:w},h=Math.max(h,C),g+=w+a}),d+=h,c.push({width:h,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:s},rtl:r}}=this,o=Ks(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=Je(n,this.left+s,this.right-this.lineWidths[a]);for(let c of i)a!==c.row&&(a=c.row,l=Je(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=Je(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(let c of i)c.col!==a&&(a=c.col,l=Je(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;el(t,this),this._draw(),tl(t)}}_draw(){let{options:t,columnSizes:i,lineWidths:n,ctx:s}=this,{align:r,labels:o}=t,a=Ee.color,l=Ks(t.rtl,this.left,this.width),c=Oe(o.font),{padding:u}=o,d=c.size,h=d/2,g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;let{boxWidth:p,boxHeight:f,itemHeight:m}=VE(o,d),v=function(b,M,R){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;s.save();let A=K(R.lineWidth,1);if(s.fillStyle=K(R.fillStyle,a),s.lineCap=K(R.lineCap,"butt"),s.lineDashOffset=K(R.lineDashOffset,0),s.lineJoin=K(R.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=K(R.strokeStyle,a),s.setLineDash(K(R.lineDash,[])),o.usePointStyle){let B={radius:f*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:A},V=l.xPlus(b,p/2),ne=M+h;pv(s,B,V,ne,o.pointStyleWidth&&p)}else{let B=M+Math.max((d-f)/2,0),V=l.leftForLtr(b,p),ne=ss(R.borderRadius);s.beginPath(),Object.values(ne).some($e=>$e!==0)?go(s,{x:V,y:B,w:p,h:f,radius:ne}):s.rect(V,B,p,f),s.fill(),A!==0&&s.stroke()}s.restore()},C=function(b,M,R){ns(s,R.text,b,M+m/2,c,{strikethrough:R.hidden,textAlign:l.textAlign(R.textAlign)})},w=this.isHorizontal(),y=this._computeTitleHeight();w?g={x:Je(r,this.left+u,this.right-n[0]),y:this.top+u+y,line:0}:g={x:this.left+u,y:Je(r,this.top+y+u,this.bottom-i[0].height),line:0},Sv(this.ctx,t.textDirection);let S=m+u;this.legendItems.forEach((b,M)=>{s.strokeStyle=b.fontColor,s.fillStyle=b.fontColor;let R=s.measureText(b.text).width,A=l.textAlign(b.textAlign||(b.textAlign=o.textAlign)),B=p+h+R,V=g.x,ne=g.y;l.setWidth(this.width),w?M>0&&V+B+u>this.right&&(ne=g.y+=S,g.line++,V=g.x=Je(r,this.left+u,this.right-n[g.line])):M>0&&ne+S>this.bottom&&(V=g.x=V+i[g.line].width+u,g.line++,ne=g.y=Je(r,this.top+y+u,this.bottom-i[g.line].height));let $e=l.x(V);if(v($e,ne,b),V=VD(A,V+p+h,w?V+B:this.right,t.rtl),C(l.x(V),ne,b),w)g.x+=B+u;else if(typeof b.text!="string"){let Ot=c.lineHeight;g.y+=wM(b,Ot)+u}else g.y+=S}),xv(this.ctx,t.textDirection)}drawTitle(){let t=this.options,i=t.title,n=Oe(i.font),s=et(i.padding);if(!i.display)return;let r=Ks(t.rtl,this.left,this.width),o=this.ctx,a=i.position,l=n.size/2,c=s.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Je(t.align,d,this.right-h);else{let p=this.columnSizes.reduce((f,m)=>Math.max(f,m.height),0);u=c+Je(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}let g=Je(a,d,d+h);o.textAlign=r.textAlign(bd(a)),o.textBaseline="middle",o.strokeStyle=i.color,o.fillStyle=i.color,o.font=n.string,ns(o,i.text,g,u,n)}_computeTitleHeight(){let t=this.options.title,i=Oe(t.font),n=et(t.padding);return t.display?i.lineHeight+n.height:0}_getLegendItemAt(t,i){let n,s,r;if(Wi(t,this.left,this.right)&&Wi(i,this.top,this.bottom)){for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(s=r[n],Wi(t,s.left,s.left+s.width)&&Wi(i,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){let i=this.options;if(!UW(t.type,i))return;let n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let s=this._hoveredItem,r=GW(s,n);s&&!r&&Ce(i.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!r&&Ce(i.onHover,[t,n,this],this)}else n&&Ce(i.onClick,[t,n,this],this)}};function zW(e,t,i,n,s){let r=WW(n,e,t,i),o=jW(s,n,t.lineHeight);return{itemWidth:r,itemHeight:o}}function WW(e,t,i,n){let s=e.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),t+i.size/2+n.measureText(s).width}function jW(e,t,i){let n=e;return typeof t.text!="string"&&(n=wM(t,i)),n}function wM(e,t){let i=e.text?e.text.length:0;return t*i}function UW(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var $W={id:"legend",_element:Wd,start(e,t,i){let n=e.legend=new Wd({ctx:e.ctx,options:i,chart:e});ct.configure(e,n,i),ct.addBox(e,n)},stop(e){ct.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,i){let n=e.legend;ct.configure(e,n,i),n.options=i},afterUpdate(e){let t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,i){let n=t.datasetIndex,s=i.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){let t=e.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(i?0:void 0),u=et(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}},ul=class extends xi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,i){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=i;let s=we(n.text)?n.text.length:1;this._padding=et(n.padding);let r=s*Oe(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:i,left:n,bottom:s,right:r,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=Je(a,n,r),d=i+t,c=r-n):(o.position==="left"?(u=n+t,d=Je(a,s,i),l=ye*-.5):(u=r-t,d=Je(a,i,s),l=ye*.5),c=s-i),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let t=this.ctx,i=this.options;if(!i.display)return;let n=Oe(i.font),r=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);ns(t,i.text,0,0,n,{color:i.color,maxWidth:l,rotation:c,textAlign:bd(i.align),textBaseline:"middle",translation:[o,a]})}};function qW(e,t){let i=new ul({ctx:e.ctx,options:t,chart:e});ct.configure(e,i,t),ct.addBox(e,i),e.titleBlock=i}var KW={id:"title",_element:ul,start(e,t,i){qW(e,i)},stop(e){let t=e.titleBlock;ct.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,i){let n=e.titleBlock;ct.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},kd=new WeakMap,YW={id:"subtitle",start(e,t,i){let n=new ul({ctx:e.ctx,options:i,chart:e});ct.configure(e,n,i),ct.addBox(e,n),kd.set(e,n)},stop(e){ct.removeBox(e,kd.get(e)),kd.delete(e)},beforeUpdate(e,t,i){let n=kd.get(e);ct.configure(e,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},ll={average(e){if(!e.length)return!1;let t,i,n=new Set,s=0,r=0;for(t=0,i=e.length;t<i;++t){let a=e[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();n.add(l.x),s+=l.y,++r}}return r===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/r}},nearest(e,t){if(!e.length)return!1;let i=t.x,n=t.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){let l=e[r].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=md(t,c);u<s&&(s=u,a=l)}}if(a){let l=a.tooltipPosition();i=l.x,n=l.y}return{x:i,y:n}}};function ji(e,t){return t&&(we(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function bn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function QW(e,t){let{element:i,datasetIndex:n,index:s}=t,r=e.getDatasetMeta(n).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:e,label:o,parsed:r.getParsed(s),raw:e.data.datasets[n].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:n,element:i}}function HE(e,t){let i=e.chart.ctx,{body:n,footer:s,title:r}=e,{boxWidth:o,boxHeight:a}=t,l=Oe(t.bodyFont),c=Oe(t.titleFont),u=Oe(t.footerFont),d=r.length,h=s.length,g=n.length,p=et(t.padding),f=p.height,m=0,v=n.reduce((y,S)=>y+S.before.length+S.lines.length+S.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(f+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){let y=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;f+=g*y+(v-g)*l.lineHeight+(v-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let C=0,w=function(y){m=Math.max(m,i.measureText(y).width+C)};return i.save(),i.font=c.string,pe(e.title,w),i.font=l.string,pe(e.beforeBody.concat(e.afterBody),w),C=t.displayColors?o+2+t.boxPadding:0,pe(n,y=>{pe(y.before,w),pe(y.lines,w),pe(y.after,w)}),C=0,i.font=u.string,pe(e.footer,w),i.restore(),m+=p.width,{width:m,height:f}}function ZW(e,t){let{y:i,height:n}=t;return i<n/2?"top":i>e.height-n/2?"bottom":"center"}function XW(e,t,i,n){let{x:s,width:r}=n,o=i.caretSize+i.caretPadding;if(e==="left"&&s+r+o>t.width||e==="right"&&s-r-o<0)return!0}function JW(e,t,i,n){let{x:s,width:r}=i,{width:o,chartArea:{left:a,right:l}}=e,c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),XW(c,e,t,i)&&(c="center"),c}function BE(e,t,i){let n=i.yAlign||t.yAlign||ZW(e,i);return{xAlign:i.xAlign||t.xAlign||JW(e,t,i,n),yAlign:n}}function e9(e,t){let{x:i,width:n}=e;return t==="right"?i-=n:t==="center"&&(i-=n/2),i}function t9(e,t,i){let{y:n,height:s}=e;return t==="top"?n+=i:t==="bottom"?n-=s+i:n-=s/2,n}function GE(e,t,i,n){let{caretSize:s,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:l}=i,c=s+r,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:g}=ss(o),p=e9(t,a),f=t9(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+s:a==="right"&&(p+=Math.max(d,g)+s),{x:Ve(p,0,n.width-t.width),y:Ve(f,0,n.height-t.height)}}function _d(e,t,i){let n=et(i.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function zE(e){return ji([],bn(e))}function i9(e,t,i){return wn(e,{tooltip:t,tooltipItems:i,type:"tooltip"})}function WE(e,t){let i=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return i?e.override(i):e}var yM={beforeTitle:zi,title(e){if(e.length>0){let t=e[0],i=t.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return i[t.dataIndex]}return""},afterTitle:zi,beforeBody:zi,beforeLabel:zi,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");let i=e.formattedValue;return J(i)||(t+=i),t},labelColor(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){let i=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:zi,afterBody:zi,beforeFooter:zi,footer:zi,afterFooter:zi};function _t(e,t,i,n){let s=e[t].call(i,n);return typeof s>"u"?yM[t].call(i,n):s}var jE=(()=>{class e extends xi{static positioners=ll;constructor(i){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=i.chart,this.options=i.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(i){this.options=i,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let i=this._cachedAnimations;if(i)return i;let n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,o=new Vd(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=i9(this.chart.getContext(),this,this._tooltipItems))}getTitle(i,n){let{callbacks:s}=n,r=_t(s,"beforeTitle",this,i),o=_t(s,"title",this,i),a=_t(s,"afterTitle",this,i),l=[];return l=ji(l,bn(r)),l=ji(l,bn(o)),l=ji(l,bn(a)),l}getBeforeBody(i,n){return zE(_t(n.callbacks,"beforeBody",this,i))}getBody(i,n){let{callbacks:s}=n,r=[];return pe(i,o=>{let a={before:[],lines:[],after:[]},l=WE(s,o);ji(a.before,bn(_t(l,"beforeLabel",this,o))),ji(a.lines,_t(l,"label",this,o)),ji(a.after,bn(_t(l,"afterLabel",this,o))),r.push(a)}),r}getAfterBody(i,n){return zE(_t(n.callbacks,"afterBody",this,i))}getFooter(i,n){let{callbacks:s}=n,r=_t(s,"beforeFooter",this,i),o=_t(s,"footer",this,i),a=_t(s,"afterFooter",this,i),l=[];return l=ji(l,bn(r)),l=ji(l,bn(o)),l=ji(l,bn(a)),l}_createItems(i){let n=this._active,s=this.chart.data,r=[],o=[],a=[],l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(QW(this.chart,n[c]));return i.filter&&(l=l.filter((d,h,g)=>i.filter(d,h,g,s))),i.itemSort&&(l=l.sort((d,h)=>i.itemSort(d,h,s))),pe(l,d=>{let h=WE(i.callbacks,d);r.push(_t(h,"labelColor",this,d)),o.push(_t(h,"labelPointStyle",this,d)),a.push(_t(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(i,n){let s=this.options.setContext(this.getContext()),r=this._active,o,a=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{let l=ll[s.position].call(this,r,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);let c=this._size=HE(this,s),u=Object.assign({},l,c),d=BE(this.chart,s,u),h=GE(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),i&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(i,n,s,r){let o=this.getCaretPosition(i,s,r);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(i,n,s){let{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=ss(l),{x:g,y:p}=i,{width:f,height:m}=n,v,C,w,y,S,b;return o==="center"?(S=p+m/2,r==="left"?(v=g,C=v-a,y=S+a,b=S-a):(v=g+f,C=v+a,y=S-a,b=S+a),w=v):(r==="left"?C=g+Math.max(c,d)+a:r==="right"?C=g+f-Math.max(u,h)-a:C=this.caretX,o==="top"?(y=p,S=y-a,v=C-a,w=C+a):(y=p+m,S=y+a,v=C+a,w=C-a),b=y),{x1:v,x2:C,x3:w,y1:y,y2:S,y3:b}}drawTitle(i,n,s){let r=this.title,o=r.length,a,l,c;if(o){let u=Ks(s.rtl,this.x,this.width);for(i.x=_d(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",a=Oe(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=a.string,c=0;c<o;++c)n.fillText(r[c],u.x(i.x),i.y+a.lineHeight/2),i.y+=a.lineHeight+l,c+1===o&&(i.y+=s.titleMarginBottom-l)}}_drawColorBox(i,n,s,r,o){let a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=o,d=Oe(o.bodyFont),h=_d(this,"left",o),g=r.x(h),p=c<d.lineHeight?(d.lineHeight-c)/2:0,f=n.y+p;if(o.usePointStyle){let m={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(g,u)+u/2,C=f+c/2;i.strokeStyle=o.multiKeyBackground,i.fillStyle=o.multiKeyBackground,xd(i,m,v,C),i.strokeStyle=a.borderColor,i.fillStyle=a.backgroundColor,xd(i,m,v,C)}else{i.lineWidth=ie(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,i.strokeStyle=a.borderColor,i.setLineDash(a.borderDash||[]),i.lineDashOffset=a.borderDashOffset||0;let m=r.leftForLtr(g,u),v=r.leftForLtr(r.xPlus(g,1),u-2),C=ss(a.borderRadius);Object.values(C).some(w=>w!==0)?(i.beginPath(),i.fillStyle=o.multiKeyBackground,go(i,{x:m,y:f,w:u,h:c,radius:C}),i.fill(),i.stroke(),i.fillStyle=a.backgroundColor,i.beginPath(),go(i,{x:v,y:f+1,w:u-2,h:c-2,radius:C}),i.fill()):(i.fillStyle=o.multiKeyBackground,i.fillRect(m,f,u,c),i.strokeRect(m,f,u,c),i.fillStyle=a.backgroundColor,i.fillRect(v,f+1,u-2,c-2))}i.fillStyle=this.labelTextColors[s]}drawBody(i,n,s){let{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=Oe(s.bodyFont),g=h.lineHeight,p=0,f=Ks(s.rtl,this.x,this.width),m=function(A){n.fillText(A,f.x(i.x+p),i.y+g/2),i.y+=g+o},v=f.textAlign(a),C,w,y,S,b,M,R;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,i.x=_d(this,v,s),n.fillStyle=s.bodyColor,pe(this.beforeBody,m),p=l&&v!=="right"?a==="center"?u/2+d:u+2+d:0,S=0,M=r.length;S<M;++S){for(C=r[S],w=this.labelTextColors[S],n.fillStyle=w,pe(C.before,m),y=C.lines,l&&y.length&&(this._drawColorBox(n,i,S,f,s),g=Math.max(h.lineHeight,c)),b=0,R=y.length;b<R;++b)m(y[b]),g=h.lineHeight;pe(C.after,m)}p=0,g=h.lineHeight,pe(this.afterBody,m),i.y-=o}drawFooter(i,n,s){let r=this.footer,o=r.length,a,l;if(o){let c=Ks(s.rtl,this.x,this.width);for(i.x=_d(this,s.footerAlign,s),i.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",a=Oe(s.footerFont),n.fillStyle=s.footerColor,n.font=a.string,l=0;l<o;++l)n.fillText(r[l],c.x(i.x),i.y+a.lineHeight/2),i.y+=a.lineHeight+s.footerSpacing}}drawBackground(i,n,s,r){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=i,{width:u,height:d}=s,{topLeft:h,topRight:g,bottomLeft:p,bottomRight:f}=ss(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(i,n,s,r),n.lineTo(l+u-g,c),n.quadraticCurveTo(l+u,c,l+u,c+g),a==="center"&&o==="right"&&this.drawCaret(i,n,s,r),n.lineTo(l+u,c+d-f),n.quadraticCurveTo(l+u,c+d,l+u-f,c+d),a==="bottom"&&this.drawCaret(i,n,s,r),n.lineTo(l+p,c+d),n.quadraticCurveTo(l,c+d,l,c+d-p),a==="center"&&o==="left"&&this.drawCaret(i,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(i){let n=this.chart,s=this.$animations,r=s&&s.x,o=s&&s.y;if(r||o){let a=ll[i.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=HE(this,i),c=Object.assign({},a,this._size),u=BE(n,i,c),d=GE(i,c,u,n);(r._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(i){let n=this.options.setContext(this.getContext()),s=this.opacity;if(!s)return;this._updateAnimationTarget(n);let r={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;let a=et(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(i.save(),i.globalAlpha=s,this.drawBackground(o,i,r,n),Sv(i,n.textDirection),o.y+=a.top,this.drawTitle(o,i,n),this.drawBody(o,i,n),this.drawFooter(o,i,n),xv(i,n.textDirection),i.restore())}getActiveElements(){return this._active||[]}setActiveElements(i,n){let s=this._active,r=i.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Xa(s,r),a=this._positionChanged(r,n);(o||a)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(i,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let r=this.options,o=this._active||[],a=this._getActiveElements(i,o,n,s),l=this._positionChanged(a,i),c=n||!Xa(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:i.x,y:i.y},this.update(!0,n))),c}_getActiveElements(i,n,s,r){let o=this.options;if(i.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(i,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(i,n){let{caretX:s,caretY:r,options:o}=this,a=ll[o.position].call(this,i,n);return a!==!1&&(s!==a.x||r!==a.y)}}return e})(),n9={id:"tooltip",_element:jE,positioners:ll,afterInit(e,t,i){i&&(e.tooltip=new jE({chart:e,options:i}))},beforeUpdate(e,t,i){e.tooltip&&e.tooltip.initialize(i)},reset(e,t,i){e.tooltip&&e.tooltip.initialize(i)},afterDraw(e){let t=e.tooltip;if(t&&t._willRender()){let i={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",_(D({},i),{cancelable:!0}))===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",i)}},afterEvent(e,t){if(e.tooltip){let i=t.replay;e.tooltip.handleEvent(t.event,i,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},s9=Object.freeze({__proto__:null,Colors:mW,Decimation:yW,Filler:BW,Legend:$W,SubTitle:YW,Title:KW,Tooltip:n9}),r9=(e,t,i,n)=>(typeof t=="string"?(i=e.push(t)-1,n.unshift({index:i,label:t})):isNaN(t)&&(i=null),i);function o9(e,t,i,n){let s=e.indexOf(t);if(s===-1)return r9(e,t,i,n);let r=e.lastIndexOf(t);return s!==r?i:s}var a9=(e,t)=>e===null?null:Ve(Math.round(e),0,t);function UE(e){let t=this.getLabels();return e>=0&&e<t.length?t[e]:e}var l9=(()=>{class e extends Zs{static id="category";static defaults={ticks:{callback:UE}};constructor(i){super(i),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(i){let n=this._addedLabels;if(n.length){let s=this.getLabels();for(let{index:r,label:o}of n)s[r]===o&&s.splice(r,1);this._addedLabels=[]}super.init(i)}parse(i,n){if(J(i))return null;let s=this.getLabels();return n=isFinite(n)&&s[n]===i?n:o9(s,i,K(n,i),this._addedLabels),a9(n,s.length-1)}determineDataLimits(){let{minDefined:i,maxDefined:n}=this.getUserBounds(),{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(i||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){let i=this.min,n=this.max,s=this.options.offset,r=[],o=this.getLabels();o=i===0&&n===o.length-1?o:o.slice(i,n+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=i;a<=n;a++)r.push({value:a});return r}getLabelForValue(i){return UE.call(this,i)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(i){return typeof i!="number"&&(i=this.parse(i)),i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getPixelForTick(i){let n=this.ticks;return i<0||i>n.length-1?null:this.getPixelForValue(n[i].value)}getValueForPixel(i){return Math.round(this._startValue+this.getDecimalForPixel(i)*this._valueRange)}getBasePixel(){return this.bottom}}return e})();function c9(e,t){let i=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=e,g=r||1,p=u-1,{min:f,max:m}=t,v=!J(o),C=!J(a),w=!J(c),y=(m-f)/(d+1),S=tv((m-f)/p/g)*g,b,M,R,A;if(S<1e-14&&!v&&!C)return[{value:f},{value:m}];A=Math.ceil(m/S)-Math.floor(f/S),A>p&&(S=tv(A*S/p/g)*g),J(l)||(b=Math.pow(10,l),S=Math.ceil(S*b)/b),s==="ticks"?(M=Math.floor(f/S)*S,R=Math.ceil(m/S)*S):(M=f,R=m),v&&C&&r&&AD((a-o)/r,S/1e3)?(A=Math.round(Math.min((a-o)/S,u)),S=(a-o)/A,M=o,R=a):w?(M=v?o:M,R=C?a:R,A=c-1,S=(R-M)/A):(A=(R-M)/S,co(A,Math.round(A),S/1e3)?A=Math.round(A):A=Math.ceil(A));let B=Math.max(nv(S),nv(M));b=Math.pow(10,J(l)?B:l),M=Math.round(M*b)/b,R=Math.round(R*b)/b;let V=0;for(v&&(h&&M!==o?(i.push({value:o}),M<o&&V++,co(Math.round((M+V*S)*b)/b,o,$E(o,y,e))&&V++):M<o&&V++);V<A;++V){let ne=Math.round((M+V*S)*b)/b;if(C&&ne>a)break;i.push({value:ne})}return C&&h&&R!==a?i.length&&co(i[i.length-1].value,a,$E(a,y,e))?i[i.length-1].value=a:i.push({value:a}):(!C||R===a)&&i.push({value:R}),i}function $E(e,t,{horizontal:i,minRotation:n}){let s=li(n),r=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}var vo=class extends Zs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,i){return J(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds(),{min:s,max:r}=this,o=l=>s=i?s:l,a=l=>r=n?r:l;if(t){let l=Si(s),c=Si(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),t||o(s-l)}this.min=s,this.max=r}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:i,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),i=i||11),i&&(s=Math.min(i,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,i=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},r=this._range||this,o=c9(s,r);return t.bounds==="ticks"&&iv(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,i=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let s=(n-i)/Math.max(t.length-1,1)/2;i-=s,n+=s}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(t){return ho(t,this.chart.options.locale,this.options.ticks.format)}},Zv=class extends vo{static id="linear";static defaults={ticks:{callback:Ja.formatters.numeric}};determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=Ie(t)?t:0,this.max=Ie(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),i=t?this.width:this.height,n=li(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},dl=e=>Math.floor(vn(e)),Qs=(e,t)=>Math.pow(10,dl(e)+t);function qE(e){return e/Math.pow(10,dl(e))===1}function KE(e,t,i){let n=Math.pow(10,i),s=Math.floor(e/n);return Math.ceil(t/n)-s}function u9(e,t){let i=t-e,n=dl(i);for(;KE(e,t,n)>10;)n++;for(;KE(e,t,n)<10;)n--;return Math.min(n,dl(e))}function d9(e,{min:t,max:i}){t=kt(e.min,t);let n=[],s=dl(t),r=u9(t,i),o=r<0?Math.pow(10,Math.abs(r)):1,a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,r)),h=kt(e.min,Math.round((l+u+d*Math.pow(10,r))*o)/o);for(;h<i;)n.push({value:h,major:qE(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(r++,d=2,o=r>=0?1:o),h=Math.round((l+u+d*Math.pow(10,r))*o)/o;let g=kt(e.max,h);return n.push({value:g,major:qE(g),significand:d}),n}var Xv=class extends Zs{static id="logarithmic";static defaults={ticks:{callback:Ja.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,i){let n=vo.prototype.parse.apply(this,[t,i]);if(n===0){this._zero=!0;return}return Ie(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!0);this.min=Ie(t)?Math.max(0,t):null,this.max=Ie(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ie(this._userMin)&&(this.min=t===Qs(this.min,0)?Qs(this.min,-1):Qs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),n=this.min,s=this.max,r=a=>n=t?n:a,o=a=>s=i?s:a;n===s&&(n<=0?(r(1),o(10)):(r(Qs(n,-1)),o(Qs(s,1)))),n<=0&&r(Qs(s,-1)),s<=0&&o(Qs(n,1)),this.min=n,this.max=s}buildTicks(){let t=this.options,i={min:this._userMin,max:this._userMax},n=d9(i,this);return t.bounds==="ticks"&&iv(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":ho(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=vn(t),this._valueRange=vn(this.max)-vn(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(vn(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let i=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+i*this._valueRange)}};function Jv(e){let t=e.ticks;if(t.display&&e.display){let i=et(t.backdropPadding);return K(t.font&&t.font.size,Ee.font.size)+i.height}return 0}function h9(e,t,i){return i=we(i)?i:[i],{w:BD(e,t.string,i),h:i.length*t.lineHeight}}function YE(e,t,i,n,s){return e===n||e===s?{start:t-i/2,end:t+i/2}:e<n||e>s?{start:t-i,end:t}:{start:t,end:t+i}}function g9(e){let t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},i=Object.assign({},t),n=[],s=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?ye/r:0;for(let l=0;l<r;l++){let c=o.setContext(e.getPointLabelContext(l));s[l]=c.padding;let u=e.getPointPosition(l,e.drawingArea+s[l],a),d=Oe(c.font),h=h9(e.ctx,d,e._pointLabels[l]);n[l]=h;let g=Tt(e.getIndexAngle(l)+a),p=Math.round(wd(g)),f=YE(p,u.x,h.w,0,180),m=YE(p,u.y,h.h,90,270);p9(i,t,g,f,m)}e.setCenterPoint(t.l-i.l,i.r-t.r,t.t-i.t,i.b-t.b),e._pointLabelItems=v9(e,n,s)}function p9(e,t,i,n,s){let r=Math.abs(Math.sin(i)),o=Math.abs(Math.cos(i)),a=0,l=0;n.start<t.l?(a=(t.l-n.start)/r,e.l=Math.min(e.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/o,e.t=Math.min(e.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function f9(e,t,i){let n=e.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=i,l=e.getPointPosition(t,n+s+o,r),c=Math.round(wd(Tt(l.angle+Ae))),u=y9(l.y,a.h,c),d=C9(c),h=w9(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function m9(e,t){if(!t)return!0;let{left:i,top:n,right:s,bottom:r}=e;return!(Gi({x:i,y:n},t)||Gi({x:i,y:r},t)||Gi({x:s,y:n},t)||Gi({x:s,y:r},t))}function v9(e,t,i){let n=[],s=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Jv(r)/2,additionalAngle:o?ye/s:0},c;for(let u=0;u<s;u++){l.padding=i[u],l.size=t[u];let d=f9(e,u,l);n.push(d),a==="auto"&&(d.visible=m9(d,c),d.visible&&(c=d))}return n}function C9(e){return e===0||e===180?"center":e<180?"left":"right"}function w9(e,t,i){return i==="right"?e-=t:i==="center"&&(e-=t/2),e}function y9(e,t,i){return i===90||i===270?e-=t/2:(i>270||i<90)&&(e-=t),e}function b9(e,t,i){let{left:n,top:s,right:r,bottom:o}=i,{backdropColor:a}=t;if(!J(a)){let l=ss(t.borderRadius),c=et(t.backdropPadding);e.fillStyle=a;let u=n-c.left,d=s-c.top,h=r-n+c.width,g=o-s+c.height;Object.values(l).some(p=>p!==0)?(e.beginPath(),go(e,{x:u,y:d,w:h,h:g,radius:l}),e.fill()):e.fillRect(u,d,h,g)}}function S9(e,t){let{ctx:i,options:{pointLabels:n}}=e;for(let s=t-1;s>=0;s--){let r=e._pointLabelItems[s];if(!r.visible)continue;let o=n.setContext(e.getPointLabelContext(s));b9(i,o,r);let a=Oe(o.font),{x:l,y:c,textAlign:u}=r;ns(i,e._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function bM(e,t,i,n){let{ctx:s}=e;if(i)s.arc(e.xCenter,e.yCenter,t,0,be);else{let r=e.getPointPosition(0,t);s.moveTo(r.x,r.y);for(let o=1;o<n;o++)r=e.getPointPosition(o,t),s.lineTo(r.x,r.y)}}function x9(e,t,i,n,s){let r=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!n||!a||!l||i<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),bM(e,i,o,n),r.closePath(),r.stroke(),r.restore())}function D9(e,t,i){return wn(e,{label:i,index:t,type:"pointLabel"})}var eC=class extends vo{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ja.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=et(Jv(this.options)/2),i=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+i/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){let{min:t,max:i}=this.getMinMax(!1);this.min=Ie(t)&&!isNaN(t)?t:0,this.max=Ie(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Jv(this.options))}generateTickLabels(t){vo.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((i,n)=>{let s=Ce(this.options.pointLabels.callback,[i,n],this);return s||s===0?s:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?g9(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,i,n,s){this.xCenter+=Math.floor((t-i)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,i,n,s))}getIndexAngle(t){let i=be/(this._pointLabels.length||1),n=this.options.startAngle||0;return Tt(t*i+li(n))}getDistanceFromCenterForValue(t){if(J(t))return NaN;let i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*i:(t-this.min)*i}getValueForDistanceFromCenter(t){if(J(t))return NaN;let i=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(t){let i=this._pointLabels||[];if(t>=0&&t<i.length){let n=i[t];return D9(this.getContext(),t,n)}}getPointPosition(t,i,n=0){let s=this.getIndexAngle(t)-Ae+n;return{x:Math.cos(s)*i+this.xCenter,y:Math.sin(s)*i+this.yCenter,angle:s}}getPointPositionForValue(t,i){return this.getPointPosition(t,this.getDistanceFromCenterForValue(i))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:i,top:n,right:s,bottom:r}=this._pointLabelItems[t];return{left:i,top:n,right:s,bottom:r}}drawBackground(){let{backgroundColor:t,grid:{circular:i}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),bM(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,i=this.options,{angleLines:n,grid:s,border:r}=i,o=this._pointLabels.length,a,l,c;if(i.pointLabels.display&&S9(this,o),s.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),g=s.setContext(h),p=r.setContext(h);x9(this,g,l,o,p)}}),n.display){for(t.save(),a=o-1;a>=0;a--){let u=n.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(t.lineWidth=h,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(i.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;let s=this.getIndexAngle(0),r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!i.reverse)return;let c=n.setContext(this.getContext(l)),u=Oe(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let d=et(c.backdropPadding);t.fillRect(-o/2-d.left,-r-u.size/2-d.top,o+d.width,u.size+d.height)}ns(t,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},$d={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Lt=Object.keys($d);function QE(e,t){return e-t}function ZE(e,t){if(J(t))return null;let i=e._adapter,{parser:n,round:s,isoWeekday:r}=e._parseOpts,o=t;return typeof n=="function"&&(o=n(o)),Ie(o)||(o=typeof n=="string"?i.parse(o,n):i.parse(o)),o===null?null:(s&&(o=s==="week"&&(qs(r)||r===!0)?i.startOf(o,"isoWeek",r):i.startOf(o,s)),+o)}function XE(e,t,i,n){let s=Lt.length;for(let r=Lt.indexOf(e);r<s-1;++r){let o=$d[Lt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((i-t)/(a*o.size))<=n)return Lt[r]}return Lt[s-1]}function E9(e,t,i,n,s){for(let r=Lt.length-1;r>=Lt.indexOf(i);r--){let o=Lt[r];if($d[o].common&&e._adapter.diff(s,n,o)>=t-1)return o}return Lt[i?Lt.indexOf(i):0]}function M9(e){for(let t=Lt.indexOf(e)+1,i=Lt.length;t<i;++t)if($d[Lt[t]].common)return Lt[t]}function JE(e,t,i){if(!i)e[t]=!0;else if(i.length){let{lo:n,hi:s}=yd(i,t),r=i[n]>=t?i[n]:i[s];e[r]=!0}}function R9(e,t,i,n){let s=e._adapter,r=+s.startOf(t[0].value,n),o=t[t.length-1].value,a,l;for(a=r;a<=o;a=+s.add(a,1,n))l=i[a],l>=0&&(t[l].major=!0);return t}function eM(e,t,i){let n=[],s={},r=t.length,o,a;for(o=0;o<r;++o)a=t[o],s[a]=o,n.push({value:a,major:!1});return r===0||!i?n:R9(e,n,s,i)}var tC=(()=>{class e extends Zs{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(i){super(i),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(i,n={}){let s=i.time||(i.time={}),r=this._adapter=new VG._date(i.adapters.date);r.init(n),ao(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(i),this._normalized=n.normalized}parse(i,n){return i===void 0?null:ZE(this,i)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let i=this.options,n=this._adapter,s=i.time.unit||"day",{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(i.bounds!=="ticks"||i.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ie(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),o=Ie(o)&&!isNaN(o)?o:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){let i=this.getLabelTimestamps(),n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return i.length&&(n=i[0],s=i[i.length-1]),{min:n,max:s}}buildTicks(){let i=this.options,n=i.time,s=i.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();i.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);let o=this.min,a=this.max,l=_D(r,o,a);return this._unit=n.unit||(s.autoSkip?XE(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):E9(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:M9(this._unit),this.initOffsets(r),i.reverse&&l.reverse(),eM(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(i=>+i.value))}initOffsets(i=[]){let n=0,s=0,r,o;this.options.offset&&i.length&&(r=this.getDecimalForValue(i[0]),i.length===1?n=1-r:n=(this.getDecimalForValue(i[1])-r)/2,o=this.getDecimalForValue(i[i.length-1]),i.length===1?s=o:s=(o-this.getDecimalForValue(i[i.length-2]))/2);let a=i.length<3?.5:.25;n=Ve(n,0,a),s=Ve(s,0,a),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){let i=this._adapter,n=this.min,s=this.max,r=this.options,o=r.time,a=o.unit||XE(o.minUnit,n,s,this._getLabelCapacity(n)),l=K(r.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=qs(c)||c===!0,d={},h=n,g,p;if(u&&(h=+i.startOf(h,"isoWeek",c)),h=+i.startOf(h,u?"day":a),i.diff(s,n,a)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+a);let f=r.ticks.source==="data"&&this.getDataTimestamps();for(g=h,p=0;g<s;g=+i.add(g,l,a),p++)JE(d,g,f);return(g===s||r.bounds==="ticks"||p===1)&&JE(d,g,f),Object.keys(d).sort(QE).map(m=>+m)}getLabelForValue(i){let n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(i,s.tooltipFormat):n.format(i,s.displayFormats.datetime)}format(i,n){let r=this.options.time.displayFormats,o=this._unit,a=n||r[o];return this._adapter.format(i,a)}_tickFormatFunction(i,n,s,r){let o=this.options,a=o.ticks.callback;if(a)return Ce(a,[i,n,s],this);let l=o.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],g=s[n],p=u&&h&&g&&g.major;return this._adapter.format(i,r||(p?h:d))}generateTickLabels(i){let n,s,r;for(n=0,s=i.length;n<s;++n)r=i[n],r.label=this._tickFormatFunction(r.value,n,i)}getDecimalForValue(i){return i===null?NaN:(i-this.min)/(this.max-this.min)}getPixelForValue(i){let n=this._offsets,s=this.getDecimalForValue(i);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(i){let n=this._offsets,s=this.getDecimalForPixel(i)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(i){let n=this.options.ticks,s=this.ctx.measureText(i).width,r=li(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*o+l*a,h:s*a+l*o}}_getLabelCapacity(i){let n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,o=this._tickFormatFunction(i,0,eM(this,[i],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i=this._cache.data||[],n,s;if(i.length)return i;let r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)i=i.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){let i=this._cache.labels||[],n,s;if(i.length)return i;let r=this.getLabels();for(n=0,s=r.length;n<s;++n)i.push(ZE(this,r[n]));return this._cache.labels=this._normalized?i:this.normalize(i)}normalize(i){return ov(i.sort(QE))}}return e})();function Ld(e,t,i){let n=0,s=e.length-1,r,o,a,l;i?(t>=e[n].pos&&t<=e[s].pos&&({lo:n,hi:s}=Bi(e,"pos",t)),{pos:r,time:a}=e[n],{pos:o,time:l}=e[s]):(t>=e[n].time&&t<=e[s].time&&({lo:n,hi:s}=Bi(e,"time",t)),{time:r,pos:a}=e[n],{time:o,pos:l}=e[s]);let c=o-r;return c?a+(l-a)*(t-r)/c:a}var iC=class extends tC{static id="timeseries";static defaults=tC.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(t);this._minPos=Ld(i,this.min),this._tableRange=Ld(i,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:i,max:n}=this,s=[],r=[],o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=i&&c<=n&&s.push(c);if(s.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){let t=this.min,i=this.max,n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((s,r)=>s-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?t=this.normalize(i.concat(n)):t=i.length?i:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ld(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let i=this._offsets,n=this.getDecimalForPixel(t)/i.factor-i.end;return Ld(this._table,n*this._tableRange+this._minPos,!0)}},F9=Object.freeze({__proto__:null,CategoryScale:l9,LinearScale:Zv,LogarithmicScale:Xv,RadialLinearScale:eC,TimeScale:tC,TimeSeriesScale:iC}),SM=[NG,cW,s9,F9];var I9=["chartCanvas"],xM=(()=>{class e{constructor(){this.calender=Jt.calendar,this.chartData=Jt.chart,this.weekList=this.getWeeksFromCalendar(),this.gmDollarsList=this.getgmDollarsFromChartData(),this.gmPercentList=this.getgmPerFromChartData()}getWeeksFromCalendar(){return this.calender.map(i=>i.week)}getgmDollarsFromChartData(){return this.chartData.map(i=>i.gmDollars)}getgmPerFromChartData(){return this.chartData.map(i=>i.gmPercent)}ngAfterViewInit(){jd.register(...SM),this.createChart()}createChart(){let i=this.chartCanvas.nativeElement.getContext("2d");this.chart=new jd(i,{type:"bar",data:{labels:this.weekList,datasets:[{type:"bar",label:"GM Dollars",data:this.gmDollarsList,backgroundColor:"rgba(54, 162, 235, 0.6)",yAxisID:"y"},{type:"line",label:"GM %",data:this.gmPercentList,borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.6)",borderWidth:2,tension:.3,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,position:"left",title:{display:!0,text:"GM Dollars ($)"}},y1:{beginAtZero:!0,position:"right",title:{display:!0,text:"GM %"},grid:{drawOnChartArea:!1}}},plugins:{legend:{display:!0}}}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=Ge({type:e,selectors:[["app-charts"]],viewQuery:function(n,s){if(n&1&&Ey(I9,5),n&2){let r;Nc(r=Vc())&&(s.chartCanvas=r.first)}},decls:3,vars:0,consts:[["chartCanvas",""],[2,"width","100%","height","400px"]],template:function(n,s){n&1&&(z(0,"div",1),Qe(1,"canvas",null,0),j())},styles:["div[_ngcontent-%COMP%]{background-color:#222;padding:10px;border-radius:8px}"]})}}return e})();var P9=[{path:"",redirectTo:"/store",pathMatch:"full"},{path:"store",component:oD},{path:"sku",component:aD},{path:"planning",component:lD},{path:"charts",component:xM},{path:"**",redirectTo:"/store"}],DM=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=ze({type:e})}static{this.\u0275inj=Be({imports:[Kc,fa.forRoot(P9),wS,rD]})}}return e})();var EM=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=ze({type:e,bootstrap:[Zb]})}static{this.\u0275inj=Be({imports:[tb,Kb,DM]})}}return e})();eb().bootstrapModule(EM).catch(e=>console.error(e));
